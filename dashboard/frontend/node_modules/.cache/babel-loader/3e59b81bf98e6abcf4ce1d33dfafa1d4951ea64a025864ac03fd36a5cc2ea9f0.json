{"ast":null,"code":"import _objectSpread from\"/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{Shield,GitBranch,Upload,Link,Tag,Clock,RefreshCw,Save,Trash2,Plus,X,Copy,CheckCircle,AlertCircle,ChevronDown,ChevronRight,Settings,BarChart3,FileText,Loader2,Lock,Users,UserPlus,UserMinus,Key,Eye,EyeOff,ToggleLeft,ToggleRight,HardDrive}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE='/api';// 버킷 정책 관리 컴포넌트\nexport const BucketPolicyManager=_ref=>{let{bucketName,showToast}=_ref;const[policy,setPolicy]=useState(null);const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(true);const[editing,setEditing]=useState(false);const[policyJson,setPolicyJson]=useState('');const fetchPolicy=useCallback(async()=>{try{setLoading(true);const[policyRes,templatesRes]=await Promise.all([axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/policy\")),axios.get(\"\".concat(API_BASE,\"/storage/policy-templates\"))]);setPolicy(policyRes.data.policy);setPolicyJson(policyRes.data.policy?JSON.stringify(policyRes.data.policy,null,2):'');setTemplates(templatesRes.data.templates||[]);}catch(error){showToast('정책 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchPolicy();},[fetchPolicy]);const handleApplyTemplate=async template=>{if(!template.policy){// private - 정책 삭제\ntry{await axios.delete(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/policy\"));showToast('버킷이 비공개로 설정되었습니다');fetchPolicy();}catch(error){showToast('정책 삭제 실패','error');}return;}const policyWithBucket=JSON.parse(JSON.stringify(template.policy).replace(/BUCKET_NAME/g,bucketName));try{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/policy\"),{policy:policyWithBucket});showToast(\"'\".concat(template.name,\"' \\uC815\\uCC45\\uC774 \\uC801\\uC6A9\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchPolicy();}catch(error){showToast('정책 적용 실패','error');}};const handleSavePolicy=async()=>{try{const parsedPolicy=JSON.parse(policyJson);await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/policy\"),{policy:parsedPolicy});showToast('정책이 저장되었습니다');setEditing(false);fetchPolicy();}catch(error){if(error instanceof SyntaxError){showToast('올바른 JSON 형식이 아닙니다','error');}else{showToast('정책 저장 실패','error');}}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC815\\uCC45 \\uC815\\uBCF4 \\uB85C\\uB529 \\uC911...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel policy-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(Shield,{size:16}),\" \\uC815\\uCC45 \\uD15C\\uD50C\\uB9BF\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"template-grid\",children:templates.map(template=>/*#__PURE__*/_jsxs(\"div\",{className:\"template-card \".concat(!template.policy?'private':''),onClick:()=>handleApplyTemplate(template),children:[/*#__PURE__*/_jsx(\"div\",{className:\"template-name\",children:template.name}),/*#__PURE__*/_jsx(\"div\",{className:\"template-desc\",children:template.description})]},template.name))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FileText,{size:16}),\" \\uD604\\uC7AC \\uC815\\uCC45\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm \".concat(editing?'btn-primary':''),onClick:()=>setEditing(!editing),children:editing?'취소':'편집'})]}),policy?editing?/*#__PURE__*/_jsxs(\"div\",{className:\"policy-editor\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:policyJson,onChange:e=>setPolicyJson(e.target.value),className:\"code-editor\",rows:15}),/*#__PURE__*/_jsx(\"div\",{className:\"editor-actions\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSavePolicy,children:[/*#__PURE__*/_jsx(Save,{size:14}),\" \\uC800\\uC7A5\"]})})]}):/*#__PURE__*/_jsx(\"pre\",{className:\"policy-view\",children:JSON.stringify(policy,null,2)}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Shield,{size:32}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC815\\uCC45\\uC774 \\uC124\\uC815\\uB418\\uC9C0 \\uC54A\\uC74C (\\uBE44\\uACF5\\uAC1C)\"})]})]})]});};// 버전 관리 컴포넌트\nexport const VersioningManager=_ref2=>{let{bucketName,showToast}=_ref2;const[versioning,setVersioning]=useState(null);const[loading,setLoading]=useState(true);const[updating,setUpdating]=useState(false);const fetchVersioning=useCallback(async()=>{try{setLoading(true);const res=await axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/versioning\"));setVersioning(res.data.versioning);}catch(error){showToast('버전 관리 상태 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchVersioning();},[fetchVersioning]);const handleToggleVersioning=async()=>{try{setUpdating(true);const newStatus=(versioning===null||versioning===void 0?void 0:versioning.status)!=='Enabled';await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/versioning\"),{enabled:newStatus});showToast(\"\\uBC84\\uC804 \\uAD00\\uB9AC\\uAC00 \".concat(newStatus?'활성화':'비활성화',\"\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchVersioning();}catch(error){showToast('버전 관리 설정 실패','error');}finally{setUpdating(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uBC84\\uC804 \\uAD00\\uB9AC \\uC815\\uBCF4 \\uB85C\\uB529 \\uC911...\"})]});}const isEnabled=(versioning===null||versioning===void 0?void 0:versioning.status)==='Enabled';return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel versioning-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"versioning-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-info\",children:[/*#__PURE__*/_jsx(GitBranch,{size:32,className:isEnabled?'enabled':'disabled'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uAC1D\\uCCB4 \\uBC84\\uC804 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsx(\"p\",{className:\"status-text \".concat(isEnabled?'enabled':'disabled'),children:isEnabled?'활성화됨':'비활성화됨'})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(isEnabled?'btn-danger':'btn-primary'),onClick:handleToggleVersioning,disabled:updating,children:[updating?/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:14}):null,isEnabled?'비활성화':'활성화']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"versioning-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-card\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:20,className:\"success\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uBC84\\uC804 \\uAD00\\uB9AC \\uD65C\\uC131\\uD654 \\uC2DC\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\uAC1D\\uCCB4 \\uC218\\uC815/\\uC0AD\\uC81C \\uC2DC \\uC774\\uC804 \\uBC84\\uC804 \\uBCF4\\uC874\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\uC2E4\\uC218\\uB85C \\uC0AD\\uC81C\\uD55C \\uD30C\\uC77C \\uBCF5\\uAD6C \\uAC00\\uB2A5\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\uBCC0\\uACBD \\uC774\\uB825 \\uCD94\\uC801 \\uAC00\\uB2A5\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-card warning\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:20,className:\"warning\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC8FC\\uC758\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uC0AC\\uC6A9\\uB7C9 \\uC99D\\uAC00\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\uD55C\\uBC88 \\uD65C\\uC131\\uD654\\uD558\\uBA74 \\uC644\\uC804 \\uBE44\\uD65C\\uC131\\uD654 \\uBD88\\uAC00 (Suspended\\uB9CC \\uAC00\\uB2A5)\"})]})]})]})]})]});};// Presigned URL 생성 컴포넌트\nexport const PresignedUrlGenerator=_ref3=>{let{bucketName,objectName,showToast}=_ref3;const[url,setUrl]=useState(null);const[method,setMethod]=useState('GET');const[expiresHours,setExpiresHours]=useState(1);const[loading,setLoading]=useState(false);const[copied,setCopied]=useState(false);const handleGenerate=async()=>{try{setLoading(true);const res=await axios.post(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/presigned-url\"),{object_name:objectName,expires_hours:expiresHours,method:method});setUrl(res.data);showToast('Presigned URL이 생성되었습니다');}catch(error){showToast('URL 생성 실패','error');}finally{setLoading(false);}};const handleCopy=()=>{if(url){navigator.clipboard.writeText(url.url);setCopied(true);showToast('URL이 클립보드에 복사되었습니다');setTimeout(()=>setCopied(false),2000);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel presigned-panel\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(Link,{size:16}),\" Presigned URL \\uC0DD\\uC131\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"presigned-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uB300\\uC0C1 \\uAC1D\\uCCB4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:objectName||'파일을 선택하세요',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC791\\uC5C5 \\uC720\\uD615\"}),/*#__PURE__*/_jsxs(\"select\",{value:method,onChange:e=>setMethod(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"GET\",children:\"\\uB2E4\\uC6B4\\uB85C\\uB4DC (GET)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PUT\",children:\"\\uC5C5\\uB85C\\uB4DC (PUT)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC720\\uD6A8 \\uC2DC\\uAC04\"}),/*#__PURE__*/_jsxs(\"select\",{value:expiresHours,onChange:e=>setExpiresHours(Number(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"option\",{value:6,children:\"6\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"option\",{value:12,children:\"12\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"option\",{value:24,children:\"24\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"option\",{value:48,children:\"48\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"option\",{value:168,children:\"7\\uC77C\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleGenerate,disabled:!objectName||loading,children:[loading?/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:14}):/*#__PURE__*/_jsx(Link,{size:14}),\"URL \\uC0DD\\uC131\"]})]}),url&&/*#__PURE__*/_jsxs(\"div\",{className:\"presigned-result\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"url-display\",children:[/*#__PURE__*/_jsx(\"code\",{children:url.url}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon\",onClick:handleCopy,children:copied?/*#__PURE__*/_jsx(CheckCircle,{size:16,className:\"success\"}):/*#__PURE__*/_jsx(Copy,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"url-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC720\\uD6A8\\uAE30\\uAC04: \",url.expires_in]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uBC29\\uC2DD: \",url.method]})]})]})]});};// 객체 태그 관리 컴포넌트\nexport const ObjectTagsManager=_ref4=>{let{bucketName,objectName,showToast,onClose}=_ref4;const[tags,setTags]=useState({});const[loading,setLoading]=useState(true);const[newKey,setNewKey]=useState('');const[newValue,setNewValue]=useState('');const[saving,setSaving]=useState(false);const fetchTags=useCallback(async()=>{if(!objectName)return;try{setLoading(true);const res=await axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/objects/\").concat(encodeURIComponent(objectName),\"/tags\"));setTags(res.data.tags||{});}catch(error){// 태그가 없는 경우\nsetTags({});}finally{setLoading(false);}},[bucketName,objectName]);useEffect(()=>{fetchTags();},[fetchTags]);const handleAddTag=()=>{if(newKey.trim()&&newValue.trim()){setTags(_objectSpread(_objectSpread({},tags),{},{[newKey.trim()]:newValue.trim()}));setNewKey('');setNewValue('');}};const handleRemoveTag=key=>{const newTags=_objectSpread({},tags);delete newTags[key];setTags(newTags);};const handleSave=async()=>{try{setSaving(true);if(Object.keys(tags).length===0){await axios.delete(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/objects/\").concat(encodeURIComponent(objectName),\"/tags\"));}else{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/objects/\").concat(encodeURIComponent(objectName),\"/tags\"),{tags:tags});}showToast('태그가 저장되었습니다');if(onClose)onClose();}catch(error){showToast('태그 저장 실패','error');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel tags-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tags-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(Tag,{size:16}),\" \\uAC1D\\uCCB4 \\uD0DC\\uADF8\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"object-name\",children:objectName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tags-list\",children:[Object.entries(tags).map(_ref5=>{let[key,value]=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"tag-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tag-key\",children:key}),/*#__PURE__*/_jsx(\"span\",{className:\"tag-value\",children:value}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon danger\",onClick:()=>handleRemoveTag(key),children:/*#__PURE__*/_jsx(X,{size:14})})]},key);}),Object.keys(tags).length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state small\",children:[/*#__PURE__*/_jsx(Tag,{size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD0DC\\uADF8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-tag-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD0A4\",value:newKey,onChange:e=>setNewKey(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uAC12\",value:newValue,onChange:e=>setNewValue(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleAddTag,children:/*#__PURE__*/_jsx(Plus,{size:14})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"panel-actions\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSave,disabled:saving,children:[saving?/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:14}):/*#__PURE__*/_jsx(Save,{size:14}),\"\\uC800\\uC7A5\"]})})]});};// 생명주기 규칙 관리 컴포넌트\nexport const LifecycleManager=_ref6=>{let{bucketName,showToast}=_ref6;const[rules,setRules]=useState([]);const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(true);const[showAddRule,setShowAddRule]=useState(false);const[newRule,setNewRule]=useState({rule_id:'',prefix:'',enabled:true,expiration_days:30});const fetchLifecycle=useCallback(async()=>{try{setLoading(true);const[rulesRes,templatesRes]=await Promise.all([axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/lifecycle\")),axios.get(\"\".concat(API_BASE,\"/storage/lifecycle-templates\"))]);setRules(rulesRes.data.rules||[]);setTemplates(templatesRes.data.templates||[]);}catch(error){showToast('생명주기 규칙 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchLifecycle();},[fetchLifecycle]);const handleApplyTemplate=async template=>{const rule=_objectSpread(_objectSpread({},template.rule),{},{rule_id:\"\".concat(template.name,\"-\").concat(Date.now())});try{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/lifecycle\"),{rules:[...rules,rule]});showToast(\"'\".concat(template.description,\"' \\uADDC\\uCE59\\uC774 \\uCD94\\uAC00\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchLifecycle();}catch(error){showToast('규칙 추가 실패','error');}};const handleAddRule=async()=>{if(!newRule.rule_id.trim()){showToast('규칙 ID를 입력하세요','error');return;}try{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/lifecycle\"),{rules:[...rules,newRule]});showToast('규칙이 추가되었습니다');setShowAddRule(false);setNewRule({rule_id:'',prefix:'',enabled:true,expiration_days:30});fetchLifecycle();}catch(error){showToast('규칙 추가 실패','error');}};const handleDeleteRule=async ruleId=>{try{const updatedRules=rules.filter(r=>r.rule_id!==ruleId);if(updatedRules.length===0){await axios.delete(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/lifecycle\"));}else{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/lifecycle\"),{rules:updatedRules});}showToast('규칙이 삭제되었습니다');fetchLifecycle();}catch(error){showToast('규칙 삭제 실패','error');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0DD\\uBA85\\uC8FC\\uAE30 \\uADDC\\uCE59 \\uB85C\\uB529 \\uC911...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel lifecycle-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(Clock,{size:16}),\" \\uADDC\\uCE59 \\uD15C\\uD50C\\uB9BF\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"template-grid compact\",children:templates.map(template=>/*#__PURE__*/_jsx(\"div\",{className:\"template-card small\",onClick:()=>handleApplyTemplate(template),children:/*#__PURE__*/_jsx(\"div\",{className:\"template-name\",children:template.description})},template.name))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD604\\uC7AC \\uADDC\\uCE59 (\",rules.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-primary\",onClick:()=>setShowAddRule(true),children:[/*#__PURE__*/_jsx(Plus,{size:14}),\" \\uCD94\\uAC00\"]})]}),rules.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Clock,{size:32}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0DD\\uBA85\\uC8FC\\uAE30 \\uADDC\\uCE59\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"rules-list\",children:rules.map(rule=>/*#__PURE__*/_jsxs(\"div\",{className:\"rule-item \".concat(rule.enabled?'':'disabled'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rule-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rule-id\",children:rule.rule_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-details\",children:[rule.prefix&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC811\\uB450\\uC0AC: \",rule.prefix]}),rule.expiration_days&&/*#__PURE__*/_jsxs(\"span\",{children:[rule.expiration_days,\"\\uC77C \\uD6C4 \\uC0AD\\uC81C\"]}),rule.noncurrent_expiration_days&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC774\\uC804 \\uBC84\\uC804 \",rule.noncurrent_expiration_days,\"\\uC77C \\uD6C4 \\uC0AD\\uC81C\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rule-actions\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(rule.enabled?'running':'stopped'),children:rule.enabled?'활성':'비활성'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon danger\",onClick:()=>handleDeleteRule(rule.rule_id),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},rule.rule_id))})]}),showAddRule&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowAddRule(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content small\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uC0DD\\uBA85\\uC8FC\\uAE30 \\uADDC\\uCE59 \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon\",onClick:()=>setShowAddRule(false),children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uADDC\\uCE59 ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newRule.rule_id,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{rule_id:e.target.value})),placeholder:\"my-rule-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC811\\uB450\\uC0AC (\\uC120\\uD0DD)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newRule.prefix,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{prefix:e.target.value})),placeholder:\"logs/\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uB9CC\\uB8CC \\uC77C\\uC218\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newRule.expiration_days,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{expiration_days:Number(e.target.value)})),min:1})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newRule.enabled,onChange:e=>setNewRule(_objectSpread(_objectSpread({},newRule),{},{enabled:e.target.checked}))}),\"\\uD65C\\uC131\\uD654\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setShowAddRule(false),children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleAddRule,children:\"\\uCD94\\uAC00\"})]})]})})]});};// 버킷 통계 컴포넌트\nexport const BucketStats=_ref7=>{let{bucketName,showToast}=_ref7;const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const fetchStats=useCallback(async()=>{try{setLoading(true);const res=await axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/stats\"));setStats(res.data.stats);}catch(error){showToast('통계 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchStats();},[fetchStats]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD1B5\\uACC4 \\uB85C\\uB529 \\uC911...\"})]});}if(!stats)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-panel stats-panel\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(BarChart3,{size:16}),\" \\uBC84\\uD0B7 \\uD1B5\\uACC4\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total_objects}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\uCD1D \\uAC1D\\uCCB4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total_folders}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\uD3F4\\uB354\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total_size_human}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\uCD1D \\uC6A9\\uB7C9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value \".concat(stats.versioning_enabled?'enabled':''),children:stats.versioning_enabled?'ON':'OFF'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"\\uBC84\\uC804 \\uAD00\\uB9AC\"})]})]}),Object.keys(stats.file_types).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"stats-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD30C\\uC77C \\uC720\\uD615 \\uBD84\\uD3EC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"file-types\",children:Object.entries(stats.file_types).map(_ref8=>{let[ext,count]=_ref8;return/*#__PURE__*/_jsxs(\"div\",{className:\"file-type-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"ext\",children:[\".\",ext]}),/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:count})]},ext);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD06C\\uAE30 \\uBD84\\uD3EC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"size-distribution\",children:Object.entries(stats.size_distribution).map(_ref9=>{let[range,count]=_ref9;return/*#__PURE__*/_jsxs(\"div\",{className:\"size-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"range\",children:range}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar\",style:{width:\"\".concat(count/Math.max(stats.total_objects,1)*100,\"%\")}})}),/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:count})]},range);})})]})]});};// 객체 잠금 관리 컴포넌트\nexport const ObjectLockManager=_ref0=>{let{bucketName,showToast}=_ref0;const[config,setConfig]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[mode,setMode]=useState('GOVERNANCE');const[duration,setDuration]=useState(30);const[durationUnit,setDurationUnit]=useState('DAYS');const fetchConfig=useCallback(async()=>{try{setLoading(true);const res=await axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/object-lock\"));setConfig(res.data);if(res.data.mode)setMode(res.data.mode);if(res.data.duration)setDuration(res.data.duration);if(res.data.duration_unit)setDurationUnit(res.data.duration_unit);}catch(error){showToast('객체 잠금 설정 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchConfig();},[fetchConfig]);const handleSave=async()=>{try{setSaving(true);await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/object-lock\"),{mode,duration,duration_unit:durationUnit});showToast('객체 잠금 설정이 저장되었습니다');fetchConfig();}catch(error){var _error$response,_error$response$data;showToast(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'설정 저장 실패','error');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uB85C\\uB529 \\uC911...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"object-lock-manager\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(Lock,{size:18}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uAC1D\\uCCB4 \\uC7A0\\uAE08 (Object Lock)\"})]}),!(config!==null&&config!==void 0&&config.enabled)?/*#__PURE__*/_jsxs(\"div\",{className:\"info-box warning\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uAC1D\\uCCB4 \\uC7A0\\uAE08 \\uBE44\\uD65C\\uC131\\uD654\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC774 \\uBC84\\uD0B7\\uC740 \\uAC1D\\uCCB4 \\uC7A0\\uAE08\\uC774 \\uD65C\\uC131\\uD654\\uB418\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4. \\uBC84\\uD0B7 \\uC0DD\\uC131 \\uC2DC\\uC5D0\\uB9CC \\uD65C\\uC131\\uD654\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box success\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uAC1D\\uCCB4 \\uC7A0\\uAE08\\uC774 \\uD65C\\uC131\\uD654\\uB418\\uC5B4 \\uC788\\uC2B5\\uB2C8\\uB2E4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uAE30\\uBCF8 \\uBCF4\\uC874 \\uC815\\uCC45\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uBCF4\\uC874 \\uBAA8\\uB4DC\"}),/*#__PURE__*/_jsxs(\"select\",{value:mode,onChange:e=>setMode(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"GOVERNANCE\",children:\"Governance (\\uAD00\\uB9AC\\uC790 \\uC0AD\\uC81C \\uAC00\\uB2A5)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"COMPLIANCE\",children:\"Compliance (\\uC0AD\\uC81C \\uBD88\\uAC00)\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"hint\",children:mode==='GOVERNANCE'?'특별 권한으로 삭제 가능':'보존 기간 동안 절대 삭제 불가'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uBCF4\\uC874 \\uAE30\\uAC04\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:duration,onChange:e=>setDuration(parseInt(e.target.value)||1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uB2E8\\uC704\"}),/*#__PURE__*/_jsxs(\"select\",{value:durationUnit,onChange:e=>setDurationUnit(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"DAYS\",children:\"\\uC77C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"YEARS\",children:\"\\uB144\"})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSave,disabled:saving,children:[saving?/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:14}):/*#__PURE__*/_jsx(Save,{size:14}),\"\\uC800\\uC7A5\"]})]})]})]});};// IAM 사용자 관리 컴포넌트\nexport const IAMManager=_ref1=>{let{showToast}=_ref1;const[users,setUsers]=useState([]);const[policies,setPolicies]=useState([]);const[loading,setLoading]=useState(true);const[showAddUser,setShowAddUser]=useState(false);const[newUser,setNewUser]=useState({access_key:'',secret_key:'',policy:'readwrite'});const[showSecrets,setShowSecrets]=useState({});const fetchUsers=useCallback(async()=>{try{setLoading(true);const[usersRes,policiesRes]=await Promise.all([axios.get(\"\".concat(API_BASE,\"/storage/iam/users\")),axios.get(\"\".concat(API_BASE,\"/storage/iam/policies\"))]);setUsers(usersRes.data.users||[]);setPolicies(policiesRes.data.policies||[]);}catch(error){// Fallback to soft users\ntry{const res=await axios.get(\"\".concat(API_BASE,\"/storage/users\"));setUsers(res.data.users||[]);setPolicies(['readonly','readwrite','writeonly','consoleAdmin']);}catch(e){showToast('사용자 목록 조회 실패','error');}}finally{setLoading(false);}},[showToast]);useEffect(()=>{fetchUsers();},[fetchUsers]);const handleCreateUser=async()=>{if(!newUser.access_key||!newUser.secret_key){showToast('Access Key와 Secret Key를 입력하세요','error');return;}if(newUser.secret_key.length<8){showToast('Secret Key는 8자 이상이어야 합니다','error');return;}try{await axios.post(\"\".concat(API_BASE,\"/storage/iam/users\"),newUser);showToast(\"\\uC0AC\\uC6A9\\uC790 '\".concat(newUser.access_key,\"'\\uAC00 \\uC0DD\\uC131\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));setShowAddUser(false);setNewUser({access_key:'',secret_key:'',policy:'readwrite'});fetchUsers();}catch(error){var _error$response2,_error$response2$data;showToast(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'사용자 생성 실패','error');}};const handleDeleteUser=async accessKey=>{if(!window.confirm(\"'\".concat(accessKey,\"' \\uC0AC\\uC6A9\\uC790\\uB97C \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\")))return;try{await axios.delete(\"\".concat(API_BASE,\"/storage/iam/users/\").concat(accessKey));showToast(\"\\uC0AC\\uC6A9\\uC790 '\".concat(accessKey,\"'\\uAC00 \\uC0AD\\uC81C\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchUsers();}catch(error){var _error$response3,_error$response3$data;showToast(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'사용자 삭제 실패','error');}};const handleToggleStatus=async(accessKey,currentStatus)=>{const enabled=currentStatus!=='enabled';try{await axios.put(\"\".concat(API_BASE,\"/storage/iam/users/\").concat(accessKey,\"/status?enabled=\").concat(enabled));showToast(\"\\uC0AC\\uC6A9\\uC790\\uAC00 \".concat(enabled?'활성화':'비활성화',\"\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchUsers();}catch(error){showToast('상태 변경 실패','error');}};const handleChangePolicy=async(accessKey,policy)=>{try{await axios.put(\"\".concat(API_BASE,\"/storage/iam/users/\").concat(accessKey,\"/policy?policy=\").concat(policy));showToast(\"\\uC815\\uCC45\\uC774 '\".concat(policy,\"'\\uB85C \\uBCC0\\uACBD\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchUsers();}catch(error){showToast('정책 변경 실패','error');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uB85C\\uB529 \\uC911...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"iam-manager\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(Users,{size:18}),/*#__PURE__*/_jsx(\"h4\",{children:\"IAM \\uC0AC\\uC6A9\\uC790 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-primary\",onClick:()=>setShowAddUser(true),children:[/*#__PURE__*/_jsx(UserPlus,{size:14}),\"\\uC0AC\\uC6A9\\uC790 \\uCD94\\uAC00\"]})]}),showAddUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-user-form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uC0C8 \\uC0AC\\uC6A9\\uC790 \\uC0DD\\uC131\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Access Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC0AC\\uC6A9\\uC790 ID\",value:newUser.access_key,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{access_key:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Secret Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 (8\\uC790 \\uC774\\uC0C1)\",value:newUser.secret_key,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{secret_key:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC815\\uCC45\"}),/*#__PURE__*/_jsx(\"select\",{value:newUser.policy,onChange:e=>setNewUser(_objectSpread(_objectSpread({},newUser),{},{policy:e.target.value})),children:policies.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p,children:p},p))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleCreateUser,children:[/*#__PURE__*/_jsx(UserPlus,{size:14}),\"\\uC0DD\\uC131\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowAddUser(false),children:\"\\uCDE8\\uC18C\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Users,{size:32}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uB4F1\\uB85D\\uB41C \\uC0AC\\uC6A9\\uC790\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Access Key\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC815\\uCC45\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0C1\\uD0DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC5C5\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"access-key\",children:[/*#__PURE__*/_jsx(Key,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:user.accessKey||user.access_key}),(user.accessKey||user.access_key)==='admin'&&/*#__PURE__*/_jsx(\"span\",{className:\"badge admin\",children:\"\\uAD00\\uB9AC\\uC790\"})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"select\",{value:user.policyName||user.policy||'readwrite',onChange:e=>handleChangePolicy(user.accessKey||user.access_key,e.target.value),disabled:(user.accessKey||user.access_key)==='admin',children:policies.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p,children:p},p))})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"status-toggle \".concat((user.userStatus||user.status)==='enabled'?'enabled':'disabled'),onClick:()=>handleToggleStatus(user.accessKey||user.access_key,user.userStatus||user.status),disabled:(user.accessKey||user.access_key)==='admin',children:(user.userStatus||user.status)==='enabled'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToggleRight,{size:16}),\" \\uD65C\\uC131\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToggleLeft,{size:16}),\" \\uBE44\\uD65C\\uC131\"]})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleDeleteUser(user.accessKey||user.access_key),disabled:(user.accessKey||user.access_key)==='admin',title:\"\\uC0AD\\uC81C\",children:/*#__PURE__*/_jsx(UserMinus,{size:14})})})]},user.accessKey||user.access_key))})]})})]});};// 버킷별 사용자 접근 권한 관리 컴포넌트\nexport const BucketUserAccessManager=_ref10=>{let{bucketName,showToast}=_ref10;const[users,setUsers]=useState([]);const[allUsers,setAllUsers]=useState([]);const[loading,setLoading]=useState(true);const[showAddUser,setShowAddUser]=useState(false);const[newPermission,setNewPermission]=useState({user:'',access:'read',quota_gb:''});const[bucketQuota,setBucketQuota]=useState(null);const[quotaInput,setQuotaInput]=useState('');const fetchData=useCallback(async()=>{try{var _quotaRes$data;setLoading(true);const[usersRes,allUsersRes,quotaRes]=await Promise.all([axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/users\")),axios.get(\"\".concat(API_BASE,\"/storage/iam/users\")).catch(()=>({data:{users:[]}})),axios.get(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/quota\")).catch(()=>({data:null}))]);setUsers(usersRes.data.users||[]);setAllUsers(allUsersRes.data.users||[]);setBucketQuota(quotaRes.data);if((_quotaRes$data=quotaRes.data)!==null&&_quotaRes$data!==void 0&&_quotaRes$data.quota_bytes){setQuotaInput((quotaRes.data.quota_bytes/(1024*1024*1024)).toFixed(1));}}catch(error){showToast('버킷 사용자 정보 조회 실패','error');}finally{setLoading(false);}},[bucketName,showToast]);useEffect(()=>{fetchData();},[fetchData]);const handleAddUser=async()=>{if(!newPermission.user){showToast('사용자를 선택하세요','error');return;}try{await axios.post(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/users\"),{user:newPermission.user,access:newPermission.access,quota_gb:newPermission.quota_gb?parseFloat(newPermission.quota_gb):null});showToast(\"'\".concat(newPermission.user,\"'\\uC5D0\\uAC8C \\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uBD80\\uC5EC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));setShowAddUser(false);setNewPermission({user:'',access:'read',quota_gb:''});fetchData();}catch(error){var _error$response4,_error$response4$data;showToast(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||'권한 부여 실패','error');}};const handleRemoveUser=async user=>{if(!window.confirm(\"'\".concat(user,\"'\\uC758 \\uC811\\uADFC \\uAD8C\\uD55C\\uC744 \\uC81C\\uAC70\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\")))return;try{await axios.delete(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/users/\").concat(user));showToast(\"'\".concat(user,\"'\\uC758 \\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC81C\\uAC70\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchData();}catch(error){var _error$response5,_error$response5$data;showToast(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||'권한 제거 실패','error');}};const handleUpdateAccess=async(user,access)=>{try{const existingUser=users.find(u=>u.user===user);await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/users/\").concat(user),{user,access,quota_gb:existingUser!==null&&existingUser!==void 0&&existingUser.quota_bytes?existingUser.quota_bytes/(1024*1024*1024):null});showToast('접근 권한이 변경되었습니다');fetchData();}catch(error){showToast('권한 변경 실패','error');}};const handleSetQuota=async()=>{if(!quotaInput){showToast('할당량을 입력하세요','error');return;}try{await axios.put(\"\".concat(API_BASE,\"/storage/buckets/\").concat(bucketName,\"/quota?quota_gb=\").concat(parseFloat(quotaInput)));showToast(\"\\uBC84\\uD0B7 \\uD560\\uB2F9\\uB7C9\\uC774 \".concat(quotaInput,\"GB\\uB85C \\uC124\\uC815\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));fetchData();}catch(error){var _error$response6,_error$response6$data;showToast(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||'할당량 설정 실패','error');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"spin\",size:24}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uB85C\\uB529 \\uC911...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bucket-access-manager\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(HardDrive,{size:18}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uBC84\\uD0B7 \\uD560\\uB2F9\\uB7C9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quota-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quota-info\",children:(bucketQuota===null||bucketQuota===void 0?void 0:bucketQuota.quota_human)&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD604\\uC7AC: \",bucketQuota.used_human,\" / \",bucketQuota.quota_human]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"quota-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0.1\",placeholder:\"\\uD560\\uB2F9\\uB7C9 (GB)\",value:quotaInput,onChange:e=>setQuotaInput(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"unit\",children:\"GB\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary\",onClick:handleSetQuota,children:\"\\uC124\\uC815\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(Users,{size:18}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC0AC\\uC6A9\\uC790 \\uC811\\uADFC \\uAD8C\\uD55C\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-primary\",onClick:()=>setShowAddUser(true),children:[/*#__PURE__*/_jsx(UserPlus,{size:14}),\"\\uCD94\\uAC00\"]})]}),showAddUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"add-user-form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uC0AC\\uC6A9\\uC790 \\uAD8C\\uD55C \\uCD94\\uAC00\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC0AC\\uC6A9\\uC790\"}),/*#__PURE__*/_jsxs(\"select\",{value:newPermission.user,onChange:e=>setNewPermission(_objectSpread(_objectSpread({},newPermission),{},{user:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"admin\"}),allUsers.map(u=>/*#__PURE__*/_jsx(\"option\",{value:u.accessKey||u.access_key,children:u.accessKey||u.access_key},u.accessKey||u.access_key))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC811\\uADFC \\uAD8C\\uD55C\"}),/*#__PURE__*/_jsxs(\"select\",{value:newPermission.access,onChange:e=>setNewPermission(_objectSpread(_objectSpread({},newPermission),{},{access:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"read\",children:\"\\uC77D\\uAE30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"write\",children:\"\\uC77D\\uAE30/\\uC4F0\\uAE30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\uAD00\\uB9AC\\uC790\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uAC1C\\uC778 \\uD560\\uB2F9\\uB7C9 (GB)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",min:\"0\",placeholder:\"\\uBB34\\uC81C\\uD55C\",value:newPermission.quota_gb,onChange:e=>setNewPermission(_objectSpread(_objectSpread({},newPermission),{},{quota_gb:e.target.value}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleAddUser,children:[/*#__PURE__*/_jsx(UserPlus,{size:14}),\"\\uCD94\\uAC00\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowAddUser(false),children:\"\\uCDE8\\uC18C\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Users,{size:32}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC774 \\uBC84\\uD0B7\\uC5D0 \\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uBD80\\uC5EC\\uB41C \\uC0AC\\uC6A9\\uC790\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0AC\\uC6A9\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC811\\uADFC \\uAD8C\\uD55C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD560\\uB2F9\\uB7C9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC5C5\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"access-key\",children:[/*#__PURE__*/_jsx(Key,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:user.user})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{value:user.access,onChange:e=>handleUpdateAccess(user.user,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"read\",children:\"\\uC77D\\uAE30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"write\",children:\"\\uC77D\\uAE30/\\uC4F0\\uAE30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\uAD00\\uB9AC\\uC790\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:user.quota_human||'무제한'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleRemoveUser(user.user),title:\"\\uC81C\\uAC70\",children:/*#__PURE__*/_jsx(UserMinus,{size:14})})})]},user.user))})]})})]});};// 고급 기능 탭 컴포넌트\nexport const StorageAdvancedTabs=_ref11=>{let{bucketName,selectedObject,showToast}=_ref11;const[activeTab,setActiveTab]=useState('stats');const tabs=[{id:'stats',label:'통계',icon:BarChart3},{id:'policy',label:'정책',icon:Shield},{id:'versioning',label:'버전',icon:GitBranch},{id:'lifecycle',label:'생명주기',icon:Clock},{id:'objectlock',label:'잠금',icon:Lock},{id:'access',label:'접근관리',icon:UserPlus},{id:'presigned',label:'URL 생성',icon:Link},{id:'iam',label:'IAM',icon:Users}];if(!bucketName){return/*#__PURE__*/_jsx(\"div\",{className:\"advanced-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(Settings,{size:32}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uBC84\\uD0B7\\uC744 \\uC120\\uD0DD\\uD558\\uC138\\uC694\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"storage-advanced\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"advanced-tabs\",children:tabs.map(tab=>/*#__PURE__*/_jsxs(\"button\",{className:\"tab-btn \".concat(activeTab===tab.id?'active':''),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(tab.icon,{size:14}),tab.label]},tab.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"advanced-content\",children:[activeTab==='stats'&&/*#__PURE__*/_jsx(BucketStats,{bucketName:bucketName,showToast:showToast}),activeTab==='policy'&&/*#__PURE__*/_jsx(BucketPolicyManager,{bucketName:bucketName,showToast:showToast}),activeTab==='versioning'&&/*#__PURE__*/_jsx(VersioningManager,{bucketName:bucketName,showToast:showToast}),activeTab==='lifecycle'&&/*#__PURE__*/_jsx(LifecycleManager,{bucketName:bucketName,showToast:showToast}),activeTab==='objectlock'&&/*#__PURE__*/_jsx(ObjectLockManager,{bucketName:bucketName,showToast:showToast}),activeTab==='access'&&/*#__PURE__*/_jsx(BucketUserAccessManager,{bucketName:bucketName,showToast:showToast}),activeTab==='presigned'&&/*#__PURE__*/_jsx(PresignedUrlGenerator,{bucketName:bucketName,objectName:selectedObject,showToast:showToast}),activeTab==='iam'&&/*#__PURE__*/_jsx(IAMManager,{showToast:showToast})]})]});};export default StorageAdvancedTabs;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","Shield","GitBranch","Upload","Link","Tag","Clock","RefreshCw","Save","Trash2","Plus","X","Copy","CheckCircle","AlertCircle","ChevronDown","ChevronRight","Settings","BarChart3","FileText","Loader2","Lock","Users","UserPlus","UserMinus","Key","Eye","EyeOff","ToggleLeft","ToggleRight","HardDrive","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","BucketPolicyManager","_ref","bucketName","showToast","policy","setPolicy","templates","setTemplates","loading","setLoading","editing","setEditing","policyJson","setPolicyJson","fetchPolicy","policyRes","templatesRes","Promise","all","get","concat","data","JSON","stringify","error","handleApplyTemplate","template","delete","policyWithBucket","parse","replace","put","name","handleSavePolicy","parsedPolicy","SyntaxError","className","children","size","map","onClick","description","value","onChange","e","target","rows","VersioningManager","_ref2","versioning","setVersioning","updating","setUpdating","fetchVersioning","res","handleToggleVersioning","newStatus","status","enabled","isEnabled","disabled","PresignedUrlGenerator","_ref3","objectName","url","setUrl","method","setMethod","expiresHours","setExpiresHours","copied","setCopied","handleGenerate","post","object_name","expires_hours","handleCopy","navigator","clipboard","writeText","setTimeout","type","Number","expires_in","ObjectTagsManager","_ref4","onClose","tags","setTags","newKey","setNewKey","newValue","setNewValue","saving","setSaving","fetchTags","encodeURIComponent","handleAddTag","trim","_objectSpread","handleRemoveTag","key","newTags","handleSave","Object","keys","length","entries","_ref5","placeholder","LifecycleManager","_ref6","rules","setRules","showAddRule","setShowAddRule","newRule","setNewRule","rule_id","prefix","expiration_days","fetchLifecycle","rulesRes","rule","Date","now","handleAddRule","handleDeleteRule","ruleId","updatedRules","filter","r","noncurrent_expiration_days","stopPropagation","min","checked","BucketStats","_ref7","stats","setStats","fetchStats","total_objects","total_folders","total_size_human","versioning_enabled","file_types","_ref8","ext","count","size_distribution","_ref9","range","style","width","Math","max","ObjectLockManager","_ref0","config","setConfig","mode","setMode","duration","setDuration","durationUnit","setDurationUnit","fetchConfig","duration_unit","_error$response","_error$response$data","response","detail","parseInt","IAMManager","_ref1","users","setUsers","policies","setPolicies","showAddUser","setShowAddUser","newUser","setNewUser","access_key","secret_key","showSecrets","setShowSecrets","fetchUsers","usersRes","policiesRes","handleCreateUser","_error$response2","_error$response2$data","handleDeleteUser","accessKey","window","confirm","_error$response3","_error$response3$data","handleToggleStatus","currentStatus","handleChangePolicy","p","user","policyName","userStatus","title","BucketUserAccessManager","_ref10","allUsers","setAllUsers","newPermission","setNewPermission","access","quota_gb","bucketQuota","setBucketQuota","quotaInput","setQuotaInput","fetchData","_quotaRes$data","allUsersRes","quotaRes","catch","quota_bytes","toFixed","handleAddUser","parseFloat","_error$response4","_error$response4$data","handleRemoveUser","_error$response5","_error$response5$data","handleUpdateAccess","existingUser","find","u","handleSetQuota","_error$response6","_error$response6$data","quota_human","used_human","step","marginTop","StorageAdvancedTabs","_ref11","selectedObject","activeTab","setActiveTab","tabs","id","label","icon","tab"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/src/StorageAdvanced.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport {\n  Shield,\n  GitBranch,\n  Upload,\n  Link,\n  Tag,\n  Clock,\n  RefreshCw,\n  Save,\n  Trash2,\n  Plus,\n  X,\n  Copy,\n  CheckCircle,\n  AlertCircle,\n  ChevronDown,\n  ChevronRight,\n  Settings,\n  BarChart3,\n  FileText,\n  Loader2,\n  Lock,\n  Users,\n  UserPlus,\n  UserMinus,\n  Key,\n  Eye,\n  EyeOff,\n  ToggleLeft,\n  ToggleRight,\n  HardDrive\n} from 'lucide-react';\n\nconst API_BASE = '/api';\n\n// 버킷 정책 관리 컴포넌트\nexport const BucketPolicyManager = ({ bucketName, showToast }) => {\n  const [policy, setPolicy] = useState(null);\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  const [policyJson, setPolicyJson] = useState('');\n\n  const fetchPolicy = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [policyRes, templatesRes] = await Promise.all([\n        axios.get(`${API_BASE}/storage/buckets/${bucketName}/policy`),\n        axios.get(`${API_BASE}/storage/policy-templates`)\n      ]);\n      setPolicy(policyRes.data.policy);\n      setPolicyJson(policyRes.data.policy ? JSON.stringify(policyRes.data.policy, null, 2) : '');\n      setTemplates(templatesRes.data.templates || []);\n    } catch (error) {\n      showToast('정책 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchPolicy();\n  }, [fetchPolicy]);\n\n  const handleApplyTemplate = async (template) => {\n    if (!template.policy) {\n      // private - 정책 삭제\n      try {\n        await axios.delete(`${API_BASE}/storage/buckets/${bucketName}/policy`);\n        showToast('버킷이 비공개로 설정되었습니다');\n        fetchPolicy();\n      } catch (error) {\n        showToast('정책 삭제 실패', 'error');\n      }\n      return;\n    }\n\n    const policyWithBucket = JSON.parse(\n      JSON.stringify(template.policy).replace(/BUCKET_NAME/g, bucketName)\n    );\n\n    try {\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/policy`, {\n        policy: policyWithBucket\n      });\n      showToast(`'${template.name}' 정책이 적용되었습니다`);\n      fetchPolicy();\n    } catch (error) {\n      showToast('정책 적용 실패', 'error');\n    }\n  };\n\n  const handleSavePolicy = async () => {\n    try {\n      const parsedPolicy = JSON.parse(policyJson);\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/policy`, {\n        policy: parsedPolicy\n      });\n      showToast('정책이 저장되었습니다');\n      setEditing(false);\n      fetchPolicy();\n    } catch (error) {\n      if (error instanceof SyntaxError) {\n        showToast('올바른 JSON 형식이 아닙니다', 'error');\n      } else {\n        showToast('정책 저장 실패', 'error');\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Loader2 className=\"spin\" size={24} />\n        <p>정책 정보 로딩 중...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"advanced-panel policy-panel\">\n      <div className=\"panel-section\">\n        <h4><Shield size={16} /> 정책 템플릿</h4>\n        <div className=\"template-grid\">\n          {templates.map((template) => (\n            <div\n              key={template.name}\n              className={`template-card ${!template.policy ? 'private' : ''}`}\n              onClick={() => handleApplyTemplate(template)}\n            >\n              <div className=\"template-name\">{template.name}</div>\n              <div className=\"template-desc\">{template.description}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"panel-section\">\n        <div className=\"section-header\">\n          <h4><FileText size={16} /> 현재 정책</h4>\n          <button\n            className={`btn btn-sm ${editing ? 'btn-primary' : ''}`}\n            onClick={() => setEditing(!editing)}\n          >\n            {editing ? '취소' : '편집'}\n          </button>\n        </div>\n\n        {policy ? (\n          editing ? (\n            <div className=\"policy-editor\">\n              <textarea\n                value={policyJson}\n                onChange={(e) => setPolicyJson(e.target.value)}\n                className=\"code-editor\"\n                rows={15}\n              />\n              <div className=\"editor-actions\">\n                <button className=\"btn btn-primary\" onClick={handleSavePolicy}>\n                  <Save size={14} /> 저장\n                </button>\n              </div>\n            </div>\n          ) : (\n            <pre className=\"policy-view\">\n              {JSON.stringify(policy, null, 2)}\n            </pre>\n          )\n        ) : (\n          <div className=\"empty-state\">\n            <Shield size={32} />\n            <p>정책이 설정되지 않음 (비공개)</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// 버전 관리 컴포넌트\nexport const VersioningManager = ({ bucketName, showToast }) => {\n  const [versioning, setVersioning] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [updating, setUpdating] = useState(false);\n\n  const fetchVersioning = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(`${API_BASE}/storage/buckets/${bucketName}/versioning`);\n      setVersioning(res.data.versioning);\n    } catch (error) {\n      showToast('버전 관리 상태 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchVersioning();\n  }, [fetchVersioning]);\n\n  const handleToggleVersioning = async () => {\n    try {\n      setUpdating(true);\n      const newStatus = versioning?.status !== 'Enabled';\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/versioning`, {\n        enabled: newStatus\n      });\n      showToast(`버전 관리가 ${newStatus ? '활성화' : '비활성화'}되었습니다`);\n      fetchVersioning();\n    } catch (error) {\n      showToast('버전 관리 설정 실패', 'error');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Loader2 className=\"spin\" size={24} />\n        <p>버전 관리 정보 로딩 중...</p>\n      </div>\n    );\n  }\n\n  const isEnabled = versioning?.status === 'Enabled';\n\n  return (\n    <div className=\"advanced-panel versioning-panel\">\n      <div className=\"versioning-status\">\n        <div className=\"status-info\">\n          <GitBranch size={32} className={isEnabled ? 'enabled' : 'disabled'} />\n          <div>\n            <h4>객체 버전 관리</h4>\n            <p className={`status-text ${isEnabled ? 'enabled' : 'disabled'}`}>\n              {isEnabled ? '활성화됨' : '비활성화됨'}\n            </p>\n          </div>\n        </div>\n        <button\n          className={`btn ${isEnabled ? 'btn-danger' : 'btn-primary'}`}\n          onClick={handleToggleVersioning}\n          disabled={updating}\n        >\n          {updating ? <Loader2 className=\"spin\" size={14} /> : null}\n          {isEnabled ? '비활성화' : '활성화'}\n        </button>\n      </div>\n\n      <div className=\"versioning-info\">\n        <div className=\"info-card\">\n          <CheckCircle size={20} className=\"success\" />\n          <div>\n            <strong>버전 관리 활성화 시</strong>\n            <ul>\n              <li>객체 수정/삭제 시 이전 버전 보존</li>\n              <li>실수로 삭제한 파일 복구 가능</li>\n              <li>변경 이력 추적 가능</li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"info-card warning\">\n          <AlertCircle size={20} className=\"warning\" />\n          <div>\n            <strong>주의사항</strong>\n            <ul>\n              <li>스토리지 사용량 증가</li>\n              <li>한번 활성화하면 완전 비활성화 불가 (Suspended만 가능)</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Presigned URL 생성 컴포넌트\nexport const PresignedUrlGenerator = ({ bucketName, objectName, showToast }) => {\n  const [url, setUrl] = useState(null);\n  const [method, setMethod] = useState('GET');\n  const [expiresHours, setExpiresHours] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const handleGenerate = async () => {\n    try {\n      setLoading(true);\n      const res = await axios.post(`${API_BASE}/storage/buckets/${bucketName}/presigned-url`, {\n        object_name: objectName,\n        expires_hours: expiresHours,\n        method: method\n      });\n      setUrl(res.data);\n      showToast('Presigned URL이 생성되었습니다');\n    } catch (error) {\n      showToast('URL 생성 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCopy = () => {\n    if (url) {\n      navigator.clipboard.writeText(url.url);\n      setCopied(true);\n      showToast('URL이 클립보드에 복사되었습니다');\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  return (\n    <div className=\"advanced-panel presigned-panel\">\n      <h4><Link size={16} /> Presigned URL 생성</h4>\n\n      <div className=\"presigned-form\">\n        <div className=\"form-row\">\n          <label>대상 객체</label>\n          <input type=\"text\" value={objectName || '파일을 선택하세요'} disabled />\n        </div>\n\n        <div className=\"form-row\">\n          <label>작업 유형</label>\n          <select value={method} onChange={(e) => setMethod(e.target.value)}>\n            <option value=\"GET\">다운로드 (GET)</option>\n            <option value=\"PUT\">업로드 (PUT)</option>\n          </select>\n        </div>\n\n        <div className=\"form-row\">\n          <label>유효 시간</label>\n          <select value={expiresHours} onChange={(e) => setExpiresHours(Number(e.target.value))}>\n            <option value={1}>1시간</option>\n            <option value={6}>6시간</option>\n            <option value={12}>12시간</option>\n            <option value={24}>24시간</option>\n            <option value={48}>48시간</option>\n            <option value={168}>7일</option>\n          </select>\n        </div>\n\n        <button\n          className=\"btn btn-primary\"\n          onClick={handleGenerate}\n          disabled={!objectName || loading}\n        >\n          {loading ? <Loader2 className=\"spin\" size={14} /> : <Link size={14} />}\n          URL 생성\n        </button>\n      </div>\n\n      {url && (\n        <div className=\"presigned-result\">\n          <div className=\"url-display\">\n            <code>{url.url}</code>\n            <button className=\"btn-icon\" onClick={handleCopy}>\n              {copied ? <CheckCircle size={16} className=\"success\" /> : <Copy size={16} />}\n            </button>\n          </div>\n          <div className=\"url-info\">\n            <span>유효기간: {url.expires_in}</span>\n            <span>방식: {url.method}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// 객체 태그 관리 컴포넌트\nexport const ObjectTagsManager = ({ bucketName, objectName, showToast, onClose }) => {\n  const [tags, setTags] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [newKey, setNewKey] = useState('');\n  const [newValue, setNewValue] = useState('');\n  const [saving, setSaving] = useState(false);\n\n  const fetchTags = useCallback(async () => {\n    if (!objectName) return;\n    try {\n      setLoading(true);\n      const res = await axios.get(`${API_BASE}/storage/buckets/${bucketName}/objects/${encodeURIComponent(objectName)}/tags`);\n      setTags(res.data.tags || {});\n    } catch (error) {\n      // 태그가 없는 경우\n      setTags({});\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, objectName]);\n\n  useEffect(() => {\n    fetchTags();\n  }, [fetchTags]);\n\n  const handleAddTag = () => {\n    if (newKey.trim() && newValue.trim()) {\n      setTags({ ...tags, [newKey.trim()]: newValue.trim() });\n      setNewKey('');\n      setNewValue('');\n    }\n  };\n\n  const handleRemoveTag = (key) => {\n    const newTags = { ...tags };\n    delete newTags[key];\n    setTags(newTags);\n  };\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n      if (Object.keys(tags).length === 0) {\n        await axios.delete(`${API_BASE}/storage/buckets/${bucketName}/objects/${encodeURIComponent(objectName)}/tags`);\n      } else {\n        await axios.put(`${API_BASE}/storage/buckets/${bucketName}/objects/${encodeURIComponent(objectName)}/tags`, {\n          tags: tags\n        });\n      }\n      showToast('태그가 저장되었습니다');\n      if (onClose) onClose();\n    } catch (error) {\n      showToast('태그 저장 실패', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Loader2 className=\"spin\" size={24} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"advanced-panel tags-panel\">\n      <div className=\"tags-header\">\n        <h4><Tag size={16} /> 객체 태그</h4>\n        <span className=\"object-name\">{objectName}</span>\n      </div>\n\n      <div className=\"tags-list\">\n        {Object.entries(tags).map(([key, value]) => (\n          <div key={key} className=\"tag-item\">\n            <span className=\"tag-key\">{key}</span>\n            <span className=\"tag-value\">{value}</span>\n            <button className=\"btn-icon danger\" onClick={() => handleRemoveTag(key)}>\n              <X size={14} />\n            </button>\n          </div>\n        ))}\n\n        {Object.keys(tags).length === 0 && (\n          <div className=\"empty-state small\">\n            <Tag size={24} />\n            <p>태그가 없습니다</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"add-tag-form\">\n        <input\n          type=\"text\"\n          placeholder=\"키\"\n          value={newKey}\n          onChange={(e) => setNewKey(e.target.value)}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"값\"\n          value={newValue}\n          onChange={(e) => setNewValue(e.target.value)}\n        />\n        <button className=\"btn btn-secondary\" onClick={handleAddTag}>\n          <Plus size={14} />\n        </button>\n      </div>\n\n      <div className=\"panel-actions\">\n        <button className=\"btn btn-primary\" onClick={handleSave} disabled={saving}>\n          {saving ? <Loader2 className=\"spin\" size={14} /> : <Save size={14} />}\n          저장\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// 생명주기 규칙 관리 컴포넌트\nexport const LifecycleManager = ({ bucketName, showToast }) => {\n  const [rules, setRules] = useState([]);\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddRule, setShowAddRule] = useState(false);\n  const [newRule, setNewRule] = useState({\n    rule_id: '',\n    prefix: '',\n    enabled: true,\n    expiration_days: 30\n  });\n\n  const fetchLifecycle = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [rulesRes, templatesRes] = await Promise.all([\n        axios.get(`${API_BASE}/storage/buckets/${bucketName}/lifecycle`),\n        axios.get(`${API_BASE}/storage/lifecycle-templates`)\n      ]);\n      setRules(rulesRes.data.rules || []);\n      setTemplates(templatesRes.data.templates || []);\n    } catch (error) {\n      showToast('생명주기 규칙 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchLifecycle();\n  }, [fetchLifecycle]);\n\n  const handleApplyTemplate = async (template) => {\n    const rule = { ...template.rule, rule_id: `${template.name}-${Date.now()}` };\n    try {\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/lifecycle`, {\n        rules: [...rules, rule]\n      });\n      showToast(`'${template.description}' 규칙이 추가되었습니다`);\n      fetchLifecycle();\n    } catch (error) {\n      showToast('규칙 추가 실패', 'error');\n    }\n  };\n\n  const handleAddRule = async () => {\n    if (!newRule.rule_id.trim()) {\n      showToast('규칙 ID를 입력하세요', 'error');\n      return;\n    }\n    try {\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/lifecycle`, {\n        rules: [...rules, newRule]\n      });\n      showToast('규칙이 추가되었습니다');\n      setShowAddRule(false);\n      setNewRule({ rule_id: '', prefix: '', enabled: true, expiration_days: 30 });\n      fetchLifecycle();\n    } catch (error) {\n      showToast('규칙 추가 실패', 'error');\n    }\n  };\n\n  const handleDeleteRule = async (ruleId) => {\n    try {\n      const updatedRules = rules.filter(r => r.rule_id !== ruleId);\n      if (updatedRules.length === 0) {\n        await axios.delete(`${API_BASE}/storage/buckets/${bucketName}/lifecycle`);\n      } else {\n        await axios.put(`${API_BASE}/storage/buckets/${bucketName}/lifecycle`, {\n          rules: updatedRules\n        });\n      }\n      showToast('규칙이 삭제되었습니다');\n      fetchLifecycle();\n    } catch (error) {\n      showToast('규칙 삭제 실패', 'error');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Loader2 className=\"spin\" size={24} />\n        <p>생명주기 규칙 로딩 중...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"advanced-panel lifecycle-panel\">\n      <div className=\"panel-section\">\n        <h4><Clock size={16} /> 규칙 템플릿</h4>\n        <div className=\"template-grid compact\">\n          {templates.map((template) => (\n            <div\n              key={template.name}\n              className=\"template-card small\"\n              onClick={() => handleApplyTemplate(template)}\n            >\n              <div className=\"template-name\">{template.description}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"panel-section\">\n        <div className=\"section-header\">\n          <h4>현재 규칙 ({rules.length})</h4>\n          <button className=\"btn btn-sm btn-primary\" onClick={() => setShowAddRule(true)}>\n            <Plus size={14} /> 추가\n          </button>\n        </div>\n\n        {rules.length === 0 ? (\n          <div className=\"empty-state\">\n            <Clock size={32} />\n            <p>생명주기 규칙이 없습니다</p>\n          </div>\n        ) : (\n          <div className=\"rules-list\">\n            {rules.map((rule) => (\n              <div key={rule.rule_id} className={`rule-item ${rule.enabled ? '' : 'disabled'}`}>\n                <div className=\"rule-info\">\n                  <div className=\"rule-id\">{rule.rule_id}</div>\n                  <div className=\"rule-details\">\n                    {rule.prefix && <span>접두사: {rule.prefix}</span>}\n                    {rule.expiration_days && <span>{rule.expiration_days}일 후 삭제</span>}\n                    {rule.noncurrent_expiration_days && <span>이전 버전 {rule.noncurrent_expiration_days}일 후 삭제</span>}\n                  </div>\n                </div>\n                <div className=\"rule-actions\">\n                  <span className={`status-badge ${rule.enabled ? 'running' : 'stopped'}`}>\n                    {rule.enabled ? '활성' : '비활성'}\n                  </span>\n                  <button className=\"btn-icon danger\" onClick={() => handleDeleteRule(rule.rule_id)}>\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {showAddRule && (\n        <div className=\"modal-overlay\" onClick={() => setShowAddRule(false)}>\n          <div className=\"modal-content small\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>생명주기 규칙 추가</h3>\n              <button className=\"btn-icon\" onClick={() => setShowAddRule(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label>규칙 ID</label>\n                <input\n                  type=\"text\"\n                  value={newRule.rule_id}\n                  onChange={(e) => setNewRule({ ...newRule, rule_id: e.target.value })}\n                  placeholder=\"my-rule-1\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>접두사 (선택)</label>\n                <input\n                  type=\"text\"\n                  value={newRule.prefix}\n                  onChange={(e) => setNewRule({ ...newRule, prefix: e.target.value })}\n                  placeholder=\"logs/\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>만료 일수</label>\n                <input\n                  type=\"number\"\n                  value={newRule.expiration_days}\n                  onChange={(e) => setNewRule({ ...newRule, expiration_days: Number(e.target.value) })}\n                  min={1}\n                />\n              </div>\n              <div className=\"form-group checkbox\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={newRule.enabled}\n                    onChange={(e) => setNewRule({ ...newRule, enabled: e.target.checked })}\n                  />\n                  활성화\n                </label>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn\" onClick={() => setShowAddRule(false)}>취소</button>\n              <button className=\"btn btn-primary\" onClick={handleAddRule}>추가</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// 버킷 통계 컴포넌트\nexport const BucketStats = ({ bucketName, showToast }) => {\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchStats = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(`${API_BASE}/storage/buckets/${bucketName}/stats`);\n      setStats(res.data.stats);\n    } catch (error) {\n      showToast('통계 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchStats();\n  }, [fetchStats]);\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Loader2 className=\"spin\" size={24} />\n        <p>통계 로딩 중...</p>\n      </div>\n    );\n  }\n\n  if (!stats) return null;\n\n  return (\n    <div className=\"advanced-panel stats-panel\">\n      <h4><BarChart3 size={16} /> 버킷 통계</h4>\n\n      <div className=\"stats-grid\">\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.total_objects}</div>\n          <div className=\"stat-label\">총 객체</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.total_folders}</div>\n          <div className=\"stat-label\">폴더</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.total_size_human}</div>\n          <div className=\"stat-label\">총 용량</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className={`stat-value ${stats.versioning_enabled ? 'enabled' : ''}`}>\n            {stats.versioning_enabled ? 'ON' : 'OFF'}\n          </div>\n          <div className=\"stat-label\">버전 관리</div>\n        </div>\n      </div>\n\n      {Object.keys(stats.file_types).length > 0 && (\n        <div className=\"stats-section\">\n          <h5>파일 유형 분포</h5>\n          <div className=\"file-types\">\n            {Object.entries(stats.file_types).map(([ext, count]) => (\n              <div key={ext} className=\"file-type-item\">\n                <span className=\"ext\">.{ext}</span>\n                <span className=\"count\">{count}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      <div className=\"stats-section\">\n        <h5>크기 분포</h5>\n        <div className=\"size-distribution\">\n          {Object.entries(stats.size_distribution).map(([range, count]) => (\n            <div key={range} className=\"size-item\">\n              <span className=\"range\">{range}</span>\n              <div className=\"bar-container\">\n                <div\n                  className=\"bar\"\n                  style={{\n                    width: `${(count / Math.max(stats.total_objects, 1)) * 100}%`\n                  }}\n                />\n              </div>\n              <span className=\"count\">{count}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 객체 잠금 관리 컴포넌트\nexport const ObjectLockManager = ({ bucketName, showToast }) => {\n  const [config, setConfig] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [mode, setMode] = useState('GOVERNANCE');\n  const [duration, setDuration] = useState(30);\n  const [durationUnit, setDurationUnit] = useState('DAYS');\n\n  const fetchConfig = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await axios.get(`${API_BASE}/storage/buckets/${bucketName}/object-lock`);\n      setConfig(res.data);\n      if (res.data.mode) setMode(res.data.mode);\n      if (res.data.duration) setDuration(res.data.duration);\n      if (res.data.duration_unit) setDurationUnit(res.data.duration_unit);\n    } catch (error) {\n      showToast('객체 잠금 설정 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchConfig();\n  }, [fetchConfig]);\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/object-lock`, {\n        mode,\n        duration,\n        duration_unit: durationUnit\n      });\n      showToast('객체 잠금 설정이 저장되었습니다');\n      fetchConfig();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '설정 저장 실패', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-state\">\n        <Loader2 className=\"spin\" size={24} />\n        <span>로딩 중...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"object-lock-manager\">\n      <div className=\"section-header\">\n        <Lock size={18} />\n        <h4>객체 잠금 (Object Lock)</h4>\n      </div>\n\n      {!config?.enabled ? (\n        <div className=\"info-box warning\">\n          <AlertCircle size={16} />\n          <div>\n            <strong>객체 잠금 비활성화</strong>\n            <p>이 버킷은 객체 잠금이 활성화되지 않았습니다. 버킷 생성 시에만 활성화할 수 있습니다.</p>\n          </div>\n        </div>\n      ) : (\n        <>\n          <div className=\"info-box success\">\n            <CheckCircle size={16} />\n            <span>객체 잠금이 활성화되어 있습니다</span>\n          </div>\n\n          <div className=\"form-section\">\n            <h5>기본 보존 정책</h5>\n\n            <div className=\"form-group\">\n              <label>보존 모드</label>\n              <select value={mode} onChange={(e) => setMode(e.target.value)}>\n                <option value=\"GOVERNANCE\">Governance (관리자 삭제 가능)</option>\n                <option value=\"COMPLIANCE\">Compliance (삭제 불가)</option>\n              </select>\n              <span className=\"hint\">\n                {mode === 'GOVERNANCE'\n                  ? '특별 권한으로 삭제 가능'\n                  : '보존 기간 동안 절대 삭제 불가'}\n              </span>\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>보존 기간</label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  value={duration}\n                  onChange={(e) => setDuration(parseInt(e.target.value) || 1)}\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>단위</label>\n                <select value={durationUnit} onChange={(e) => setDurationUnit(e.target.value)}>\n                  <option value=\"DAYS\">일</option>\n                  <option value=\"YEARS\">년</option>\n                </select>\n              </div>\n            </div>\n\n            <button className=\"btn btn-primary\" onClick={handleSave} disabled={saving}>\n              {saving ? <Loader2 className=\"spin\" size={14} /> : <Save size={14} />}\n              저장\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\n// IAM 사용자 관리 컴포넌트\nexport const IAMManager = ({ showToast }) => {\n  const [users, setUsers] = useState([]);\n  const [policies, setPolicies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [newUser, setNewUser] = useState({ access_key: '', secret_key: '', policy: 'readwrite' });\n  const [showSecrets, setShowSecrets] = useState({});\n\n  const fetchUsers = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [usersRes, policiesRes] = await Promise.all([\n        axios.get(`${API_BASE}/storage/iam/users`),\n        axios.get(`${API_BASE}/storage/iam/policies`)\n      ]);\n      setUsers(usersRes.data.users || []);\n      setPolicies(policiesRes.data.policies || []);\n    } catch (error) {\n      // Fallback to soft users\n      try {\n        const res = await axios.get(`${API_BASE}/storage/users`);\n        setUsers(res.data.users || []);\n        setPolicies(['readonly', 'readwrite', 'writeonly', 'consoleAdmin']);\n      } catch (e) {\n        showToast('사용자 목록 조회 실패', 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [showToast]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  const handleCreateUser = async () => {\n    if (!newUser.access_key || !newUser.secret_key) {\n      showToast('Access Key와 Secret Key를 입력하세요', 'error');\n      return;\n    }\n    if (newUser.secret_key.length < 8) {\n      showToast('Secret Key는 8자 이상이어야 합니다', 'error');\n      return;\n    }\n\n    try {\n      await axios.post(`${API_BASE}/storage/iam/users`, newUser);\n      showToast(`사용자 '${newUser.access_key}'가 생성되었습니다`);\n      setShowAddUser(false);\n      setNewUser({ access_key: '', secret_key: '', policy: 'readwrite' });\n      fetchUsers();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '사용자 생성 실패', 'error');\n    }\n  };\n\n  const handleDeleteUser = async (accessKey) => {\n    if (!window.confirm(`'${accessKey}' 사용자를 삭제하시겠습니까?`)) return;\n\n    try {\n      await axios.delete(`${API_BASE}/storage/iam/users/${accessKey}`);\n      showToast(`사용자 '${accessKey}'가 삭제되었습니다`);\n      fetchUsers();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '사용자 삭제 실패', 'error');\n    }\n  };\n\n  const handleToggleStatus = async (accessKey, currentStatus) => {\n    const enabled = currentStatus !== 'enabled';\n    try {\n      await axios.put(`${API_BASE}/storage/iam/users/${accessKey}/status?enabled=${enabled}`);\n      showToast(`사용자가 ${enabled ? '활성화' : '비활성화'}되었습니다`);\n      fetchUsers();\n    } catch (error) {\n      showToast('상태 변경 실패', 'error');\n    }\n  };\n\n  const handleChangePolicy = async (accessKey, policy) => {\n    try {\n      await axios.put(`${API_BASE}/storage/iam/users/${accessKey}/policy?policy=${policy}`);\n      showToast(`정책이 '${policy}'로 변경되었습니다`);\n      fetchUsers();\n    } catch (error) {\n      showToast('정책 변경 실패', 'error');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-state\">\n        <Loader2 className=\"spin\" size={24} />\n        <span>로딩 중...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"iam-manager\">\n      <div className=\"section-header\">\n        <Users size={18} />\n        <h4>IAM 사용자 관리</h4>\n        <button className=\"btn btn-sm btn-primary\" onClick={() => setShowAddUser(true)}>\n          <UserPlus size={14} />\n          사용자 추가\n        </button>\n      </div>\n\n      {showAddUser && (\n        <div className=\"add-user-form\">\n          <h5>새 사용자 생성</h5>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Access Key</label>\n              <input\n                type=\"text\"\n                placeholder=\"사용자 ID\"\n                value={newUser.access_key}\n                onChange={(e) => setNewUser({ ...newUser, access_key: e.target.value })}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Secret Key</label>\n              <input\n                type=\"password\"\n                placeholder=\"비밀번호 (8자 이상)\"\n                value={newUser.secret_key}\n                onChange={(e) => setNewUser({ ...newUser, secret_key: e.target.value })}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>정책</label>\n              <select\n                value={newUser.policy}\n                onChange={(e) => setNewUser({ ...newUser, policy: e.target.value })}\n              >\n                {policies.map((p) => (\n                  <option key={p} value={p}>{p}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n          <div className=\"form-actions\">\n            <button className=\"btn btn-primary\" onClick={handleCreateUser}>\n              <UserPlus size={14} />\n              생성\n            </button>\n            <button className=\"btn btn-secondary\" onClick={() => setShowAddUser(false)}>\n              취소\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"users-list\">\n        {users.length === 0 ? (\n          <div className=\"empty-state\">\n            <Users size={32} />\n            <p>등록된 사용자가 없습니다</p>\n          </div>\n        ) : (\n          <table className=\"users-table\">\n            <thead>\n              <tr>\n                <th>Access Key</th>\n                <th>정책</th>\n                <th>상태</th>\n                <th>작업</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.accessKey || user.access_key}>\n                  <td className=\"access-key\">\n                    <Key size={14} />\n                    <span>{user.accessKey || user.access_key}</span>\n                    {(user.accessKey || user.access_key) === 'admin' && (\n                      <span className=\"badge admin\">관리자</span>\n                    )}\n                  </td>\n                  <td>\n                    <select\n                      value={user.policyName || user.policy || 'readwrite'}\n                      onChange={(e) => handleChangePolicy(user.accessKey || user.access_key, e.target.value)}\n                      disabled={(user.accessKey || user.access_key) === 'admin'}\n                    >\n                      {policies.map((p) => (\n                        <option key={p} value={p}>{p}</option>\n                      ))}\n                    </select>\n                  </td>\n                  <td>\n                    <button\n                      className={`status-toggle ${(user.userStatus || user.status) === 'enabled' ? 'enabled' : 'disabled'}`}\n                      onClick={() => handleToggleStatus(user.accessKey || user.access_key, user.userStatus || user.status)}\n                      disabled={(user.accessKey || user.access_key) === 'admin'}\n                    >\n                      {(user.userStatus || user.status) === 'enabled' ? (\n                        <><ToggleRight size={16} /> 활성</>\n                      ) : (\n                        <><ToggleLeft size={16} /> 비활성</>\n                      )}\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      className=\"btn btn-sm btn-danger\"\n                      onClick={() => handleDeleteUser(user.accessKey || user.access_key)}\n                      disabled={(user.accessKey || user.access_key) === 'admin'}\n                      title=\"삭제\"\n                    >\n                      <UserMinus size={14} />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// 버킷별 사용자 접근 권한 관리 컴포넌트\nexport const BucketUserAccessManager = ({ bucketName, showToast }) => {\n  const [users, setUsers] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [newPermission, setNewPermission] = useState({ user: '', access: 'read', quota_gb: '' });\n  const [bucketQuota, setBucketQuota] = useState(null);\n  const [quotaInput, setQuotaInput] = useState('');\n\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [usersRes, allUsersRes, quotaRes] = await Promise.all([\n        axios.get(`${API_BASE}/storage/buckets/${bucketName}/users`),\n        axios.get(`${API_BASE}/storage/iam/users`).catch(() => ({ data: { users: [] } })),\n        axios.get(`${API_BASE}/storage/buckets/${bucketName}/quota`).catch(() => ({ data: null }))\n      ]);\n      setUsers(usersRes.data.users || []);\n      setAllUsers(allUsersRes.data.users || []);\n      setBucketQuota(quotaRes.data);\n      if (quotaRes.data?.quota_bytes) {\n        setQuotaInput((quotaRes.data.quota_bytes / (1024 * 1024 * 1024)).toFixed(1));\n      }\n    } catch (error) {\n      showToast('버킷 사용자 정보 조회 실패', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [bucketName, showToast]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const handleAddUser = async () => {\n    if (!newPermission.user) {\n      showToast('사용자를 선택하세요', 'error');\n      return;\n    }\n\n    try {\n      await axios.post(`${API_BASE}/storage/buckets/${bucketName}/users`, {\n        user: newPermission.user,\n        access: newPermission.access,\n        quota_gb: newPermission.quota_gb ? parseFloat(newPermission.quota_gb) : null\n      });\n      showToast(`'${newPermission.user}'에게 접근 권한이 부여되었습니다`);\n      setShowAddUser(false);\n      setNewPermission({ user: '', access: 'read', quota_gb: '' });\n      fetchData();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '권한 부여 실패', 'error');\n    }\n  };\n\n  const handleRemoveUser = async (user) => {\n    if (!window.confirm(`'${user}'의 접근 권한을 제거하시겠습니까?`)) return;\n\n    try {\n      await axios.delete(`${API_BASE}/storage/buckets/${bucketName}/users/${user}`);\n      showToast(`'${user}'의 접근 권한이 제거되었습니다`);\n      fetchData();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '권한 제거 실패', 'error');\n    }\n  };\n\n  const handleUpdateAccess = async (user, access) => {\n    try {\n      const existingUser = users.find(u => u.user === user);\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/users/${user}`, {\n        user,\n        access,\n        quota_gb: existingUser?.quota_bytes ? existingUser.quota_bytes / (1024 * 1024 * 1024) : null\n      });\n      showToast('접근 권한이 변경되었습니다');\n      fetchData();\n    } catch (error) {\n      showToast('권한 변경 실패', 'error');\n    }\n  };\n\n  const handleSetQuota = async () => {\n    if (!quotaInput) {\n      showToast('할당량을 입력하세요', 'error');\n      return;\n    }\n\n    try {\n      await axios.put(`${API_BASE}/storage/buckets/${bucketName}/quota?quota_gb=${parseFloat(quotaInput)}`);\n      showToast(`버킷 할당량이 ${quotaInput}GB로 설정되었습니다`);\n      fetchData();\n    } catch (error) {\n      showToast(error.response?.data?.detail || '할당량 설정 실패', 'error');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-state\">\n        <Loader2 className=\"spin\" size={24} />\n        <span>로딩 중...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bucket-access-manager\">\n      {/* 버킷 할당량 설정 */}\n      <div className=\"section-header\">\n        <HardDrive size={18} />\n        <h4>버킷 할당량</h4>\n      </div>\n      <div className=\"quota-section\">\n        <div className=\"quota-info\">\n          {bucketQuota?.quota_human && (\n            <span>현재: {bucketQuota.used_human} / {bucketQuota.quota_human}</span>\n          )}\n        </div>\n        <div className=\"quota-input-row\">\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            min=\"0.1\"\n            placeholder=\"할당량 (GB)\"\n            value={quotaInput}\n            onChange={(e) => setQuotaInput(e.target.value)}\n          />\n          <span className=\"unit\">GB</span>\n          <button className=\"btn btn-sm btn-primary\" onClick={handleSetQuota}>\n            설정\n          </button>\n        </div>\n      </div>\n\n      {/* 사용자 접근 권한 */}\n      <div className=\"section-header\" style={{ marginTop: '20px' }}>\n        <Users size={18} />\n        <h4>사용자 접근 권한</h4>\n        <button className=\"btn btn-sm btn-primary\" onClick={() => setShowAddUser(true)}>\n          <UserPlus size={14} />\n          추가\n        </button>\n      </div>\n\n      {showAddUser && (\n        <div className=\"add-user-form\">\n          <h5>사용자 권한 추가</h5>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>사용자</label>\n              <select\n                value={newPermission.user}\n                onChange={(e) => setNewPermission({ ...newPermission, user: e.target.value })}\n              >\n                <option value=\"\">선택...</option>\n                <option value=\"admin\">admin</option>\n                {allUsers.map((u) => (\n                  <option key={u.accessKey || u.access_key} value={u.accessKey || u.access_key}>\n                    {u.accessKey || u.access_key}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"form-group\">\n              <label>접근 권한</label>\n              <select\n                value={newPermission.access}\n                onChange={(e) => setNewPermission({ ...newPermission, access: e.target.value })}\n              >\n                <option value=\"read\">읽기</option>\n                <option value=\"write\">읽기/쓰기</option>\n                <option value=\"admin\">관리자</option>\n              </select>\n            </div>\n            <div className=\"form-group\">\n              <label>개인 할당량 (GB)</label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                min=\"0\"\n                placeholder=\"무제한\"\n                value={newPermission.quota_gb}\n                onChange={(e) => setNewPermission({ ...newPermission, quota_gb: e.target.value })}\n              />\n            </div>\n          </div>\n          <div className=\"form-actions\">\n            <button className=\"btn btn-primary\" onClick={handleAddUser}>\n              <UserPlus size={14} />\n              추가\n            </button>\n            <button className=\"btn btn-secondary\" onClick={() => setShowAddUser(false)}>\n              취소\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"users-list\">\n        {users.length === 0 ? (\n          <div className=\"empty-state\">\n            <Users size={32} />\n            <p>이 버킷에 접근 권한이 부여된 사용자가 없습니다</p>\n          </div>\n        ) : (\n          <table className=\"users-table\">\n            <thead>\n              <tr>\n                <th>사용자</th>\n                <th>접근 권한</th>\n                <th>할당량</th>\n                <th>작업</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user.user}>\n                  <td className=\"access-key\">\n                    <Key size={14} />\n                    <span>{user.user}</span>\n                  </td>\n                  <td>\n                    <select\n                      value={user.access}\n                      onChange={(e) => handleUpdateAccess(user.user, e.target.value)}\n                    >\n                      <option value=\"read\">읽기</option>\n                      <option value=\"write\">읽기/쓰기</option>\n                      <option value=\"admin\">관리자</option>\n                    </select>\n                  </td>\n                  <td>\n                    {user.quota_human || '무제한'}\n                  </td>\n                  <td>\n                    <button\n                      className=\"btn btn-sm btn-danger\"\n                      onClick={() => handleRemoveUser(user.user)}\n                      title=\"제거\"\n                    >\n                      <UserMinus size={14} />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// 고급 기능 탭 컴포넌트\nexport const StorageAdvancedTabs = ({ bucketName, selectedObject, showToast }) => {\n  const [activeTab, setActiveTab] = useState('stats');\n\n  const tabs = [\n    { id: 'stats', label: '통계', icon: BarChart3 },\n    { id: 'policy', label: '정책', icon: Shield },\n    { id: 'versioning', label: '버전', icon: GitBranch },\n    { id: 'lifecycle', label: '생명주기', icon: Clock },\n    { id: 'objectlock', label: '잠금', icon: Lock },\n    { id: 'access', label: '접근관리', icon: UserPlus },\n    { id: 'presigned', label: 'URL 생성', icon: Link },\n    { id: 'iam', label: 'IAM', icon: Users },\n  ];\n\n  if (!bucketName) {\n    return (\n      <div className=\"advanced-panel\">\n        <div className=\"empty-state\">\n          <Settings size={32} />\n          <p>버킷을 선택하세요</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"storage-advanced\">\n      <div className=\"advanced-tabs\">\n        {tabs.map((tab) => (\n          <button\n            key={tab.id}\n            className={`tab-btn ${activeTab === tab.id ? 'active' : ''}`}\n            onClick={() => setActiveTab(tab.id)}\n          >\n            <tab.icon size={14} />\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"advanced-content\">\n        {activeTab === 'stats' && (\n          <BucketStats bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'policy' && (\n          <BucketPolicyManager bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'versioning' && (\n          <VersioningManager bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'lifecycle' && (\n          <LifecycleManager bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'objectlock' && (\n          <ObjectLockManager bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'access' && (\n          <BucketUserAccessManager bucketName={bucketName} showToast={showToast} />\n        )}\n        {activeTab === 'presigned' && (\n          <PresignedUrlGenerator\n            bucketName={bucketName}\n            objectName={selectedObject}\n            showToast={showToast}\n          />\n        )}\n        {activeTab === 'iam' && (\n          <IAMManager showToast={showToast} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default StorageAdvancedTabs;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}