{"ast":null,"code":"import { vs16Emoji } from \"../data.js\";\nimport { splitUTF32Number } from \"../convert.js\";\nimport { createOptionalEmojiRegexItem, createSequenceEmojiRegexItem, createSetEmojiRegexItem, createUTF16EmojiRegexItem } from \"./base.js\";\n\n/**\n* Create regex item for set of numbers\n*/\nfunction createEmojiRegexItemForNumbers(numbers) {\n  const utf32 = [];\n  const utf16 = [];\n  numbers.sort((a, b) => a - b);\n  let lastNumber;\n  for (let i = 0; i < numbers.length; i++) {\n    const number = numbers[i];\n    if (number === lastNumber) continue;\n    lastNumber = number;\n    const split = splitUTF32Number(number);\n    if (!split) {\n      utf16.push(number);\n      continue;\n    }\n    const [first, second] = split;\n    const item = utf32.find(item$1 => item$1.first === first);\n    if (item) {\n      item.second.push(second);\n      item.numbers.push(number);\n    } else utf32.push({\n      first,\n      second: [second],\n      numbers: [number]\n    });\n  }\n  const results = [];\n  if (utf16.length) results.push(createUTF16EmojiRegexItem(utf16));\n  if (utf32.length) {\n    const utf32Set = [];\n    for (let i = 0; i < utf32.length; i++) {\n      const item = utf32[i];\n      const secondRegex = createUTF16EmojiRegexItem(item.second);\n      const listItem = utf32Set.find(item$1 => item$1.second.regex === secondRegex.regex);\n      if (listItem) {\n        listItem.first.push(item.first);\n        listItem.numbers = [...listItem.numbers, ...item.numbers];\n      } else utf32Set.push({\n        second: secondRegex,\n        first: [item.first],\n        numbers: [...item.numbers]\n      });\n    }\n    for (let i = 0; i < utf32Set.length; i++) {\n      const item = utf32Set[i];\n      const firstRegex = createUTF16EmojiRegexItem(item.first);\n      const secondRegex = item.second;\n      results.push(createSequenceEmojiRegexItem([firstRegex, secondRegex], item.numbers));\n    }\n  }\n  return results.length === 1 ? results[0] : createSetEmojiRegexItem(results);\n}\n/**\n* Create sequence of numbers\n*/\nfunction createRegexForNumbersSequence(numbers) {\n  let optionalVariations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  const items = [];\n  for (let i = 0; i < numbers.length; i++) {\n    const num = numbers[i];\n    const split = splitUTF32Number(num);\n    if (!split) {\n      const item = createUTF16EmojiRegexItem([num]);\n      if (optionalVariations && num === vs16Emoji) items.push(createOptionalEmojiRegexItem(item));else items.push(item);\n    } else {\n      items.push(createUTF16EmojiRegexItem([split[0]]));\n      items.push(createUTF16EmojiRegexItem([split[1]]));\n    }\n  }\n  if (items.length === 1) return items[0];\n  const result = createSequenceEmojiRegexItem(items);\n  if (numbers.length === 1 && items[0].type === \"utf16\") result.numbers = [...numbers];\n  return result;\n}\n/**\n* Attempt to optimise numbers in a set\n*/\nfunction optimiseNumbersSet(set) {\n  const mandatoryMatches = {\n    numbers: [],\n    items: []\n  };\n  const optionalMatches = {\n    numbers: [],\n    items: []\n  };\n  const filteredItems = set.sets.filter(item => {\n    if (item.type === \"optional\") {\n      const parentItem = item.item;\n      if (parentItem.numbers) {\n        optionalMatches.items.push(item);\n        optionalMatches.numbers = optionalMatches.numbers.concat(parentItem.numbers);\n        return false;\n      }\n      return true;\n    }\n    if (item.numbers) {\n      mandatoryMatches.items.push(item);\n      mandatoryMatches.numbers = mandatoryMatches.numbers.concat(item.numbers);\n      return false;\n    }\n    return true;\n  });\n  if (mandatoryMatches.items.length + optionalMatches.items.length < 2) return set;\n  const optionalNumbers = new Set(optionalMatches.numbers);\n  let foundMatches = false;\n  mandatoryMatches.numbers = mandatoryMatches.numbers.filter(number => {\n    if (optionalNumbers.has(number)) {\n      foundMatches = true;\n      return false;\n    }\n    return true;\n  });\n  if (mandatoryMatches.items.length) {\n    if (!foundMatches && mandatoryMatches.items.length === 1) filteredItems.push(mandatoryMatches.items[0]);else if (mandatoryMatches.numbers.length) filteredItems.push(createEmojiRegexItemForNumbers(mandatoryMatches.numbers));\n  }\n  switch (optionalMatches.items.length) {\n    case 0:\n      break;\n    case 1:\n      filteredItems.push(optionalMatches.items[0]);\n      break;\n    default:\n      filteredItems.push(createOptionalEmojiRegexItem(createEmojiRegexItemForNumbers(optionalMatches.numbers)));\n  }\n  return filteredItems.length === 1 ? filteredItems[0] : createSetEmojiRegexItem(filteredItems);\n}\nexport { createEmojiRegexItemForNumbers, createRegexForNumbersSequence, optimiseNumbersSet };","map":{"version":3,"names":["vs16Emoji","splitUTF32Number","createOptionalEmojiRegexItem","createSequenceEmojiRegexItem","createSetEmojiRegexItem","createUTF16EmojiRegexItem","createEmojiRegexItemForNumbers","numbers","utf32","utf16","sort","a","b","lastNumber","i","length","number","split","push","first","second","item","find","item$1","results","utf32Set","secondRegex","listItem","regex","firstRegex","createRegexForNumbersSequence","optionalVariations","arguments","undefined","items","num","result","type","optimiseNumbersSet","set","mandatoryMatches","optionalMatches","filteredItems","sets","filter","parentItem","concat","optionalNumbers","Set","foundMatches","has"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@iconify/utils/lib/emoji/regex/numbers.js"],"sourcesContent":["import { vs16Emoji } from \"../data.js\";\nimport { splitUTF32Number } from \"../convert.js\";\nimport { createOptionalEmojiRegexItem, createSequenceEmojiRegexItem, createSetEmojiRegexItem, createUTF16EmojiRegexItem } from \"./base.js\";\n\n/**\n* Create regex item for set of numbers\n*/\nfunction createEmojiRegexItemForNumbers(numbers) {\n\tconst utf32 = [];\n\tconst utf16 = [];\n\tnumbers.sort((a, b) => a - b);\n\tlet lastNumber;\n\tfor (let i = 0; i < numbers.length; i++) {\n\t\tconst number = numbers[i];\n\t\tif (number === lastNumber) continue;\n\t\tlastNumber = number;\n\t\tconst split = splitUTF32Number(number);\n\t\tif (!split) {\n\t\t\tutf16.push(number);\n\t\t\tcontinue;\n\t\t}\n\t\tconst [first, second] = split;\n\t\tconst item = utf32.find((item$1) => item$1.first === first);\n\t\tif (item) {\n\t\t\titem.second.push(second);\n\t\t\titem.numbers.push(number);\n\t\t} else utf32.push({\n\t\t\tfirst,\n\t\t\tsecond: [second],\n\t\t\tnumbers: [number]\n\t\t});\n\t}\n\tconst results = [];\n\tif (utf16.length) results.push(createUTF16EmojiRegexItem(utf16));\n\tif (utf32.length) {\n\t\tconst utf32Set = [];\n\t\tfor (let i = 0; i < utf32.length; i++) {\n\t\t\tconst item = utf32[i];\n\t\t\tconst secondRegex = createUTF16EmojiRegexItem(item.second);\n\t\t\tconst listItem = utf32Set.find((item$1) => item$1.second.regex === secondRegex.regex);\n\t\t\tif (listItem) {\n\t\t\t\tlistItem.first.push(item.first);\n\t\t\t\tlistItem.numbers = [...listItem.numbers, ...item.numbers];\n\t\t\t} else utf32Set.push({\n\t\t\t\tsecond: secondRegex,\n\t\t\t\tfirst: [item.first],\n\t\t\t\tnumbers: [...item.numbers]\n\t\t\t});\n\t\t}\n\t\tfor (let i = 0; i < utf32Set.length; i++) {\n\t\t\tconst item = utf32Set[i];\n\t\t\tconst firstRegex = createUTF16EmojiRegexItem(item.first);\n\t\t\tconst secondRegex = item.second;\n\t\t\tresults.push(createSequenceEmojiRegexItem([firstRegex, secondRegex], item.numbers));\n\t\t}\n\t}\n\treturn results.length === 1 ? results[0] : createSetEmojiRegexItem(results);\n}\n/**\n* Create sequence of numbers\n*/\nfunction createRegexForNumbersSequence(numbers, optionalVariations = true) {\n\tconst items = [];\n\tfor (let i = 0; i < numbers.length; i++) {\n\t\tconst num = numbers[i];\n\t\tconst split = splitUTF32Number(num);\n\t\tif (!split) {\n\t\t\tconst item = createUTF16EmojiRegexItem([num]);\n\t\t\tif (optionalVariations && num === vs16Emoji) items.push(createOptionalEmojiRegexItem(item));\n\t\t\telse items.push(item);\n\t\t} else {\n\t\t\titems.push(createUTF16EmojiRegexItem([split[0]]));\n\t\t\titems.push(createUTF16EmojiRegexItem([split[1]]));\n\t\t}\n\t}\n\tif (items.length === 1) return items[0];\n\tconst result = createSequenceEmojiRegexItem(items);\n\tif (numbers.length === 1 && items[0].type === \"utf16\") result.numbers = [...numbers];\n\treturn result;\n}\n/**\n* Attempt to optimise numbers in a set\n*/\nfunction optimiseNumbersSet(set) {\n\tconst mandatoryMatches = {\n\t\tnumbers: [],\n\t\titems: []\n\t};\n\tconst optionalMatches = {\n\t\tnumbers: [],\n\t\titems: []\n\t};\n\tconst filteredItems = set.sets.filter((item) => {\n\t\tif (item.type === \"optional\") {\n\t\t\tconst parentItem = item.item;\n\t\t\tif (parentItem.numbers) {\n\t\t\t\toptionalMatches.items.push(item);\n\t\t\t\toptionalMatches.numbers = optionalMatches.numbers.concat(parentItem.numbers);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tif (item.numbers) {\n\t\t\tmandatoryMatches.items.push(item);\n\t\t\tmandatoryMatches.numbers = mandatoryMatches.numbers.concat(item.numbers);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\tif (mandatoryMatches.items.length + optionalMatches.items.length < 2) return set;\n\tconst optionalNumbers = new Set(optionalMatches.numbers);\n\tlet foundMatches = false;\n\tmandatoryMatches.numbers = mandatoryMatches.numbers.filter((number) => {\n\t\tif (optionalNumbers.has(number)) {\n\t\t\tfoundMatches = true;\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\tif (mandatoryMatches.items.length) {\n\t\tif (!foundMatches && mandatoryMatches.items.length === 1) filteredItems.push(mandatoryMatches.items[0]);\n\t\telse if (mandatoryMatches.numbers.length) filteredItems.push(createEmojiRegexItemForNumbers(mandatoryMatches.numbers));\n\t}\n\tswitch (optionalMatches.items.length) {\n\t\tcase 0: break;\n\t\tcase 1:\n\t\t\tfilteredItems.push(optionalMatches.items[0]);\n\t\t\tbreak;\n\t\tdefault: filteredItems.push(createOptionalEmojiRegexItem(createEmojiRegexItemForNumbers(optionalMatches.numbers)));\n\t}\n\treturn filteredItems.length === 1 ? filteredItems[0] : createSetEmojiRegexItem(filteredItems);\n}\n\nexport { createEmojiRegexItemForNumbers, createRegexForNumbersSequence, optimiseNumbersSet };"],"mappings":"AAAA,SAASA,SAAS,QAAQ,YAAY;AACtC,SAASC,gBAAgB,QAAQ,eAAe;AAChD,SAASC,4BAA4B,EAAEC,4BAA4B,EAAEC,uBAAuB,EAAEC,yBAAyB,QAAQ,WAAW;;AAE1I;AACA;AACA;AACA,SAASC,8BAA8BA,CAACC,OAAO,EAAE;EAChD,MAAMC,KAAK,GAAG,EAAE;EAChB,MAAMC,KAAK,GAAG,EAAE;EAChBF,OAAO,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,CAAC;EAC7B,IAAIC,UAAU;EACd,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,OAAO,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;IACxC,MAAME,MAAM,GAAGT,OAAO,CAACO,CAAC,CAAC;IACzB,IAAIE,MAAM,KAAKH,UAAU,EAAE;IAC3BA,UAAU,GAAGG,MAAM;IACnB,MAAMC,KAAK,GAAGhB,gBAAgB,CAACe,MAAM,CAAC;IACtC,IAAI,CAACC,KAAK,EAAE;MACXR,KAAK,CAACS,IAAI,CAACF,MAAM,CAAC;MAClB;IACD;IACA,MAAM,CAACG,KAAK,EAAEC,MAAM,CAAC,GAAGH,KAAK;IAC7B,MAAMI,IAAI,GAAGb,KAAK,CAACc,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACJ,KAAK,KAAKA,KAAK,CAAC;IAC3D,IAAIE,IAAI,EAAE;MACTA,IAAI,CAACD,MAAM,CAACF,IAAI,CAACE,MAAM,CAAC;MACxBC,IAAI,CAACd,OAAO,CAACW,IAAI,CAACF,MAAM,CAAC;IAC1B,CAAC,MAAMR,KAAK,CAACU,IAAI,CAAC;MACjBC,KAAK;MACLC,MAAM,EAAE,CAACA,MAAM,CAAC;MAChBb,OAAO,EAAE,CAACS,MAAM;IACjB,CAAC,CAAC;EACH;EACA,MAAMQ,OAAO,GAAG,EAAE;EAClB,IAAIf,KAAK,CAACM,MAAM,EAAES,OAAO,CAACN,IAAI,CAACb,yBAAyB,CAACI,KAAK,CAAC,CAAC;EAChE,IAAID,KAAK,CAACO,MAAM,EAAE;IACjB,MAAMU,QAAQ,GAAG,EAAE;IACnB,KAAK,IAAIX,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,KAAK,CAACO,MAAM,EAAED,CAAC,EAAE,EAAE;MACtC,MAAMO,IAAI,GAAGb,KAAK,CAACM,CAAC,CAAC;MACrB,MAAMY,WAAW,GAAGrB,yBAAyB,CAACgB,IAAI,CAACD,MAAM,CAAC;MAC1D,MAAMO,QAAQ,GAAGF,QAAQ,CAACH,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACH,MAAM,CAACQ,KAAK,KAAKF,WAAW,CAACE,KAAK,CAAC;MACrF,IAAID,QAAQ,EAAE;QACbA,QAAQ,CAACR,KAAK,CAACD,IAAI,CAACG,IAAI,CAACF,KAAK,CAAC;QAC/BQ,QAAQ,CAACpB,OAAO,GAAG,CAAC,GAAGoB,QAAQ,CAACpB,OAAO,EAAE,GAAGc,IAAI,CAACd,OAAO,CAAC;MAC1D,CAAC,MAAMkB,QAAQ,CAACP,IAAI,CAAC;QACpBE,MAAM,EAAEM,WAAW;QACnBP,KAAK,EAAE,CAACE,IAAI,CAACF,KAAK,CAAC;QACnBZ,OAAO,EAAE,CAAC,GAAGc,IAAI,CAACd,OAAO;MAC1B,CAAC,CAAC;IACH;IACA,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,QAAQ,CAACV,MAAM,EAAED,CAAC,EAAE,EAAE;MACzC,MAAMO,IAAI,GAAGI,QAAQ,CAACX,CAAC,CAAC;MACxB,MAAMe,UAAU,GAAGxB,yBAAyB,CAACgB,IAAI,CAACF,KAAK,CAAC;MACxD,MAAMO,WAAW,GAAGL,IAAI,CAACD,MAAM;MAC/BI,OAAO,CAACN,IAAI,CAACf,4BAA4B,CAAC,CAAC0B,UAAU,EAAEH,WAAW,CAAC,EAAEL,IAAI,CAACd,OAAO,CAAC,CAAC;IACpF;EACD;EACA,OAAOiB,OAAO,CAACT,MAAM,KAAK,CAAC,GAAGS,OAAO,CAAC,CAAC,CAAC,GAAGpB,uBAAuB,CAACoB,OAAO,CAAC;AAC5E;AACA;AACA;AACA;AACA,SAASM,6BAA6BA,CAACvB,OAAO,EAA6B;EAAA,IAA3BwB,kBAAkB,GAAAC,SAAA,CAAAjB,MAAA,QAAAiB,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EACxE,MAAME,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,OAAO,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;IACxC,MAAMqB,GAAG,GAAG5B,OAAO,CAACO,CAAC,CAAC;IACtB,MAAMG,KAAK,GAAGhB,gBAAgB,CAACkC,GAAG,CAAC;IACnC,IAAI,CAAClB,KAAK,EAAE;MACX,MAAMI,IAAI,GAAGhB,yBAAyB,CAAC,CAAC8B,GAAG,CAAC,CAAC;MAC7C,IAAIJ,kBAAkB,IAAII,GAAG,KAAKnC,SAAS,EAAEkC,KAAK,CAAChB,IAAI,CAAChB,4BAA4B,CAACmB,IAAI,CAAC,CAAC,CAAC,KACvFa,KAAK,CAAChB,IAAI,CAACG,IAAI,CAAC;IACtB,CAAC,MAAM;MACNa,KAAK,CAAChB,IAAI,CAACb,yBAAyB,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjDiB,KAAK,CAAChB,IAAI,CAACb,yBAAyB,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD;EACD;EACA,IAAIiB,KAAK,CAACnB,MAAM,KAAK,CAAC,EAAE,OAAOmB,KAAK,CAAC,CAAC,CAAC;EACvC,MAAME,MAAM,GAAGjC,4BAA4B,CAAC+B,KAAK,CAAC;EAClD,IAAI3B,OAAO,CAACQ,MAAM,KAAK,CAAC,IAAImB,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,KAAK,OAAO,EAAED,MAAM,CAAC7B,OAAO,GAAG,CAAC,GAAGA,OAAO,CAAC;EACpF,OAAO6B,MAAM;AACd;AACA;AACA;AACA;AACA,SAASE,kBAAkBA,CAACC,GAAG,EAAE;EAChC,MAAMC,gBAAgB,GAAG;IACxBjC,OAAO,EAAE,EAAE;IACX2B,KAAK,EAAE;EACR,CAAC;EACD,MAAMO,eAAe,GAAG;IACvBlC,OAAO,EAAE,EAAE;IACX2B,KAAK,EAAE;EACR,CAAC;EACD,MAAMQ,aAAa,GAAGH,GAAG,CAACI,IAAI,CAACC,MAAM,CAAEvB,IAAI,IAAK;IAC/C,IAAIA,IAAI,CAACgB,IAAI,KAAK,UAAU,EAAE;MAC7B,MAAMQ,UAAU,GAAGxB,IAAI,CAACA,IAAI;MAC5B,IAAIwB,UAAU,CAACtC,OAAO,EAAE;QACvBkC,eAAe,CAACP,KAAK,CAAChB,IAAI,CAACG,IAAI,CAAC;QAChCoB,eAAe,CAAClC,OAAO,GAAGkC,eAAe,CAAClC,OAAO,CAACuC,MAAM,CAACD,UAAU,CAACtC,OAAO,CAAC;QAC5E,OAAO,KAAK;MACb;MACA,OAAO,IAAI;IACZ;IACA,IAAIc,IAAI,CAACd,OAAO,EAAE;MACjBiC,gBAAgB,CAACN,KAAK,CAAChB,IAAI,CAACG,IAAI,CAAC;MACjCmB,gBAAgB,CAACjC,OAAO,GAAGiC,gBAAgB,CAACjC,OAAO,CAACuC,MAAM,CAACzB,IAAI,CAACd,OAAO,CAAC;MACxE,OAAO,KAAK;IACb;IACA,OAAO,IAAI;EACZ,CAAC,CAAC;EACF,IAAIiC,gBAAgB,CAACN,KAAK,CAACnB,MAAM,GAAG0B,eAAe,CAACP,KAAK,CAACnB,MAAM,GAAG,CAAC,EAAE,OAAOwB,GAAG;EAChF,MAAMQ,eAAe,GAAG,IAAIC,GAAG,CAACP,eAAe,CAAClC,OAAO,CAAC;EACxD,IAAI0C,YAAY,GAAG,KAAK;EACxBT,gBAAgB,CAACjC,OAAO,GAAGiC,gBAAgB,CAACjC,OAAO,CAACqC,MAAM,CAAE5B,MAAM,IAAK;IACtE,IAAI+B,eAAe,CAACG,GAAG,CAAClC,MAAM,CAAC,EAAE;MAChCiC,YAAY,GAAG,IAAI;MACnB,OAAO,KAAK;IACb;IACA,OAAO,IAAI;EACZ,CAAC,CAAC;EACF,IAAIT,gBAAgB,CAACN,KAAK,CAACnB,MAAM,EAAE;IAClC,IAAI,CAACkC,YAAY,IAAIT,gBAAgB,CAACN,KAAK,CAACnB,MAAM,KAAK,CAAC,EAAE2B,aAAa,CAACxB,IAAI,CAACsB,gBAAgB,CAACN,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KACnG,IAAIM,gBAAgB,CAACjC,OAAO,CAACQ,MAAM,EAAE2B,aAAa,CAACxB,IAAI,CAACZ,8BAA8B,CAACkC,gBAAgB,CAACjC,OAAO,CAAC,CAAC;EACvH;EACA,QAAQkC,eAAe,CAACP,KAAK,CAACnB,MAAM;IACnC,KAAK,CAAC;MAAE;IACR,KAAK,CAAC;MACL2B,aAAa,CAACxB,IAAI,CAACuB,eAAe,CAACP,KAAK,CAAC,CAAC,CAAC,CAAC;MAC5C;IACD;MAASQ,aAAa,CAACxB,IAAI,CAAChB,4BAA4B,CAACI,8BAA8B,CAACmC,eAAe,CAAClC,OAAO,CAAC,CAAC,CAAC;EACnH;EACA,OAAOmC,aAAa,CAAC3B,MAAM,KAAK,CAAC,GAAG2B,aAAa,CAAC,CAAC,CAAC,GAAGtC,uBAAuB,CAACsC,aAAa,CAAC;AAC9F;AAEA,SAASpC,8BAA8B,EAAEwB,6BAA6B,EAAEQ,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}