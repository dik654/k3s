{"ast":null,"code":"import _objectSpread from \"/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { populateCommonDb } from \"./chunk-4BX2VUAB.mjs\";\nimport { ImperativeState } from \"./chunk-QZHKN3VN.mjs\";\nimport { cleanAndMerge, random, utils_default } from \"./chunk-S3R3BYOJ.mjs\";\nimport { clear, common_default, defaultConfig_default, getAccDescription, getAccTitle, getConfig, getConfig2, getDiagramTitle, setAccDescription, setAccTitle, setDiagramTitle, setupGraphViewbox2 as setupGraphViewbox } from \"./chunk-ABZYJK2D.mjs\";\nimport { __name, log } from \"./chunk-AGHRB4JF.mjs\";\n\n// src/diagrams/git/gitGraphParser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/git/gitGraphTypes.ts\nvar commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4\n};\n\n// src/diagrams/git/gitGraphAst.ts\nvar DEFAULT_GITGRAPH_CONFIG = defaultConfig_default.gitGraph;\nvar getConfig3 = /* @__PURE__ */__name(() => {\n  const config = cleanAndMerge(_objectSpread(_objectSpread({}, DEFAULT_GITGRAPH_CONFIG), getConfig().gitGraph));\n  return config;\n}, \"getConfig\");\nvar state = new ImperativeState(() => {\n  const config = getConfig3();\n  const mainBranchName = config.mainBranchName;\n  const mainBranchOrder = config.mainBranchOrder;\n  return {\n    mainBranchName,\n    commits: /* @__PURE__ */new Map(),\n    head: null,\n    branchConfig: /* @__PURE__ */new Map([[mainBranchName, {\n      name: mainBranchName,\n      order: mainBranchOrder\n    }]]),\n    branches: /* @__PURE__ */new Map([[mainBranchName, null]]),\n    currBranch: mainBranchName,\n    direction: \"LR\",\n    seq: 0,\n    options: {}\n  };\n});\nfunction getID() {\n  return random({\n    length: 7\n  });\n}\n__name(getID, \"getID\");\nfunction uniqBy(list, fn) {\n  const recordMap = /* @__PURE__ */Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n__name(uniqBy, \"uniqBy\");\nvar setDirection = /* @__PURE__ */__name(function (dir2) {\n  state.records.direction = dir2;\n}, \"setDirection\");\nvar setOptions = /* @__PURE__ */__name(function (rawOptString) {\n  var _rawOptString;\n  log.debug(\"options str\", rawOptString);\n  rawOptString = (_rawOptString = rawOptString) === null || _rawOptString === void 0 ? void 0 : _rawOptString.trim();\n  rawOptString = rawOptString || \"{}\";\n  try {\n    state.records.options = JSON.parse(rawOptString);\n  } catch (e) {\n    log.error(\"error while parsing gitGraph options\", e.message);\n  }\n}, \"setOptions\");\nvar getOptions = /* @__PURE__ */__name(function () {\n  return state.records.options;\n}, \"getOptions\");\nvar commit = /* @__PURE__ */__name(function (commitDB) {\n  var _tags;\n  let msg = commitDB.msg;\n  let id = commitDB.id;\n  const type = commitDB.type;\n  let tags = commitDB.tags;\n  log.info(\"commit\", msg, id, type, tags);\n  log.debug(\"Entering commit:\", msg, id, type, tags);\n  const config = getConfig3();\n  id = common_default.sanitizeText(id, config);\n  msg = common_default.sanitizeText(msg, config);\n  tags = (_tags = tags) === null || _tags === void 0 ? void 0 : _tags.map(tag => common_default.sanitizeText(tag, config));\n  const newCommit = {\n    id: id ? id : state.records.seq + \"-\" + getID(),\n    message: msg,\n    seq: state.records.seq++,\n    type: type !== null && type !== void 0 ? type : commitType.NORMAL,\n    tags: tags !== null && tags !== void 0 ? tags : [],\n    parents: state.records.head == null ? [] : [state.records.head.id],\n    branch: state.records.currBranch\n  };\n  state.records.head = newCommit;\n  log.info(\"main branch\", config.mainBranchName);\n  if (state.records.commits.has(newCommit.id)) {\n    log.warn(\"Commit ID \".concat(newCommit.id, \" already exists\"));\n  }\n  state.records.commits.set(newCommit.id, newCommit);\n  state.records.branches.set(state.records.currBranch, newCommit.id);\n  log.debug(\"in pushCommit \" + newCommit.id);\n}, \"commit\");\nvar branch = /* @__PURE__ */__name(function (branchDB) {\n  let name = branchDB.name;\n  const order = branchDB.order;\n  name = common_default.sanitizeText(name, getConfig3());\n  if (state.records.branches.has(name)) {\n    throw new Error(\"Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using \\\"checkout \".concat(name, \"\\\")\"));\n  }\n  state.records.branches.set(name, state.records.head != null ? state.records.head.id : null);\n  state.records.branchConfig.set(name, {\n    name,\n    order\n  });\n  checkout(name);\n  log.debug(\"in createBranch\");\n}, \"branch\");\nvar merge = /* @__PURE__ */__name(mergeDB => {\n  let otherBranch = mergeDB.branch;\n  let customId = mergeDB.id;\n  const overrideType = mergeDB.type;\n  const customTags = mergeDB.tags;\n  const config = getConfig3();\n  otherBranch = common_default.sanitizeText(otherBranch, config);\n  if (customId) {\n    customId = common_default.sanitizeText(customId, config);\n  }\n  const currentBranchCheck = state.records.branches.get(state.records.currBranch);\n  const otherBranchCheck = state.records.branches.get(otherBranch);\n  const currentCommit = currentBranchCheck ? state.records.commits.get(currentBranchCheck) : void 0;\n  const otherCommit = otherBranchCheck ? state.records.commits.get(otherBranchCheck) : void 0;\n  if (currentCommit && otherCommit && currentCommit.branch === otherBranch) {\n    throw new Error(\"Cannot merge branch '\".concat(otherBranch, \"' into itself.\"));\n  }\n  if (state.records.currBranch === otherBranch) {\n    const error = new Error('Incorrect usage of \"merge\". Cannot merge a branch to itself');\n    error.hash = {\n      text: \"merge \".concat(otherBranch),\n      token: \"merge \".concat(otherBranch),\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (currentCommit === void 0 || !currentCommit) {\n    const error = new Error(\"Incorrect usage of \\\"merge\\\". Current branch (\".concat(state.records.currBranch, \")has no commits\"));\n    error.hash = {\n      text: \"merge \".concat(otherBranch),\n      token: \"merge \".concat(otherBranch),\n      expected: [\"commit\"]\n    };\n    throw error;\n  }\n  if (!state.records.branches.has(otherBranch)) {\n    const error = new Error('Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") does not exist\");\n    error.hash = {\n      text: \"merge \".concat(otherBranch),\n      token: \"merge \".concat(otherBranch),\n      expected: [\"branch \".concat(otherBranch)]\n    };\n    throw error;\n  }\n  if (otherCommit === void 0 || !otherCommit) {\n    const error = new Error('Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") has no commits\");\n    error.hash = {\n      text: \"merge \".concat(otherBranch),\n      token: \"merge \".concat(otherBranch),\n      expected: ['\"commit\"']\n    };\n    throw error;\n  }\n  if (currentCommit === otherCommit) {\n    const error = new Error('Incorrect usage of \"merge\". Both branches have same head');\n    error.hash = {\n      text: \"merge \".concat(otherBranch),\n      token: \"merge \".concat(otherBranch),\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (customId && state.records.commits.has(customId)) {\n    const error = new Error('Incorrect usage of \"merge\". Commit with id:' + customId + \" already exists, use different custom id\");\n    error.hash = {\n      text: \"merge \".concat(otherBranch, \" \").concat(customId, \" \").concat(overrideType, \" \").concat(customTags === null || customTags === void 0 ? void 0 : customTags.join(\" \")),\n      token: \"merge \".concat(otherBranch, \" \").concat(customId, \" \").concat(overrideType, \" \").concat(customTags === null || customTags === void 0 ? void 0 : customTags.join(\" \")),\n      expected: [\"merge \".concat(otherBranch, \" \").concat(customId, \"_UNIQUE \").concat(overrideType, \" \").concat(customTags === null || customTags === void 0 ? void 0 : customTags.join(\" \"))]\n    };\n    throw error;\n  }\n  const verifiedBranch = otherBranchCheck ? otherBranchCheck : \"\";\n  const commit2 = {\n    id: customId || \"\".concat(state.records.seq, \"-\").concat(getID()),\n    message: \"merged branch \".concat(otherBranch, \" into \").concat(state.records.currBranch),\n    seq: state.records.seq++,\n    parents: state.records.head == null ? [] : [state.records.head.id, verifiedBranch],\n    branch: state.records.currBranch,\n    type: commitType.MERGE,\n    customType: overrideType,\n    customId: customId ? true : false,\n    tags: customTags !== null && customTags !== void 0 ? customTags : []\n  };\n  state.records.head = commit2;\n  state.records.commits.set(commit2.id, commit2);\n  state.records.branches.set(state.records.currBranch, commit2.id);\n  log.debug(state.records.branches);\n  log.debug(\"in mergeBranch\");\n}, \"merge\");\nvar cherryPick = /* @__PURE__ */__name(function (cherryPickDB) {\n  var _tags2;\n  let sourceId = cherryPickDB.id;\n  let targetId = cherryPickDB.targetId;\n  let tags = cherryPickDB.tags;\n  let parentCommitId = cherryPickDB.parent;\n  log.debug(\"Entering cherryPick:\", sourceId, targetId, tags);\n  const config = getConfig3();\n  sourceId = common_default.sanitizeText(sourceId, config);\n  targetId = common_default.sanitizeText(targetId, config);\n  tags = (_tags2 = tags) === null || _tags2 === void 0 ? void 0 : _tags2.map(tag => common_default.sanitizeText(tag, config));\n  parentCommitId = common_default.sanitizeText(parentCommitId, config);\n  if (!sourceId || !state.records.commits.has(sourceId)) {\n    const error = new Error('Incorrect usage of \"cherryPick\". Source commit id should exist and provided');\n    error.hash = {\n      text: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n      token: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n      expected: [\"cherry-pick abc\"]\n    };\n    throw error;\n  }\n  const sourceCommit = state.records.commits.get(sourceId);\n  if (sourceCommit === void 0 || !sourceCommit) {\n    throw new Error('Incorrect usage of \"cherryPick\". Source commit id should exist and provided');\n  }\n  if (parentCommitId && !(Array.isArray(sourceCommit.parents) && sourceCommit.parents.includes(parentCommitId))) {\n    const error = new Error(\"Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.\");\n    throw error;\n  }\n  const sourceCommitBranch = sourceCommit.branch;\n  if (sourceCommit.type === commitType.MERGE && !parentCommitId) {\n    const error = new Error(\"Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.\");\n    throw error;\n  }\n  if (!targetId || !state.records.commits.has(targetId)) {\n    if (sourceCommitBranch === state.records.currBranch) {\n      const error = new Error('Incorrect usage of \"cherryPick\". Source commit is already on current branch');\n      error.hash = {\n        text: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        token: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommitId = state.records.branches.get(state.records.currBranch);\n    if (currentCommitId === void 0 || !currentCommitId) {\n      const error = new Error(\"Incorrect usage of \\\"cherry-pick\\\". Current branch (\".concat(state.records.currBranch, \")has no commits\"));\n      error.hash = {\n        text: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        token: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommit = state.records.commits.get(currentCommitId);\n    if (currentCommit === void 0 || !currentCommit) {\n      const error = new Error(\"Incorrect usage of \\\"cherry-pick\\\". Current branch (\".concat(state.records.currBranch, \")has no commits\"));\n      error.hash = {\n        text: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        token: \"cherryPick \".concat(sourceId, \" \").concat(targetId),\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const commit2 = {\n      id: state.records.seq + \"-\" + getID(),\n      message: \"cherry-picked \".concat(sourceCommit === null || sourceCommit === void 0 ? void 0 : sourceCommit.message, \" into \").concat(state.records.currBranch),\n      seq: state.records.seq++,\n      parents: state.records.head == null ? [] : [state.records.head.id, sourceCommit.id],\n      branch: state.records.currBranch,\n      type: commitType.CHERRY_PICK,\n      tags: tags ? tags.filter(Boolean) : [\"cherry-pick:\".concat(sourceCommit.id).concat(sourceCommit.type === commitType.MERGE ? \"|parent:\".concat(parentCommitId) : \"\")]\n    };\n    state.records.head = commit2;\n    state.records.commits.set(commit2.id, commit2);\n    state.records.branches.set(state.records.currBranch, commit2.id);\n    log.debug(state.records.branches);\n    log.debug(\"in cherryPick\");\n  }\n}, \"cherryPick\");\nvar checkout = /* @__PURE__ */__name(function (branch2) {\n  branch2 = common_default.sanitizeText(branch2, getConfig3());\n  if (!state.records.branches.has(branch2)) {\n    const error = new Error(\"Trying to checkout branch which is not yet created. (Help try using \\\"branch \".concat(branch2, \"\\\")\"));\n    error.hash = {\n      text: \"checkout \".concat(branch2),\n      token: \"checkout \".concat(branch2),\n      expected: [\"branch \".concat(branch2)]\n    };\n    throw error;\n  } else {\n    state.records.currBranch = branch2;\n    const id = state.records.branches.get(state.records.currBranch);\n    if (id === void 0 || !id) {\n      state.records.head = null;\n    } else {\n      var _state$records$commit;\n      state.records.head = (_state$records$commit = state.records.commits.get(id)) !== null && _state$records$commit !== void 0 ? _state$records$commit : null;\n    }\n  }\n}, \"checkout\");\nfunction upsert(arr, key, newVal) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newVal);\n  } else {\n    arr.splice(index, 1, newVal);\n  }\n}\n__name(upsert, \"upsert\");\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit2 = commitArr.reduce((out, commit3) => {\n    if (out.seq > commit3.seq) {\n      return out;\n    }\n    return commit3;\n  }, commitArr[0]);\n  let line = \"\";\n  commitArr.forEach(function (c) {\n    if (c === commit2) {\n      line += \"\t*\";\n    } else {\n      line += \"\t|\";\n    }\n  });\n  const label = [line, commit2.id, commit2.seq];\n  for (const branch2 in state.records.branches) {\n    if (state.records.branches.get(branch2) === commit2.id) {\n      label.push(branch2);\n    }\n  }\n  log.debug(label.join(\" \"));\n  if (commit2.parents && commit2.parents.length == 2 && commit2.parents[0] && commit2.parents[1]) {\n    const newCommit = state.records.commits.get(commit2.parents[0]);\n    upsert(commitArr, commit2, newCommit);\n    if (commit2.parents[1]) {\n      commitArr.push(state.records.commits.get(commit2.parents[1]));\n    }\n  } else if (commit2.parents.length == 0) {\n    return;\n  } else {\n    if (commit2.parents[0]) {\n      const newCommit = state.records.commits.get(commit2.parents[0]);\n      upsert(commitArr, commit2, newCommit);\n    }\n  }\n  commitArr = uniqBy(commitArr, c => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n__name(prettyPrintCommitHistory, \"prettyPrintCommitHistory\");\nvar prettyPrint = /* @__PURE__ */__name(function () {\n  log.debug(state.records.commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n}, \"prettyPrint\");\nvar clear2 = /* @__PURE__ */__name(function () {\n  state.reset();\n  clear();\n}, \"clear\");\nvar getBranchesAsObjArray = /* @__PURE__ */__name(function () {\n  const branchesArray = [...state.records.branchConfig.values()].map((branchConfig, i) => {\n    if (branchConfig.order !== null && branchConfig.order !== void 0) {\n      return branchConfig;\n    }\n    return _objectSpread(_objectSpread({}, branchConfig), {}, {\n      order: parseFloat(\"0.\".concat(i))\n    });\n  }).sort((a, b) => {\n    var _a$order, _b$order;\n    return ((_a$order = a.order) !== null && _a$order !== void 0 ? _a$order : 0) - ((_b$order = b.order) !== null && _b$order !== void 0 ? _b$order : 0);\n  }).map(_ref => {\n    let {\n      name\n    } = _ref;\n    return {\n      name\n    };\n  });\n  return branchesArray;\n}, \"getBranchesAsObjArray\");\nvar getBranches = /* @__PURE__ */__name(function () {\n  return state.records.branches;\n}, \"getBranches\");\nvar getCommits = /* @__PURE__ */__name(function () {\n  return state.records.commits;\n}, \"getCommits\");\nvar getCommitsArray = /* @__PURE__ */__name(function () {\n  const commitArr = [...state.records.commits.values()];\n  commitArr.forEach(function (o) {\n    log.debug(o.id);\n  });\n  commitArr.sort((a, b) => a.seq - b.seq);\n  return commitArr;\n}, \"getCommitsArray\");\nvar getCurrentBranch = /* @__PURE__ */__name(function () {\n  return state.records.currBranch;\n}, \"getCurrentBranch\");\nvar getDirection = /* @__PURE__ */__name(function () {\n  return state.records.direction;\n}, \"getDirection\");\nvar getHead = /* @__PURE__ */__name(function () {\n  return state.records.head;\n}, \"getHead\");\nvar db = {\n  commitType,\n  getConfig: getConfig3,\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  cherryPick,\n  checkout,\n  //reset,\n  prettyPrint,\n  clear: clear2,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  setDiagramTitle,\n  getDiagramTitle\n};\n\n// src/diagrams/git/gitGraphParser.ts\nvar populate = /* @__PURE__ */__name((ast, db2) => {\n  populateCommonDb(ast, db2);\n  if (ast.dir) {\n    db2.setDirection(ast.dir);\n  }\n  for (const statement of ast.statements) {\n    parseStatement(statement, db2);\n  }\n}, \"populate\");\nvar parseStatement = /* @__PURE__ */__name((statement, db2) => {\n  const parsers = {\n    Commit: /* @__PURE__ */__name(stmt => db2.commit(parseCommit(stmt)), \"Commit\"),\n    Branch: /* @__PURE__ */__name(stmt => db2.branch(parseBranch(stmt)), \"Branch\"),\n    Merge: /* @__PURE__ */__name(stmt => db2.merge(parseMerge(stmt)), \"Merge\"),\n    Checkout: /* @__PURE__ */__name(stmt => db2.checkout(parseCheckout(stmt)), \"Checkout\"),\n    CherryPicking: /* @__PURE__ */__name(stmt => db2.cherryPick(parseCherryPicking(stmt)), \"CherryPicking\")\n  };\n  const parser2 = parsers[statement.$type];\n  if (parser2) {\n    parser2(statement);\n  } else {\n    log.error(\"Unknown statement type: \".concat(statement.$type));\n  }\n}, \"parseStatement\");\nvar parseCommit = /* @__PURE__ */__name(commit2 => {\n  var _commit2$message, _commit2$tags;\n  const commitDB = {\n    id: commit2.id,\n    msg: (_commit2$message = commit2.message) !== null && _commit2$message !== void 0 ? _commit2$message : \"\",\n    type: commit2.type !== void 0 ? commitType[commit2.type] : commitType.NORMAL,\n    tags: (_commit2$tags = commit2.tags) !== null && _commit2$tags !== void 0 ? _commit2$tags : void 0\n  };\n  return commitDB;\n}, \"parseCommit\");\nvar parseBranch = /* @__PURE__ */__name(branch2 => {\n  var _branch2$order;\n  const branchDB = {\n    name: branch2.name,\n    order: (_branch2$order = branch2.order) !== null && _branch2$order !== void 0 ? _branch2$order : 0\n  };\n  return branchDB;\n}, \"parseBranch\");\nvar parseMerge = /* @__PURE__ */__name(merge2 => {\n  var _merge2$id, _merge2$tags;\n  const mergeDB = {\n    branch: merge2.branch,\n    id: (_merge2$id = merge2.id) !== null && _merge2$id !== void 0 ? _merge2$id : \"\",\n    type: merge2.type !== void 0 ? commitType[merge2.type] : void 0,\n    tags: (_merge2$tags = merge2.tags) !== null && _merge2$tags !== void 0 ? _merge2$tags : void 0\n  };\n  return mergeDB;\n}, \"parseMerge\");\nvar parseCheckout = /* @__PURE__ */__name(checkout2 => {\n  const branch2 = checkout2.branch;\n  return branch2;\n}, \"parseCheckout\");\nvar parseCherryPicking = /* @__PURE__ */__name(cherryPicking => {\n  var _cherryPicking$tags;\n  const cherryPickDB = {\n    id: cherryPicking.id,\n    targetId: \"\",\n    tags: ((_cherryPicking$tags = cherryPicking.tags) === null || _cherryPicking$tags === void 0 ? void 0 : _cherryPicking$tags.length) === 0 ? void 0 : cherryPicking.tags,\n    parent: cherryPicking.parent\n  };\n  return cherryPickDB;\n}, \"parseCherryPicking\");\nvar parser = {\n  parse: /* @__PURE__ */__name(async input => {\n    const ast = await parse(\"gitGraph\", input);\n    log.debug(ast);\n    populate(ast, db);\n  }, \"parse\")\n};\nif (void 0) {\n  const {\n    it,\n    expect,\n    describe\n  } = void 0;\n  const mockDB = {\n    commitType,\n    setDirection: vi.fn(),\n    commit: vi.fn(),\n    branch: vi.fn(),\n    merge: vi.fn(),\n    cherryPick: vi.fn(),\n    checkout: vi.fn()\n  };\n  describe(\"GitGraph Parser\", () => {\n    it(\"should parse a commit statement\", () => {\n      const commit2 = {\n        $type: \"Commit\",\n        id: \"1\",\n        message: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(commit2, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a branch statement\", () => {\n      const branch2 = {\n        $type: \"Branch\",\n        name: \"newBranch\",\n        order: 1\n      };\n      parseStatement(branch2, mockDB);\n      expect(mockDB.branch).toHaveBeenCalledWith({\n        name: \"newBranch\",\n        order: 1\n      });\n    });\n    it(\"should parse a checkout statement\", () => {\n      const checkout2 = {\n        $type: \"Checkout\",\n        branch: \"newBranch\"\n      };\n      parseStatement(checkout2, mockDB);\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n    it(\"should parse a merge statement\", () => {\n      const merge2 = {\n        $type: \"Merge\",\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(merge2, mockDB);\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a cherry picking statement\", () => {\n      const cherryPick2 = {\n        $type: \"CherryPicking\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        parent: \"2\"\n      };\n      parseStatement(cherryPick2, mockDB);\n      expect(mockDB.cherryPick).toHaveBeenCalledWith({\n        id: \"1\",\n        targetId: \"\",\n        parent: \"2\",\n        tags: [\"tag1\", \"tag2\"]\n      });\n    });\n    it(\"should parse a langium generated gitGraph ast\", () => {\n      const dummy = {\n        $type: \"GitGraph\",\n        statements: []\n      };\n      const gitGraphAst = {\n        $type: \"GitGraph\",\n        statements: [{\n          $container: dummy,\n          $type: \"Commit\",\n          id: \"1\",\n          message: \"test\",\n          tags: [\"tag1\", \"tag2\"],\n          type: \"NORMAL\"\n        }, {\n          $container: dummy,\n          $type: \"Branch\",\n          name: \"newBranch\",\n          order: 1\n        }, {\n          $container: dummy,\n          $type: \"Merge\",\n          branch: \"newBranch\",\n          id: \"1\",\n          tags: [\"tag1\", \"tag2\"],\n          type: \"NORMAL\"\n        }, {\n          $container: dummy,\n          $type: \"Checkout\",\n          branch: \"newBranch\"\n        }, {\n          $container: dummy,\n          $type: \"CherryPicking\",\n          id: \"1\",\n          tags: [\"tag1\", \"tag2\"],\n          parent: \"2\"\n        }]\n      };\n      populate(gitGraphAst, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.branch).toHaveBeenCalledWith({\n        name: \"newBranch\",\n        order: 1\n      });\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n  });\n}\n\n// src/diagrams/git/gitGraphRenderer.ts\nimport { select } from \"d3\";\nvar DEFAULT_CONFIG = getConfig2();\nvar DEFAULT_GITGRAPH_CONFIG2 = DEFAULT_CONFIG === null || DEFAULT_CONFIG === void 0 ? void 0 : DEFAULT_CONFIG.gitGraph;\nvar LAYOUT_OFFSET = 10;\nvar COMMIT_STEP = 40;\nvar PX = 4;\nvar PY = 2;\nvar THEME_COLOR_LIMIT = 8;\nvar branchPos = /* @__PURE__ */new Map();\nvar commitPos = /* @__PURE__ */new Map();\nvar defaultPos = 30;\nvar allCommitsDict = /* @__PURE__ */new Map();\nvar lanes = [];\nvar maxPos = 0;\nvar dir = \"LR\";\nvar clear3 = /* @__PURE__ */__name(() => {\n  branchPos.clear();\n  commitPos.clear();\n  allCommitsDict.clear();\n  maxPos = 0;\n  lanes = [];\n  dir = \"LR\";\n}, \"clear\");\nvar drawText = /* @__PURE__ */__name(txt => {\n  const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n  const rows = typeof txt === \"string\" ? txt.split(/\\\\n|\\n|<br\\s*\\/?>/gi) : txt;\n  rows.forEach(row => {\n    const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n    tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n    tspan.setAttribute(\"dy\", \"1em\");\n    tspan.setAttribute(\"x\", \"0\");\n    tspan.setAttribute(\"class\", \"row\");\n    tspan.textContent = row.trim();\n    svgLabel.appendChild(tspan);\n  });\n  return svgLabel;\n}, \"drawText\");\nvar findClosestParent = /* @__PURE__ */__name(parents => {\n  let closestParent;\n  let comparisonFunc;\n  let targetPosition;\n  if (dir === \"BT\") {\n    comparisonFunc = /* @__PURE__ */__name((a, b) => a <= b, \"comparisonFunc\");\n    targetPosition = Infinity;\n  } else {\n    comparisonFunc = /* @__PURE__ */__name((a, b) => a >= b, \"comparisonFunc\");\n    targetPosition = 0;\n  }\n  parents.forEach(parent => {\n    var _commitPos$get, _commitPos$get2;\n    const parentPosition = dir === \"TB\" || dir == \"BT\" ? (_commitPos$get = commitPos.get(parent)) === null || _commitPos$get === void 0 ? void 0 : _commitPos$get.y : (_commitPos$get2 = commitPos.get(parent)) === null || _commitPos$get2 === void 0 ? void 0 : _commitPos$get2.x;\n    if (parentPosition !== void 0 && comparisonFunc(parentPosition, targetPosition)) {\n      closestParent = parent;\n      targetPosition = parentPosition;\n    }\n  });\n  return closestParent;\n}, \"findClosestParent\");\nvar findClosestParentBT = /* @__PURE__ */__name(parents => {\n  let closestParent = \"\";\n  let maxPosition = Infinity;\n  parents.forEach(parent => {\n    const parentPosition = commitPos.get(parent).y;\n    if (parentPosition <= maxPosition) {\n      closestParent = parent;\n      maxPosition = parentPosition;\n    }\n  });\n  return closestParent || void 0;\n}, \"findClosestParentBT\");\nvar setParallelBTPos = /* @__PURE__ */__name((sortedKeys, commits, defaultPos2) => {\n  let curPos = defaultPos2;\n  let maxPosition = defaultPos2;\n  const roots = [];\n  sortedKeys.forEach(key => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(\"Commit not found for key \".concat(key));\n    }\n    if (commit2.parents.length) {\n      curPos = calculateCommitPosition(commit2);\n      maxPosition = Math.max(curPos, maxPosition);\n    } else {\n      roots.push(commit2);\n    }\n    setCommitPosition(commit2, curPos);\n  });\n  curPos = maxPosition;\n  roots.forEach(commit2 => {\n    setRootPosition(commit2, curPos, defaultPos2);\n  });\n  sortedKeys.forEach(key => {\n    const commit2 = commits.get(key);\n    if (commit2 !== null && commit2 !== void 0 && commit2.parents.length) {\n      const closestParent = findClosestParentBT(commit2.parents);\n      curPos = commitPos.get(closestParent).y - COMMIT_STEP;\n      if (curPos <= maxPosition) {\n        maxPosition = curPos;\n      }\n      const x = branchPos.get(commit2.branch).pos;\n      const y = curPos - LAYOUT_OFFSET;\n      commitPos.set(commit2.id, {\n        x,\n        y\n      });\n    }\n  });\n}, \"setParallelBTPos\");\nvar findClosestParentPos = /* @__PURE__ */__name(commit2 => {\n  var _commitPos$get3;\n  const closestParent = findClosestParent(commit2.parents.filter(p => p !== null));\n  if (!closestParent) {\n    throw new Error(\"Closest parent not found for commit \".concat(commit2.id));\n  }\n  const closestParentPos = (_commitPos$get3 = commitPos.get(closestParent)) === null || _commitPos$get3 === void 0 ? void 0 : _commitPos$get3.y;\n  if (closestParentPos === void 0) {\n    throw new Error(\"Closest parent position not found for commit \".concat(commit2.id));\n  }\n  return closestParentPos;\n}, \"findClosestParentPos\");\nvar calculateCommitPosition = /* @__PURE__ */__name(commit2 => {\n  const closestParentPos = findClosestParentPos(commit2);\n  return closestParentPos + COMMIT_STEP;\n}, \"calculateCommitPosition\");\nvar setCommitPosition = /* @__PURE__ */__name((commit2, curPos) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(\"Branch not found for commit \".concat(commit2.id));\n  }\n  const x = branch2.pos;\n  const y = curPos + LAYOUT_OFFSET;\n  commitPos.set(commit2.id, {\n    x,\n    y\n  });\n  return {\n    x,\n    y\n  };\n}, \"setCommitPosition\");\nvar setRootPosition = /* @__PURE__ */__name((commit2, curPos, defaultPos2) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(\"Branch not found for commit \".concat(commit2.id));\n  }\n  const y = curPos + defaultPos2;\n  const x = branch2.pos;\n  commitPos.set(commit2.id, {\n    x,\n    y\n  });\n}, \"setRootPosition\");\nvar drawCommitBullet = /* @__PURE__ */__name((gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType) => {\n  if (commitSymbolType === commitType.HIGHLIGHT) {\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 10).attr(\"y\", commitPosition.y - 10).attr(\"width\", 20).attr(\"height\", 20).attr(\"class\", \"commit \".concat(commit2.id, \" commit-highlight\").concat(branchIndex % THEME_COLOR_LIMIT, \" \").concat(typeClass, \"-outer\"));\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 6).attr(\"y\", commitPosition.y - 6).attr(\"width\", 12).attr(\"height\", 12).attr(\"class\", \"commit \".concat(commit2.id, \" commit\").concat(branchIndex % THEME_COLOR_LIMIT, \" \").concat(typeClass, \"-inner\"));\n  } else if (commitSymbolType === commitType.CHERRY_PICK) {\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x).attr(\"cy\", commitPosition.y).attr(\"r\", 10).attr(\"class\", \"commit \".concat(commit2.id, \" \").concat(typeClass));\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x - 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", \"commit \".concat(commit2.id, \" \").concat(typeClass));\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x + 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", \"commit \".concat(commit2.id, \" \").concat(typeClass));\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x + 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", \"commit \".concat(commit2.id, \" \").concat(typeClass));\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x - 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", \"commit \".concat(commit2.id, \" \").concat(typeClass));\n  } else {\n    const circle = gBullets.append(\"circle\");\n    circle.attr(\"cx\", commitPosition.x);\n    circle.attr(\"cy\", commitPosition.y);\n    circle.attr(\"r\", commit2.type === commitType.MERGE ? 9 : 10);\n    circle.attr(\"class\", \"commit \".concat(commit2.id, \" commit\").concat(branchIndex % THEME_COLOR_LIMIT));\n    if (commitSymbolType === commitType.MERGE) {\n      const circle2 = gBullets.append(\"circle\");\n      circle2.attr(\"cx\", commitPosition.x);\n      circle2.attr(\"cy\", commitPosition.y);\n      circle2.attr(\"r\", 6);\n      circle2.attr(\"class\", \"commit \".concat(typeClass, \" \").concat(commit2.id, \" commit\").concat(branchIndex % THEME_COLOR_LIMIT));\n    }\n    if (commitSymbolType === commitType.REVERSE) {\n      const cross = gBullets.append(\"path\");\n      cross.attr(\"d\", \"M \".concat(commitPosition.x - 5, \",\").concat(commitPosition.y - 5, \"L\").concat(commitPosition.x + 5, \",\").concat(commitPosition.y + 5, \"M\").concat(commitPosition.x - 5, \",\").concat(commitPosition.y + 5, \"L\").concat(commitPosition.x + 5, \",\").concat(commitPosition.y - 5)).attr(\"class\", \"commit \".concat(typeClass, \" \").concat(commit2.id, \" commit\").concat(branchIndex % THEME_COLOR_LIMIT));\n    }\n  }\n}, \"drawCommitBullet\");\nvar drawCommitLabel = /* @__PURE__ */__name((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.type !== commitType.CHERRY_PICK && (commit2.customId && commit2.type === commitType.MERGE || commit2.type !== commitType.MERGE) && DEFAULT_GITGRAPH_CONFIG2 !== null && DEFAULT_GITGRAPH_CONFIG2 !== void 0 && DEFAULT_GITGRAPH_CONFIG2.showCommitLabel) {\n    var _text$node;\n    const wrapper = gLabels.append(\"g\");\n    const labelBkg = wrapper.insert(\"rect\").attr(\"class\", \"commit-label-bkg\");\n    const text = wrapper.append(\"text\").attr(\"x\", pos).attr(\"y\", commitPosition.y + 25).attr(\"class\", \"commit-label\").text(commit2.id);\n    const bbox = (_text$node = text.node()) === null || _text$node === void 0 ? void 0 : _text$node.getBBox();\n    if (bbox) {\n      labelBkg.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2 - PY).attr(\"y\", commitPosition.y + 13.5).attr(\"width\", bbox.width + 2 * PY).attr(\"height\", bbox.height + 2 * PY);\n      if (dir === \"TB\" || dir === \"BT\") {\n        labelBkg.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX + 5)).attr(\"y\", commitPosition.y - 12);\n        text.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX)).attr(\"y\", commitPosition.y + bbox.height - 12);\n      } else {\n        text.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2);\n      }\n      if (DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) {\n        if (dir === \"TB\" || dir === \"BT\") {\n          text.attr(\"transform\", \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\");\n          labelBkg.attr(\"transform\", \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\");\n        } else {\n          const r_x = -7.5 - (bbox.width + 10) / 25 * 9.5;\n          const r_y = 10 + bbox.width / 25 * 8.5;\n          wrapper.attr(\"transform\", \"translate(\" + r_x + \", \" + r_y + \") rotate(-45, \" + pos + \", \" + commitPosition.y + \")\");\n        }\n      }\n    }\n  }\n}, \"drawCommitLabel\");\nvar drawCommitTags = /* @__PURE__ */__name((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.tags.length > 0) {\n    let yOffset = 0;\n    let maxTagBboxWidth = 0;\n    let maxTagBboxHeight = 0;\n    const tagElements = [];\n    for (const tagValue of commit2.tags.reverse()) {\n      var _tag$node;\n      const rect = gLabels.insert(\"polygon\");\n      const hole = gLabels.append(\"circle\");\n      const tag = gLabels.append(\"text\").attr(\"y\", commitPosition.y - 16 - yOffset).attr(\"class\", \"tag-label\").text(tagValue);\n      const tagBbox = (_tag$node = tag.node()) === null || _tag$node === void 0 ? void 0 : _tag$node.getBBox();\n      if (!tagBbox) {\n        throw new Error(\"Tag bbox not found\");\n      }\n      maxTagBboxWidth = Math.max(maxTagBboxWidth, tagBbox.width);\n      maxTagBboxHeight = Math.max(maxTagBboxHeight, tagBbox.height);\n      tag.attr(\"x\", commitPosition.posWithOffset - tagBbox.width / 2);\n      tagElements.push({\n        tag,\n        hole,\n        rect,\n        yOffset\n      });\n      yOffset += 20;\n    }\n    for (const {\n      tag,\n      hole,\n      rect,\n      yOffset: yOffset2\n    } of tagElements) {\n      const h2 = maxTagBboxHeight / 2;\n      const ly = commitPosition.y - 19.2 - yOffset2;\n      rect.attr(\"class\", \"tag-label-bkg\").attr(\"points\", \"\\n      \".concat(pos - maxTagBboxWidth / 2 - PX / 2, \",\").concat(ly + PY, \"  \\n      \").concat(pos - maxTagBboxWidth / 2 - PX / 2, \",\").concat(ly - PY, \"\\n      \").concat(commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX, \",\").concat(ly - h2 - PY, \"\\n      \").concat(commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX, \",\").concat(ly - h2 - PY, \"\\n      \").concat(commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX, \",\").concat(ly + h2 + PY, \"\\n      \").concat(commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX, \",\").concat(ly + h2 + PY));\n      hole.attr(\"cy\", ly).attr(\"cx\", pos - maxTagBboxWidth / 2 + PX / 2).attr(\"r\", 1.5).attr(\"class\", \"tag-hole\");\n      if (dir === \"TB\" || dir === \"BT\") {\n        const yOrigin = pos + yOffset2;\n        rect.attr(\"class\", \"tag-label-bkg\").attr(\"points\", \"\\n        \".concat(commitPosition.x, \",\").concat(yOrigin + 2, \"\\n        \").concat(commitPosition.x, \",\").concat(yOrigin - 2, \"\\n        \").concat(commitPosition.x + LAYOUT_OFFSET, \",\").concat(yOrigin - h2 - 2, \"\\n        \").concat(commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4, \",\").concat(yOrigin - h2 - 2, \"\\n        \").concat(commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4, \",\").concat(yOrigin + h2 + 2, \"\\n        \").concat(commitPosition.x + LAYOUT_OFFSET, \",\").concat(yOrigin + h2 + 2)).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        hole.attr(\"cx\", commitPosition.x + PX / 2).attr(\"cy\", yOrigin).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        tag.attr(\"x\", commitPosition.x + 5).attr(\"y\", yOrigin + 3).attr(\"transform\", \"translate(14,14) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n      }\n    }\n  }\n}, \"drawCommitTags\");\nvar getCommitClassType = /* @__PURE__ */__name(commit2 => {\n  var _commit2$customType;\n  const commitSymbolType = (_commit2$customType = commit2.customType) !== null && _commit2$customType !== void 0 ? _commit2$customType : commit2.type;\n  switch (commitSymbolType) {\n    case commitType.NORMAL:\n      return \"commit-normal\";\n    case commitType.REVERSE:\n      return \"commit-reverse\";\n    case commitType.HIGHLIGHT:\n      return \"commit-highlight\";\n    case commitType.MERGE:\n      return \"commit-merge\";\n    case commitType.CHERRY_PICK:\n      return \"commit-cherry-pick\";\n    default:\n      return \"commit-normal\";\n  }\n}, \"getCommitClassType\");\nvar calculatePosition = /* @__PURE__ */__name((commit2, dir2, pos, commitPos2) => {\n  const defaultCommitPosition = {\n    x: 0,\n    y: 0\n  };\n  if (commit2.parents.length > 0) {\n    const closestParent = findClosestParent(commit2.parents);\n    if (closestParent) {\n      var _commitPos2$get;\n      const parentPosition = (_commitPos2$get = commitPos2.get(closestParent)) !== null && _commitPos2$get !== void 0 ? _commitPos2$get : defaultCommitPosition;\n      if (dir2 === \"TB\") {\n        return parentPosition.y + COMMIT_STEP;\n      } else if (dir2 === \"BT\") {\n        var _commitPos2$get2;\n        const currentPosition = (_commitPos2$get2 = commitPos2.get(commit2.id)) !== null && _commitPos2$get2 !== void 0 ? _commitPos2$get2 : defaultCommitPosition;\n        return currentPosition.y - COMMIT_STEP;\n      } else {\n        return parentPosition.x + COMMIT_STEP;\n      }\n    }\n  } else {\n    if (dir2 === \"TB\") {\n      return defaultPos;\n    } else if (dir2 === \"BT\") {\n      var _commitPos2$get3;\n      const currentPosition = (_commitPos2$get3 = commitPos2.get(commit2.id)) !== null && _commitPos2$get3 !== void 0 ? _commitPos2$get3 : defaultCommitPosition;\n      return currentPosition.y - COMMIT_STEP;\n    } else {\n      return 0;\n    }\n  }\n  return 0;\n}, \"calculatePosition\");\nvar getCommitPosition = /* @__PURE__ */__name((commit2, pos, isParallelCommits) => {\n  var _branchPos$get, _branchPos$get2;\n  const posWithOffset = dir === \"BT\" && isParallelCommits ? pos : pos + LAYOUT_OFFSET;\n  const y = dir === \"TB\" || dir === \"BT\" ? posWithOffset : (_branchPos$get = branchPos.get(commit2.branch)) === null || _branchPos$get === void 0 ? void 0 : _branchPos$get.pos;\n  const x = dir === \"TB\" || dir === \"BT\" ? (_branchPos$get2 = branchPos.get(commit2.branch)) === null || _branchPos$get2 === void 0 ? void 0 : _branchPos$get2.pos : posWithOffset;\n  if (x === void 0 || y === void 0) {\n    throw new Error(\"Position were undefined for commit \".concat(commit2.id));\n  }\n  return {\n    x,\n    y,\n    posWithOffset\n  };\n}, \"getCommitPosition\");\nvar drawCommits = /* @__PURE__ */__name((svg, commits, modifyGraph) => {\n  var _DEFAULT_GITGRAPH_CON;\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const gBullets = svg.append(\"g\").attr(\"class\", \"commit-bullets\");\n  const gLabels = svg.append(\"g\").attr(\"class\", \"commit-labels\");\n  let pos = dir === \"TB\" || dir === \"BT\" ? defaultPos : 0;\n  const keys = [...commits.keys()];\n  const isParallelCommits = (_DEFAULT_GITGRAPH_CON = DEFAULT_GITGRAPH_CONFIG2 === null || DEFAULT_GITGRAPH_CONFIG2 === void 0 ? void 0 : DEFAULT_GITGRAPH_CONFIG2.parallelCommits) !== null && _DEFAULT_GITGRAPH_CON !== void 0 ? _DEFAULT_GITGRAPH_CON : false;\n  const sortKeys = /* @__PURE__ */__name((a, b) => {\n    var _commits$get, _commits$get2;\n    const seqA = (_commits$get = commits.get(a)) === null || _commits$get === void 0 ? void 0 : _commits$get.seq;\n    const seqB = (_commits$get2 = commits.get(b)) === null || _commits$get2 === void 0 ? void 0 : _commits$get2.seq;\n    return seqA !== void 0 && seqB !== void 0 ? seqA - seqB : 0;\n  }, \"sortKeys\");\n  let sortedKeys = keys.sort(sortKeys);\n  if (dir === \"BT\") {\n    if (isParallelCommits) {\n      setParallelBTPos(sortedKeys, commits, pos);\n    }\n    sortedKeys = sortedKeys.reverse();\n  }\n  sortedKeys.forEach(key => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(\"Commit not found for key \".concat(key));\n    }\n    if (isParallelCommits) {\n      pos = calculatePosition(commit2, dir, pos, commitPos);\n    }\n    const commitPosition = getCommitPosition(commit2, pos, isParallelCommits);\n    if (modifyGraph) {\n      var _commit2$customType2, _branchPos$get$index, _branchPos$get3;\n      const typeClass = getCommitClassType(commit2);\n      const commitSymbolType = (_commit2$customType2 = commit2.customType) !== null && _commit2$customType2 !== void 0 ? _commit2$customType2 : commit2.type;\n      const branchIndex = (_branchPos$get$index = (_branchPos$get3 = branchPos.get(commit2.branch)) === null || _branchPos$get3 === void 0 ? void 0 : _branchPos$get3.index) !== null && _branchPos$get$index !== void 0 ? _branchPos$get$index : 0;\n      drawCommitBullet(gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType);\n      drawCommitLabel(gLabels, commit2, commitPosition, pos);\n      drawCommitTags(gLabels, commit2, commitPosition, pos);\n    }\n    if (dir === \"TB\" || dir === \"BT\") {\n      commitPos.set(commit2.id, {\n        x: commitPosition.x,\n        y: commitPosition.posWithOffset\n      });\n    } else {\n      commitPos.set(commit2.id, {\n        x: commitPosition.posWithOffset,\n        y: commitPosition.y\n      });\n    }\n    pos = dir === \"BT\" && isParallelCommits ? pos + COMMIT_STEP : pos + COMMIT_STEP + LAYOUT_OFFSET;\n    if (pos > maxPos) {\n      maxPos = pos;\n    }\n  });\n}, \"drawCommits\");\nvar shouldRerouteArrow = /* @__PURE__ */__name((commitA, commitB, p1, p2, allCommits) => {\n  const commitBIsFurthest = dir === \"TB\" || dir === \"BT\" ? p1.x < p2.x : p1.y < p2.y;\n  const branchToGetCurve = commitBIsFurthest ? commitB.branch : commitA.branch;\n  const isOnBranchToGetCurve = /* @__PURE__ */__name(x => x.branch === branchToGetCurve, \"isOnBranchToGetCurve\");\n  const isBetweenCommits = /* @__PURE__ */__name(x => x.seq > commitA.seq && x.seq < commitB.seq, \"isBetweenCommits\");\n  return [...allCommits.values()].some(commitX => {\n    return isBetweenCommits(commitX) && isOnBranchToGetCurve(commitX);\n  });\n}, \"shouldRerouteArrow\");\nvar findLane = /* @__PURE__ */__name(function (y1, y2) {\n  let depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const candidate = y1 + Math.abs(y1 - y2) / 2;\n  if (depth > 5) {\n    return candidate;\n  }\n  const ok = lanes.every(lane => Math.abs(lane - candidate) >= 10);\n  if (ok) {\n    lanes.push(candidate);\n    return candidate;\n  }\n  const diff = Math.abs(y1 - y2);\n  return findLane(y1, y2 - diff / 5, depth + 1);\n}, \"findLane\");\nvar drawArrow = /* @__PURE__ */__name((svg, commitA, commitB, allCommits) => {\n  var _branchPos$get4;\n  const p1 = commitPos.get(commitA.id);\n  const p2 = commitPos.get(commitB.id);\n  if (p1 === void 0 || p2 === void 0) {\n    throw new Error(\"Commit positions not found for commits \".concat(commitA.id, \" and \").concat(commitB.id));\n  }\n  const arrowNeedsRerouting = shouldRerouteArrow(commitA, commitB, p1, p2, allCommits);\n  let arc = \"\";\n  let arc2 = \"\";\n  let radius = 0;\n  let offset = 0;\n  let colorClassNum = (_branchPos$get4 = branchPos.get(commitB.branch)) === null || _branchPos$get4 === void 0 ? void 0 : _branchPos$get4.index;\n  if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n    var _branchPos$get5;\n    colorClassNum = (_branchPos$get5 = branchPos.get(commitA.branch)) === null || _branchPos$get5 === void 0 ? void 0 : _branchPos$get5.index;\n  }\n  let lineDef;\n  if (arrowNeedsRerouting) {\n    arc = \"A 10 10, 0, 0, 0,\";\n    arc2 = \"A 10 10, 0, 0, 1,\";\n    radius = 10;\n    offset = 10;\n    const lineY = p1.y < p2.y ? findLane(p1.y, p2.y) : findLane(p2.y, p1.y);\n    const lineX = p1.x < p2.x ? findLane(p1.x, p2.x) : findLane(p2.x, p1.x);\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(lineX - radius, \" \").concat(p1.y, \" \").concat(arc2, \" \").concat(lineX, \" \").concat(p1.y + offset, \" L \").concat(lineX, \" \").concat(p2.y - radius, \" \").concat(arc, \" \").concat(lineX + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      } else {\n        var _branchPos$get6;\n        colorClassNum = (_branchPos$get6 = branchPos.get(commitA.branch)) === null || _branchPos$get6 === void 0 ? void 0 : _branchPos$get6.index;\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(lineX + radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(lineX, \" \").concat(p1.y + offset, \" L \").concat(lineX, \" \").concat(p2.y - radius, \" \").concat(arc2, \" \").concat(lineX - offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(lineX - radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(lineX, \" \").concat(p1.y - offset, \" L \").concat(lineX, \" \").concat(p2.y + radius, \" \").concat(arc2, \" \").concat(lineX + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      } else {\n        var _branchPos$get7;\n        colorClassNum = (_branchPos$get7 = branchPos.get(commitA.branch)) === null || _branchPos$get7 === void 0 ? void 0 : _branchPos$get7.index;\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(lineX + radius, \" \").concat(p1.y, \" \").concat(arc2, \" \").concat(lineX, \" \").concat(p1.y - offset, \" L \").concat(lineX, \" \").concat(p2.y + radius, \" \").concat(arc, \" \").concat(lineX - offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    } else {\n      if (p1.y < p2.y) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(lineY - radius, \" \").concat(arc, \" \").concat(p1.x + offset, \" \").concat(lineY, \" L \").concat(p2.x - radius, \" \").concat(lineY, \" \").concat(arc2, \" \").concat(p2.x, \" \").concat(lineY + offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n      } else {\n        var _branchPos$get8;\n        colorClassNum = (_branchPos$get8 = branchPos.get(commitA.branch)) === null || _branchPos$get8 === void 0 ? void 0 : _branchPos$get8.index;\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(lineY + radius, \" \").concat(arc2, \" \").concat(p1.x + offset, \" \").concat(lineY, \" L \").concat(p2.x - radius, \" \").concat(lineY, \" \").concat(arc, \" \").concat(p2.x, \" \").concat(lineY - offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    }\n  } else {\n    arc = \"A 20 20, 0, 0, 0,\";\n    arc2 = \"A 20 20, 0, 0, 1,\";\n    radius = 20;\n    offset = 20;\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y - radius, \" \").concat(arc, \" \").concat(p1.x + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x - radius, \" \").concat(p1.y, \" \").concat(arc2, \" \").concat(p2.x, \" \").concat(p1.y + offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y - radius, \" \").concat(arc2, \" \").concat(p1.x - offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x + radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(p2.x, \" \").concat(p1.y + offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y + radius, \" \").concat(arc2, \" \").concat(p1.x + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x - radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(p2.x, \" \").concat(p1.y - offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y + radius, \" \").concat(arc, \" \").concat(p1.x - offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x - radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(p2.x, \" \").concat(p1.y - offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    } else {\n      if (p1.y < p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x - radius, \" \").concat(p1.y, \" \").concat(arc2, \" \").concat(p2.x, \" \").concat(p1.y + offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y - radius, \" \").concat(arc, \" \").concat(p1.x + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.y > p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x - radius, \" \").concat(p1.y, \" \").concat(arc, \" \").concat(p2.x, \" \").concat(p1.y - offset, \" L \").concat(p2.x, \" \").concat(p2.y);\n        } else {\n          lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p1.x, \" \").concat(p2.y + radius, \" \").concat(arc2, \" \").concat(p1.x + offset, \" \").concat(p2.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n        }\n      }\n      if (p1.y === p2.y) {\n        lineDef = \"M \".concat(p1.x, \" \").concat(p1.y, \" L \").concat(p2.x, \" \").concat(p2.y);\n      }\n    }\n  }\n  if (lineDef === void 0) {\n    throw new Error(\"Line definition not found\");\n  }\n  svg.append(\"path\").attr(\"d\", lineDef).attr(\"class\", \"arrow arrow\" + colorClassNum % THEME_COLOR_LIMIT);\n}, \"drawArrow\");\nvar drawArrows = /* @__PURE__ */__name((svg, commits) => {\n  const gArrows = svg.append(\"g\").attr(\"class\", \"commit-arrows\");\n  [...commits.keys()].forEach(key => {\n    const commit2 = commits.get(key);\n    if (commit2.parents && commit2.parents.length > 0) {\n      commit2.parents.forEach(parent => {\n        drawArrow(gArrows, commits.get(parent), commit2, commits);\n      });\n    }\n  });\n}, \"drawArrows\");\nvar drawBranches = /* @__PURE__ */__name((svg, branches) => {\n  const g = svg.append(\"g\");\n  branches.forEach((branch2, index) => {\n    var _branchPos$get9;\n    const adjustIndexForTheme = index % THEME_COLOR_LIMIT;\n    const pos = (_branchPos$get9 = branchPos.get(branch2.name)) === null || _branchPos$get9 === void 0 ? void 0 : _branchPos$get9.pos;\n    if (pos === void 0) {\n      throw new Error(\"Position not found for branch \".concat(branch2.name));\n    }\n    const line = g.append(\"line\");\n    line.attr(\"x1\", 0);\n    line.attr(\"y1\", pos);\n    line.attr(\"x2\", maxPos);\n    line.attr(\"y2\", pos);\n    line.attr(\"class\", \"branch branch\" + adjustIndexForTheme);\n    if (dir === \"TB\") {\n      line.attr(\"y1\", defaultPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", maxPos);\n      line.attr(\"x2\", pos);\n    } else if (dir === \"BT\") {\n      line.attr(\"y1\", maxPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", defaultPos);\n      line.attr(\"x2\", pos);\n    }\n    lanes.push(pos);\n    const name = branch2.name;\n    const labelElement = drawText(name);\n    const bkg = g.insert(\"rect\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\" + adjustIndexForTheme);\n    label.node().appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    bkg.attr(\"class\", \"branchLabelBkg label\" + adjustIndexForTheme).attr(\"rx\", 4).attr(\"ry\", 4).attr(\"x\", -bbox.width - 4 - ((DEFAULT_GITGRAPH_CONFIG2 === null || DEFAULT_GITGRAPH_CONFIG2 === void 0 ? void 0 : DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) === true ? 30 : 0)).attr(\"y\", -bbox.height / 2 + 8).attr(\"width\", bbox.width + 18).attr(\"height\", bbox.height + 4);\n    label.attr(\"transform\", \"translate(\" + (-bbox.width - 14 - ((DEFAULT_GITGRAPH_CONFIG2 === null || DEFAULT_GITGRAPH_CONFIG2 === void 0 ? void 0 : DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) === true ? 30 : 0)) + \", \" + (pos - bbox.height / 2 - 1) + \")\");\n    if (dir === \"TB\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", 0);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", 0)\");\n    } else if (dir === \"BT\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", maxPos);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", \" + maxPos + \")\");\n    } else {\n      bkg.attr(\"transform\", \"translate(-19, \" + (pos - bbox.height / 2) + \")\");\n    }\n  });\n}, \"drawBranches\");\nvar setBranchPosition = /* @__PURE__ */__name(function (name, pos, index, bbox, rotateCommitLabel) {\n  branchPos.set(name, {\n    pos,\n    index\n  });\n  pos += 50 + (rotateCommitLabel ? 40 : 0) + (dir === \"TB\" || dir === \"BT\" ? bbox.width / 2 : 0);\n  return pos;\n}, \"setBranchPosition\");\nvar draw = /* @__PURE__ */__name(function (txt, id, ver, diagObj) {\n  var _DEFAULT_GITGRAPH_CON2, _DEFAULT_GITGRAPH_CON3;\n  clear3();\n  log.debug(\"in gitgraph renderer\", txt + \"\\n\", \"id:\", id, ver);\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const rotateCommitLabel = (_DEFAULT_GITGRAPH_CON2 = DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) !== null && _DEFAULT_GITGRAPH_CON2 !== void 0 ? _DEFAULT_GITGRAPH_CON2 : false;\n  const db2 = diagObj.db;\n  allCommitsDict = db2.getCommits();\n  const branches = db2.getBranchesAsObjArray();\n  dir = db2.getDirection();\n  const diagram2 = select(\"[id=\\\"\".concat(id, \"\\\"]\"));\n  let pos = 0;\n  branches.forEach((branch2, index) => {\n    var _label$node;\n    const labelElement = drawText(branch2.name);\n    const g = diagram2.append(\"g\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\");\n    (_label$node = label.node()) === null || _label$node === void 0 || _label$node.appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    pos = setBranchPosition(branch2.name, pos, index, bbox, rotateCommitLabel);\n    label.remove();\n    branchLabel.remove();\n    g.remove();\n  });\n  drawCommits(diagram2, allCommitsDict, false);\n  if (DEFAULT_GITGRAPH_CONFIG2.showBranches) {\n    drawBranches(diagram2, branches);\n  }\n  drawArrows(diagram2, allCommitsDict);\n  drawCommits(diagram2, allCommitsDict, true);\n  utils_default.insertTitle(diagram2, \"gitTitleText\", (_DEFAULT_GITGRAPH_CON3 = DEFAULT_GITGRAPH_CONFIG2.titleTopMargin) !== null && _DEFAULT_GITGRAPH_CON3 !== void 0 ? _DEFAULT_GITGRAPH_CON3 : 0, db2.getDiagramTitle());\n  setupGraphViewbox(void 0, diagram2, DEFAULT_GITGRAPH_CONFIG2.diagramPadding, DEFAULT_GITGRAPH_CONFIG2.useMaxWidth);\n}, \"draw\");\nvar gitGraphRenderer_default = {\n  draw\n};\nif (void 0) {\n  const {\n    it,\n    expect,\n    describe\n  } = void 0;\n  describe(\"drawText\", () => {\n    it(\"should drawText\", () => {\n      const svgLabel = drawText(\"main\");\n      expect(svgLabel).toBeDefined();\n      expect(svgLabel.children[0].innerHTML).toBe(\"main\");\n    });\n  });\n  describe(\"branchPosition\", () => {\n    const bbox = {\n      x: 0,\n      y: 0,\n      width: 10,\n      height: 10,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      toJSON: /* @__PURE__ */__name(() => \"\", \"toJSON\")\n    };\n    it(\"should setBranchPositions LR with two branches\", () => {\n      dir = \"LR\";\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(90);\n      expect(branchPos.get(\"main\")).toEqual({\n        pos: 0,\n        index: 0\n      });\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(180);\n      expect(branchPos.get(\"develop\")).toEqual({\n        pos,\n        index: 1\n      });\n    });\n    it(\"should setBranchPositions TB with two branches\", () => {\n      dir = \"TB\";\n      bbox.width = 34.9921875;\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(107.49609375);\n      expect(branchPos.get(\"main\")).toEqual({\n        pos: 0,\n        index: 0\n      });\n      bbox.width = 56.421875;\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(225.70703125);\n      expect(branchPos.get(\"develop\")).toEqual({\n        pos,\n        index: 1\n      });\n    });\n  });\n  describe(\"commitPosition\", () => {\n    const commits = /* @__PURE__ */new Map([[\"commitZero\", {\n      id: \"ZERO\",\n      message: \"\",\n      seq: 0,\n      type: commitType.NORMAL,\n      tags: [],\n      parents: [],\n      branch: \"main\"\n    }], [\"commitA\", {\n      id: \"A\",\n      message: \"\",\n      seq: 1,\n      type: commitType.NORMAL,\n      tags: [],\n      parents: [\"ZERO\"],\n      branch: \"feature\"\n    }], [\"commitB\", {\n      id: \"B\",\n      message: \"\",\n      seq: 2,\n      type: commitType.NORMAL,\n      tags: [],\n      parents: [\"A\"],\n      branch: \"feature\"\n    }], [\"commitM\", {\n      id: \"M\",\n      message: \"merged branch feature into main\",\n      seq: 3,\n      type: commitType.MERGE,\n      tags: [],\n      parents: [\"ZERO\", \"B\"],\n      branch: \"main\",\n      customId: true\n    }], [\"commitC\", {\n      id: \"C\",\n      message: \"\",\n      seq: 4,\n      type: commitType.NORMAL,\n      tags: [],\n      parents: [\"ZERO\"],\n      branch: \"release\"\n    }], [\"commit5_8928ea0\", {\n      id: \"5-8928ea0\",\n      message: \"cherry-picked [object Object] into release\",\n      seq: 5,\n      type: commitType.CHERRY_PICK,\n      tags: [],\n      parents: [\"C\", \"M\"],\n      branch: \"release\"\n    }], [\"commitD\", {\n      id: \"D\",\n      message: \"\",\n      seq: 6,\n      type: commitType.NORMAL,\n      tags: [],\n      parents: [\"5-8928ea0\"],\n      branch: \"release\"\n    }], [\"commit7_ed848ba\", {\n      id: \"7-ed848ba\",\n      message: \"cherry-picked [object Object] into release\",\n      seq: 7,\n      type: commitType.CHERRY_PICK,\n      tags: [],\n      parents: [\"D\", \"M\"],\n      branch: \"release\"\n    }]]);\n    let pos = 0;\n    branchPos.set(\"main\", {\n      pos: 0,\n      index: 0\n    });\n    branchPos.set(\"feature\", {\n      pos: 107.49609375,\n      index: 1\n    });\n    branchPos.set(\"release\", {\n      pos: 224.03515625,\n      index: 2\n    });\n    describe(\"TB\", () => {\n      pos = 30;\n      dir = \"TB\";\n      const expectedCommitPositionTB = /* @__PURE__ */new Map([[\"commitZero\", {\n        x: 0,\n        y: 40,\n        posWithOffset: 40\n      }], [\"commitA\", {\n        x: 107.49609375,\n        y: 90,\n        posWithOffset: 90\n      }], [\"commitB\", {\n        x: 107.49609375,\n        y: 140,\n        posWithOffset: 140\n      }], [\"commitM\", {\n        x: 0,\n        y: 190,\n        posWithOffset: 190\n      }], [\"commitC\", {\n        x: 224.03515625,\n        y: 240,\n        posWithOffset: 240\n      }], [\"commit5_8928ea0\", {\n        x: 224.03515625,\n        y: 290,\n        posWithOffset: 290\n      }], [\"commitD\", {\n        x: 224.03515625,\n        y: 340,\n        posWithOffset: 340\n      }], [\"commit7_ed848ba\", {\n        x: 224.03515625,\n        y: 390,\n        posWithOffset: 390\n      }]]);\n      commits.forEach((commit2, key) => {\n        it(\"should give the correct position for commit \".concat(key), () => {\n          const position = getCommitPosition(commit2, pos, false);\n          expect(position).toEqual(expectedCommitPositionTB.get(key));\n          pos += 50;\n        });\n      });\n    });\n    describe(\"LR\", () => {\n      let pos2 = 30;\n      dir = \"LR\";\n      const expectedCommitPositionLR = /* @__PURE__ */new Map([[\"commitZero\", {\n        x: 0,\n        y: 40,\n        posWithOffset: 40\n      }], [\"commitA\", {\n        x: 107.49609375,\n        y: 90,\n        posWithOffset: 90\n      }], [\"commitB\", {\n        x: 107.49609375,\n        y: 140,\n        posWithOffset: 140\n      }], [\"commitM\", {\n        x: 0,\n        y: 190,\n        posWithOffset: 190\n      }], [\"commitC\", {\n        x: 224.03515625,\n        y: 240,\n        posWithOffset: 240\n      }], [\"commit5_8928ea0\", {\n        x: 224.03515625,\n        y: 290,\n        posWithOffset: 290\n      }], [\"commitD\", {\n        x: 224.03515625,\n        y: 340,\n        posWithOffset: 340\n      }], [\"commit7_ed848ba\", {\n        x: 224.03515625,\n        y: 390,\n        posWithOffset: 390\n      }]]);\n      commits.forEach((commit2, key) => {\n        it(\"should give the correct position for commit \".concat(key), () => {\n          const position = getCommitPosition(commit2, pos2, false);\n          expect(position).toEqual(expectedCommitPositionLR.get(key));\n          pos2 += 50;\n        });\n      });\n    });\n    describe(\"getCommitClassType\", () => {\n      const expectedCommitClassType = /* @__PURE__ */new Map([[\"commitZero\", \"commit-normal\"], [\"commitA\", \"commit-normal\"], [\"commitB\", \"commit-normal\"], [\"commitM\", \"commit-merge\"], [\"commitC\", \"commit-normal\"], [\"commit5_8928ea0\", \"commit-cherry-pick\"], [\"commitD\", \"commit-normal\"], [\"commit7_ed848ba\", \"commit-cherry-pick\"]]);\n      commits.forEach((commit2, key) => {\n        it(\"should give the correct class type for commit \".concat(key), () => {\n          const classType = getCommitClassType(commit2);\n          expect(classType).toBe(expectedCommitClassType.get(key));\n        });\n      });\n    });\n  });\n  describe(\"building BT parallel commit diagram\", () => {\n    const commits = /* @__PURE__ */new Map([[\"1-abcdefg\", {\n      id: \"1-abcdefg\",\n      message: \"\",\n      seq: 0,\n      type: 0,\n      tags: [],\n      parents: [],\n      branch: \"main\"\n    }], [\"2-abcdefg\", {\n      id: \"2-abcdefg\",\n      message: \"\",\n      seq: 1,\n      type: 0,\n      tags: [],\n      parents: [\"1-abcdefg\"],\n      branch: \"main\"\n    }], [\"3-abcdefg\", {\n      id: \"3-abcdefg\",\n      message: \"\",\n      seq: 2,\n      type: 0,\n      tags: [],\n      parents: [\"2-abcdefg\"],\n      branch: \"develop\"\n    }], [\"4-abcdefg\", {\n      id: \"4-abcdefg\",\n      message: \"\",\n      seq: 3,\n      type: 0,\n      tags: [],\n      parents: [\"3-abcdefg\"],\n      branch: \"develop\"\n    }], [\"5-abcdefg\", {\n      id: \"5-abcdefg\",\n      message: \"\",\n      seq: 4,\n      type: 0,\n      tags: [],\n      parents: [\"2-abcdefg\"],\n      branch: \"feature\"\n    }], [\"6-abcdefg\", {\n      id: \"6-abcdefg\",\n      message: \"\",\n      seq: 5,\n      type: 0,\n      tags: [],\n      parents: [\"5-abcdefg\"],\n      branch: \"feature\"\n    }], [\"7-abcdefg\", {\n      id: \"7-abcdefg\",\n      message: \"\",\n      seq: 6,\n      type: 0,\n      tags: [],\n      parents: [\"2-abcdefg\"],\n      branch: \"main\"\n    }], [\"8-abcdefg\", {\n      id: \"8-abcdefg\",\n      message: \"\",\n      seq: 7,\n      type: 0,\n      tags: [],\n      parents: [\"7-abcdefg\"],\n      branch: \"main\"\n    }]]);\n    const expectedCommitPosition = /* @__PURE__ */new Map([[\"1-abcdefg\", {\n      x: 0,\n      y: 40\n    }], [\"2-abcdefg\", {\n      x: 0,\n      y: 90\n    }], [\"3-abcdefg\", {\n      x: 107.49609375,\n      y: 140\n    }], [\"4-abcdefg\", {\n      x: 107.49609375,\n      y: 190\n    }], [\"5-abcdefg\", {\n      x: 225.70703125,\n      y: 140\n    }], [\"6-abcdefg\", {\n      x: 225.70703125,\n      y: 190\n    }], [\"7-abcdefg\", {\n      x: 0,\n      y: 140\n    }], [\"8-abcdefg\", {\n      x: 0,\n      y: 190\n    }]]);\n    const expectedCommitPositionAfterParallel = /* @__PURE__ */new Map([[\"1-abcdefg\", {\n      x: 0,\n      y: 210\n    }], [\"2-abcdefg\", {\n      x: 0,\n      y: 160\n    }], [\"3-abcdefg\", {\n      x: 107.49609375,\n      y: 110\n    }], [\"4-abcdefg\", {\n      x: 107.49609375,\n      y: 60\n    }], [\"5-abcdefg\", {\n      x: 225.70703125,\n      y: 110\n    }], [\"6-abcdefg\", {\n      x: 225.70703125,\n      y: 60\n    }], [\"7-abcdefg\", {\n      x: 0,\n      y: 110\n    }], [\"8-abcdefg\", {\n      x: 0,\n      y: 60\n    }]]);\n    const expectedCommitCurrentPosition = /* @__PURE__ */new Map([[\"1-abcdefg\", 30], [\"2-abcdefg\", 80], [\"3-abcdefg\", 130], [\"4-abcdefg\", 180], [\"5-abcdefg\", 130], [\"6-abcdefg\", 180], [\"7-abcdefg\", 130], [\"8-abcdefg\", 180]]);\n    const sortedKeys = [...expectedCommitPosition.keys()];\n    it(\"should get the correct commit position and current position\", () => {\n      dir = \"BT\";\n      let curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", {\n        pos: 0,\n        index: 0\n      });\n      branchPos.set(\"develop\", {\n        pos: 107.49609375,\n        index: 1\n      });\n      branchPos.set(\"feature\", {\n        pos: 225.70703125,\n        index: 2\n      });\n      DEFAULT_GITGRAPH_CONFIG2.parallelCommits = true;\n      commits.forEach((commit2, key) => {\n        if (commit2.parents.length > 0) {\n          curPos = calculateCommitPosition(commit2);\n        }\n        const position = setCommitPosition(commit2, curPos);\n        expect(position).toEqual(expectedCommitPosition.get(key));\n        expect(curPos).toEqual(expectedCommitCurrentPosition.get(key));\n      });\n    });\n    it(\"should get the correct commit position after parallel commits\", () => {\n      commitPos.clear();\n      branchPos.clear();\n      dir = \"BT\";\n      const curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", {\n        pos: 0,\n        index: 0\n      });\n      branchPos.set(\"develop\", {\n        pos: 107.49609375,\n        index: 1\n      });\n      branchPos.set(\"feature\", {\n        pos: 225.70703125,\n        index: 2\n      });\n      setParallelBTPos(sortedKeys, commits, curPos);\n      sortedKeys.forEach(commit2 => {\n        const position = commitPos.get(commit2);\n        expect(position).toEqual(expectedCommitPositionAfterParallel.get(commit2));\n      });\n    });\n  });\n  DEFAULT_GITGRAPH_CONFIG2.parallelCommits = false;\n  it(\"add\", () => {\n    commitPos.set(\"parent1\", {\n      x: 1,\n      y: 1\n    });\n    commitPos.set(\"parent2\", {\n      x: 2,\n      y: 2\n    });\n    commitPos.set(\"parent3\", {\n      x: 3,\n      y: 3\n    });\n    dir = \"LR\";\n    const parents = [\"parent1\", \"parent2\", \"parent3\"];\n    const closestParent = findClosestParent(parents);\n    expect(closestParent).toBe(\"parent3\");\n    commitPos.clear();\n  });\n}\n\n// src/diagrams/git/styles.js\nvar getStyles = /* @__PURE__ */__name(options => \"\\n  .commit-id,\\n  .commit-msg,\\n  .branch-label {\\n    fill: lightgrey;\\n    color: lightgrey;\\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\\n    font-family: var(--mermaid-font-family);\\n  }\\n  \".concat([0, 1, 2, 3, 4, 5, 6, 7].map(i => \"\\n        .branch-label\".concat(i, \" { fill: \").concat(options[\"gitBranchLabel\" + i], \"; }\\n        .commit\").concat(i, \" { stroke: \").concat(options[\"git\" + i], \"; fill: \").concat(options[\"git\" + i], \"; }\\n        .commit-highlight\").concat(i, \" { stroke: \").concat(options[\"gitInv\" + i], \"; fill: \").concat(options[\"gitInv\" + i], \"; }\\n        .label\").concat(i, \"  { fill: \").concat(options[\"git\" + i], \"; }\\n        .arrow\").concat(i, \" { stroke: \").concat(options[\"git\" + i], \"; }\\n        \")).join(\"\\n\"), \"\\n\\n  .branch {\\n    stroke-width: 1;\\n    stroke: \").concat(options.lineColor, \";\\n    stroke-dasharray: 2;\\n  }\\n  .commit-label { font-size: \").concat(options.commitLabelFontSize, \"; fill: \").concat(options.commitLabelColor, \";}\\n  .commit-label-bkg { font-size: \").concat(options.commitLabelFontSize, \"; fill: \").concat(options.commitLabelBackground, \"; opacity: 0.5; }\\n  .tag-label { font-size: \").concat(options.tagLabelFontSize, \"; fill: \").concat(options.tagLabelColor, \";}\\n  .tag-label-bkg { fill: \").concat(options.tagLabelBackground, \"; stroke: \").concat(options.tagLabelBorder, \"; }\\n  .tag-hole { fill: \").concat(options.textColor, \"; }\\n\\n  .commit-merge {\\n    stroke: \").concat(options.primaryColor, \";\\n    fill: \").concat(options.primaryColor, \";\\n  }\\n  .commit-reverse {\\n    stroke: \").concat(options.primaryColor, \";\\n    fill: \").concat(options.primaryColor, \";\\n    stroke-width: 3;\\n  }\\n  .commit-highlight-outer {\\n  }\\n  .commit-highlight-inner {\\n    stroke: \").concat(options.primaryColor, \";\\n    fill: \").concat(options.primaryColor, \";\\n  }\\n\\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\\n  .gitTitleText {\\n    text-anchor: middle;\\n    font-size: 18px;\\n    fill: \").concat(options.textColor, \";\\n  }\\n\"), \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/git/gitGraphDiagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer: gitGraphRenderer_default,\n  styles: styles_default\n};\nexport { diagram };","map":{"version":3,"names":["populateCommonDb","ImperativeState","cleanAndMerge","random","utils_default","clear","common_default","defaultConfig_default","getAccDescription","getAccTitle","getConfig","getConfig2","getDiagramTitle","setAccDescription","setAccTitle","setDiagramTitle","setupGraphViewbox2","setupGraphViewbox","__name","log","parse","commitType","NORMAL","REVERSE","HIGHLIGHT","MERGE","CHERRY_PICK","DEFAULT_GITGRAPH_CONFIG","gitGraph","getConfig3","config","_objectSpread","state","mainBranchName","mainBranchOrder","commits","Map","head","branchConfig","name","order","branches","currBranch","direction","seq","options","getID","length","uniqBy","list","fn","recordMap","Object","create","reduce","out","item","key","push","setDirection","dir2","records","setOptions","rawOptString","_rawOptString","debug","trim","JSON","e","error","message","getOptions","commit","commitDB","_tags","msg","id","type","tags","info","sanitizeText","map","tag","newCommit","parents","branch","has","warn","concat","set","branchDB","Error","checkout","merge","mergeDB","otherBranch","customId","overrideType","customTags","currentBranchCheck","get","otherBranchCheck","currentCommit","otherCommit","hash","text","token","expected","join","verifiedBranch","commit2","customType","cherryPick","cherryPickDB","_tags2","sourceId","targetId","parentCommitId","parent","sourceCommit","Array","isArray","includes","sourceCommitBranch","currentCommitId","filter","Boolean","branch2","_state$records$commit","upsert","arr","newVal","index","indexOf","splice","prettyPrintCommitHistory","commitArr","commit3","line","forEach","c","label","prettyPrint","node","getCommitsArray","clear2","reset","getBranchesAsObjArray","branchesArray","values","i","parseFloat","sort","a","b","_a$order","_b$order","_ref","getBranches","getCommits","o","getCurrentBranch","getDirection","getHead","db","populate","ast","db2","dir","statement","statements","parseStatement","parsers","Commit","stmt","parseCommit","Branch","parseBranch","Merge","parseMerge","Checkout","parseCheckout","CherryPicking","parseCherryPicking","parser2","$type","_commit2$message","_commit2$tags","_branch2$order","merge2","_merge2$id","_merge2$tags","checkout2","cherryPicking","_cherryPicking$tags","parser","input","it","expect","describe","mockDB","vi","toHaveBeenCalledWith","cherryPick2","dummy","gitGraphAst","$container","select","DEFAULT_CONFIG","DEFAULT_GITGRAPH_CONFIG2","LAYOUT_OFFSET","COMMIT_STEP","PX","PY","THEME_COLOR_LIMIT","branchPos","commitPos","defaultPos","allCommitsDict","lanes","maxPos","clear3","drawText","txt","svgLabel","document","createElementNS","rows","split","row","tspan","setAttributeNS","setAttribute","textContent","appendChild","findClosestParent","closestParent","comparisonFunc","targetPosition","Infinity","_commitPos$get","_commitPos$get2","parentPosition","y","x","findClosestParentBT","maxPosition","setParallelBTPos","sortedKeys","defaultPos2","curPos","roots","calculateCommitPosition","Math","max","setCommitPosition","setRootPosition","pos","findClosestParentPos","_commitPos$get3","p","closestParentPos","drawCommitBullet","gBullets","commitPosition","typeClass","branchIndex","commitSymbolType","append","attr","circle","circle2","cross","drawCommitLabel","gLabels","showCommitLabel","_text$node","wrapper","labelBkg","insert","bbox","getBBox","posWithOffset","width","height","rotateCommitLabel","r_x","r_y","drawCommitTags","yOffset","maxTagBboxWidth","maxTagBboxHeight","tagElements","tagValue","reverse","_tag$node","rect","hole","tagBbox","yOffset2","h2","ly","yOrigin","getCommitClassType","_commit2$customType","calculatePosition","commitPos2","defaultCommitPosition","_commitPos2$get","_commitPos2$get2","currentPosition","_commitPos2$get3","getCommitPosition","isParallelCommits","_branchPos$get","_branchPos$get2","drawCommits","svg","modifyGraph","_DEFAULT_GITGRAPH_CON","keys","parallelCommits","sortKeys","_commits$get","_commits$get2","seqA","seqB","_commit2$customType2","_branchPos$get$index","_branchPos$get3","shouldRerouteArrow","commitA","commitB","p1","p2","allCommits","commitBIsFurthest","branchToGetCurve","isOnBranchToGetCurve","isBetweenCommits","some","commitX","findLane","y1","y2","depth","arguments","undefined","candidate","abs","ok","every","lane","diff","drawArrow","_branchPos$get4","arrowNeedsRerouting","arc","arc2","radius","offset","colorClassNum","_branchPos$get5","lineDef","lineY","lineX","_branchPos$get6","_branchPos$get7","_branchPos$get8","drawArrows","gArrows","drawBranches","g","_branchPos$get9","adjustIndexForTheme","labelElement","bkg","branchLabel","setBranchPosition","draw","ver","diagObj","_DEFAULT_GITGRAPH_CON2","_DEFAULT_GITGRAPH_CON3","diagram2","_label$node","remove","showBranches","insertTitle","titleTopMargin","diagramPadding","useMaxWidth","gitGraphRenderer_default","toBeDefined","children","innerHTML","toBe","top","right","bottom","left","toJSON","toEqual","posNext","expectedCommitPositionTB","position","pos2","expectedCommitPositionLR","expectedCommitClassType","classType","expectedCommitPosition","expectedCommitPositionAfterParallel","expectedCommitCurrentPosition","getStyles","lineColor","commitLabelFontSize","commitLabelColor","commitLabelBackground","tagLabelFontSize","tagLabelColor","tagLabelBackground","tagLabelBorder","textColor","primaryColor","styles_default","diagram","renderer","styles"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/mermaid/dist/chunks/mermaid.core/gitGraphDiagram-NY62KEGX.mjs"],"sourcesContent":["import {\n  populateCommonDb\n} from \"./chunk-4BX2VUAB.mjs\";\nimport {\n  ImperativeState\n} from \"./chunk-QZHKN3VN.mjs\";\nimport {\n  cleanAndMerge,\n  random,\n  utils_default\n} from \"./chunk-S3R3BYOJ.mjs\";\nimport {\n  clear,\n  common_default,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig,\n  getConfig2,\n  getDiagramTitle,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle,\n  setupGraphViewbox2 as setupGraphViewbox\n} from \"./chunk-ABZYJK2D.mjs\";\nimport {\n  __name,\n  log\n} from \"./chunk-AGHRB4JF.mjs\";\n\n// src/diagrams/git/gitGraphParser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/git/gitGraphTypes.ts\nvar commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4\n};\n\n// src/diagrams/git/gitGraphAst.ts\nvar DEFAULT_GITGRAPH_CONFIG = defaultConfig_default.gitGraph;\nvar getConfig3 = /* @__PURE__ */ __name(() => {\n  const config = cleanAndMerge({\n    ...DEFAULT_GITGRAPH_CONFIG,\n    ...getConfig().gitGraph\n  });\n  return config;\n}, \"getConfig\");\nvar state = new ImperativeState(() => {\n  const config = getConfig3();\n  const mainBranchName = config.mainBranchName;\n  const mainBranchOrder = config.mainBranchOrder;\n  return {\n    mainBranchName,\n    commits: /* @__PURE__ */ new Map(),\n    head: null,\n    branchConfig: /* @__PURE__ */ new Map([[mainBranchName, { name: mainBranchName, order: mainBranchOrder }]]),\n    branches: /* @__PURE__ */ new Map([[mainBranchName, null]]),\n    currBranch: mainBranchName,\n    direction: \"LR\",\n    seq: 0,\n    options: {}\n  };\n});\nfunction getID() {\n  return random({ length: 7 });\n}\n__name(getID, \"getID\");\nfunction uniqBy(list, fn) {\n  const recordMap = /* @__PURE__ */ Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n__name(uniqBy, \"uniqBy\");\nvar setDirection = /* @__PURE__ */ __name(function(dir2) {\n  state.records.direction = dir2;\n}, \"setDirection\");\nvar setOptions = /* @__PURE__ */ __name(function(rawOptString) {\n  log.debug(\"options str\", rawOptString);\n  rawOptString = rawOptString?.trim();\n  rawOptString = rawOptString || \"{}\";\n  try {\n    state.records.options = JSON.parse(rawOptString);\n  } catch (e) {\n    log.error(\"error while parsing gitGraph options\", e.message);\n  }\n}, \"setOptions\");\nvar getOptions = /* @__PURE__ */ __name(function() {\n  return state.records.options;\n}, \"getOptions\");\nvar commit = /* @__PURE__ */ __name(function(commitDB) {\n  let msg = commitDB.msg;\n  let id = commitDB.id;\n  const type = commitDB.type;\n  let tags = commitDB.tags;\n  log.info(\"commit\", msg, id, type, tags);\n  log.debug(\"Entering commit:\", msg, id, type, tags);\n  const config = getConfig3();\n  id = common_default.sanitizeText(id, config);\n  msg = common_default.sanitizeText(msg, config);\n  tags = tags?.map((tag) => common_default.sanitizeText(tag, config));\n  const newCommit = {\n    id: id ? id : state.records.seq + \"-\" + getID(),\n    message: msg,\n    seq: state.records.seq++,\n    type: type ?? commitType.NORMAL,\n    tags: tags ?? [],\n    parents: state.records.head == null ? [] : [state.records.head.id],\n    branch: state.records.currBranch\n  };\n  state.records.head = newCommit;\n  log.info(\"main branch\", config.mainBranchName);\n  if (state.records.commits.has(newCommit.id)) {\n    log.warn(`Commit ID ${newCommit.id} already exists`);\n  }\n  state.records.commits.set(newCommit.id, newCommit);\n  state.records.branches.set(state.records.currBranch, newCommit.id);\n  log.debug(\"in pushCommit \" + newCommit.id);\n}, \"commit\");\nvar branch = /* @__PURE__ */ __name(function(branchDB) {\n  let name = branchDB.name;\n  const order = branchDB.order;\n  name = common_default.sanitizeText(name, getConfig3());\n  if (state.records.branches.has(name)) {\n    throw new Error(\n      `Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using \"checkout ${name}\")`\n    );\n  }\n  state.records.branches.set(name, state.records.head != null ? state.records.head.id : null);\n  state.records.branchConfig.set(name, { name, order });\n  checkout(name);\n  log.debug(\"in createBranch\");\n}, \"branch\");\nvar merge = /* @__PURE__ */ __name((mergeDB) => {\n  let otherBranch = mergeDB.branch;\n  let customId = mergeDB.id;\n  const overrideType = mergeDB.type;\n  const customTags = mergeDB.tags;\n  const config = getConfig3();\n  otherBranch = common_default.sanitizeText(otherBranch, config);\n  if (customId) {\n    customId = common_default.sanitizeText(customId, config);\n  }\n  const currentBranchCheck = state.records.branches.get(state.records.currBranch);\n  const otherBranchCheck = state.records.branches.get(otherBranch);\n  const currentCommit = currentBranchCheck ? state.records.commits.get(currentBranchCheck) : void 0;\n  const otherCommit = otherBranchCheck ? state.records.commits.get(otherBranchCheck) : void 0;\n  if (currentCommit && otherCommit && currentCommit.branch === otherBranch) {\n    throw new Error(`Cannot merge branch '${otherBranch}' into itself.`);\n  }\n  if (state.records.currBranch === otherBranch) {\n    const error = new Error('Incorrect usage of \"merge\". Cannot merge a branch to itself');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (currentCommit === void 0 || !currentCommit) {\n    const error = new Error(\n      `Incorrect usage of \"merge\". Current branch (${state.records.currBranch})has no commits`\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"commit\"]\n    };\n    throw error;\n  }\n  if (!state.records.branches.has(otherBranch)) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") does not exist\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [`branch ${otherBranch}`]\n    };\n    throw error;\n  }\n  if (otherCommit === void 0 || !otherCommit) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") has no commits\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: ['\"commit\"']\n    };\n    throw error;\n  }\n  if (currentCommit === otherCommit) {\n    const error = new Error('Incorrect usage of \"merge\". Both branches have same head');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (customId && state.records.commits.has(customId)) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Commit with id:' + customId + \" already exists, use different custom id\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(\" \")}`,\n      token: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(\" \")}`,\n      expected: [\n        `merge ${otherBranch} ${customId}_UNIQUE ${overrideType} ${customTags?.join(\" \")}`\n      ]\n    };\n    throw error;\n  }\n  const verifiedBranch = otherBranchCheck ? otherBranchCheck : \"\";\n  const commit2 = {\n    id: customId || `${state.records.seq}-${getID()}`,\n    message: `merged branch ${otherBranch} into ${state.records.currBranch}`,\n    seq: state.records.seq++,\n    parents: state.records.head == null ? [] : [state.records.head.id, verifiedBranch],\n    branch: state.records.currBranch,\n    type: commitType.MERGE,\n    customType: overrideType,\n    customId: customId ? true : false,\n    tags: customTags ?? []\n  };\n  state.records.head = commit2;\n  state.records.commits.set(commit2.id, commit2);\n  state.records.branches.set(state.records.currBranch, commit2.id);\n  log.debug(state.records.branches);\n  log.debug(\"in mergeBranch\");\n}, \"merge\");\nvar cherryPick = /* @__PURE__ */ __name(function(cherryPickDB) {\n  let sourceId = cherryPickDB.id;\n  let targetId = cherryPickDB.targetId;\n  let tags = cherryPickDB.tags;\n  let parentCommitId = cherryPickDB.parent;\n  log.debug(\"Entering cherryPick:\", sourceId, targetId, tags);\n  const config = getConfig3();\n  sourceId = common_default.sanitizeText(sourceId, config);\n  targetId = common_default.sanitizeText(targetId, config);\n  tags = tags?.map((tag) => common_default.sanitizeText(tag, config));\n  parentCommitId = common_default.sanitizeText(parentCommitId, config);\n  if (!sourceId || !state.records.commits.has(sourceId)) {\n    const error = new Error(\n      'Incorrect usage of \"cherryPick\". Source commit id should exist and provided'\n    );\n    error.hash = {\n      text: `cherryPick ${sourceId} ${targetId}`,\n      token: `cherryPick ${sourceId} ${targetId}`,\n      expected: [\"cherry-pick abc\"]\n    };\n    throw error;\n  }\n  const sourceCommit = state.records.commits.get(sourceId);\n  if (sourceCommit === void 0 || !sourceCommit) {\n    throw new Error('Incorrect usage of \"cherryPick\". Source commit id should exist and provided');\n  }\n  if (parentCommitId && !(Array.isArray(sourceCommit.parents) && sourceCommit.parents.includes(parentCommitId))) {\n    const error = new Error(\n      \"Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.\"\n    );\n    throw error;\n  }\n  const sourceCommitBranch = sourceCommit.branch;\n  if (sourceCommit.type === commitType.MERGE && !parentCommitId) {\n    const error = new Error(\n      \"Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.\"\n    );\n    throw error;\n  }\n  if (!targetId || !state.records.commits.has(targetId)) {\n    if (sourceCommitBranch === state.records.currBranch) {\n      const error = new Error(\n        'Incorrect usage of \"cherryPick\". Source commit is already on current branch'\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommitId = state.records.branches.get(state.records.currBranch);\n    if (currentCommitId === void 0 || !currentCommitId) {\n      const error = new Error(\n        `Incorrect usage of \"cherry-pick\". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommit = state.records.commits.get(currentCommitId);\n    if (currentCommit === void 0 || !currentCommit) {\n      const error = new Error(\n        `Incorrect usage of \"cherry-pick\". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const commit2 = {\n      id: state.records.seq + \"-\" + getID(),\n      message: `cherry-picked ${sourceCommit?.message} into ${state.records.currBranch}`,\n      seq: state.records.seq++,\n      parents: state.records.head == null ? [] : [state.records.head.id, sourceCommit.id],\n      branch: state.records.currBranch,\n      type: commitType.CHERRY_PICK,\n      tags: tags ? tags.filter(Boolean) : [\n        `cherry-pick:${sourceCommit.id}${sourceCommit.type === commitType.MERGE ? `|parent:${parentCommitId}` : \"\"}`\n      ]\n    };\n    state.records.head = commit2;\n    state.records.commits.set(commit2.id, commit2);\n    state.records.branches.set(state.records.currBranch, commit2.id);\n    log.debug(state.records.branches);\n    log.debug(\"in cherryPick\");\n  }\n}, \"cherryPick\");\nvar checkout = /* @__PURE__ */ __name(function(branch2) {\n  branch2 = common_default.sanitizeText(branch2, getConfig3());\n  if (!state.records.branches.has(branch2)) {\n    const error = new Error(\n      `Trying to checkout branch which is not yet created. (Help try using \"branch ${branch2}\")`\n    );\n    error.hash = {\n      text: `checkout ${branch2}`,\n      token: `checkout ${branch2}`,\n      expected: [`branch ${branch2}`]\n    };\n    throw error;\n  } else {\n    state.records.currBranch = branch2;\n    const id = state.records.branches.get(state.records.currBranch);\n    if (id === void 0 || !id) {\n      state.records.head = null;\n    } else {\n      state.records.head = state.records.commits.get(id) ?? null;\n    }\n  }\n}, \"checkout\");\nfunction upsert(arr, key, newVal) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newVal);\n  } else {\n    arr.splice(index, 1, newVal);\n  }\n}\n__name(upsert, \"upsert\");\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit2 = commitArr.reduce((out, commit3) => {\n    if (out.seq > commit3.seq) {\n      return out;\n    }\n    return commit3;\n  }, commitArr[0]);\n  let line = \"\";\n  commitArr.forEach(function(c) {\n    if (c === commit2) {\n      line += \"\t*\";\n    } else {\n      line += \"\t|\";\n    }\n  });\n  const label = [line, commit2.id, commit2.seq];\n  for (const branch2 in state.records.branches) {\n    if (state.records.branches.get(branch2) === commit2.id) {\n      label.push(branch2);\n    }\n  }\n  log.debug(label.join(\" \"));\n  if (commit2.parents && commit2.parents.length == 2 && commit2.parents[0] && commit2.parents[1]) {\n    const newCommit = state.records.commits.get(commit2.parents[0]);\n    upsert(commitArr, commit2, newCommit);\n    if (commit2.parents[1]) {\n      commitArr.push(state.records.commits.get(commit2.parents[1]));\n    }\n  } else if (commit2.parents.length == 0) {\n    return;\n  } else {\n    if (commit2.parents[0]) {\n      const newCommit = state.records.commits.get(commit2.parents[0]);\n      upsert(commitArr, commit2, newCommit);\n    }\n  }\n  commitArr = uniqBy(commitArr, (c) => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n__name(prettyPrintCommitHistory, \"prettyPrintCommitHistory\");\nvar prettyPrint = /* @__PURE__ */ __name(function() {\n  log.debug(state.records.commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n}, \"prettyPrint\");\nvar clear2 = /* @__PURE__ */ __name(function() {\n  state.reset();\n  clear();\n}, \"clear\");\nvar getBranchesAsObjArray = /* @__PURE__ */ __name(function() {\n  const branchesArray = [...state.records.branchConfig.values()].map((branchConfig, i) => {\n    if (branchConfig.order !== null && branchConfig.order !== void 0) {\n      return branchConfig;\n    }\n    return {\n      ...branchConfig,\n      order: parseFloat(`0.${i}`)\n    };\n  }).sort((a, b) => (a.order ?? 0) - (b.order ?? 0)).map(({ name }) => ({ name }));\n  return branchesArray;\n}, \"getBranchesAsObjArray\");\nvar getBranches = /* @__PURE__ */ __name(function() {\n  return state.records.branches;\n}, \"getBranches\");\nvar getCommits = /* @__PURE__ */ __name(function() {\n  return state.records.commits;\n}, \"getCommits\");\nvar getCommitsArray = /* @__PURE__ */ __name(function() {\n  const commitArr = [...state.records.commits.values()];\n  commitArr.forEach(function(o) {\n    log.debug(o.id);\n  });\n  commitArr.sort((a, b) => a.seq - b.seq);\n  return commitArr;\n}, \"getCommitsArray\");\nvar getCurrentBranch = /* @__PURE__ */ __name(function() {\n  return state.records.currBranch;\n}, \"getCurrentBranch\");\nvar getDirection = /* @__PURE__ */ __name(function() {\n  return state.records.direction;\n}, \"getDirection\");\nvar getHead = /* @__PURE__ */ __name(function() {\n  return state.records.head;\n}, \"getHead\");\nvar db = {\n  commitType,\n  getConfig: getConfig3,\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  cherryPick,\n  checkout,\n  //reset,\n  prettyPrint,\n  clear: clear2,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n  setAccTitle,\n  getAccTitle,\n  getAccDescription,\n  setAccDescription,\n  setDiagramTitle,\n  getDiagramTitle\n};\n\n// src/diagrams/git/gitGraphParser.ts\nvar populate = /* @__PURE__ */ __name((ast, db2) => {\n  populateCommonDb(ast, db2);\n  if (ast.dir) {\n    db2.setDirection(ast.dir);\n  }\n  for (const statement of ast.statements) {\n    parseStatement(statement, db2);\n  }\n}, \"populate\");\nvar parseStatement = /* @__PURE__ */ __name((statement, db2) => {\n  const parsers = {\n    Commit: /* @__PURE__ */ __name((stmt) => db2.commit(parseCommit(stmt)), \"Commit\"),\n    Branch: /* @__PURE__ */ __name((stmt) => db2.branch(parseBranch(stmt)), \"Branch\"),\n    Merge: /* @__PURE__ */ __name((stmt) => db2.merge(parseMerge(stmt)), \"Merge\"),\n    Checkout: /* @__PURE__ */ __name((stmt) => db2.checkout(parseCheckout(stmt)), \"Checkout\"),\n    CherryPicking: /* @__PURE__ */ __name((stmt) => db2.cherryPick(parseCherryPicking(stmt)), \"CherryPicking\")\n  };\n  const parser2 = parsers[statement.$type];\n  if (parser2) {\n    parser2(statement);\n  } else {\n    log.error(`Unknown statement type: ${statement.$type}`);\n  }\n}, \"parseStatement\");\nvar parseCommit = /* @__PURE__ */ __name((commit2) => {\n  const commitDB = {\n    id: commit2.id,\n    msg: commit2.message ?? \"\",\n    type: commit2.type !== void 0 ? commitType[commit2.type] : commitType.NORMAL,\n    tags: commit2.tags ?? void 0\n  };\n  return commitDB;\n}, \"parseCommit\");\nvar parseBranch = /* @__PURE__ */ __name((branch2) => {\n  const branchDB = {\n    name: branch2.name,\n    order: branch2.order ?? 0\n  };\n  return branchDB;\n}, \"parseBranch\");\nvar parseMerge = /* @__PURE__ */ __name((merge2) => {\n  const mergeDB = {\n    branch: merge2.branch,\n    id: merge2.id ?? \"\",\n    type: merge2.type !== void 0 ? commitType[merge2.type] : void 0,\n    tags: merge2.tags ?? void 0\n  };\n  return mergeDB;\n}, \"parseMerge\");\nvar parseCheckout = /* @__PURE__ */ __name((checkout2) => {\n  const branch2 = checkout2.branch;\n  return branch2;\n}, \"parseCheckout\");\nvar parseCherryPicking = /* @__PURE__ */ __name((cherryPicking) => {\n  const cherryPickDB = {\n    id: cherryPicking.id,\n    targetId: \"\",\n    tags: cherryPicking.tags?.length === 0 ? void 0 : cherryPicking.tags,\n    parent: cherryPicking.parent\n  };\n  return cherryPickDB;\n}, \"parseCherryPicking\");\nvar parser = {\n  parse: /* @__PURE__ */ __name(async (input) => {\n    const ast = await parse(\"gitGraph\", input);\n    log.debug(ast);\n    populate(ast, db);\n  }, \"parse\")\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  const mockDB = {\n    commitType,\n    setDirection: vi.fn(),\n    commit: vi.fn(),\n    branch: vi.fn(),\n    merge: vi.fn(),\n    cherryPick: vi.fn(),\n    checkout: vi.fn()\n  };\n  describe(\"GitGraph Parser\", () => {\n    it(\"should parse a commit statement\", () => {\n      const commit2 = {\n        $type: \"Commit\",\n        id: \"1\",\n        message: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(commit2, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a branch statement\", () => {\n      const branch2 = {\n        $type: \"Branch\",\n        name: \"newBranch\",\n        order: 1\n      };\n      parseStatement(branch2, mockDB);\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: \"newBranch\", order: 1 });\n    });\n    it(\"should parse a checkout statement\", () => {\n      const checkout2 = {\n        $type: \"Checkout\",\n        branch: \"newBranch\"\n      };\n      parseStatement(checkout2, mockDB);\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n    it(\"should parse a merge statement\", () => {\n      const merge2 = {\n        $type: \"Merge\",\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(merge2, mockDB);\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a cherry picking statement\", () => {\n      const cherryPick2 = {\n        $type: \"CherryPicking\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        parent: \"2\"\n      };\n      parseStatement(cherryPick2, mockDB);\n      expect(mockDB.cherryPick).toHaveBeenCalledWith({\n        id: \"1\",\n        targetId: \"\",\n        parent: \"2\",\n        tags: [\"tag1\", \"tag2\"]\n      });\n    });\n    it(\"should parse a langium generated gitGraph ast\", () => {\n      const dummy = {\n        $type: \"GitGraph\",\n        statements: []\n      };\n      const gitGraphAst = {\n        $type: \"GitGraph\",\n        statements: [\n          {\n            $container: dummy,\n            $type: \"Commit\",\n            id: \"1\",\n            message: \"test\",\n            tags: [\"tag1\", \"tag2\"],\n            type: \"NORMAL\"\n          },\n          {\n            $container: dummy,\n            $type: \"Branch\",\n            name: \"newBranch\",\n            order: 1\n          },\n          {\n            $container: dummy,\n            $type: \"Merge\",\n            branch: \"newBranch\",\n            id: \"1\",\n            tags: [\"tag1\", \"tag2\"],\n            type: \"NORMAL\"\n          },\n          {\n            $container: dummy,\n            $type: \"Checkout\",\n            branch: \"newBranch\"\n          },\n          {\n            $container: dummy,\n            $type: \"CherryPicking\",\n            id: \"1\",\n            tags: [\"tag1\", \"tag2\"],\n            parent: \"2\"\n          }\n        ]\n      };\n      populate(gitGraphAst, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: \"newBranch\", order: 1 });\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n  });\n}\n\n// src/diagrams/git/gitGraphRenderer.ts\nimport { select } from \"d3\";\nvar DEFAULT_CONFIG = getConfig2();\nvar DEFAULT_GITGRAPH_CONFIG2 = DEFAULT_CONFIG?.gitGraph;\nvar LAYOUT_OFFSET = 10;\nvar COMMIT_STEP = 40;\nvar PX = 4;\nvar PY = 2;\nvar THEME_COLOR_LIMIT = 8;\nvar branchPos = /* @__PURE__ */ new Map();\nvar commitPos = /* @__PURE__ */ new Map();\nvar defaultPos = 30;\nvar allCommitsDict = /* @__PURE__ */ new Map();\nvar lanes = [];\nvar maxPos = 0;\nvar dir = \"LR\";\nvar clear3 = /* @__PURE__ */ __name(() => {\n  branchPos.clear();\n  commitPos.clear();\n  allCommitsDict.clear();\n  maxPos = 0;\n  lanes = [];\n  dir = \"LR\";\n}, \"clear\");\nvar drawText = /* @__PURE__ */ __name((txt) => {\n  const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n  const rows = typeof txt === \"string\" ? txt.split(/\\\\n|\\n|<br\\s*\\/?>/gi) : txt;\n  rows.forEach((row) => {\n    const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n    tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n    tspan.setAttribute(\"dy\", \"1em\");\n    tspan.setAttribute(\"x\", \"0\");\n    tspan.setAttribute(\"class\", \"row\");\n    tspan.textContent = row.trim();\n    svgLabel.appendChild(tspan);\n  });\n  return svgLabel;\n}, \"drawText\");\nvar findClosestParent = /* @__PURE__ */ __name((parents) => {\n  let closestParent;\n  let comparisonFunc;\n  let targetPosition;\n  if (dir === \"BT\") {\n    comparisonFunc = /* @__PURE__ */ __name((a, b) => a <= b, \"comparisonFunc\");\n    targetPosition = Infinity;\n  } else {\n    comparisonFunc = /* @__PURE__ */ __name((a, b) => a >= b, \"comparisonFunc\");\n    targetPosition = 0;\n  }\n  parents.forEach((parent) => {\n    const parentPosition = dir === \"TB\" || dir == \"BT\" ? commitPos.get(parent)?.y : commitPos.get(parent)?.x;\n    if (parentPosition !== void 0 && comparisonFunc(parentPosition, targetPosition)) {\n      closestParent = parent;\n      targetPosition = parentPosition;\n    }\n  });\n  return closestParent;\n}, \"findClosestParent\");\nvar findClosestParentBT = /* @__PURE__ */ __name((parents) => {\n  let closestParent = \"\";\n  let maxPosition = Infinity;\n  parents.forEach((parent) => {\n    const parentPosition = commitPos.get(parent).y;\n    if (parentPosition <= maxPosition) {\n      closestParent = parent;\n      maxPosition = parentPosition;\n    }\n  });\n  return closestParent || void 0;\n}, \"findClosestParentBT\");\nvar setParallelBTPos = /* @__PURE__ */ __name((sortedKeys, commits, defaultPos2) => {\n  let curPos = defaultPos2;\n  let maxPosition = defaultPos2;\n  const roots = [];\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (commit2.parents.length) {\n      curPos = calculateCommitPosition(commit2);\n      maxPosition = Math.max(curPos, maxPosition);\n    } else {\n      roots.push(commit2);\n    }\n    setCommitPosition(commit2, curPos);\n  });\n  curPos = maxPosition;\n  roots.forEach((commit2) => {\n    setRootPosition(commit2, curPos, defaultPos2);\n  });\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2?.parents.length) {\n      const closestParent = findClosestParentBT(commit2.parents);\n      curPos = commitPos.get(closestParent).y - COMMIT_STEP;\n      if (curPos <= maxPosition) {\n        maxPosition = curPos;\n      }\n      const x = branchPos.get(commit2.branch).pos;\n      const y = curPos - LAYOUT_OFFSET;\n      commitPos.set(commit2.id, { x, y });\n    }\n  });\n}, \"setParallelBTPos\");\nvar findClosestParentPos = /* @__PURE__ */ __name((commit2) => {\n  const closestParent = findClosestParent(commit2.parents.filter((p) => p !== null));\n  if (!closestParent) {\n    throw new Error(`Closest parent not found for commit ${commit2.id}`);\n  }\n  const closestParentPos = commitPos.get(closestParent)?.y;\n  if (closestParentPos === void 0) {\n    throw new Error(`Closest parent position not found for commit ${commit2.id}`);\n  }\n  return closestParentPos;\n}, \"findClosestParentPos\");\nvar calculateCommitPosition = /* @__PURE__ */ __name((commit2) => {\n  const closestParentPos = findClosestParentPos(commit2);\n  return closestParentPos + COMMIT_STEP;\n}, \"calculateCommitPosition\");\nvar setCommitPosition = /* @__PURE__ */ __name((commit2, curPos) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const x = branch2.pos;\n  const y = curPos + LAYOUT_OFFSET;\n  commitPos.set(commit2.id, { x, y });\n  return { x, y };\n}, \"setCommitPosition\");\nvar setRootPosition = /* @__PURE__ */ __name((commit2, curPos, defaultPos2) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const y = curPos + defaultPos2;\n  const x = branch2.pos;\n  commitPos.set(commit2.id, { x, y });\n}, \"setRootPosition\");\nvar drawCommitBullet = /* @__PURE__ */ __name((gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType) => {\n  if (commitSymbolType === commitType.HIGHLIGHT) {\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 10).attr(\"y\", commitPosition.y - 10).attr(\"width\", 20).attr(\"height\", 20).attr(\n      \"class\",\n      `commit ${commit2.id} commit-highlight${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-outer`\n    );\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 6).attr(\"y\", commitPosition.y - 6).attr(\"width\", 12).attr(\"height\", 12).attr(\n      \"class\",\n      `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-inner`\n    );\n  } else if (commitSymbolType === commitType.CHERRY_PICK) {\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x).attr(\"cy\", commitPosition.y).attr(\"r\", 10).attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x - 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x + 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x + 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x - 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n  } else {\n    const circle = gBullets.append(\"circle\");\n    circle.attr(\"cx\", commitPosition.x);\n    circle.attr(\"cy\", commitPosition.y);\n    circle.attr(\"r\", commit2.type === commitType.MERGE ? 9 : 10);\n    circle.attr(\"class\", `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    if (commitSymbolType === commitType.MERGE) {\n      const circle2 = gBullets.append(\"circle\");\n      circle2.attr(\"cx\", commitPosition.x);\n      circle2.attr(\"cy\", commitPosition.y);\n      circle2.attr(\"r\", 6);\n      circle2.attr(\n        \"class\",\n        `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`\n      );\n    }\n    if (commitSymbolType === commitType.REVERSE) {\n      const cross = gBullets.append(\"path\");\n      cross.attr(\n        \"d\",\n        `M ${commitPosition.x - 5},${commitPosition.y - 5}L${commitPosition.x + 5},${commitPosition.y + 5}M${commitPosition.x - 5},${commitPosition.y + 5}L${commitPosition.x + 5},${commitPosition.y - 5}`\n      ).attr(\"class\", `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    }\n  }\n}, \"drawCommitBullet\");\nvar drawCommitLabel = /* @__PURE__ */ __name((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.type !== commitType.CHERRY_PICK && (commit2.customId && commit2.type === commitType.MERGE || commit2.type !== commitType.MERGE) && DEFAULT_GITGRAPH_CONFIG2?.showCommitLabel) {\n    const wrapper = gLabels.append(\"g\");\n    const labelBkg = wrapper.insert(\"rect\").attr(\"class\", \"commit-label-bkg\");\n    const text = wrapper.append(\"text\").attr(\"x\", pos).attr(\"y\", commitPosition.y + 25).attr(\"class\", \"commit-label\").text(commit2.id);\n    const bbox = text.node()?.getBBox();\n    if (bbox) {\n      labelBkg.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2 - PY).attr(\"y\", commitPosition.y + 13.5).attr(\"width\", bbox.width + 2 * PY).attr(\"height\", bbox.height + 2 * PY);\n      if (dir === \"TB\" || dir === \"BT\") {\n        labelBkg.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX + 5)).attr(\"y\", commitPosition.y - 12);\n        text.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX)).attr(\"y\", commitPosition.y + bbox.height - 12);\n      } else {\n        text.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2);\n      }\n      if (DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) {\n        if (dir === \"TB\" || dir === \"BT\") {\n          text.attr(\n            \"transform\",\n            \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\"\n          );\n          labelBkg.attr(\n            \"transform\",\n            \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\"\n          );\n        } else {\n          const r_x = -7.5 - (bbox.width + 10) / 25 * 9.5;\n          const r_y = 10 + bbox.width / 25 * 8.5;\n          wrapper.attr(\n            \"transform\",\n            \"translate(\" + r_x + \", \" + r_y + \") rotate(-45, \" + pos + \", \" + commitPosition.y + \")\"\n          );\n        }\n      }\n    }\n  }\n}, \"drawCommitLabel\");\nvar drawCommitTags = /* @__PURE__ */ __name((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.tags.length > 0) {\n    let yOffset = 0;\n    let maxTagBboxWidth = 0;\n    let maxTagBboxHeight = 0;\n    const tagElements = [];\n    for (const tagValue of commit2.tags.reverse()) {\n      const rect = gLabels.insert(\"polygon\");\n      const hole = gLabels.append(\"circle\");\n      const tag = gLabels.append(\"text\").attr(\"y\", commitPosition.y - 16 - yOffset).attr(\"class\", \"tag-label\").text(tagValue);\n      const tagBbox = tag.node()?.getBBox();\n      if (!tagBbox) {\n        throw new Error(\"Tag bbox not found\");\n      }\n      maxTagBboxWidth = Math.max(maxTagBboxWidth, tagBbox.width);\n      maxTagBboxHeight = Math.max(maxTagBboxHeight, tagBbox.height);\n      tag.attr(\"x\", commitPosition.posWithOffset - tagBbox.width / 2);\n      tagElements.push({\n        tag,\n        hole,\n        rect,\n        yOffset\n      });\n      yOffset += 20;\n    }\n    for (const { tag, hole, rect, yOffset: yOffset2 } of tagElements) {\n      const h2 = maxTagBboxHeight / 2;\n      const ly = commitPosition.y - 19.2 - yOffset2;\n      rect.attr(\"class\", \"tag-label-bkg\").attr(\n        \"points\",\n        `\n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly + PY}  \n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly - PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly + h2 + PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly + h2 + PY}`\n      );\n      hole.attr(\"cy\", ly).attr(\"cx\", pos - maxTagBboxWidth / 2 + PX / 2).attr(\"r\", 1.5).attr(\"class\", \"tag-hole\");\n      if (dir === \"TB\" || dir === \"BT\") {\n        const yOrigin = pos + yOffset2;\n        rect.attr(\"class\", \"tag-label-bkg\").attr(\n          \"points\",\n          `\n        ${commitPosition.x},${yOrigin + 2}\n        ${commitPosition.x},${yOrigin - 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin + h2 + 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin + h2 + 2}`\n        ).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        hole.attr(\"cx\", commitPosition.x + PX / 2).attr(\"cy\", yOrigin).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        tag.attr(\"x\", commitPosition.x + 5).attr(\"y\", yOrigin + 3).attr(\"transform\", \"translate(14,14) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n      }\n    }\n  }\n}, \"drawCommitTags\");\nvar getCommitClassType = /* @__PURE__ */ __name((commit2) => {\n  const commitSymbolType = commit2.customType ?? commit2.type;\n  switch (commitSymbolType) {\n    case commitType.NORMAL:\n      return \"commit-normal\";\n    case commitType.REVERSE:\n      return \"commit-reverse\";\n    case commitType.HIGHLIGHT:\n      return \"commit-highlight\";\n    case commitType.MERGE:\n      return \"commit-merge\";\n    case commitType.CHERRY_PICK:\n      return \"commit-cherry-pick\";\n    default:\n      return \"commit-normal\";\n  }\n}, \"getCommitClassType\");\nvar calculatePosition = /* @__PURE__ */ __name((commit2, dir2, pos, commitPos2) => {\n  const defaultCommitPosition = { x: 0, y: 0 };\n  if (commit2.parents.length > 0) {\n    const closestParent = findClosestParent(commit2.parents);\n    if (closestParent) {\n      const parentPosition = commitPos2.get(closestParent) ?? defaultCommitPosition;\n      if (dir2 === \"TB\") {\n        return parentPosition.y + COMMIT_STEP;\n      } else if (dir2 === \"BT\") {\n        const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n        return currentPosition.y - COMMIT_STEP;\n      } else {\n        return parentPosition.x + COMMIT_STEP;\n      }\n    }\n  } else {\n    if (dir2 === \"TB\") {\n      return defaultPos;\n    } else if (dir2 === \"BT\") {\n      const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n      return currentPosition.y - COMMIT_STEP;\n    } else {\n      return 0;\n    }\n  }\n  return 0;\n}, \"calculatePosition\");\nvar getCommitPosition = /* @__PURE__ */ __name((commit2, pos, isParallelCommits) => {\n  const posWithOffset = dir === \"BT\" && isParallelCommits ? pos : pos + LAYOUT_OFFSET;\n  const y = dir === \"TB\" || dir === \"BT\" ? posWithOffset : branchPos.get(commit2.branch)?.pos;\n  const x = dir === \"TB\" || dir === \"BT\" ? branchPos.get(commit2.branch)?.pos : posWithOffset;\n  if (x === void 0 || y === void 0) {\n    throw new Error(`Position were undefined for commit ${commit2.id}`);\n  }\n  return { x, y, posWithOffset };\n}, \"getCommitPosition\");\nvar drawCommits = /* @__PURE__ */ __name((svg, commits, modifyGraph) => {\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const gBullets = svg.append(\"g\").attr(\"class\", \"commit-bullets\");\n  const gLabels = svg.append(\"g\").attr(\"class\", \"commit-labels\");\n  let pos = dir === \"TB\" || dir === \"BT\" ? defaultPos : 0;\n  const keys = [...commits.keys()];\n  const isParallelCommits = DEFAULT_GITGRAPH_CONFIG2?.parallelCommits ?? false;\n  const sortKeys = /* @__PURE__ */ __name((a, b) => {\n    const seqA = commits.get(a)?.seq;\n    const seqB = commits.get(b)?.seq;\n    return seqA !== void 0 && seqB !== void 0 ? seqA - seqB : 0;\n  }, \"sortKeys\");\n  let sortedKeys = keys.sort(sortKeys);\n  if (dir === \"BT\") {\n    if (isParallelCommits) {\n      setParallelBTPos(sortedKeys, commits, pos);\n    }\n    sortedKeys = sortedKeys.reverse();\n  }\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (isParallelCommits) {\n      pos = calculatePosition(commit2, dir, pos, commitPos);\n    }\n    const commitPosition = getCommitPosition(commit2, pos, isParallelCommits);\n    if (modifyGraph) {\n      const typeClass = getCommitClassType(commit2);\n      const commitSymbolType = commit2.customType ?? commit2.type;\n      const branchIndex = branchPos.get(commit2.branch)?.index ?? 0;\n      drawCommitBullet(gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType);\n      drawCommitLabel(gLabels, commit2, commitPosition, pos);\n      drawCommitTags(gLabels, commit2, commitPosition, pos);\n    }\n    if (dir === \"TB\" || dir === \"BT\") {\n      commitPos.set(commit2.id, { x: commitPosition.x, y: commitPosition.posWithOffset });\n    } else {\n      commitPos.set(commit2.id, { x: commitPosition.posWithOffset, y: commitPosition.y });\n    }\n    pos = dir === \"BT\" && isParallelCommits ? pos + COMMIT_STEP : pos + COMMIT_STEP + LAYOUT_OFFSET;\n    if (pos > maxPos) {\n      maxPos = pos;\n    }\n  });\n}, \"drawCommits\");\nvar shouldRerouteArrow = /* @__PURE__ */ __name((commitA, commitB, p1, p2, allCommits) => {\n  const commitBIsFurthest = dir === \"TB\" || dir === \"BT\" ? p1.x < p2.x : p1.y < p2.y;\n  const branchToGetCurve = commitBIsFurthest ? commitB.branch : commitA.branch;\n  const isOnBranchToGetCurve = /* @__PURE__ */ __name((x) => x.branch === branchToGetCurve, \"isOnBranchToGetCurve\");\n  const isBetweenCommits = /* @__PURE__ */ __name((x) => x.seq > commitA.seq && x.seq < commitB.seq, \"isBetweenCommits\");\n  return [...allCommits.values()].some((commitX) => {\n    return isBetweenCommits(commitX) && isOnBranchToGetCurve(commitX);\n  });\n}, \"shouldRerouteArrow\");\nvar findLane = /* @__PURE__ */ __name((y1, y2, depth = 0) => {\n  const candidate = y1 + Math.abs(y1 - y2) / 2;\n  if (depth > 5) {\n    return candidate;\n  }\n  const ok = lanes.every((lane) => Math.abs(lane - candidate) >= 10);\n  if (ok) {\n    lanes.push(candidate);\n    return candidate;\n  }\n  const diff = Math.abs(y1 - y2);\n  return findLane(y1, y2 - diff / 5, depth + 1);\n}, \"findLane\");\nvar drawArrow = /* @__PURE__ */ __name((svg, commitA, commitB, allCommits) => {\n  const p1 = commitPos.get(commitA.id);\n  const p2 = commitPos.get(commitB.id);\n  if (p1 === void 0 || p2 === void 0) {\n    throw new Error(`Commit positions not found for commits ${commitA.id} and ${commitB.id}`);\n  }\n  const arrowNeedsRerouting = shouldRerouteArrow(commitA, commitB, p1, p2, allCommits);\n  let arc = \"\";\n  let arc2 = \"\";\n  let radius = 0;\n  let offset = 0;\n  let colorClassNum = branchPos.get(commitB.branch)?.index;\n  if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n    colorClassNum = branchPos.get(commitA.branch)?.index;\n  }\n  let lineDef;\n  if (arrowNeedsRerouting) {\n    arc = \"A 10 10, 0, 0, 0,\";\n    arc2 = \"A 10 10, 0, 0, 1,\";\n    radius = 10;\n    offset = 10;\n    const lineY = p1.y < p2.y ? findLane(p1.y, p2.y) : findLane(p2.y, p1.y);\n    const lineX = p1.x < p2.x ? findLane(p1.x, p2.x) : findLane(p2.x, p1.x);\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc2} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc2} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc2} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc2} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY - radius} ${arc} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc2} ${p2.x} ${lineY + offset} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY + radius} ${arc2} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc} ${p2.x} ${lineY - offset} L ${p2.x} ${p2.y}`;\n      }\n    }\n  } else {\n    arc = \"A 20 20, 0, 0, 0,\";\n    arc2 = \"A 20 20, 0, 0, 1,\";\n    radius = 20;\n    offset = 20;\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc2} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x + radius} ${p1.y} ${arc} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y > p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y === p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    }\n  }\n  if (lineDef === void 0) {\n    throw new Error(\"Line definition not found\");\n  }\n  svg.append(\"path\").attr(\"d\", lineDef).attr(\"class\", \"arrow arrow\" + colorClassNum % THEME_COLOR_LIMIT);\n}, \"drawArrow\");\nvar drawArrows = /* @__PURE__ */ __name((svg, commits) => {\n  const gArrows = svg.append(\"g\").attr(\"class\", \"commit-arrows\");\n  [...commits.keys()].forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2.parents && commit2.parents.length > 0) {\n      commit2.parents.forEach((parent) => {\n        drawArrow(gArrows, commits.get(parent), commit2, commits);\n      });\n    }\n  });\n}, \"drawArrows\");\nvar drawBranches = /* @__PURE__ */ __name((svg, branches) => {\n  const g = svg.append(\"g\");\n  branches.forEach((branch2, index) => {\n    const adjustIndexForTheme = index % THEME_COLOR_LIMIT;\n    const pos = branchPos.get(branch2.name)?.pos;\n    if (pos === void 0) {\n      throw new Error(`Position not found for branch ${branch2.name}`);\n    }\n    const line = g.append(\"line\");\n    line.attr(\"x1\", 0);\n    line.attr(\"y1\", pos);\n    line.attr(\"x2\", maxPos);\n    line.attr(\"y2\", pos);\n    line.attr(\"class\", \"branch branch\" + adjustIndexForTheme);\n    if (dir === \"TB\") {\n      line.attr(\"y1\", defaultPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", maxPos);\n      line.attr(\"x2\", pos);\n    } else if (dir === \"BT\") {\n      line.attr(\"y1\", maxPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", defaultPos);\n      line.attr(\"x2\", pos);\n    }\n    lanes.push(pos);\n    const name = branch2.name;\n    const labelElement = drawText(name);\n    const bkg = g.insert(\"rect\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\" + adjustIndexForTheme);\n    label.node().appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    bkg.attr(\"class\", \"branchLabelBkg label\" + adjustIndexForTheme).attr(\"rx\", 4).attr(\"ry\", 4).attr(\"x\", -bbox.width - 4 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)).attr(\"y\", -bbox.height / 2 + 8).attr(\"width\", bbox.width + 18).attr(\"height\", bbox.height + 4);\n    label.attr(\n      \"transform\",\n      \"translate(\" + (-bbox.width - 14 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)) + \", \" + (pos - bbox.height / 2 - 1) + \")\"\n    );\n    if (dir === \"TB\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", 0);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", 0)\");\n    } else if (dir === \"BT\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", maxPos);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", \" + maxPos + \")\");\n    } else {\n      bkg.attr(\"transform\", \"translate(-19, \" + (pos - bbox.height / 2) + \")\");\n    }\n  });\n}, \"drawBranches\");\nvar setBranchPosition = /* @__PURE__ */ __name(function(name, pos, index, bbox, rotateCommitLabel) {\n  branchPos.set(name, { pos, index });\n  pos += 50 + (rotateCommitLabel ? 40 : 0) + (dir === \"TB\" || dir === \"BT\" ? bbox.width / 2 : 0);\n  return pos;\n}, \"setBranchPosition\");\nvar draw = /* @__PURE__ */ __name(function(txt, id, ver, diagObj) {\n  clear3();\n  log.debug(\"in gitgraph renderer\", txt + \"\\n\", \"id:\", id, ver);\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const rotateCommitLabel = DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel ?? false;\n  const db2 = diagObj.db;\n  allCommitsDict = db2.getCommits();\n  const branches = db2.getBranchesAsObjArray();\n  dir = db2.getDirection();\n  const diagram2 = select(`[id=\"${id}\"]`);\n  let pos = 0;\n  branches.forEach((branch2, index) => {\n    const labelElement = drawText(branch2.name);\n    const g = diagram2.append(\"g\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\");\n    label.node()?.appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    pos = setBranchPosition(branch2.name, pos, index, bbox, rotateCommitLabel);\n    label.remove();\n    branchLabel.remove();\n    g.remove();\n  });\n  drawCommits(diagram2, allCommitsDict, false);\n  if (DEFAULT_GITGRAPH_CONFIG2.showBranches) {\n    drawBranches(diagram2, branches);\n  }\n  drawArrows(diagram2, allCommitsDict);\n  drawCommits(diagram2, allCommitsDict, true);\n  utils_default.insertTitle(\n    diagram2,\n    \"gitTitleText\",\n    DEFAULT_GITGRAPH_CONFIG2.titleTopMargin ?? 0,\n    db2.getDiagramTitle()\n  );\n  setupGraphViewbox(\n    void 0,\n    diagram2,\n    DEFAULT_GITGRAPH_CONFIG2.diagramPadding,\n    DEFAULT_GITGRAPH_CONFIG2.useMaxWidth\n  );\n}, \"draw\");\nvar gitGraphRenderer_default = {\n  draw\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  describe(\"drawText\", () => {\n    it(\"should drawText\", () => {\n      const svgLabel = drawText(\"main\");\n      expect(svgLabel).toBeDefined();\n      expect(svgLabel.children[0].innerHTML).toBe(\"main\");\n    });\n  });\n  describe(\"branchPosition\", () => {\n    const bbox = {\n      x: 0,\n      y: 0,\n      width: 10,\n      height: 10,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      toJSON: /* @__PURE__ */ __name(() => \"\", \"toJSON\")\n    };\n    it(\"should setBranchPositions LR with two branches\", () => {\n      dir = \"LR\";\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(90);\n      expect(branchPos.get(\"main\")).toEqual({ pos: 0, index: 0 });\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(180);\n      expect(branchPos.get(\"develop\")).toEqual({ pos, index: 1 });\n    });\n    it(\"should setBranchPositions TB with two branches\", () => {\n      dir = \"TB\";\n      bbox.width = 34.9921875;\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(107.49609375);\n      expect(branchPos.get(\"main\")).toEqual({ pos: 0, index: 0 });\n      bbox.width = 56.421875;\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(225.70703125);\n      expect(branchPos.get(\"develop\")).toEqual({ pos, index: 1 });\n    });\n  });\n  describe(\"commitPosition\", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        \"commitZero\",\n        {\n          id: \"ZERO\",\n          message: \"\",\n          seq: 0,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"commitA\",\n        {\n          id: \"A\",\n          message: \"\",\n          seq: 1,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"ZERO\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"commitB\",\n        {\n          id: \"B\",\n          message: \"\",\n          seq: 2,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"A\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"commitM\",\n        {\n          id: \"M\",\n          message: \"merged branch feature into main\",\n          seq: 3,\n          type: commitType.MERGE,\n          tags: [],\n          parents: [\"ZERO\", \"B\"],\n          branch: \"main\",\n          customId: true\n        }\n      ],\n      [\n        \"commitC\",\n        {\n          id: \"C\",\n          message: \"\",\n          seq: 4,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"ZERO\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commit5_8928ea0\",\n        {\n          id: \"5-8928ea0\",\n          message: \"cherry-picked [object Object] into release\",\n          seq: 5,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: [\"C\", \"M\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commitD\",\n        {\n          id: \"D\",\n          message: \"\",\n          seq: 6,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"5-8928ea0\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commit7_ed848ba\",\n        {\n          id: \"7-ed848ba\",\n          message: \"cherry-picked [object Object] into release\",\n          seq: 7,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: [\"D\", \"M\"],\n          branch: \"release\"\n        }\n      ]\n    ]);\n    let pos = 0;\n    branchPos.set(\"main\", { pos: 0, index: 0 });\n    branchPos.set(\"feature\", { pos: 107.49609375, index: 1 });\n    branchPos.set(\"release\", { pos: 224.03515625, index: 2 });\n    describe(\"TB\", () => {\n      pos = 30;\n      dir = \"TB\";\n      const expectedCommitPositionTB = /* @__PURE__ */ new Map([\n        [\"commitZero\", { x: 0, y: 40, posWithOffset: 40 }],\n        [\"commitA\", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        [\"commitB\", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        [\"commitM\", { x: 0, y: 190, posWithOffset: 190 }],\n        [\"commitC\", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        [\"commit5_8928ea0\", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        [\"commitD\", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        [\"commit7_ed848ba\", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos, false);\n          expect(position).toEqual(expectedCommitPositionTB.get(key));\n          pos += 50;\n        });\n      });\n    });\n    describe(\"LR\", () => {\n      let pos2 = 30;\n      dir = \"LR\";\n      const expectedCommitPositionLR = /* @__PURE__ */ new Map([\n        [\"commitZero\", { x: 0, y: 40, posWithOffset: 40 }],\n        [\"commitA\", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        [\"commitB\", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        [\"commitM\", { x: 0, y: 190, posWithOffset: 190 }],\n        [\"commitC\", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        [\"commit5_8928ea0\", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        [\"commitD\", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        [\"commit7_ed848ba\", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos2, false);\n          expect(position).toEqual(expectedCommitPositionLR.get(key));\n          pos2 += 50;\n        });\n      });\n    });\n    describe(\"getCommitClassType\", () => {\n      const expectedCommitClassType = /* @__PURE__ */ new Map([\n        [\"commitZero\", \"commit-normal\"],\n        [\"commitA\", \"commit-normal\"],\n        [\"commitB\", \"commit-normal\"],\n        [\"commitM\", \"commit-merge\"],\n        [\"commitC\", \"commit-normal\"],\n        [\"commit5_8928ea0\", \"commit-cherry-pick\"],\n        [\"commitD\", \"commit-normal\"],\n        [\"commit7_ed848ba\", \"commit-cherry-pick\"]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct class type for commit ${key}`, () => {\n          const classType = getCommitClassType(commit2);\n          expect(classType).toBe(expectedCommitClassType.get(key));\n        });\n      });\n    });\n  });\n  describe(\"building BT parallel commit diagram\", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        \"1-abcdefg\",\n        {\n          id: \"1-abcdefg\",\n          message: \"\",\n          seq: 0,\n          type: 0,\n          tags: [],\n          parents: [],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"2-abcdefg\",\n        {\n          id: \"2-abcdefg\",\n          message: \"\",\n          seq: 1,\n          type: 0,\n          tags: [],\n          parents: [\"1-abcdefg\"],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"3-abcdefg\",\n        {\n          id: \"3-abcdefg\",\n          message: \"\",\n          seq: 2,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"develop\"\n        }\n      ],\n      [\n        \"4-abcdefg\",\n        {\n          id: \"4-abcdefg\",\n          message: \"\",\n          seq: 3,\n          type: 0,\n          tags: [],\n          parents: [\"3-abcdefg\"],\n          branch: \"develop\"\n        }\n      ],\n      [\n        \"5-abcdefg\",\n        {\n          id: \"5-abcdefg\",\n          message: \"\",\n          seq: 4,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"6-abcdefg\",\n        {\n          id: \"6-abcdefg\",\n          message: \"\",\n          seq: 5,\n          type: 0,\n          tags: [],\n          parents: [\"5-abcdefg\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"7-abcdefg\",\n        {\n          id: \"7-abcdefg\",\n          message: \"\",\n          seq: 6,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"8-abcdefg\",\n        {\n          id: \"8-abcdefg\",\n          message: \"\",\n          seq: 7,\n          type: 0,\n          tags: [],\n          parents: [\"7-abcdefg\"],\n          branch: \"main\"\n        }\n      ]\n    ]);\n    const expectedCommitPosition = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", { x: 0, y: 40 }],\n      [\"2-abcdefg\", { x: 0, y: 90 }],\n      [\"3-abcdefg\", { x: 107.49609375, y: 140 }],\n      [\"4-abcdefg\", { x: 107.49609375, y: 190 }],\n      [\"5-abcdefg\", { x: 225.70703125, y: 140 }],\n      [\"6-abcdefg\", { x: 225.70703125, y: 190 }],\n      [\"7-abcdefg\", { x: 0, y: 140 }],\n      [\"8-abcdefg\", { x: 0, y: 190 }]\n    ]);\n    const expectedCommitPositionAfterParallel = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", { x: 0, y: 210 }],\n      [\"2-abcdefg\", { x: 0, y: 160 }],\n      [\"3-abcdefg\", { x: 107.49609375, y: 110 }],\n      [\"4-abcdefg\", { x: 107.49609375, y: 60 }],\n      [\"5-abcdefg\", { x: 225.70703125, y: 110 }],\n      [\"6-abcdefg\", { x: 225.70703125, y: 60 }],\n      [\"7-abcdefg\", { x: 0, y: 110 }],\n      [\"8-abcdefg\", { x: 0, y: 60 }]\n    ]);\n    const expectedCommitCurrentPosition = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", 30],\n      [\"2-abcdefg\", 80],\n      [\"3-abcdefg\", 130],\n      [\"4-abcdefg\", 180],\n      [\"5-abcdefg\", 130],\n      [\"6-abcdefg\", 180],\n      [\"7-abcdefg\", 130],\n      [\"8-abcdefg\", 180]\n    ]);\n    const sortedKeys = [...expectedCommitPosition.keys()];\n    it(\"should get the correct commit position and current position\", () => {\n      dir = \"BT\";\n      let curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", { pos: 0, index: 0 });\n      branchPos.set(\"develop\", { pos: 107.49609375, index: 1 });\n      branchPos.set(\"feature\", { pos: 225.70703125, index: 2 });\n      DEFAULT_GITGRAPH_CONFIG2.parallelCommits = true;\n      commits.forEach((commit2, key) => {\n        if (commit2.parents.length > 0) {\n          curPos = calculateCommitPosition(commit2);\n        }\n        const position = setCommitPosition(commit2, curPos);\n        expect(position).toEqual(expectedCommitPosition.get(key));\n        expect(curPos).toEqual(expectedCommitCurrentPosition.get(key));\n      });\n    });\n    it(\"should get the correct commit position after parallel commits\", () => {\n      commitPos.clear();\n      branchPos.clear();\n      dir = \"BT\";\n      const curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", { pos: 0, index: 0 });\n      branchPos.set(\"develop\", { pos: 107.49609375, index: 1 });\n      branchPos.set(\"feature\", { pos: 225.70703125, index: 2 });\n      setParallelBTPos(sortedKeys, commits, curPos);\n      sortedKeys.forEach((commit2) => {\n        const position = commitPos.get(commit2);\n        expect(position).toEqual(expectedCommitPositionAfterParallel.get(commit2));\n      });\n    });\n  });\n  DEFAULT_GITGRAPH_CONFIG2.parallelCommits = false;\n  it(\"add\", () => {\n    commitPos.set(\"parent1\", { x: 1, y: 1 });\n    commitPos.set(\"parent2\", { x: 2, y: 2 });\n    commitPos.set(\"parent3\", { x: 3, y: 3 });\n    dir = \"LR\";\n    const parents = [\"parent1\", \"parent2\", \"parent3\"];\n    const closestParent = findClosestParent(parents);\n    expect(closestParent).toBe(\"parent3\");\n    commitPos.clear();\n  });\n}\n\n// src/diagrams/git/styles.js\nvar getStyles = /* @__PURE__ */ __name((options) => `\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0, 1, 2, 3, 4, 5, 6, 7].map(\n  (i) => `\n        .branch-label${i} { fill: ${options[\"gitBranchLabel\" + i]}; }\n        .commit${i} { stroke: ${options[\"git\" + i]}; fill: ${options[\"git\" + i]}; }\n        .commit-highlight${i} { stroke: ${options[\"gitInv\" + i]}; fill: ${options[\"gitInv\" + i]}; }\n        .label${i}  { fill: ${options[\"git\" + i]}; }\n        .arrow${i} { stroke: ${options[\"git\" + i]}; }\n        `\n).join(\"\\n\")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${options.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelColor};}\n  .commit-label-bkg { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${options.tagLabelFontSize}; fill: ${options.tagLabelColor};}\n  .tag-label-bkg { fill: ${options.tagLabelBackground}; stroke: ${options.tagLabelBorder}; }\n  .tag-hole { fill: ${options.textColor}; }\n\n  .commit-merge {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor};\n  }\n`, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/git/gitGraphDiagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer: gitGraphRenderer_default,\n  styles: styles_default\n};\nexport {\n  diagram\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}