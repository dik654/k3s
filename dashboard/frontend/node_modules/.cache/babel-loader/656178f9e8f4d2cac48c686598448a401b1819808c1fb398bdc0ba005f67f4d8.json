{"ast":null,"code":"import { defaultExtendedIconProps } from \"../icon/defaults.js\";\nimport { getIconsTree } from \"./tree.js\";\n\n/**\n* Match character\n*/\nconst matchChar = /^[a-f0-9]+(-[a-f0-9]+)*$/;\n/**\n* Validate icon\n*\n* Returns name of property that failed validation or null on success\n*/\nfunction validateIconProps(item, fix, checkOtherProps) {\n  for (const key in item) {\n    const attr = key;\n    const type = typeof item[attr];\n    if (type === \"undefined\") {\n      delete item[attr];\n      continue;\n    }\n    const expectedType = typeof defaultExtendedIconProps[attr];\n    if (expectedType !== \"undefined\") {\n      if (type !== expectedType) {\n        if (fix) {\n          delete item[attr];\n          continue;\n        }\n        return attr;\n      }\n      continue;\n    }\n    if (checkOtherProps && type === \"object\") if (fix) delete item[attr];else return key;\n  }\n  return null;\n}\n/**\n* Validate icon set\n* @returns param obj as IconifyJSON type on success, throw error on failure\n*/\nfunction validateIconSet(obj, options) {\n  const fix = !!(options && options.fix);\n  if (typeof obj !== \"object\" || obj === null || typeof obj.icons !== \"object\" || !obj.icons) throw new Error(\"Bad icon set\");\n  const data = obj;\n  if (options && typeof options.prefix === \"string\") data.prefix = options.prefix;else if (typeof data.prefix !== \"string\" || !data.prefix) throw new Error(\"Invalid prefix\");\n  if (options && typeof options.provider === \"string\") data.provider = options.provider;else if (data.provider !== void 0) {\n    if (typeof data.provider !== \"string\") if (fix) delete data.provider;else throw new Error(\"Invalid provider\");\n  }\n  if (data.aliases !== void 0) {\n    if (typeof data.aliases !== \"object\" || data.aliases === null) if (fix) delete data.aliases;else throw new Error(\"Invalid aliases list\");\n  }\n  const tree = getIconsTree(data);\n  const icons = data.icons;\n  const aliases = data.aliases || Object.create(null);\n  for (const name in tree) {\n    const treeItem = tree[name];\n    const isAlias = !icons[name];\n    const parentObj = isAlias ? aliases : icons;\n    if (!treeItem) {\n      if (fix) {\n        delete parentObj[name];\n        continue;\n      }\n      throw new Error(\"Invalid alias: \".concat(name));\n    }\n    if (!name) {\n      if (fix) {\n        delete parentObj[name];\n        continue;\n      }\n      throw new Error(\"Invalid icon name: \\\"\".concat(name, \"\\\"\"));\n    }\n    const item = parentObj[name];\n    if (!isAlias) {\n      if (typeof item.body !== \"string\") {\n        if (fix) {\n          delete parentObj[name];\n          continue;\n        }\n        throw new Error(\"Invalid icon: \\\"\".concat(name, \"\\\"\"));\n      }\n    }\n    const requiredProp = isAlias ? \"parent\" : \"body\";\n    const key = typeof item[requiredProp] !== \"string\" ? requiredProp : validateIconProps(item, fix, true);\n    if (key !== null) throw new Error(\"Invalid property \\\"\".concat(key, \"\\\" in \\\"\").concat(name, \"\\\"\"));\n  }\n  if (data.not_found !== void 0 && !(data.not_found instanceof Array)) if (fix) delete data.not_found;else throw new Error(\"Invalid not_found list\");\n  if (!Object.keys(data.icons).length && !(data.not_found && data.not_found.length)) throw new Error(\"Icon set is empty\");\n  if (fix && !Object.keys(aliases).length) delete data.aliases;\n  const failedOptionalProp = validateIconProps(data, false, false);\n  if (failedOptionalProp) throw new Error(\"Invalid value type for \\\"\".concat(failedOptionalProp, \"\\\"\"));\n  if (data.chars !== void 0) {\n    if (typeof data.chars !== \"object\" || data.chars === null) if (fix) delete data.chars;else throw new Error(\"Invalid characters map\");\n  }\n  if (typeof data.chars === \"object\") {\n    const chars = data.chars;\n    Object.keys(chars).forEach(char => {\n      if (!matchChar.exec(char) || typeof chars[char] !== \"string\") {\n        if (fix) {\n          delete chars[char];\n          return;\n        }\n        throw new Error(\"Invalid character \\\"\".concat(char, \"\\\"\"));\n      }\n      const target = chars[char];\n      if (!data.icons[target] && (!data.aliases || !data.aliases[target])) {\n        if (fix) {\n          delete chars[char];\n          return;\n        }\n        throw new Error(\"Character \\\"\".concat(char, \"\\\" points to missing icon \\\"\").concat(target, \"\\\"\"));\n      }\n    });\n    if (fix && !Object.keys(data.chars).length) delete data.chars;\n  }\n  return data;\n}\nexport { matchChar, validateIconSet };","map":{"version":3,"names":["defaultExtendedIconProps","getIconsTree","matchChar","validateIconProps","item","fix","checkOtherProps","key","attr","type","expectedType","validateIconSet","obj","options","icons","Error","data","prefix","provider","aliases","tree","Object","create","name","treeItem","isAlias","parentObj","concat","body","requiredProp","not_found","Array","keys","length","failedOptionalProp","chars","forEach","char","exec","target"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@iconify/utils/lib/icon-set/validate.js"],"sourcesContent":["import { defaultExtendedIconProps } from \"../icon/defaults.js\";\nimport { getIconsTree } from \"./tree.js\";\n\n/**\n* Match character\n*/\nconst matchChar = /^[a-f0-9]+(-[a-f0-9]+)*$/;\n/**\n* Validate icon\n*\n* Returns name of property that failed validation or null on success\n*/\nfunction validateIconProps(item, fix, checkOtherProps) {\n\tfor (const key in item) {\n\t\tconst attr = key;\n\t\tconst type = typeof item[attr];\n\t\tif (type === \"undefined\") {\n\t\t\tdelete item[attr];\n\t\t\tcontinue;\n\t\t}\n\t\tconst expectedType = typeof defaultExtendedIconProps[attr];\n\t\tif (expectedType !== \"undefined\") {\n\t\t\tif (type !== expectedType) {\n\t\t\t\tif (fix) {\n\t\t\t\t\tdelete item[attr];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (checkOtherProps && type === \"object\") if (fix) delete item[attr];\n\t\telse return key;\n\t}\n\treturn null;\n}\n/**\n* Validate icon set\n* @returns param obj as IconifyJSON type on success, throw error on failure\n*/\nfunction validateIconSet(obj, options) {\n\tconst fix = !!(options && options.fix);\n\tif (typeof obj !== \"object\" || obj === null || typeof obj.icons !== \"object\" || !obj.icons) throw new Error(\"Bad icon set\");\n\tconst data = obj;\n\tif (options && typeof options.prefix === \"string\") data.prefix = options.prefix;\n\telse if (typeof data.prefix !== \"string\" || !data.prefix) throw new Error(\"Invalid prefix\");\n\tif (options && typeof options.provider === \"string\") data.provider = options.provider;\n\telse if (data.provider !== void 0) {\n\t\tif (typeof data.provider !== \"string\") if (fix) delete data.provider;\n\t\telse throw new Error(\"Invalid provider\");\n\t}\n\tif (data.aliases !== void 0) {\n\t\tif (typeof data.aliases !== \"object\" || data.aliases === null) if (fix) delete data.aliases;\n\t\telse throw new Error(\"Invalid aliases list\");\n\t}\n\tconst tree = getIconsTree(data);\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tfor (const name in tree) {\n\t\tconst treeItem = tree[name];\n\t\tconst isAlias = !icons[name];\n\t\tconst parentObj = isAlias ? aliases : icons;\n\t\tif (!treeItem) {\n\t\t\tif (fix) {\n\t\t\t\tdelete parentObj[name];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow new Error(`Invalid alias: ${name}`);\n\t\t}\n\t\tif (!name) {\n\t\t\tif (fix) {\n\t\t\t\tdelete parentObj[name];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthrow new Error(`Invalid icon name: \"${name}\"`);\n\t\t}\n\t\tconst item = parentObj[name];\n\t\tif (!isAlias) {\n\t\t\tif (typeof item.body !== \"string\") {\n\t\t\t\tif (fix) {\n\t\t\t\t\tdelete parentObj[name];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Invalid icon: \"${name}\"`);\n\t\t\t}\n\t\t}\n\t\tconst requiredProp = isAlias ? \"parent\" : \"body\";\n\t\tconst key = typeof item[requiredProp] !== \"string\" ? requiredProp : validateIconProps(item, fix, true);\n\t\tif (key !== null) throw new Error(`Invalid property \"${key}\" in \"${name}\"`);\n\t}\n\tif (data.not_found !== void 0 && !(data.not_found instanceof Array)) if (fix) delete data.not_found;\n\telse throw new Error(\"Invalid not_found list\");\n\tif (!Object.keys(data.icons).length && !(data.not_found && data.not_found.length)) throw new Error(\"Icon set is empty\");\n\tif (fix && !Object.keys(aliases).length) delete data.aliases;\n\tconst failedOptionalProp = validateIconProps(data, false, false);\n\tif (failedOptionalProp) throw new Error(`Invalid value type for \"${failedOptionalProp}\"`);\n\tif (data.chars !== void 0) {\n\t\tif (typeof data.chars !== \"object\" || data.chars === null) if (fix) delete data.chars;\n\t\telse throw new Error(\"Invalid characters map\");\n\t}\n\tif (typeof data.chars === \"object\") {\n\t\tconst chars = data.chars;\n\t\tObject.keys(chars).forEach((char) => {\n\t\t\tif (!matchChar.exec(char) || typeof chars[char] !== \"string\") {\n\t\t\t\tif (fix) {\n\t\t\t\t\tdelete chars[char];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Invalid character \"${char}\"`);\n\t\t\t}\n\t\t\tconst target = chars[char];\n\t\t\tif (!data.icons[target] && (!data.aliases || !data.aliases[target])) {\n\t\t\t\tif (fix) {\n\t\t\t\t\tdelete chars[char];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Character \"${char}\" points to missing icon \"${target}\"`);\n\t\t\t}\n\t\t});\n\t\tif (fix && !Object.keys(data.chars).length) delete data.chars;\n\t}\n\treturn data;\n}\n\nexport { matchChar, validateIconSet };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}