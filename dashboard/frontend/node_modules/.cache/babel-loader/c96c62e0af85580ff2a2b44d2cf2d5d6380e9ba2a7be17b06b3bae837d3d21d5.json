{"ast":null,"code":"import _objectSpread from \"/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { getSubGraphTitleMargins } from \"./chunk-CVBHYZKI.mjs\";\nimport { compileStyles, solidStateFill, styles2String, userNodeOverrides } from \"./chunk-ATLVNIR6.mjs\";\nimport { createText, getIconSVG } from \"./chunk-JA3XYJ7Z.mjs\";\nimport { calculateTextWidth, decodeEntities, handleUndefinedAttr, parseFontSize } from \"./chunk-S3R3BYOJ.mjs\";\nimport { common_default, defaultConfig_default, evaluate, getConfig, getConfig2, hasKatex, parseGenericTypes, renderKatexSanitized, sanitizeText, sanitizeText2 } from \"./chunk-ABZYJK2D.mjs\";\nimport { __name, log } from \"./chunk-AGHRB4JF.mjs\";\n\n// src/rendering-util/rendering-elements/shapes/util.ts\nimport { select } from \"d3\";\nvar labelHelper = /* @__PURE__ */__name(async (parent, node, _classes) => {\n  var _getConfig, _getConfig2$flowchart, _node$padding;\n  let cssClasses;\n  const useHtmlLabels = node.useHtmlLabels || evaluate((_getConfig = getConfig2()) === null || _getConfig === void 0 ? void 0 : _getConfig.htmlLabels);\n  if (!_classes) {\n    cssClasses = \"node default\";\n  } else {\n    cssClasses = _classes;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", handleUndefinedAttr(node.labelStyle));\n  let label;\n  if (node.label === void 0) {\n    label = \"\";\n  } else {\n    label = typeof node.label === \"string\" ? node.label : node.label[0];\n  }\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: node.width || ((_getConfig2$flowchart = getConfig2().flowchart) === null || _getConfig2$flowchart === void 0 ? void 0 : _getConfig2$flowchart.wrappingWidth),\n    // @ts-expect-error -- This is currently not used. Should this be `classes` instead?\n    cssClasses: \"markdown-node-label\",\n    style: node.labelStyle,\n    addSvgBackground: !!node.icon || !!node.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = ((_node$padding = node === null || node === void 0 ? void 0 : node.padding) !== null && _node$padding !== void 0 ? _node$padding : 0) / 2;\n  if (useHtmlLabels) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = label.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all([...images].map(img => new Promise(res => {\n        function setupImage() {\n          img.style.display = \"flex\";\n          img.style.flexDirection = \"column\";\n          if (noImgText) {\n            const bodyFontSize = getConfig2().fontSize ? getConfig2().fontSize : window.getComputedStyle(document.body).fontSize;\n            const enlargingFactor = 5;\n            const [parsedBodyFontSize = defaultConfig_default.fontSize] = parseFontSize(bodyFontSize);\n            const width = parsedBodyFontSize * enlargingFactor + \"px\";\n            img.style.minWidth = width;\n            img.style.maxWidth = width;\n          } else {\n            img.style.width = \"100%\";\n          }\n          res(img);\n        }\n        __name(setupImage, \"setupImage\");\n        setTimeout(() => {\n          if (img.complete) {\n            setupImage();\n          }\n        });\n        img.addEventListener(\"error\", setupImage);\n        img.addEventListener(\"load\", setupImage);\n      })));\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (node.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label: labelEl\n  };\n}, \"labelHelper\");\nvar insertLabel = /* @__PURE__ */__name(async (parent, label, options) => {\n  var _getConfig2, _getConfig3, _getConfig4;\n  const useHtmlLabels = options.useHtmlLabels || evaluate((_getConfig2 = getConfig2()) === null || _getConfig2 === void 0 || (_getConfig2 = _getConfig2.flowchart) === null || _getConfig2 === void 0 ? void 0 : _getConfig2.htmlLabels);\n  const labelEl = parent.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", options.labelStyle || \"\");\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: options.width || ((_getConfig3 = getConfig2()) === null || _getConfig3 === void 0 || (_getConfig3 = _getConfig3.flowchart) === null || _getConfig3 === void 0 ? void 0 : _getConfig3.wrappingWidth),\n    style: options.labelStyle,\n    addSvgBackground: !!options.icon || !!options.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = options.padding / 2;\n  if (evaluate((_getConfig4 = getConfig2()) === null || _getConfig4 === void 0 || (_getConfig4 = _getConfig4.flowchart) === null || _getConfig4 === void 0 ? void 0 : _getConfig4.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (options.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return {\n    shapeSvg: parent,\n    bbox,\n    halfPadding,\n    label: labelEl\n  };\n}, \"insertLabel\");\nvar updateNodeBounds = /* @__PURE__ */__name((node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n}, \"updateNodeBounds\");\nvar getNodeClasses = /* @__PURE__ */__name((node, extra) => (node.look === \"handDrawn\" ? \"rough-node\" : \"node\") + \" \" + node.cssClasses + \" \" + (extra || \"\"), \"getNodeClasses\");\nfunction createPathFromPoints(points) {\n  const pointStrings = points.map((p, i) => \"\".concat(i === 0 ? \"M\" : \"L\").concat(p.x, \",\").concat(p.y));\n  pointStrings.push(\"Z\");\n  return pointStrings.join(\" \");\n}\n__name(createPathFromPoints, \"createPathFromPoints\");\nfunction generateFullSineWavePoints(x1, y1, x2, y2, amplitude, numCycles) {\n  const points = [];\n  const steps = 50;\n  const deltaX = x2 - x1;\n  const deltaY = y2 - y1;\n  const cycleLength = deltaX / numCycles;\n  const frequency = 2 * Math.PI / cycleLength;\n  const midY = y1 + deltaY / 2;\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    const x = x1 + t * deltaX;\n    const y = midY + amplitude * Math.sin(frequency * (x - x1));\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateFullSineWavePoints, \"generateFullSineWavePoints\");\nfunction generateCirclePoints(centerX, centerY, radius, numPoints, startAngle, endAngle) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints, \"generateCirclePoints\");\n\n// src/rendering-util/rendering-elements/clusters.js\nimport { select as select3 } from \"d3\";\nimport rough from \"roughjs\";\n\n// src/rendering-util/rendering-elements/intersect/intersect-rect.js\nvar intersectRect = /* @__PURE__ */__name((node, point) => {\n  var x = node.x;\n  var y = node.y;\n  var dx = point.x - x;\n  var dy = point.y - y;\n  var w = node.width / 2;\n  var h = node.height / 2;\n  var sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = dy === 0 ? 0 : h * dx / dy;\n    sy = h;\n  } else {\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = dx === 0 ? 0 : w * dy / dx;\n  }\n  return {\n    x: x + sx,\n    y: y + sy\n  };\n}, \"intersectRect\");\nvar intersect_rect_default = intersectRect;\n\n// src/rendering-util/rendering-elements/createLabel.js\nimport { select as select2 } from \"d3\";\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr(\"style\", styleFn);\n  }\n}\n__name(applyStyle, \"applyStyle\");\nasync function addHtmlLabel(node) {\n  const fo = select2(document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\"));\n  const div = fo.append(\"xhtml:div\");\n  const config = getConfig2();\n  let label = node.label;\n  if (node.label && hasKatex(node.label)) {\n    label = await renderKatexSanitized(node.label.replace(common_default.lineBreakRegex, \"\\n\"), config);\n  }\n  const labelClass = node.isNode ? \"nodeLabel\" : \"edgeLabel\";\n  const labelSpan = '<span class=\"' + labelClass + '\" ' + (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : \"\") +\n  // codeql [js/html-constructed-from-input] : false positive\n  \">\" + label + \"</span>\";\n  div.html(sanitizeText(labelSpan, config));\n  applyStyle(div, node.labelStyle);\n  div.style(\"display\", \"inline-block\");\n  div.style(\"padding-right\", \"1px\");\n  div.style(\"white-space\", \"nowrap\");\n  div.attr(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  return fo.node();\n}\n__name(addHtmlLabel, \"addHtmlLabel\");\nvar createLabel = /* @__PURE__ */__name(async (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || \"\";\n  if (typeof vertexText === \"object\") {\n    vertexText = vertexText[0];\n  }\n  if (evaluate(getConfig2().flowchart.htmlLabels)) {\n    vertexText = vertexText.replace(/\\\\n|\\n/g, \"<br />\");\n    log.info(\"vertexText\" + vertexText);\n    const node = {\n      isNode,\n      label: decodeEntities(vertexText).replace(/fa[blrs]?:fa-[\\w-]+/g, s => \"<i class='\".concat(s.replace(\":\", \" \"), \"'></i>\")),\n      labelStyle: style ? style.replace(\"fill:\", \"color:\") : style\n    };\n    let vertexNode = await addHtmlLabel(node);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    svgLabel.setAttribute(\"style\", style.replace(\"color:\", \"fill:\"));\n    let rows = [];\n    if (typeof vertexText === \"string\") {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n    for (const row of rows) {\n      const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n      tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n      tspan.setAttribute(\"dy\", \"1em\");\n      tspan.setAttribute(\"x\", \"0\");\n      if (isTitle) {\n        tspan.setAttribute(\"class\", \"title-row\");\n      } else {\n        tspan.setAttribute(\"class\", \"row\");\n      }\n      tspan.textContent = row.trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n}, \"createLabel\");\nvar createLabel_default = createLabel;\n\n// src/rendering-util/rendering-elements/shapes/roundedRectPath.ts\nvar createRoundedRectPathD = /* @__PURE__ */__name((x, y, totalWidth, totalHeight, radius) => [\"M\", x + radius, y,\n// Move to the first point\n\"H\", x + totalWidth - radius,\n// Draw horizontal line to the beginning of the right corner\n\"A\", radius, radius, 0, 0, 1, x + totalWidth, y + radius,\n// Draw arc to the right top corner\n\"V\", y + totalHeight - radius,\n// Draw vertical line down to the beginning of the right bottom corner\n\"A\", radius, radius, 0, 0, 1, x + totalWidth - radius, y + totalHeight,\n// Draw arc to the right bottom corner\n\"H\", x + radius,\n// Draw horizontal line to the beginning of the left bottom corner\n\"A\", radius, radius, 0, 0, 1, x, y + totalHeight - radius,\n// Draw arc to the left bottom corner\n\"V\", y + radius,\n// Draw vertical line up to the beginning of the left top corner\n\"A\", radius, radius, 0, 0, 1, x + radius, y,\n// Draw arc to the left top corner\n\"Z\"\n// Close the path\n].join(\" \"), \"createRoundedRectPathD\");\n\n// src/rendering-util/rendering-elements/clusters.js\nvar rect = /* @__PURE__ */__name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    clusterBkg,\n    clusterBorder\n  } = themeVariables;\n  const {\n    labelStyles,\n    nodeStyles,\n    borderStyles,\n    backgroundStyles\n  } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 3,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, 0), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const {\n    subGraphTitleTopMargin\n  } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\"transform\", // This puts the label on top of the box instead of inside it\n  \"translate(\".concat(node.x - bbox.width / 2, \", \").concat(node.y - node.height / 2 + subGraphTitleTopMargin, \")\"));\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"rect\");\nvar noteGroup = /* @__PURE__ */__name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"note-cluster\").attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding).attr(\"fill\", \"none\");\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: {\n      width: 0,\n      height: 0\n    }\n  };\n}, \"noteGroup\");\nvar roundedWithTitle = /* @__PURE__ */__name(async (parent, node) => {\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    altBackground,\n    compositeBackground,\n    compositeTitleBackground,\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  let innerRect = shapeSvg.append(\"rect\");\n  const text2 = label.node().appendChild(await createLabel_default(node.label, node.labelStyle, void 0, true));\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = (node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width) + padding;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height + padding;\n  const innerHeight = node.height + padding - bbox.height - 6;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  const innerY = node.y - node.height / 2 - halfPadding + bbox.height + 2;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const isAlt = node.cssClasses.includes(\"statediagram-cluster-alt\");\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = node.rx || node.ry ? rc.path(createRoundedRectPathD(x, y, width, height, 10), {\n      roughness: 0.7,\n      fill: compositeTitleBackground,\n      fillStyle: \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    }) : rc.rectangle(x, y, width, height, {\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    const roughInnerNode = rc.rectangle(x, innerY, width, innerHeight, {\n      fill: isAlt ? altBackground : compositeBackground,\n      fillStyle: isAlt ? \"hachure\" : \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    innerRect = shapeSvg.insert(() => roughInnerNode);\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"outer\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n    innerRect.attr(\"class\", \"inner\").attr(\"x\", x).attr(\"y\", innerY).attr(\"width\", width).attr(\"height\", innerHeight);\n  }\n  label.attr(\"transform\", \"translate(\".concat(node.x - bbox.width / 2, \", \").concat(y + 1 - (evaluate(siteConfig.flowchart.htmlLabels) ? 0 : 3), \")\"));\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.labelBBox = bbox;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"roundedWithTitle\");\nvar kanbanSection = /* @__PURE__ */__name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    clusterBkg,\n    clusterBorder\n  } = themeVariables;\n  const {\n    labelStyles,\n    nodeStyles,\n    borderStyles,\n    backgroundStyles\n  } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true,\n    width: node.width\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 4,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, node.rx), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const {\n    subGraphTitleTopMargin\n  } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\"transform\", // This puts the label on top of the box instead of inside it\n  \"translate(\".concat(node.x - bbox.width / 2, \", \").concat(node.y - node.height / 2 + subGraphTitleTopMargin, \")\"));\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"kanbanSection\");\nvar divider = /* @__PURE__ */__name((parent, node) => {\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const padding = 0 * node.padding;\n  const width = node.width + padding;\n  node.diff = -node.padding;\n  const height = node.height + padding;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = rc.rectangle(x, y, width, height, {\n      fill: \"lightgrey\",\n      roughness: 0.5,\n      strokeLineDash: [5],\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"divider\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n  }\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = 0;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: {}\n  };\n}, \"divider\");\nvar squareRect = rect;\nvar shapes = {\n  rect,\n  squareRect,\n  roundedWithTitle,\n  noteGroup,\n  divider,\n  kanbanSection\n};\nvar clusterElems = /* @__PURE__ */new Map();\nvar insertCluster = /* @__PURE__ */__name(async (elem, node) => {\n  const shape = node.shape || \"rect\";\n  const cluster = await shapes[shape](elem, node);\n  clusterElems.set(node.id, cluster);\n  return cluster;\n}, \"insertCluster\");\nvar clear = /* @__PURE__ */__name(() => {\n  clusterElems = /* @__PURE__ */new Map();\n}, \"clear\");\n\n// src/rendering-util/rendering-elements/intersect/intersect-node.js\nfunction intersectNode(node, point) {\n  return node.intersect(point);\n}\n__name(intersectNode, \"intersectNode\");\nvar intersect_node_default = intersectNode;\n\n// src/rendering-util/rendering-elements/intersect/intersect-ellipse.js\nfunction intersectEllipse(node, rx, ry, point) {\n  var cx = node.x;\n  var cy = node.y;\n  var px = cx - point.x;\n  var py = cy - point.y;\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n  var dx = Math.abs(rx * ry * px / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs(rx * ry * py / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n  return {\n    x: cx + dx,\n    y: cy + dy\n  };\n}\n__name(intersectEllipse, \"intersectEllipse\");\nvar intersect_ellipse_default = intersectEllipse;\n\n// src/rendering-util/rendering-elements/intersect/intersect-circle.js\nfunction intersectCircle(node, rx, point) {\n  return intersect_ellipse_default(node, rx, rx, point);\n}\n__name(intersectCircle, \"intersectCircle\");\nvar intersect_circle_default = intersectCircle;\n\n// src/rendering-util/rendering-elements/intersect/intersect-line.js\nfunction intersectLine(p1, p2, q1, q2) {\n  {\n    const a1 = p2.y - p1.y;\n    const b1 = p1.x - p2.x;\n    const c1 = p2.x * p1.y - p1.x * p2.y;\n    const r3 = a1 * q1.x + b1 * q1.y + c1;\n    const r4 = a1 * q2.x + b1 * q2.y + c1;\n    const epsilon = 1e-6;\n    if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n      return;\n    }\n    const a2 = q2.y - q1.y;\n    const b2 = q1.x - q2.x;\n    const c2 = q2.x * q1.y - q1.x * q2.y;\n    const r1 = a2 * p1.x + b2 * p1.y + c2;\n    const r2 = a2 * p2.x + b2 * p2.y + c2;\n    if (Math.abs(r1) < epsilon && Math.abs(r2) < epsilon && sameSign(r1, r2)) {\n      return;\n    }\n    const denom = a1 * b2 - a2 * b1;\n    if (denom === 0) {\n      return;\n    }\n    const offset = Math.abs(denom / 2);\n    let num = b1 * c2 - b2 * c1;\n    const x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n    num = a2 * c1 - a1 * c2;\n    const y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n    return {\n      x,\n      y\n    };\n  }\n}\n__name(intersectLine, \"intersectLine\");\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n__name(sameSign, \"sameSign\");\nvar intersect_line_default = intersectLine;\n\n// src/rendering-util/rendering-elements/intersect/intersect-polygon.js\nfunction intersectPolygon(node, polyPoints, point) {\n  let x1 = node.x;\n  let y1 = node.y;\n  let intersections = [];\n  let minX = Number.POSITIVE_INFINITY;\n  let minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === \"function\") {\n    polyPoints.forEach(function (entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n  let left = x1 - node.width / 2 - minX;\n  let top = y1 - node.height / 2 - minY;\n  for (let i = 0; i < polyPoints.length; i++) {\n    let p1 = polyPoints[i];\n    let p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    let intersect = intersect_line_default(node, point, {\n      x: left + p1.x,\n      y: top + p1.y\n    }, {\n      x: left + p2.x,\n      y: top + p2.y\n    });\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n  if (!intersections.length) {\n    return node;\n  }\n  if (intersections.length > 1) {\n    intersections.sort(function (p, q) {\n      let pdx = p.x - point.x;\n      let pdy = p.y - point.y;\n      let distp = Math.sqrt(pdx * pdx + pdy * pdy);\n      let qdx = q.x - point.x;\n      let qdy = q.y - point.y;\n      let distq = Math.sqrt(qdx * qdx + qdy * qdy);\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n__name(intersectPolygon, \"intersectPolygon\");\nvar intersect_polygon_default = intersectPolygon;\n\n// src/rendering-util/rendering-elements/intersect/index.js\nvar intersect_default = {\n  node: intersect_node_default,\n  circle: intersect_circle_default,\n  ellipse: intersect_ellipse_default,\n  polygon: intersect_polygon_default,\n  rect: intersect_rect_default\n};\n\n// src/rendering-util/rendering-elements/shapes/anchor.ts\nimport rough2 from \"roughjs\";\nfunction anchor(parent, node) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const classes = getNodeClasses(node);\n  let cssClasses = classes;\n  if (!classes) {\n    cssClasses = \"anchor\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const radius = 1;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough2.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"black\",\n    stroke: \"none\",\n    fillStyle: \"solid\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const roughNode = rc.circle(0, 0, radius * 2, options);\n  const circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n  circleElem.attr(\"class\", \"anchor\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  updateNodeBounds(node, circleElem);\n  node.intersect = function (point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(anchor, \"anchor\");\n\n// src/rendering-util/rendering-elements/shapes/bowTieRect.ts\nimport rough3 from \"roughjs\";\nfunction generateArcPoints(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateArcPoints, \"generateArcPoints\");\nasync function bowTieRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding + 20;\n  const h = bbox.height + node.padding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const {\n    cssStyles\n  } = node;\n  const points = [{\n    x: w / 2,\n    y: -h / 2\n  }, {\n    x: -w / 2,\n    y: -h / 2\n  }, ...generateArcPoints(-w / 2, -h / 2, -w / 2, h / 2, rx, ry, false), {\n    x: w / 2,\n    y: h / 2\n  }, ...generateArcPoints(w / 2, h / 2, w / 2, -h / 2, rx, ry, true)];\n  const rc = rough3.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const bowTieRectPath = createPathFromPoints(points);\n  const bowTieRectShapePath = rc.path(bowTieRectPath, options);\n  const bowTieRectShape = shapeSvg.insert(() => bowTieRectShapePath, \":first-child\");\n  bowTieRectShape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  bowTieRectShape.attr(\"transform\", \"translate(\".concat(rx / 2, \", 0)\"));\n  updateNodeBounds(node, bowTieRectShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(bowTieRect, \"bowTieRect\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nimport rough4 from \"roughjs\";\n\n// src/rendering-util/rendering-elements/shapes/insertPolygonShape.ts\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent.insert(\"polygon\", \":first-child\").attr(\"points\", points.map(function (d) {\n    return d.x + \",\" + d.y;\n  }).join(\" \")).attr(\"class\", \"label-container\").attr(\"transform\", \"translate(\" + -w / 2 + \",\" + h / 2 + \")\");\n}\n__name(insertPolygonShape, \"insertPolygonShape\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nasync function card(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const padding = 12;\n  const w = bbox.width + node.padding + padding;\n  const left = 0;\n  const right = w;\n  const top = -h;\n  const bottom = 0;\n  const points = [{\n    x: left + padding,\n    y: top\n  }, {\n    x: right,\n    y: top\n  }, {\n    x: right,\n    y: bottom\n  }, {\n    x: left,\n    y: bottom\n  }, {\n    x: left,\n    y: top + padding\n  }, {\n    x: left + padding,\n    y: top\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough4.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(card, \"card\");\n\n// src/rendering-util/rendering-elements/shapes/choice.ts\nimport rough5 from \"roughjs\";\nfunction choice(parent, node) {\n  var _node$domId, _node$width;\n  const {\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", (_node$domId = node.domId) !== null && _node$domId !== void 0 ? _node$domId : node.id);\n  const {\n    cssStyles\n  } = node;\n  const s = Math.max(28, (_node$width = node.width) !== null && _node$width !== void 0 ? _node$width : 0);\n  const points = [{\n    x: 0,\n    y: s / 2\n  }, {\n    x: s / 2,\n    y: 0\n  }, {\n    x: 0,\n    y: -s / 2\n  }, {\n    x: -s / 2,\n    y: 0\n  }];\n  const rc = rough5.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const choicePath = createPathFromPoints(points);\n  const roughNode = rc.path(choicePath, options);\n  const choiceShape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = 28;\n  node.height = 28;\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(choice, \"choice\");\n\n// src/rendering-util/rendering-elements/shapes/circle.ts\nimport rough6 from \"roughjs\";\nasync function circle(parent, node, options) {\n  var _options$padding;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const padding = (_options$padding = options === null || options === void 0 ? void 0 : options.padding) !== null && _options$padding !== void 0 ? _options$padding : halfPadding;\n  const radius = bbox.width / 2 + padding;\n  let circleElem;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough6.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rc.circle(0, 0, radius * 2, options2);\n    circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    circleElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    circleElem = shapeSvg.insert(\"circle\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"r\", radius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleElem);\n  node.calcIntersect = function (bounds, point) {\n    const radius2 = bounds.width / 2;\n    return intersect_default.circle(bounds, radius2, point);\n  };\n  node.intersect = function (point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(circle, \"circle\");\n\n// src/rendering-util/rendering-elements/shapes/crossedCircle.ts\nimport rough7 from \"roughjs\";\nfunction createLine(r) {\n  const xAxis45 = Math.cos(Math.PI / 4);\n  const yAxis45 = Math.sin(Math.PI / 4);\n  const lineLength = r * 2;\n  const pointQ1 = {\n    x: lineLength / 2 * xAxis45,\n    y: lineLength / 2 * yAxis45\n  };\n  const pointQ2 = {\n    x: -(lineLength / 2) * xAxis45,\n    y: lineLength / 2 * yAxis45\n  };\n  const pointQ3 = {\n    x: -(lineLength / 2) * xAxis45,\n    y: -(lineLength / 2) * yAxis45\n  };\n  const pointQ4 = {\n    x: lineLength / 2 * xAxis45,\n    y: -(lineLength / 2) * yAxis45\n  };\n  return \"M \".concat(pointQ2.x, \",\").concat(pointQ2.y, \" L \").concat(pointQ4.x, \",\").concat(pointQ4.y, \"\\n                   M \").concat(pointQ1.x, \",\").concat(pointQ1.y, \" L \").concat(pointQ3.x, \",\").concat(pointQ3.y);\n}\n__name(createLine, \"createLine\");\nfunction crossedCircle(parent, node) {\n  var _node$domId2, _node$width2;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", (_node$domId2 = node.domId) !== null && _node$domId2 !== void 0 ? _node$domId2 : node.id);\n  const radius = Math.max(30, (_node$width2 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width2 !== void 0 ? _node$width2 : 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough7.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const linePath = createLine(radius);\n  const lineNode = rc.path(linePath, options);\n  const crossedCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  crossedCircle2.insert(() => lineNode);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, crossedCircle2);\n  node.intersect = function (point) {\n    log.info(\"crossedCircle intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(crossedCircle, \"crossedCircle\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceLeft.ts\nimport rough8 from \"roughjs\";\nfunction generateCirclePoints2(centerX, centerY, radius) {\n  let numPoints = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 100;\n  let startAngle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  let endAngle = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 180;\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints2, \"generateCirclePoints\");\nasync function curlyBraceLeft(parent, node) {\n  var _node$padding2, _node$padding3, _bbox$left, _node$padding4, _bbox$top;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + ((_node$padding2 = node.padding) !== null && _node$padding2 !== void 0 ? _node$padding2 : 0);\n  const h = bbox.height + ((_node$padding3 = node.padding) !== null && _node$padding3 !== void 0 ? _node$padding3 : 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const points = [...generateCirclePoints2(w / 2, -h / 2, radius, 30, -90, 0), {\n    x: -w / 2 - radius,\n    y: radius\n  }, ...generateCirclePoints2(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints2(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90)];\n  const rectPoints = [{\n    x: w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints2(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: -w / 2 - radius,\n    y: -radius\n  }, ...generateCirclePoints2(w / 2 + w * 0.1, -radius, radius, 20, -180, -270), ...generateCirclePoints2(w / 2 + w * 0.1, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: h / 2\n  }, ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90), {\n    x: -w / 2,\n    y: h / 2 + radius\n  }, {\n    x: w / 2,\n    y: h / 2 + radius\n  }];\n  const rc = rough8.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceLeftPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceLeftPath.replace(\"Z\", \"\");\n  const curlyBraceLeftNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, _objectSpread({}, options));\n  const curlyBraceLeftShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceLeftShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceLeftShape.insert(() => curlyBraceLeftNode, \":first-child\");\n  curlyBraceLeftShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceLeftShape.attr(\"transform\", \"translate(\".concat(radius, \", 0)\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + radius - (bbox.x - ((_bbox$left = bbox.left) !== null && _bbox$left !== void 0 ? _bbox$left : 0)), \",\").concat(-h / 2 + ((_node$padding4 = node.padding) !== null && _node$padding4 !== void 0 ? _node$padding4 : 0) / 2 - (bbox.y - ((_bbox$top = bbox.top) !== null && _bbox$top !== void 0 ? _bbox$top : 0)), \")\"));\n  updateNodeBounds(node, curlyBraceLeftShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceLeft, \"curlyBraceLeft\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceRight.ts\nimport rough9 from \"roughjs\";\nfunction generateCirclePoints3(centerX, centerY, radius) {\n  let numPoints = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 100;\n  let startAngle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  let endAngle = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 180;\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints3, \"generateCirclePoints\");\nasync function curlyBraceRight(parent, node) {\n  var _node$padding5, _node$padding6, _node$padding7, _bbox$left2, _node$padding8, _bbox$top2;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + ((_node$padding5 = node.padding) !== null && _node$padding5 !== void 0 ? _node$padding5 : 0);\n  const h = bbox.height + ((_node$padding6 = node.padding) !== null && _node$padding6 !== void 0 ? _node$padding6 : 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const points = [...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: w / 2 + radius,\n    y: -radius\n  }, ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: w / 2 + radius,\n    y: h / 2\n  }, ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90)];\n  const rectPoints = [{\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: w / 2 + radius,\n    y: -radius\n  }, ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: w / 2 + radius,\n    y: h / 2\n  }, ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90), {\n    x: w / 2,\n    y: h / 2 + radius\n  }, {\n    x: -w / 2,\n    y: h / 2 + radius\n  }];\n  const rc = rough9.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceRightPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceRightPath.replace(\"Z\", \"\");\n  const curlyBraceRightNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, _objectSpread({}, options));\n  const curlyBraceRightShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceRightShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceRightShape.insert(() => curlyBraceRightNode, \":first-child\");\n  curlyBraceRightShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceRightShape.attr(\"transform\", \"translate(\".concat(-radius, \", 0)\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding7 = node.padding) !== null && _node$padding7 !== void 0 ? _node$padding7 : 0) / 2 - (bbox.x - ((_bbox$left2 = bbox.left) !== null && _bbox$left2 !== void 0 ? _bbox$left2 : 0)), \",\").concat(-h / 2 + ((_node$padding8 = node.padding) !== null && _node$padding8 !== void 0 ? _node$padding8 : 0) / 2 - (bbox.y - ((_bbox$top2 = bbox.top) !== null && _bbox$top2 !== void 0 ? _bbox$top2 : 0)), \")\"));\n  updateNodeBounds(node, curlyBraceRightShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceRight, \"curlyBraceRight\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraces.ts\nimport rough10 from \"roughjs\";\nfunction generateCirclePoints4(centerX, centerY, radius) {\n  let numPoints = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 100;\n  let startAngle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  let endAngle = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 180;\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints4, \"generateCirclePoints\");\nasync function curlyBraces(parent, node) {\n  var _node$padding9, _node$padding0, _node$padding1, _bbox$left3, _node$padding10, _bbox$top3;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + ((_node$padding9 = node.padding) !== null && _node$padding9 !== void 0 ? _node$padding9 : 0);\n  const h = bbox.height + ((_node$padding0 = node.padding) !== null && _node$padding0 !== void 0 ? _node$padding0 : 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const leftCurlyBracePoints = [...generateCirclePoints4(w / 2, -h / 2, radius, 30, -90, 0), {\n    x: -w / 2 - radius,\n    y: radius\n  }, ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90)];\n  const rightCurlyBracePoints = [...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180), {\n    x: w / 2 - radius / 2,\n    y: radius\n  }, ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90), ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0), {\n    x: w / 2 - radius / 2,\n    y: -radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)];\n  const rectPoints = [{\n    x: w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints4(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: -w / 2 - radius,\n    y: -radius\n  }, ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: h / 2\n  }, ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90), {\n    x: -w / 2,\n    y: h / 2 + radius\n  }, {\n    x: w / 2 - radius - radius / 2,\n    y: h / 2 + radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180), {\n    x: w / 2 - radius / 2,\n    y: radius\n  }, ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90), ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0), {\n    x: w / 2 - radius / 2,\n    y: -radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)];\n  const rc = rough10.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const leftCurlyBracePath = createPathFromPoints(leftCurlyBracePoints);\n  const newLeftCurlyBracePath = leftCurlyBracePath.replace(\"Z\", \"\");\n  const leftCurlyBraceNode = rc.path(newLeftCurlyBracePath, options);\n  const rightCurlyBracePath = createPathFromPoints(rightCurlyBracePoints);\n  const newRightCurlyBracePath = rightCurlyBracePath.replace(\"Z\", \"\");\n  const rightCurlyBraceNode = rc.path(newRightCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, _objectSpread({}, options));\n  const curlyBracesShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBracesShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBracesShape.insert(() => leftCurlyBraceNode, \":first-child\");\n  curlyBracesShape.insert(() => rightCurlyBraceNode, \":first-child\");\n  curlyBracesShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBracesShape.attr(\"transform\", \"translate(\".concat(radius - radius / 4, \", 0)\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding1 = node.padding) !== null && _node$padding1 !== void 0 ? _node$padding1 : 0) / 2 - (bbox.x - ((_bbox$left3 = bbox.left) !== null && _bbox$left3 !== void 0 ? _bbox$left3 : 0)), \",\").concat(-h / 2 + ((_node$padding10 = node.padding) !== null && _node$padding10 !== void 0 ? _node$padding10 : 0) / 2 - (bbox.y - ((_bbox$top3 = bbox.top) !== null && _bbox$top3 !== void 0 ? _bbox$top3 : 0)), \")\"));\n  updateNodeBounds(node, curlyBracesShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraces, \"curlyBraces\");\n\n// src/rendering-util/rendering-elements/shapes/curvedTrapezoid.ts\nimport rough11 from \"roughjs\";\nasync function curvedTrapezoid(parent, node) {\n  var _node$padding11, _node$width3, _node$padding12, _node$height;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 80,\n    minHeight = 20;\n  const w = Math.max(minWidth, (bbox.width + ((_node$padding11 = node.padding) !== null && _node$padding11 !== void 0 ? _node$padding11 : 0) * 2) * 1.25, (_node$width3 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width3 !== void 0 ? _node$width3 : 0);\n  const h = Math.max(minHeight, bbox.height + ((_node$padding12 = node.padding) !== null && _node$padding12 !== void 0 ? _node$padding12 : 0) * 2, (_node$height = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height !== void 0 ? _node$height : 0);\n  const radius = h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough11.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const totalWidth = w,\n    totalHeight = h;\n  const rw = totalWidth - radius;\n  const tw = totalHeight / 4;\n  const points = [{\n    x: rw,\n    y: 0\n  }, {\n    x: tw,\n    y: 0\n  }, {\n    x: 0,\n    y: totalHeight / 2\n  }, {\n    x: tw,\n    y: totalHeight\n  }, {\n    x: rw,\n    y: totalHeight\n  }, ...generateCirclePoints(-rw, -totalHeight / 2, radius, 50, 270, 90)];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(-h / 2, \")\"));\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curvedTrapezoid, \"curvedTrapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/cylinder.ts\nimport rough12 from \"roughjs\";\nvar createCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x, \",\").concat(y + ry), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(-width, \",0\"), \"l0,\".concat(height), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"l0,\".concat(-height)].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x, \",\").concat(y + ry), \"M\".concat(x + width, \",\").concat(y + ry), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(-width, \",0\"), \"l0,\".concat(height), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"l0,\".concat(-height)].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x - width / 2, \",\").concat(-height / 2), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\")].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function cylinder(parent, node) {\n  var _node$width4, _node$height2, _bbox$left4, _node$padding13, _bbox$top4;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + node.padding, (_node$width4 = node.width) !== null && _node$width4 !== void 0 ? _node$width4 : 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + node.padding, (_node$height2 = node.height) !== null && _node$height2 !== void 0 ? _node$height2 : 0);\n  let cylinder2;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough12.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD(0, ry, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, {\n      fill: \"none\"\n    }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(-(h / 2 + ry), \")\"));\n  updateNodeBounds(node, cylinder2);\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - (bbox.x - ((_bbox$left4 = bbox.left) !== null && _bbox$left4 !== void 0 ? _bbox$left4 : 0)), \", \").concat(-(bbox.height / 2) + ((_node$padding13 = node.padding) !== null && _node$padding13 !== void 0 ? _node$padding13 : 0) / 1.5 - (bbox.y - ((_bbox$top4 = bbox.top) !== null && _bbox$top4 !== void 0 ? _bbox$top4 : 0)), \")\"));\n  node.intersect = function (point) {\n    var _node$x, _node$width5, _node$width6, _node$y, _node$height3;\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - ((_node$x = node.x) !== null && _node$x !== void 0 ? _node$x : 0);\n    if (rx != 0 && (Math.abs(x) < ((_node$width5 = node.width) !== null && _node$width5 !== void 0 ? _node$width5 : 0) / 2 || Math.abs(x) == ((_node$width6 = node.width) !== null && _node$width6 !== void 0 ? _node$width6 : 0) / 2 && Math.abs(pos.y - ((_node$y = node.y) !== null && _node$y !== void 0 ? _node$y : 0)) > ((_node$height3 = node.height) !== null && _node$height3 !== void 0 ? _node$height3 : 0) / 2 - ry)) {\n      var _node$y2;\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - ((_node$y2 = node.y) !== null && _node$y2 !== void 0 ? _node$y2 : 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(cylinder, \"cylinder\");\n\n// src/rendering-util/rendering-elements/shapes/dividedRect.ts\nimport rough13 from \"roughjs\";\nasync function dividedRectangle(parent, node) {\n  var _node$padding14, _bbox$left5, _node$padding15, _bbox$top5;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const rectOffset = h * 0.2;\n  const x = -w / 2;\n  const y = -h / 2 - rectOffset / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough13.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pts = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: -x,\n    y: y + rectOffset\n  }, {\n    x: -x,\n    y: -y\n  }, {\n    x,\n    y: -y\n  }, {\n    x,\n    y\n  }, {\n    x: -x,\n    y\n  }, {\n    x: -x,\n    y: y + rectOffset\n  }];\n  const poly = rc.polygon(pts.map(p => [p.x, p.y]), options);\n  const polygon = shapeSvg.insert(() => poly, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", \"translate(\".concat(x + ((_node$padding14 = node.padding) !== null && _node$padding14 !== void 0 ? _node$padding14 : 0) / 2 - (bbox.x - ((_bbox$left5 = bbox.left) !== null && _bbox$left5 !== void 0 ? _bbox$left5 : 0)), \", \").concat(y + rectOffset + ((_node$padding15 = node.padding) !== null && _node$padding15 !== void 0 ? _node$padding15 : 0) / 2 - (bbox.y - ((_bbox$top5 = bbox.top) !== null && _bbox$top5 !== void 0 ? _bbox$top5 : 0)), \")\"));\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(dividedRectangle, \"dividedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/doubleCircle.ts\nimport rough14 from \"roughjs\";\nasync function doublecircle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const gap = 5;\n  const outerRadius = bbox.width / 2 + halfPadding + gap;\n  const innerRadius = bbox.width / 2 + halfPadding;\n  let circleGroup;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    var _circleGroup$node, _circleGroup$node2;\n    const rc = rough14.svg(shapeSvg);\n    const outerOptions = userNodeOverrides(node, {\n      roughness: 0.2,\n      strokeWidth: 2.5\n    });\n    const innerOptions = userNodeOverrides(node, {\n      roughness: 0.2,\n      strokeWidth: 1.5\n    });\n    const outerRoughNode = rc.circle(0, 0, outerRadius * 2, outerOptions);\n    const innerRoughNode = rc.circle(0, 0, innerRadius * 2, innerOptions);\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    circleGroup.attr(\"class\", handleUndefinedAttr(node.cssClasses)).attr(\"style\", handleUndefinedAttr(cssStyles));\n    (_circleGroup$node = circleGroup.node()) === null || _circleGroup$node === void 0 || _circleGroup$node.appendChild(outerRoughNode);\n    (_circleGroup$node2 = circleGroup.node()) === null || _circleGroup$node2 === void 0 || _circleGroup$node2.appendChild(innerRoughNode);\n  } else {\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    const outerCircle = circleGroup.insert(\"circle\", \":first-child\");\n    const innerCircle = circleGroup.insert(\"circle\");\n    circleGroup.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n    outerCircle.attr(\"class\", \"outer-circle\").attr(\"style\", nodeStyles).attr(\"r\", outerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n    innerCircle.attr(\"class\", \"inner-circle\").attr(\"style\", nodeStyles).attr(\"r\", innerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleGroup);\n  node.intersect = function (point) {\n    log.info(\"DoubleCircle intersect\", node, outerRadius, point);\n    return intersect_default.circle(node, outerRadius, point);\n  };\n  return shapeSvg;\n}\n__name(doublecircle, \"doublecircle\");\n\n// src/rendering-util/rendering-elements/shapes/filledCircle.ts\nimport rough15 from \"roughjs\";\nfunction filledCircle(parent, node, _ref) {\n  var _node$domId3;\n  let {\n    config: {\n      themeVariables\n    }\n  } = _ref;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", (_node$domId3 = node.domId) !== null && _node$domId3 !== void 0 ? _node$domId3 : node.id);\n  const radius = 7;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough15.svg(shapeSvg);\n  const {\n    nodeBorder\n  } = themeVariables;\n  const options = userNodeOverrides(node, {\n    fillStyle: \"solid\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const filledCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  filledCircle2.selectAll(\"path\").attr(\"style\", \"fill: \".concat(nodeBorder, \" !important;\"));\n  if (cssStyles && cssStyles.length > 0 && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, filledCircle2);\n  node.intersect = function (point) {\n    log.info(\"filledCircle intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(filledCircle, \"filledCircle\");\n\n// src/rendering-util/rendering-elements/shapes/flippedTriangle.ts\nimport rough16 from \"roughjs\";\nasync function flippedTriangle(parent, node) {\n  var _node$padding16, _bbox$left6, _node$padding17, _bbox$top6;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + ((_node$padding16 = node.padding) !== null && _node$padding16 !== void 0 ? _node$padding16 : 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [{\n    x: 0,\n    y: -h\n  }, {\n    x: tw,\n    y: -h\n  }, {\n    x: tw / 2,\n    y: 0\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough16.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const flippedTriangle2 = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-h / 2, \", \").concat(h / 2, \")\"));\n  if (cssStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, flippedTriangle2);\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left6 = bbox.left) !== null && _bbox$left6 !== void 0 ? _bbox$left6 : 0)), \", \").concat(-h / 2 + ((_node$padding17 = node.padding) !== null && _node$padding17 !== void 0 ? _node$padding17 : 0) / 2 + (bbox.y - ((_bbox$top6 = bbox.top) !== null && _bbox$top6 !== void 0 ? _bbox$top6 : 0)), \")\"));\n  node.intersect = function (point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(flippedTriangle, \"flippedTriangle\");\n\n// src/rendering-util/rendering-elements/shapes/forkJoin.ts\nimport rough17 from \"roughjs\";\nfunction forkJoin(parent, node, _ref2) {\n  var _node$domId4, _node$width7, _node$height4, _state2$padding;\n  let {\n    dir,\n    config: {\n      state: state2,\n      themeVariables\n    }\n  } = _ref2;\n  const {\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", (_node$domId4 = node.domId) !== null && _node$domId4 !== void 0 ? _node$domId4 : node.id);\n  const {\n    cssStyles\n  } = node;\n  let width = Math.max(70, (_node$width7 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width7 !== void 0 ? _node$width7 : 0);\n  let height = Math.max(10, (_node$height4 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height4 !== void 0 ? _node$height4 : 0);\n  if (dir === \"LR\") {\n    var _node$width8, _node$height5;\n    width = Math.max(10, (_node$width8 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width8 !== void 0 ? _node$width8 : 0);\n    height = Math.max(70, (_node$height5 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height5 !== void 0 ? _node$height5 : 0);\n  }\n  const x = -1 * width / 2;\n  const y = -1 * height / 2;\n  const rc = rough17.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: themeVariables.lineColor,\n    fill: themeVariables.lineColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.rectangle(x, y, width, height, options);\n  const shape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, shape);\n  const padding = (_state2$padding = state2 === null || state2 === void 0 ? void 0 : state2.padding) !== null && _state2$padding !== void 0 ? _state2$padding : 0;\n  if (node.width && node.height) {\n    node.width += padding / 2 || 0;\n    node.height += padding / 2 || 0;\n  }\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(forkJoin, \"forkJoin\");\n\n// src/rendering-util/rendering-elements/shapes/halfRoundedRectangle.ts\nimport rough18 from \"roughjs\";\nasync function halfRoundedRectangle(parent, node) {\n  var _node$padding18, _node$width9, _node$padding19, _node$height6;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const minWidth = 80,\n    minHeight = 50;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(minWidth, bbox.width + ((_node$padding18 = node.padding) !== null && _node$padding18 !== void 0 ? _node$padding18 : 0) * 2, (_node$width9 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width9 !== void 0 ? _node$width9 : 0);\n  const h = Math.max(minHeight, bbox.height + ((_node$padding19 = node.padding) !== null && _node$padding19 !== void 0 ? _node$padding19 : 0) * 2, (_node$height6 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height6 !== void 0 ? _node$height6 : 0);\n  const radius = h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough18.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2,\n    y: -h / 2\n  }, {\n    x: w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270), {\n    x: w / 2 - radius,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: h / 2\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    log.info(\"Pill intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(halfRoundedRectangle, \"halfRoundedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/hexagon.ts\nimport rough19 from \"roughjs\";\nasync function hexagon(parent, node) {\n  var _node$padding20, _node$padding21;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + ((_node$padding20 = node.padding) !== null && _node$padding20 !== void 0 ? _node$padding20 : 0);\n  const w = bbox.width + ((_node$padding21 = node.padding) !== null && _node$padding21 !== void 0 ? _node$padding21 : 0) * 2.5;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough19.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  let halfWidth = w / 2;\n  const m = halfWidth / 6;\n  halfWidth = halfWidth + m;\n  const halfHeight = h / 2;\n  const fixedLength = halfHeight / 2;\n  const deducedWidth = halfWidth - fixedLength;\n  const points = [{\n    x: -deducedWidth,\n    y: -halfHeight\n  }, {\n    x: 0,\n    y: -halfHeight\n  }, {\n    x: deducedWidth,\n    y: -halfHeight\n  }, {\n    x: halfWidth,\n    y: 0\n  }, {\n    x: deducedWidth,\n    y: halfHeight\n  }, {\n    x: 0,\n    y: halfHeight\n  }, {\n    x: -deducedWidth,\n    y: halfHeight\n  }, {\n    x: -halfWidth,\n    y: 0\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(hexagon, \"hexagon\");\n\n// src/rendering-util/rendering-elements/shapes/hourglass.ts\nimport rough20 from \"roughjs\";\nasync function hourglass(parent, node) {\n  var _node$width0, _node$height7;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(30, (_node$width0 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width0 !== void 0 ? _node$width0 : 0);\n  const h = Math.max(30, (_node$height7 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height7 !== void 0 ? _node$height7 : 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough20.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: 0,\n    y: h\n  }, {\n    x: w,\n    y: h\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(-h / 2, \")\"));\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    log.info(\"Pill intersect\", node, {\n      points\n    });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(hourglass, \"hourglass\");\n\n// src/rendering-util/rendering-elements/shapes/icon.ts\nimport rough21 from \"roughjs\";\nasync function icon(parent, node, _ref3) {\n  var _node$assetHeight, _node$assetWidth, _bbox$left7;\n  let {\n    config: {\n      themeVariables,\n      flowchart\n    }\n  } = _ref3;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = (_node$assetHeight = node.assetHeight) !== null && _node$assetHeight !== void 0 ? _node$assetHeight : 48;\n  const assetWidth = (_node$assetWidth = node.assetWidth) !== null && _node$assetWidth !== void 0 ? _node$assetWidth : 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize;\n  const width = iconSize;\n  const {\n    nodeBorder\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough21.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: \"none\",\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const iconNode = rc.rectangle(x, y, width, height, options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"transparent\",\n    stroke: \"none\"\n  }));\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    var _stylesMap$get;\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\"<g>\".concat(await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    }), \"</g>\"));\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", \"translate(\".concat(-iconWidth / 2 - iconX, \",\").concat(topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY, \")\"));\n    iconElem.attr(\"style\", \"color: \".concat((_stylesMap$get = stylesMap.get(\"stroke\")) !== null && _stylesMap$get !== void 0 ? _stylesMap$get : nodeBorder, \";\"));\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left7 = bbox.left) !== null && _bbox$left7 !== void 0 ? _bbox$left7 : 0)), \",\").concat(topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height, \")\"));\n  iconShape.attr(\"transform\", \"translate(\".concat(0, \",\", topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2, \")\"));\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    var _node$x2, _node$y3, _node$height8;\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = (_node$x2 = node.x) !== null && _node$x2 !== void 0 ? _node$x2 : 0;\n    const dy = (_node$y3 = node.y) !== null && _node$y3 !== void 0 ? _node$y3 : 0;\n    const nodeHeight = (_node$height8 = node.height) !== null && _node$height8 !== void 0 ? _node$height8 : 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(icon, \"icon\");\n\n// src/rendering-util/rendering-elements/shapes/iconCircle.ts\nimport rough22 from \"roughjs\";\nasync function iconCircle(parent, node, _ref4) {\n  var _node$assetHeight2, _node$assetWidth2, _stylesMap$get2, _bbox$left8;\n  let {\n    config: {\n      themeVariables,\n      flowchart\n    }\n  } = _ref4;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = (_node$assetHeight2 = node.assetHeight) !== null && _node$assetHeight2 !== void 0 ? _node$assetHeight2 : 48;\n  const assetWidth = (_node$assetWidth2 = node.assetWidth) !== null && _node$assetWidth2 !== void 0 ? _node$assetWidth2 : 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const padding = 20;\n  const labelPadding = node.label ? 8 : 0;\n  const topLabel = node.pos === \"t\";\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const rc = rough22.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill !== null && fill !== void 0 ? fill : mainBkg;\n  const iconElem = shapeSvg.append(\"g\");\n  if (node.icon) {\n    iconElem.html(\"<g>\".concat(await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    }), \"</g>\"));\n  }\n  const iconBBox = iconElem.node().getBBox();\n  const iconWidth = iconBBox.width;\n  const iconHeight = iconBBox.height;\n  const iconX = iconBBox.x;\n  const iconY = iconBBox.y;\n  const diameter = Math.max(iconWidth, iconHeight) * Math.SQRT2 + padding * 2;\n  const iconNode = rc.circle(0, 0, diameter, options);\n  const outerWidth = Math.max(diameter, bbox.width);\n  const outerHeight = diameter + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"transparent\",\n    stroke: \"none\"\n  }));\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  iconElem.attr(\"transform\", \"translate(\".concat(-iconWidth / 2 - iconX, \",\").concat(topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY, \")\"));\n  iconElem.attr(\"style\", \"color: \".concat((_stylesMap$get2 = stylesMap.get(\"stroke\")) !== null && _stylesMap$get2 !== void 0 ? _stylesMap$get2 : nodeBorder, \";\"));\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left8 = bbox.left) !== null && _bbox$left8 !== void 0 ? _bbox$left8 : 0)), \",\").concat(topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height, \")\"));\n  iconShape.attr(\"transform\", \"translate(\".concat(0, \",\", topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2, \")\"));\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconCircle, \"iconCircle\");\n\n// src/rendering-util/rendering-elements/shapes/iconRounded.ts\nimport rough23 from \"roughjs\";\nasync function iconRounded(parent, node, _ref5) {\n  var _node$assetHeight3, _node$assetWidth3, _bbox$left9;\n  let {\n    config: {\n      themeVariables,\n      flowchart\n    }\n  } = _ref5;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = (_node$assetHeight3 = node.assetHeight) !== null && _node$assetHeight3 !== void 0 ? _node$assetHeight3 : 48;\n  const assetWidth = (_node$assetWidth3 = node.assetWidth) !== null && _node$assetWidth3 !== void 0 ? _node$assetWidth3 : 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0);\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough23.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill !== null && fill !== void 0 ? fill : mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 5), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"transparent\",\n    stroke: \"none\"\n  }));\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\").attr(\"class\", \"icon-shape2\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    var _stylesMap$get3;\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\"<g>\".concat(await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    }), \"</g>\"));\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", \"translate(\".concat(-iconWidth / 2 - iconX, \",\").concat(topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY, \")\"));\n    iconElem.attr(\"style\", \"color: \".concat((_stylesMap$get3 = stylesMap.get(\"stroke\")) !== null && _stylesMap$get3 !== void 0 ? _stylesMap$get3 : nodeBorder, \";\"));\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left9 = bbox.left) !== null && _bbox$left9 !== void 0 ? _bbox$left9 : 0)), \",\").concat(topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height, \")\"));\n  iconShape.attr(\"transform\", \"translate(\".concat(0, \",\", topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2, \")\"));\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    var _node$x3, _node$y4, _node$height9;\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = (_node$x3 = node.x) !== null && _node$x3 !== void 0 ? _node$x3 : 0;\n    const dy = (_node$y4 = node.y) !== null && _node$y4 !== void 0 ? _node$y4 : 0;\n    const nodeHeight = (_node$height9 = node.height) !== null && _node$height9 !== void 0 ? _node$height9 : 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconRounded, \"iconRounded\");\n\n// src/rendering-util/rendering-elements/shapes/iconSquare.ts\nimport rough24 from \"roughjs\";\nasync function iconSquare(parent, node, _ref6) {\n  var _node$assetHeight4, _node$assetWidth4, _bbox$left0;\n  let {\n    config: {\n      themeVariables,\n      flowchart\n    }\n  } = _ref6;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = (_node$assetHeight4 = node.assetHeight) !== null && _node$assetHeight4 !== void 0 ? _node$assetHeight4 : 48;\n  const assetWidth = (_node$assetWidth4 = node.assetWidth) !== null && _node$assetWidth4 !== void 0 ? _node$assetWidth4 : 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0);\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough24.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill !== null && fill !== void 0 ? fill : mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 0.1), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"transparent\",\n    stroke: \"none\"\n  }));\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    var _stylesMap$get4;\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\"<g>\".concat(await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    }), \"</g>\"));\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", \"translate(\".concat(-iconWidth / 2 - iconX, \",\").concat(topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY, \")\"));\n    iconElem.attr(\"style\", \"color: \".concat((_stylesMap$get4 = stylesMap.get(\"stroke\")) !== null && _stylesMap$get4 !== void 0 ? _stylesMap$get4 : nodeBorder, \";\"));\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left0 = bbox.left) !== null && _bbox$left0 !== void 0 ? _bbox$left0 : 0)), \",\").concat(topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height, \")\"));\n  iconShape.attr(\"transform\", \"translate(\".concat(0, \",\", topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2, \")\"));\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    var _node$x4, _node$y5, _node$height0;\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = (_node$x4 = node.x) !== null && _node$x4 !== void 0 ? _node$x4 : 0;\n    const dy = (_node$y5 = node.y) !== null && _node$y5 !== void 0 ? _node$y5 : 0;\n    const nodeHeight = (_node$height0 = node.height) !== null && _node$height0 !== void 0 ? _node$height0 : 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconSquare, \"iconSquare\");\n\n// src/rendering-util/rendering-elements/shapes/imageSquare.ts\nimport rough25 from \"roughjs\";\nasync function imageSquare(parent, node, _ref7) {\n  var _node$img, _node$assetWidth5, _node$assetHeight5, _bbox$left1;\n  let {\n    config: {\n      flowchart\n    }\n  } = _ref7;\n  const img = new Image();\n  img.src = (_node$img = node === null || node === void 0 ? void 0 : node.img) !== null && _node$img !== void 0 ? _node$img : \"\";\n  await img.decode();\n  const imageNaturalWidth = Number(img.naturalWidth.toString().replace(\"px\", \"\"));\n  const imageNaturalHeight = Number(img.naturalHeight.toString().replace(\"px\", \"\"));\n  node.imageAspectRatio = imageNaturalWidth / imageNaturalHeight;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  node.defaultWidth = flowchart === null || flowchart === void 0 ? void 0 : flowchart.wrappingWidth;\n  const imageRawWidth = Math.max(node.label ? defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0 : 0, (_node$assetWidth5 = node === null || node === void 0 ? void 0 : node.assetWidth) !== null && _node$assetWidth5 !== void 0 ? _node$assetWidth5 : imageNaturalWidth);\n  const imageWidth = node.constraint === \"on\" ? node !== null && node !== void 0 && node.assetHeight ? node.assetHeight * node.imageAspectRatio : imageRawWidth : imageRawWidth;\n  const imageHeight = node.constraint === \"on\" ? imageWidth / node.imageAspectRatio : (_node$assetHeight5 = node === null || node === void 0 ? void 0 : node.assetHeight) !== null && _node$assetHeight5 !== void 0 ? _node$assetHeight5 : imageNaturalHeight;\n  node.width = Math.max(imageWidth, defaultWidth !== null && defaultWidth !== void 0 ? defaultWidth : 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"image-shape default\");\n  const topLabel = node.pos === \"t\";\n  const x = -imageWidth / 2;\n  const y = -imageHeight / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough25.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const imageNode = rc.rectangle(x, y, imageWidth, imageHeight, options);\n  const outerWidth = Math.max(imageWidth, bbox.width);\n  const outerHeight = imageHeight + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"none\",\n    stroke: \"none\"\n  }));\n  const iconShape = shapeSvg.insert(() => imageNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.img) {\n    const image = shapeSvg.append(\"image\");\n    image.attr(\"href\", node.img);\n    image.attr(\"width\", imageWidth);\n    image.attr(\"height\", imageHeight);\n    image.attr(\"preserveAspectRatio\", \"none\");\n    image.attr(\"transform\", \"translate(\".concat(-imageWidth / 2, \",\").concat(topLabel ? outerHeight / 2 - imageHeight : -outerHeight / 2, \")\"));\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left1 = bbox.left) !== null && _bbox$left1 !== void 0 ? _bbox$left1 : 0)), \",\").concat(topLabel ? -imageHeight / 2 - bbox.height / 2 - labelPadding / 2 : imageHeight / 2 - bbox.height / 2 + labelPadding / 2, \")\"));\n  iconShape.attr(\"transform\", \"translate(\".concat(0, \",\", topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2, \")\"));\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    var _node$x5, _node$y6, _node$height1;\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = (_node$x5 = node.x) !== null && _node$x5 !== void 0 ? _node$x5 : 0;\n    const dy = (_node$y6 = node.y) !== null && _node$y6 !== void 0 ? _node$y6 : 0;\n    const nodeHeight = (_node$height1 = node.height) !== null && _node$height1 !== void 0 ? _node$height1 : 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(imageSquare, \"imageSquare\");\n\n// src/rendering-util/rendering-elements/shapes/invertedTrapezoid.ts\nimport rough26 from \"roughjs\";\nasync function inv_trapezoid(parent, node) {\n  var _node$padding22, _node$width1, _node$padding23, _node$height10;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding22 = node.padding) !== null && _node$padding22 !== void 0 ? _node$padding22 : 0) * 2, (_node$width1 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width1 !== void 0 ? _node$width1 : 0);\n  const h = Math.max(bbox.height + ((_node$padding23 = node.padding) !== null && _node$padding23 !== void 0 ? _node$padding23 : 0) * 2, (_node$height10 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height10 !== void 0 ? _node$height10 : 0);\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: -h\n  }, {\n    x: -3 * h / 6,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough26.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(inv_trapezoid, \"inv_trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/drawRect.ts\nimport rough27 from \"roughjs\";\nasync function drawRect(parent, node, options) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + options.labelPaddingX * 2, (node === null || node === void 0 ? void 0 : node.width) || 0);\n  const totalHeight = Math.max(bbox.height + options.labelPaddingY * 2, (node === null || node === void 0 ? void 0 : node.height) || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  let rect2;\n  let {\n    rx,\n    ry\n  } = node;\n  const {\n    cssStyles\n  } = node;\n  if (options !== null && options !== void 0 && options.rx && options.ry) {\n    rx = options.rx;\n    ry = options.ry;\n  }\n  if (node.look === \"handDrawn\") {\n    const rc = rough27.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", handleUndefinedAttr(rx)).attr(\"ry\", handleUndefinedAttr(ry)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  }\n  updateNodeBounds(node, rect2);\n  node.calcIntersect = function (bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(drawRect, \"drawRect\");\n\n// src/rendering-util/rendering-elements/shapes/labelRect.ts\nasync function labelRect(parent, node) {\n  var _bbox$left10, _bbox$top7;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"label\");\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const totalWidth = 0.1;\n  const totalHeight = 0.1;\n  rect2.attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  shapeSvg.attr(\"class\", \"label edgeLabel\");\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - (bbox.x - ((_bbox$left10 = bbox.left) !== null && _bbox$left10 !== void 0 ? _bbox$left10 : 0)), \", \").concat(-(bbox.height / 2) - (bbox.y - ((_bbox$top7 = bbox.top) !== null && _bbox$top7 !== void 0 ? _bbox$top7 : 0)), \")\"));\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(labelRect, \"labelRect\");\n\n// src/rendering-util/rendering-elements/shapes/leanLeft.ts\nimport rough28 from \"roughjs\";\nasync function lean_left(parent, node) {\n  var _node$padding24, _node$width10, _node$padding25, _node$height11;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding24 = node.padding) !== null && _node$padding24 !== void 0 ? _node$padding24 : 0), (_node$width10 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width10 !== void 0 ? _node$width10 : 0);\n  const h = Math.max(bbox.height + ((_node$padding25 = node.padding) !== null && _node$padding25 !== void 0 ? _node$padding25 : 0), (_node$height11 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height11 !== void 0 ? _node$height11 : 0);\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: -(3 * h) / 6,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough28.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_left, \"lean_left\");\n\n// src/rendering-util/rendering-elements/shapes/leanRight.ts\nimport rough29 from \"roughjs\";\nasync function lean_right(parent, node) {\n  var _node$padding26, _node$width11, _node$padding27, _node$height12;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding26 = node.padding) !== null && _node$padding26 !== void 0 ? _node$padding26 : 0), (_node$width11 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width11 !== void 0 ? _node$width11 : 0);\n  const h = Math.max(bbox.height + ((_node$padding27 = node.padding) !== null && _node$padding27 !== void 0 ? _node$padding27 : 0), (_node$height12 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height12 !== void 0 ? _node$height12 : 0);\n  const points = [{\n    x: -3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough29.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_right, \"lean_right\");\n\n// src/rendering-util/rendering-elements/shapes/lightningBolt.ts\nimport rough30 from \"roughjs\";\nfunction lightningBolt(parent, node) {\n  var _node$domId5, _node$width12, _node$height13;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", (_node$domId5 = node.domId) !== null && _node$domId5 !== void 0 ? _node$domId5 : node.id);\n  const {\n    cssStyles\n  } = node;\n  const width = Math.max(35, (_node$width12 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width12 !== void 0 ? _node$width12 : 0);\n  const height = Math.max(35, (_node$height13 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height13 !== void 0 ? _node$height13 : 0);\n  const gap = 7;\n  const points = [{\n    x: width,\n    y: 0\n  }, {\n    x: 0,\n    y: height + gap / 2\n  }, {\n    x: width - 2 * gap,\n    y: height + gap / 2\n  }, {\n    x: 0,\n    y: 2 * height\n  }, {\n    x: width,\n    y: height - gap / 2\n  }, {\n    x: 2 * gap,\n    y: height - gap / 2\n  }];\n  const rc = rough30.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const linePath = createPathFromPoints(points);\n  const lineNode = rc.path(linePath, options);\n  const lightningBolt2 = shapeSvg.insert(() => lineNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  lightningBolt2.attr(\"transform\", \"translate(-\".concat(width / 2, \",\").concat(-height, \")\"));\n  updateNodeBounds(node, lightningBolt2);\n  node.intersect = function (point) {\n    log.info(\"lightningBolt intersect\", node, point);\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(lightningBolt, \"lightningBolt\");\n\n// src/rendering-util/rendering-elements/shapes/linedCylinder.ts\nimport rough31 from \"roughjs\";\nvar createCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\"M\".concat(x, \",\").concat(y + ry), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(-width, \",0\"), \"l0,\".concat(height), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"l0,\".concat(-height), \"M\".concat(x, \",\").concat(y + ry + outerOffset), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\")].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\"M\".concat(x, \",\").concat(y + ry), \"M\".concat(x + width, \",\").concat(y + ry), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(-width, \",0\"), \"l0,\".concat(height), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\"), \"l0,\".concat(-height), \"M\".concat(x, \",\").concat(y + ry + outerOffset), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\")].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x - width / 2, \",\").concat(-height / 2), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \").concat(width, \",0\")].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function linedCylinder(parent, node) {\n  var _node$padding28, _node$width13, _node$padding29, _node$height14, _bbox$left11, _bbox$top8;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding28 = node.padding) !== null && _node$padding28 !== void 0 ? _node$padding28 : 0), (_node$width13 = node.width) !== null && _node$width13 !== void 0 ? _node$width13 : 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + ((_node$padding29 = node.padding) !== null && _node$padding29 !== void 0 ? _node$padding29 : 0), (_node$height14 = node.height) !== null && _node$height14 !== void 0 ? _node$height14 : 0);\n  const outerOffset = h * 0.1;\n  let cylinder2;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough31.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    const innerPathData = createInnerCylinderPathD2(0, ry, w, h, rx, ry);\n    const options = userNodeOverrides(node, {});\n    const outerNode = rc.path(outerPathData, options);\n    const innerLine = rc.path(innerPathData, options);\n    const innerLineEl = shapeSvg.insert(() => innerLine, \":first-child\");\n    innerLineEl.attr(\"class\", \"line\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(-(h / 2 + ry), \")\"));\n  updateNodeBounds(node, cylinder2);\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - (bbox.x - ((_bbox$left11 = bbox.left) !== null && _bbox$left11 !== void 0 ? _bbox$left11 : 0)), \", \").concat(-(bbox.height / 2) + ry - (bbox.y - ((_bbox$top8 = bbox.top) !== null && _bbox$top8 !== void 0 ? _bbox$top8 : 0)), \")\"));\n  node.intersect = function (point) {\n    var _node$x6, _node$width14, _node$width15, _node$y7, _node$height15;\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - ((_node$x6 = node.x) !== null && _node$x6 !== void 0 ? _node$x6 : 0);\n    if (rx != 0 && (Math.abs(x) < ((_node$width14 = node.width) !== null && _node$width14 !== void 0 ? _node$width14 : 0) / 2 || Math.abs(x) == ((_node$width15 = node.width) !== null && _node$width15 !== void 0 ? _node$width15 : 0) / 2 && Math.abs(pos.y - ((_node$y7 = node.y) !== null && _node$y7 !== void 0 ? _node$y7 : 0)) > ((_node$height15 = node.height) !== null && _node$height15 !== void 0 ? _node$height15 : 0) / 2 - ry)) {\n      var _node$y8;\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - ((_node$y8 = node.y) !== null && _node$y8 !== void 0 ? _node$y8 : 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedCylinder, \"linedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/linedWaveEdgedRect.ts\nimport rough32 from \"roughjs\";\nasync function linedWaveEdgedRect(parent, node) {\n  var _node$padding30, _node$width16, _node$padding31, _node$height16, _node$padding32, _bbox$left12, _node$padding33, _bbox$top9;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding30 = node.padding) !== null && _node$padding30 !== void 0 ? _node$padding30 : 0) * 2, (_node$width16 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width16 !== void 0 ? _node$width16 : 0);\n  const h = Math.max(bbox.height + ((_node$padding31 = node.padding) !== null && _node$padding31 !== void 0 ? _node$padding31 : 0) * 2, (_node$height16 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height16 !== void 0 ? _node$height16 : 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough32.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - w / 2 * 0.1, finalH / 2, w / 2 + w / 2 * 0.1, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2,\n    y: -finalH / 2\n  }, {\n    x: -w / 2,\n    y: finalH / 2 * 1.1\n  }, {\n    x: -w / 2,\n    y: -finalH / 2\n  }];\n  const poly = rc.polygon(points.map(p => [p.x, p.y]), options);\n  const waveEdgeRect = shapeSvg.insert(() => poly, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", \"translate(0,\".concat(-waveAmplitude / 2, \")\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding32 = node.padding) !== null && _node$padding32 !== void 0 ? _node$padding32 : 0) + w / 2 * 0.1 / 2 - (bbox.x - ((_bbox$left12 = bbox.left) !== null && _bbox$left12 !== void 0 ? _bbox$left12 : 0)), \",\").concat(-h / 2 + ((_node$padding33 = node.padding) !== null && _node$padding33 !== void 0 ? _node$padding33 : 0) - waveAmplitude / 2 - (bbox.y - ((_bbox$top9 = bbox.top) !== null && _bbox$top9 !== void 0 ? _bbox$top9 : 0)), \")\"));\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedWaveEdgedRect, \"linedWaveEdgedRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiRect.ts\nimport rough33 from \"roughjs\";\nasync function multiRect(parent, node) {\n  var _node$padding34, _node$width17, _node$padding35, _node$height17, _bbox$left13, _bbox$top0;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding34 = node.padding) !== null && _node$padding34 !== void 0 ? _node$padding34 : 0) * 2, (_node$width17 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width17 !== void 0 ? _node$width17 : 0);\n  const h = Math.max(bbox.height + ((_node$padding35 = node.padding) !== null && _node$padding35 !== void 0 ? _node$padding35 : 0) * 2, (_node$height17 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height17 !== void 0 ? _node$height17 : 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough33.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + h + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h - rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y + h - rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + rectOffset\n  }];\n  const innerPathPoints = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y\n  }, {\n    x,\n    y\n  }];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, _objectSpread(_objectSpread({}, options), {}, {\n    fill: \"none\"\n  }));\n  const multiRect2 = shapeSvg.insert(() => innerNode, \":first-child\");\n  multiRect2.insert(() => outerNode, \":first-child\");\n  multiRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - rectOffset - (bbox.x - ((_bbox$left13 = bbox.left) !== null && _bbox$left13 !== void 0 ? _bbox$left13 : 0)), \", \").concat(-(bbox.height / 2) + rectOffset - (bbox.y - ((_bbox$top0 = bbox.top) !== null && _bbox$top0 !== void 0 ? _bbox$top0 : 0)), \")\"));\n  updateNodeBounds(node, multiRect2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiRect, \"multiRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiWaveEdgedRectangle.ts\nimport rough34 from \"roughjs\";\nasync function multiWaveEdgedRectangle(parent, node) {\n  var _node$padding36, _node$width18, _node$padding37, _node$height18, _bbox$left14, _bbox$top1;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding36 = node.padding) !== null && _node$padding36 !== void 0 ? _node$padding36 : 0) * 2, (_node$width18 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width18 !== void 0 ? _node$width18 : 0);\n  const h = Math.max(bbox.height + ((_node$padding37 = node.padding) !== null && _node$padding37 !== void 0 ? _node$padding37 : 0) * 2, (_node$height18 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height18 !== void 0 ? _node$height18 : 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const x = -w / 2;\n  const y = -finalH / 2;\n  const rectOffset = 5;\n  const {\n    cssStyles\n  } = node;\n  const wavePoints = generateFullSineWavePoints(x - rectOffset, y + finalH + rectOffset, x + w - rectOffset, y + finalH + rectOffset, waveAmplitude, 0.8);\n  const lastWavePoint = wavePoints === null || wavePoints === void 0 ? void 0 : wavePoints[wavePoints.length - 1];\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + finalH + rectOffset\n  }, ...wavePoints, {\n    x: x + w - rectOffset,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - 2 * rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: lastWavePoint.y - 2 * rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + rectOffset\n  }];\n  const innerPathPoints = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y\n  }, {\n    x,\n    y\n  }];\n  const rc = rough34.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, options);\n  const shape = shapeSvg.insert(() => outerNode, \":first-child\");\n  shape.insert(() => innerNode);\n  shape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  shape.attr(\"transform\", \"translate(0,\".concat(-waveAmplitude / 2, \")\"));\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - rectOffset - (bbox.x - ((_bbox$left14 = bbox.left) !== null && _bbox$left14 !== void 0 ? _bbox$left14 : 0)), \", \").concat(-(bbox.height / 2) + rectOffset - waveAmplitude / 2 - (bbox.y - ((_bbox$top1 = bbox.top) !== null && _bbox$top1 !== void 0 ? _bbox$top1 : 0)), \")\"));\n  updateNodeBounds(node, shape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiWaveEdgedRectangle, \"multiWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/note.ts\nimport rough35 from \"roughjs\";\nasync function note(parent, node, _ref8) {\n  var _getConfig$flowchart, _node$padding38, _node$width19, _node$padding39, _node$height19, _bbox$left15, _bbox$top10;\n  let {\n    config: {\n      themeVariables\n    }\n  } = _ref8;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const useHtmlLabels = node.useHtmlLabels || ((_getConfig$flowchart = getConfig().flowchart) === null || _getConfig$flowchart === void 0 ? void 0 : _getConfig$flowchart.htmlLabels) !== false;\n  if (!useHtmlLabels) {\n    node.centerLabel = true;\n  }\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + ((_node$padding38 = node.padding) !== null && _node$padding38 !== void 0 ? _node$padding38 : 0) * 2, (_node$width19 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width19 !== void 0 ? _node$width19 : 0);\n  const totalHeight = Math.max(bbox.height + ((_node$padding39 = node.padding) !== null && _node$padding39 !== void 0 ? _node$padding39 : 0) * 2, (_node$height19 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height19 !== void 0 ? _node$height19 : 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough35.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: themeVariables.noteBkgColor,\n    stroke: themeVariables.noteBorderColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const noteShapeNode = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => noteShapeNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left15 = bbox.left) !== null && _bbox$left15 !== void 0 ? _bbox$left15 : 0)), \", \").concat(-(bbox.height / 2) - (bbox.y - ((_bbox$top10 = bbox.top) !== null && _bbox$top10 !== void 0 ? _bbox$top10 : 0)), \")\"));\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(note, \"note\");\n\n// src/rendering-util/rendering-elements/shapes/question.ts\nimport rough36 from \"roughjs\";\nvar createDecisionBoxPathD = /* @__PURE__ */__name((x, y, size) => {\n  return [\"M\".concat(x + size / 2, \",\").concat(y), \"L\".concat(x + size, \",\").concat(y - size / 2), \"L\".concat(x + size / 2, \",\").concat(y - size), \"L\".concat(x, \",\").concat(y - size / 2), \"Z\"].join(\" \");\n}, \"createDecisionBoxPathD\");\nasync function question(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const adjustment = 0.5;\n  const points = [{\n    x: s / 2,\n    y: 0\n  }, {\n    x: s,\n    y: -s / 2\n  }, {\n    x: s / 2,\n    y: -s\n  }, {\n    x: 0,\n    y: -s / 2\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough36.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createDecisionBoxPathD(0, 0, s);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-s / 2 + adjustment, \", \").concat(s / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, s, s, points);\n    polygon.attr(\"transform\", \"translate(\".concat(-s / 2 + adjustment, \", \").concat(s / 2, \")\"));\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.calcIntersect = function (bounds, point) {\n    const s2 = bounds.width;\n    const points2 = [{\n      x: s2 / 2,\n      y: 0\n    }, {\n      x: s2,\n      y: -s2 / 2\n    }, {\n      x: s2 / 2,\n      y: -s2\n    }, {\n      x: 0,\n      y: -s2 / 2\n    }];\n    const res = intersect_default.polygon(bounds, points2, point);\n    return {\n      x: res.x - 0.5,\n      y: res.y - 0.5\n    };\n  };\n  node.intersect = function (point) {\n    return this.calcIntersect(node, point);\n  };\n  return shapeSvg;\n}\n__name(question, \"question\");\n\n// src/rendering-util/rendering-elements/shapes/rectLeftInvArrow.ts\nimport rough37 from \"roughjs\";\nasync function rect_left_inv_arrow(parent, node) {\n  var _node$padding40, _node$width20, _node$padding41, _node$height20, _bbox$left16, _bbox$top11;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding40 = node.padding) !== null && _node$padding40 !== void 0 ? _node$padding40 : 0), (_node$width20 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width20 !== void 0 ? _node$width20 : 0);\n  const h = Math.max(bbox.height + ((_node$padding41 = node.padding) !== null && _node$padding41 !== void 0 ? _node$padding41 : 0), (_node$height20 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height20 !== void 0 ? _node$height20 : 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const notch = y / 2;\n  const points = [{\n    x: x + notch,\n    y\n  }, {\n    x,\n    y: 0\n  }, {\n    x: x + notch,\n    y: -y\n  }, {\n    x: -x,\n    y: -y\n  }, {\n    x: -x,\n    y\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough37.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", \"translate(\".concat(-notch / 2, \",0)\"));\n  label.attr(\"transform\", \"translate(\".concat(-notch / 2 - bbox.width / 2 - (bbox.x - ((_bbox$left16 = bbox.left) !== null && _bbox$left16 !== void 0 ? _bbox$left16 : 0)), \", \").concat(-(bbox.height / 2) - (bbox.y - ((_bbox$top11 = bbox.top) !== null && _bbox$top11 !== void 0 ? _bbox$top11 : 0)), \")\"));\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(rect_left_inv_arrow, \"rect_left_inv_arrow\");\n\n// src/rendering-util/rendering-elements/shapes/rectWithTitle.ts\nimport { select as select4 } from \"d3\";\nimport rough38 from \"roughjs\";\nasync function rectWithTitle(parent, node) {\n  var _getConfig5;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  let classes;\n  if (!node.cssClasses) {\n    classes = \"node default\";\n  } else {\n    classes = \"node \" + node.cssClasses;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId || node.id);\n  const g = shapeSvg.insert(\"g\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", nodeStyles);\n  const description = node.description;\n  const title = node.label;\n  const text2 = label.node().appendChild(await createLabel_default(title, node.labelStyle, true, true));\n  let bbox = {\n    width: 0,\n    height: 0\n  };\n  if (evaluate((_getConfig5 = getConfig2()) === null || _getConfig5 === void 0 || (_getConfig5 = _getConfig5.flowchart) === null || _getConfig5 === void 0 ? void 0 : _getConfig5.htmlLabels)) {\n    const div2 = text2.children[0];\n    const dv2 = select4(text2);\n    bbox = div2.getBoundingClientRect();\n    dv2.attr(\"width\", bbox.width);\n    dv2.attr(\"height\", bbox.height);\n  }\n  log.info(\"Text 2\", description);\n  const textRows = description || [];\n  const titleBox = text2.getBBox();\n  const descr = label.node().appendChild(await createLabel_default(textRows.join ? textRows.join(\"<br/>\") : textRows, node.labelStyle, true, true));\n  const div = descr.children[0];\n  const dv = select4(descr);\n  bbox = div.getBoundingClientRect();\n  dv.attr(\"width\", bbox.width);\n  dv.attr(\"height\", bbox.height);\n  const halfPadding = (node.padding || 0) / 2;\n  select4(descr).attr(\"transform\", \"translate( \" + (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) + \", \" + (titleBox.height + halfPadding + 5) + \")\");\n  select4(text2).attr(\"transform\", \"translate( \" + (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) + \", 0)\");\n  bbox = label.node().getBBox();\n  label.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + (-bbox.height / 2 - halfPadding + 3) + \")\");\n  const totalWidth = bbox.width + (node.padding || 0);\n  const totalHeight = bbox.height + (node.padding || 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  let rect2;\n  let innerLine;\n  if (node.look === \"handDrawn\") {\n    const rc = rough38.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, node.rx || 0), options);\n    const roughLine = rc.line(-bbox.width / 2 - halfPadding, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding, bbox.width / 2 + halfPadding, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding, options);\n    innerLine = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughLine;\n    }, \":first-child\");\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n  } else {\n    rect2 = g.insert(\"rect\", \":first-child\");\n    innerLine = g.insert(\"line\");\n    rect2.attr(\"class\", \"outer title-state\").attr(\"style\", nodeStyles).attr(\"x\", -bbox.width / 2 - halfPadding).attr(\"y\", -bbox.height / 2 - halfPadding).attr(\"width\", bbox.width + (node.padding || 0)).attr(\"height\", bbox.height + (node.padding || 0));\n    innerLine.attr(\"class\", \"divider\").attr(\"x1\", -bbox.width / 2 - halfPadding).attr(\"x2\", bbox.width / 2 + halfPadding).attr(\"y1\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding).attr(\"y2\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(rectWithTitle, \"rectWithTitle\");\n\n// src/rendering-util/rendering-elements/shapes/roundedRect.ts\nimport rough39 from \"roughjs\";\nfunction generateArcPoints2(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateArcPoints2, \"generateArcPoints\");\nasync function roundedRect(parent, node) {\n  var _node$padding42, _node$padding43;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const labelPaddingX = (_node$padding42 = node === null || node === void 0 ? void 0 : node.padding) !== null && _node$padding42 !== void 0 ? _node$padding42 : 0;\n  const labelPaddingY = (_node$padding43 = node === null || node === void 0 ? void 0 : node.padding) !== null && _node$padding43 !== void 0 ? _node$padding43 : 0;\n  const w = (node !== null && node !== void 0 && node.width ? node === null || node === void 0 ? void 0 : node.width : bbox.width) + labelPaddingX * 2;\n  const h = (node !== null && node !== void 0 && node.height ? node === null || node === void 0 ? void 0 : node.height : bbox.height) + labelPaddingY * 2;\n  const radius = node.radius || 5;\n  const taper = node.taper || 5;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough39.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.stroke) {\n    options.stroke = node.stroke;\n  }\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n  // Top edge (left to right)\n  {\n    x: -w / 2 + taper,\n    y: -h / 2\n  },\n  // Top-left corner start (1)\n  {\n    x: w / 2 - taper,\n    y: -h / 2\n  },\n  // Top-right corner start (2)\n  ...generateArcPoints2(w / 2 - taper, -h / 2, w / 2, -h / 2 + taper, radius, radius, true),\n  // Top-left arc (2 to 3)\n  // Right edge (top to bottom)\n  {\n    x: w / 2,\n    y: -h / 2 + taper\n  },\n  // Top-right taper point (3)\n  {\n    x: w / 2,\n    y: h / 2 - taper\n  },\n  // Bottom-right taper point (4)\n  ...generateArcPoints2(w / 2, h / 2 - taper, w / 2 - taper, h / 2, radius, radius, true),\n  // Top-left arc (4 to 5)\n  // Bottom edge (right to left)\n  {\n    x: w / 2 - taper,\n    y: h / 2\n  },\n  // Bottom-right corner start (5)\n  {\n    x: -w / 2 + taper,\n    y: h / 2\n  },\n  // Bottom-left corner start (6)\n  ...generateArcPoints2(-w / 2 + taper, h / 2, -w / 2, h / 2 - taper, radius, radius, true),\n  // Top-left arc (4 to 5)\n  // Left edge (bottom to top)\n  {\n    x: -w / 2,\n    y: h / 2 - taper\n  },\n  // Bottom-left taper point (7)\n  {\n    x: -w / 2,\n    y: -h / 2 + taper\n  },\n  // Top-left taper point (8)\n  ...generateArcPoints2(-w / 2, -h / 2 + taper, -w / 2 + taper, -h / 2, radius, radius, true)\n  // Top-left arc (4 to 5)\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container outer-path\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(roundedRect, \"roundedRect\");\n\n// src/rendering-util/rendering-elements/shapes/shadedProcess.ts\nimport rough40 from \"roughjs\";\nasync function shadedProcess(parent, node) {\n  var _node$padding44, _node$padding45, _node$width21, _node$padding46, _node$height21, _node$padding47, _bbox$left17, _node$padding48, _bbox$top12;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = (_node$padding44 = node === null || node === void 0 ? void 0 : node.padding) !== null && _node$padding44 !== void 0 ? _node$padding44 : 0;\n  const w = Math.max(bbox.width + ((_node$padding45 = node.padding) !== null && _node$padding45 !== void 0 ? _node$padding45 : 0) * 2, (_node$width21 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width21 !== void 0 ? _node$width21 : 0);\n  const h = Math.max(bbox.height + ((_node$padding46 = node.padding) !== null && _node$padding46 !== void 0 ? _node$padding46 : 0) * 2, (_node$height21 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height21 !== void 0 ? _node$height21 : 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough40.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x,\n    y\n  }, {\n    x: x + w + 8,\n    y\n  }, {\n    x: x + w + 8,\n    y: y + h\n  }, {\n    x: x - 8,\n    y: y + h\n  }, {\n    x: x - 8,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + h\n  }];\n  const roughNode = rc.polygon(points.map(p => [p.x, p.y]), options);\n  const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + 4 + ((_node$padding47 = node.padding) !== null && _node$padding47 !== void 0 ? _node$padding47 : 0) - (bbox.x - ((_bbox$left17 = bbox.left) !== null && _bbox$left17 !== void 0 ? _bbox$left17 : 0)), \",\").concat(-h / 2 + ((_node$padding48 = node.padding) !== null && _node$padding48 !== void 0 ? _node$padding48 : 0) - (bbox.y - ((_bbox$top12 = bbox.top) !== null && _bbox$top12 !== void 0 ? _bbox$top12 : 0)), \")\"));\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(shadedProcess, \"shadedProcess\");\n\n// src/rendering-util/rendering-elements/shapes/slopedRect.ts\nimport rough41 from \"roughjs\";\nasync function slopedRect(parent, node) {\n  var _node$padding49, _node$width22, _node$padding50, _node$height22, _node$padding51, _bbox$left18, _node$padding52, _bbox$top13;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding49 = node.padding) !== null && _node$padding49 !== void 0 ? _node$padding49 : 0) * 2, (_node$width22 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width22 !== void 0 ? _node$width22 : 0);\n  const h = Math.max(bbox.height + ((_node$padding50 = node.padding) !== null && _node$padding50 !== void 0 ? _node$padding50 : 0) * 2, (_node$height22 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height22 !== void 0 ? _node$height22 : 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough41.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x,\n    y\n  }, {\n    x,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y - h / 2\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", \"translate(0, \".concat(h / 4, \")\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding51 = node.padding) !== null && _node$padding51 !== void 0 ? _node$padding51 : 0) - (bbox.x - ((_bbox$left18 = bbox.left) !== null && _bbox$left18 !== void 0 ? _bbox$left18 : 0)), \", \").concat(-h / 4 + ((_node$padding52 = node.padding) !== null && _node$padding52 !== void 0 ? _node$padding52 : 0) - (bbox.y - ((_bbox$top13 = bbox.top) !== null && _bbox$top13 !== void 0 ? _bbox$top13 : 0)), \")\"));\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(slopedRect, \"slopedRect\");\n\n// src/rendering-util/rendering-elements/shapes/squareRect.ts\nasync function squareRect2(parent, node) {\n  var _node$labelPaddingX;\n  const options = {\n    rx: 0,\n    ry: 0,\n    classes: \"\",\n    labelPaddingX: (_node$labelPaddingX = node.labelPaddingX) !== null && _node$labelPaddingX !== void 0 ? _node$labelPaddingX : ((node === null || node === void 0 ? void 0 : node.padding) || 0) * 2,\n    labelPaddingY: ((node === null || node === void 0 ? void 0 : node.padding) || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(squareRect2, \"squareRect\");\n\n// src/rendering-util/rendering-elements/shapes/stadium.ts\nimport rough42 from \"roughjs\";\nasync function stadium(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n  const radius = h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough42.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 + radius,\n    y: -h / 2\n  }, {\n    x: w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270), {\n    x: w / 2 - radius,\n    y: h / 2\n  }, ...generateCirclePoints(w / 2 - radius, 0, radius, 50, 270, 450)];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container outer-path\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(stadium, \"stadium\");\n\n// src/rendering-util/rendering-elements/shapes/state.ts\nasync function state(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"flowchart-node\"\n  };\n  return drawRect(parent, node, options);\n}\n__name(state, \"state\");\n\n// src/rendering-util/rendering-elements/shapes/stateEnd.ts\nimport rough43 from \"roughjs\";\nfunction stateEnd(parent, node, _ref9) {\n  let {\n    config: {\n      themeVariables\n    }\n  } = _ref9;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    cssStyles\n  } = node;\n  const {\n    lineColor,\n    stateBorder,\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  const rc = rough43.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.circle(0, 0, 14, _objectSpread(_objectSpread({}, options), {}, {\n    stroke: lineColor,\n    strokeWidth: 2\n  }));\n  const innerFill = stateBorder !== null && stateBorder !== void 0 ? stateBorder : nodeBorder;\n  const roughInnerNode = rc.circle(0, 0, 5, _objectSpread(_objectSpread({}, options), {}, {\n    fill: innerFill,\n    stroke: innerFill,\n    strokeWidth: 2,\n    fillStyle: \"solid\"\n  }));\n  const circle2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  circle2.insert(() => roughInnerNode);\n  if (cssStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function (point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateEnd, \"stateEnd\");\n\n// src/rendering-util/rendering-elements/shapes/stateStart.ts\nimport rough44 from \"roughjs\";\nfunction stateStart(parent, node, _ref0) {\n  let {\n    config: {\n      themeVariables\n    }\n  } = _ref0;\n  const {\n    lineColor\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  let circle2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough44.svg(shapeSvg);\n    const roughNode = rc.circle(0, 0, 14, solidStateFill(lineColor));\n    circle2 = shapeSvg.insert(() => roughNode);\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  } else {\n    circle2 = shapeSvg.insert(\"circle\", \":first-child\");\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function (point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateStart, \"stateStart\");\n\n// src/rendering-util/rendering-elements/shapes/subroutine.ts\nimport rough45 from \"roughjs\";\nasync function subroutine(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = ((node === null || node === void 0 ? void 0 : node.padding) || 0) / 2;\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }, {\n    x: 0,\n    y: 0\n  }, {\n    x: -8,\n    y: 0\n  }, {\n    x: w + 8,\n    y: 0\n  }, {\n    x: w + 8,\n    y: -h\n  }, {\n    x: -8,\n    y: -h\n  }, {\n    x: -8,\n    y: 0\n  }];\n  if (node.look === \"handDrawn\") {\n    const rc = rough45.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.rectangle(x - 8, y, w + 16, h, options);\n    const l1 = rc.line(x, y, x, y + h, options);\n    const l2 = rc.line(x + w, y, x + w, y + h, options);\n    shapeSvg.insert(() => l1, \":first-child\");\n    shapeSvg.insert(() => l2, \":first-child\");\n    const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    const {\n      cssStyles\n    } = node;\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n    updateNodeBounds(node, rect2);\n  } else {\n    const el = insertPolygonShape(shapeSvg, w, h, points);\n    if (nodeStyles) {\n      el.attr(\"style\", nodeStyles);\n    }\n    updateNodeBounds(node, el);\n  }\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(subroutine, \"subroutine\");\n\n// src/rendering-util/rendering-elements/shapes/taggedRect.ts\nimport rough46 from \"roughjs\";\nasync function taggedRect(parent, node) {\n  var _node$padding53, _node$width23, _node$padding54, _node$height23;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding53 = node.padding) !== null && _node$padding53 !== void 0 ? _node$padding53 : 0) * 2, (_node$width23 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width23 !== void 0 ? _node$width23 : 0);\n  const h = Math.max(bbox.height + ((_node$padding54 = node.padding) !== null && _node$padding54 !== void 0 ? _node$padding54 : 0) * 2, (_node$height23 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height23 !== void 0 ? _node$height23 : 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const tagWidth = 0.2 * h;\n  const tagHeight = 0.2 * h;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough46.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const rectPoints = [{\n    x: x - tagWidth / 2,\n    y\n  }, {\n    x: x + w + tagWidth / 2,\n    y\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h\n  }, {\n    x: x - tagWidth / 2,\n    y: y + h\n  }];\n  const tagPoints = [{\n    x: x + w - tagWidth / 2,\n    y: y + h\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h - tagHeight\n  }];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectNode = rc.path(rectPath, options);\n  const tagPath = createPathFromPoints(tagPoints);\n  const tagNode = rc.path(tagPath, _objectSpread(_objectSpread({}, options), {}, {\n    fillStyle: \"solid\"\n  }));\n  const taggedRect2 = shapeSvg.insert(() => tagNode, \":first-child\");\n  taggedRect2.insert(() => rectNode, \":first-child\");\n  taggedRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, taggedRect2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedRect, \"taggedRect\");\n\n// src/rendering-util/rendering-elements/shapes/taggedWaveEdgedRectangle.ts\nimport rough47 from \"roughjs\";\nasync function taggedWaveEdgedRectangle(parent, node) {\n  var _node$padding55, _node$width24, _node$padding56, _node$height24, _node$padding57, _bbox$left19, _node$padding58, _bbox$top14;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding55 = node.padding) !== null && _node$padding55 !== void 0 ? _node$padding55 : 0) * 2, (_node$width24 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width24 !== void 0 ? _node$width24 : 0);\n  const h = Math.max(bbox.height + ((_node$padding56 = node.padding) !== null && _node$padding56 !== void 0 ? _node$padding56 : 0) * 2, (_node$height24 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height24 !== void 0 ? _node$height24 : 0);\n  const waveAmplitude = h / 4;\n  const tagWidth = 0.2 * w;\n  const tagHeight = 0.2 * h;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough47.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - w / 2 * 0.1,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - w / 2 * 0.1, finalH / 2, w / 2 + w / 2 * 0.1, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }];\n  const x = -w / 2 + w / 2 * 0.1;\n  const y = -finalH / 2 - tagHeight * 0.4;\n  const tagPoints = [{\n    x: x + w - tagWidth,\n    y: (y + h) * 1.4\n  }, {\n    x: x + w,\n    y: y + h - tagHeight\n  }, {\n    x: x + w,\n    y: (y + h) * 0.9\n  }, ...generateFullSineWavePoints(x + w, (y + h) * 1.3, x + w - tagWidth, (y + h) * 1.5, -h * 0.03, 0.5)];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const taggedWaveEdgeRectPath = createPathFromPoints(tagPoints);\n  const taggedWaveEdgeRectNode = rc.path(taggedWaveEdgeRectPath, _objectSpread(_objectSpread({}, options), {}, {\n    fillStyle: \"solid\"\n  }));\n  const waveEdgeRect = shapeSvg.insert(() => taggedWaveEdgeRectNode, \":first-child\");\n  waveEdgeRect.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", \"translate(0,\".concat(-waveAmplitude / 2, \")\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding57 = node.padding) !== null && _node$padding57 !== void 0 ? _node$padding57 : 0) - (bbox.x - ((_bbox$left19 = bbox.left) !== null && _bbox$left19 !== void 0 ? _bbox$left19 : 0)), \",\").concat(-h / 2 + ((_node$padding58 = node.padding) !== null && _node$padding58 !== void 0 ? _node$padding58 : 0) - waveAmplitude / 2 - (bbox.y - ((_bbox$top14 = bbox.top) !== null && _bbox$top14 !== void 0 ? _bbox$top14 : 0)), \")\"));\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedWaveEdgedRectangle, \"taggedWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/text.ts\nasync function text(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + node.padding, (node === null || node === void 0 ? void 0 : node.width) || 0);\n  const totalHeight = Math.max(bbox.height + node.padding, (node === null || node === void 0 ? void 0 : node.height) || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  rect2.attr(\"class\", \"text\").attr(\"style\", nodeStyles).attr(\"rx\", 0).attr(\"ry\", 0).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(text, \"text\");\n\n// src/rendering-util/rendering-elements/shapes/tiltedCylinder.ts\nimport rough48 from \"roughjs\";\nvar createCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return \"M\".concat(x, \",\").concat(y, \"\\n    a\").concat(rx, \",\").concat(ry, \" 0,0,1 \", 0, \",\").concat(-height, \"\\n    l\").concat(width, \",\", 0, \"\\n    a\").concat(rx, \",\").concat(ry, \" 0,0,1 \", 0, \",\").concat(height, \"\\n    M\").concat(width, \",\").concat(-height, \"\\n    a\").concat(rx, \",\").concat(ry, \" 0,0,0 \", 0, \",\").concat(height, \"\\n    l\").concat(-width, \",\", 0);\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x, \",\").concat(y), \"M\".concat(x + width, \",\").concat(y), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \", 0, \",\").concat(-height), \"l\".concat(-width, \",0\"), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 \", 0, \",\").concat(height), \"l\".concat(width, \",0\")].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [\"M\".concat(x + width / 2, \",\").concat(-height / 2), \"a\".concat(rx, \",\").concat(ry, \" 0,0,0 0,\").concat(height)].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function tiltedCylinder(parent, node) {\n  var _bbox$left20, _bbox$top15;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const labelPadding = node.look === \"neo\" ? halfPadding * 2 : halfPadding;\n  const h = bbox.height + labelPadding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const w = bbox.width + rx + labelPadding;\n  const {\n    cssStyles\n  } = node;\n  let cylinder2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough48.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD3(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD3(0, 0, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, {\n      fill: \"none\"\n    }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD3(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", cssStyles);\n    }\n    if (nodeStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", nodeStyles);\n    }\n  }\n  cylinder2.attr(\"label-offset-x\", rx);\n  cylinder2.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \" )\"));\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) - rx - (bbox.x - ((_bbox$left20 = bbox.left) !== null && _bbox$left20 !== void 0 ? _bbox$left20 : 0)), \", \").concat(-(bbox.height / 2) - (bbox.y - ((_bbox$top15 = bbox.top) !== null && _bbox$top15 !== void 0 ? _bbox$top15 : 0)), \")\"));\n  updateNodeBounds(node, cylinder2);\n  node.intersect = function (point) {\n    var _node$y9, _node$height25, _node$height26, _node$x7, _node$width25;\n    const pos = intersect_default.rect(node, point);\n    const y = pos.y - ((_node$y9 = node.y) !== null && _node$y9 !== void 0 ? _node$y9 : 0);\n    if (ry != 0 && (Math.abs(y) < ((_node$height25 = node.height) !== null && _node$height25 !== void 0 ? _node$height25 : 0) / 2 || Math.abs(y) == ((_node$height26 = node.height) !== null && _node$height26 !== void 0 ? _node$height26 : 0) / 2 && Math.abs(pos.x - ((_node$x7 = node.x) !== null && _node$x7 !== void 0 ? _node$x7 : 0)) > ((_node$width25 = node.width) !== null && _node$width25 !== void 0 ? _node$width25 : 0) / 2 - rx)) {\n      var _node$x8;\n      let x = rx * rx * (1 - y * y / (ry * ry));\n      if (x != 0) {\n        x = Math.sqrt(Math.abs(x));\n      }\n      x = rx - x;\n      if (point.x - ((_node$x8 = node.x) !== null && _node$x8 !== void 0 ? _node$x8 : 0) > 0) {\n        x = -x;\n      }\n      pos.x += x;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(tiltedCylinder, \"tiltedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoid.ts\nimport rough49 from \"roughjs\";\nasync function trapezoid(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [{\n    x: -3 * h / 6,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough49.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(h / 2, \")\"));\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(trapezoid, \"trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoidalPentagon.ts\nimport rough50 from \"roughjs\";\nasync function trapezoidalPentagon(parent, node) {\n  var _node$padding59, _node$width26, _node$padding60, _node$height27;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 60,\n    minHeight = 20;\n  const w = Math.max(minWidth, bbox.width + ((_node$padding59 = node.padding) !== null && _node$padding59 !== void 0 ? _node$padding59 : 0) * 2, (_node$width26 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width26 !== void 0 ? _node$width26 : 0);\n  const h = Math.max(minHeight, bbox.height + ((_node$padding60 = node.padding) !== null && _node$padding60 !== void 0 ? _node$padding60 : 0) * 2, (_node$height27 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height27 !== void 0 ? _node$height27 : 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough50.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 * 0.8,\n    y: -h / 2\n  }, {\n    x: w / 2 * 0.8,\n    y: -h / 2\n  }, {\n    x: w / 2,\n    y: -h / 2 * 0.6\n  }, {\n    x: w / 2,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: -h / 2 * 0.6\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(trapezoidalPentagon, \"trapezoidalPentagon\");\n\n// src/rendering-util/rendering-elements/shapes/triangle.ts\nimport rough51 from \"roughjs\";\nasync function triangle(parent, node) {\n  var _getConfig2$flowchart2, _node$padding61, _bbox$left21, _node$padding62, _bbox$top16;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const useHtmlLabels = evaluate((_getConfig2$flowchart2 = getConfig2().flowchart) === null || _getConfig2$flowchart2 === void 0 ? void 0 : _getConfig2$flowchart2.htmlLabels);\n  const w = bbox.width + ((_node$padding61 = node.padding) !== null && _node$padding61 !== void 0 ? _node$padding61 : 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: tw,\n    y: 0\n  }, {\n    x: tw / 2,\n    y: -h\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough51.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", \"translate(\".concat(-h / 2, \", \").concat(h / 2, \")\"));\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2 - (bbox.x - ((_bbox$left21 = bbox.left) !== null && _bbox$left21 !== void 0 ? _bbox$left21 : 0)), \", \").concat(h / 2 - (bbox.height + ((_node$padding62 = node.padding) !== null && _node$padding62 !== void 0 ? _node$padding62 : 0) / (useHtmlLabels ? 2 : 1) - (bbox.y - ((_bbox$top16 = bbox.top) !== null && _bbox$top16 !== void 0 ? _bbox$top16 : 0))), \")\"));\n  node.intersect = function (point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(triangle, \"triangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveEdgedRectangle.ts\nimport rough52 from \"roughjs\";\nasync function waveEdgedRectangle(parent, node) {\n  var _node$padding63, _node$width27, _node$padding64, _node$height28, _node$padding65, _bbox$left22, _node$padding66, _bbox$top17;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding63 = node.padding) !== null && _node$padding63 !== void 0 ? _node$padding63 : 0) * 2, (_node$width27 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width27 !== void 0 ? _node$width27 : 0);\n  const h = Math.max(bbox.height + ((_node$padding64 = node.padding) !== null && _node$padding64 !== void 0 ? _node$padding64 : 0) * 2, (_node$height28 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height28 !== void 0 ? _node$height28 : 0);\n  const waveAmplitude = h / 8;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const minWidth = 70;\n  const widthDif = minWidth - w;\n  const extraW = widthDif > 0 ? widthDif / 2 : 0;\n  const rc = rough52.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - extraW,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - extraW, finalH / 2, w / 2 + extraW, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + extraW,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - extraW,\n    y: -finalH / 2\n  }];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const waveEdgeRect = shapeSvg.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", \"translate(0,\".concat(-waveAmplitude / 2, \")\"));\n  label.attr(\"transform\", \"translate(\".concat(-w / 2 + ((_node$padding65 = node.padding) !== null && _node$padding65 !== void 0 ? _node$padding65 : 0) - (bbox.x - ((_bbox$left22 = bbox.left) !== null && _bbox$left22 !== void 0 ? _bbox$left22 : 0)), \",\").concat(-h / 2 + ((_node$padding66 = node.padding) !== null && _node$padding66 !== void 0 ? _node$padding66 : 0) - waveAmplitude - (bbox.y - ((_bbox$top17 = bbox.top) !== null && _bbox$top17 !== void 0 ? _bbox$top17 : 0)), \")\"));\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveEdgedRectangle, \"waveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveRectangle.ts\nimport rough53 from \"roughjs\";\nasync function waveRectangle(parent, node) {\n  var _node$padding67, _node$width28, _node$padding68, _node$height29;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 100;\n  const minHeight = 50;\n  const baseWidth = Math.max(bbox.width + ((_node$padding67 = node.padding) !== null && _node$padding67 !== void 0 ? _node$padding67 : 0) * 2, (_node$width28 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width28 !== void 0 ? _node$width28 : 0);\n  const baseHeight = Math.max(bbox.height + ((_node$padding68 = node.padding) !== null && _node$padding68 !== void 0 ? _node$padding68 : 0) * 2, (_node$height29 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height29 !== void 0 ? _node$height29 : 0);\n  const aspectRatio = baseWidth / baseHeight;\n  let w = baseWidth;\n  let h = baseHeight;\n  if (w > h * aspectRatio) {\n    h = w / aspectRatio;\n  } else {\n    w = h * aspectRatio;\n  }\n  w = Math.max(w, minWidth);\n  h = Math.max(h, minHeight);\n  const waveAmplitude = Math.min(h * 0.2, h / 4);\n  const finalH = h + waveAmplitude * 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough53.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2, finalH / 2, w / 2, finalH / 2, waveAmplitude, 1), {\n    x: w / 2,\n    y: -finalH / 2\n  }, ...generateFullSineWavePoints(w / 2, -finalH / 2, -w / 2, -finalH / 2, waveAmplitude, -1)];\n  const waveRectPath = createPathFromPoints(points);\n  const waveRectNode = rc.path(waveRectPath, options);\n  const waveRect = shapeSvg.insert(() => waveRectNode, \":first-child\");\n  waveRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, waveRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveRectangle, \"waveRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/windowPane.ts\nimport rough54 from \"roughjs\";\nasync function windowPane(parent, node) {\n  var _node$padding69, _node$width29, _node$padding70, _node$height30, _bbox$left23, _bbox$top18;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + ((_node$padding69 = node.padding) !== null && _node$padding69 !== void 0 ? _node$padding69 : 0) * 2, (_node$width29 = node === null || node === void 0 ? void 0 : node.width) !== null && _node$width29 !== void 0 ? _node$width29 : 0);\n  const h = Math.max(bbox.height + ((_node$padding70 = node.padding) !== null && _node$padding70 !== void 0 ? _node$padding70 : 0) * 2, (_node$height30 = node === null || node === void 0 ? void 0 : node.height) !== null && _node$height30 !== void 0 ? _node$height30 : 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough54.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y - rectOffset\n  }];\n  const path = \"M\".concat(x - rectOffset, \",\").concat(y - rectOffset, \" L\").concat(x + w, \",\").concat(y - rectOffset, \" L\").concat(x + w, \",\").concat(y + h, \" L\").concat(x - rectOffset, \",\").concat(y + h, \" L\").concat(x - rectOffset, \",\").concat(y - rectOffset, \"\\n                M\").concat(x - rectOffset, \",\").concat(y, \" L\").concat(x + w, \",\").concat(y, \"\\n                M\").concat(x, \",\").concat(y - rectOffset, \" L\").concat(x, \",\").concat(y + h);\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const no = rc.path(path, options);\n  const windowPane2 = shapeSvg.insert(() => no, \":first-child\");\n  windowPane2.attr(\"transform\", \"translate(\".concat(rectOffset / 2, \", \").concat(rectOffset / 2, \")\"));\n  windowPane2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", \"translate(\".concat(-(bbox.width / 2) + rectOffset / 2 - (bbox.x - ((_bbox$left23 = bbox.left) !== null && _bbox$left23 !== void 0 ? _bbox$left23 : 0)), \", \").concat(-(bbox.height / 2) + rectOffset / 2 - (bbox.y - ((_bbox$top18 = bbox.top) !== null && _bbox$top18 !== void 0 ? _bbox$top18 : 0)), \")\"));\n  updateNodeBounds(node, windowPane2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(windowPane, \"windowPane\");\n\n// src/rendering-util/rendering-elements/shapes/erBox.ts\nimport rough55 from \"roughjs\";\nimport { select as select5 } from \"d3\";\nasync function erBox(parent, node) {\n  var _config$er$diagramPad, _config$er, _config$er$entityPadd, _config$er2, _node$label;\n  const entityNode = node;\n  if (entityNode.alias) {\n    node.label = entityNode.alias;\n  }\n  if (node.look === \"handDrawn\") {\n    const {\n      themeVariables: themeVariables2\n    } = getConfig();\n    const {\n      background\n    } = themeVariables2;\n    const backgroundNode = _objectSpread(_objectSpread({}, node), {}, {\n      id: node.id + \"-background\",\n      look: \"default\",\n      cssStyles: [\"stroke: none\", \"fill: \".concat(background)]\n    });\n    await erBox(parent, backgroundNode);\n  }\n  const config = getConfig();\n  node.useHtmlLabels = config.htmlLabels;\n  let PADDING = (_config$er$diagramPad = (_config$er = config.er) === null || _config$er === void 0 ? void 0 : _config$er.diagramPadding) !== null && _config$er$diagramPad !== void 0 ? _config$er$diagramPad : 10;\n  let TEXT_PADDING = (_config$er$entityPadd = (_config$er2 = config.er) === null || _config$er2 === void 0 ? void 0 : _config$er2.entityPadding) !== null && _config$er$entityPadd !== void 0 ? _config$er$entityPadd : 6;\n  const {\n    cssStyles\n  } = node;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  if (entityNode.attributes.length === 0 && node.label) {\n    const options2 = {\n      rx: 0,\n      ry: 0,\n      labelPaddingX: PADDING,\n      labelPaddingY: PADDING * 1.5,\n      classes: \"\"\n    };\n    if (calculateTextWidth(node.label, config) + options2.labelPaddingX * 2 < config.er.minEntityWidth) {\n      node.width = config.er.minEntityWidth;\n    }\n    const shapeSvg2 = await drawRect(parent, node, options2);\n    if (!evaluate(config.htmlLabels)) {\n      var _textElement$node;\n      const textElement = shapeSvg2.select(\"text\");\n      const bbox = (_textElement$node = textElement.node()) === null || _textElement$node === void 0 ? void 0 : _textElement$node.getBBox();\n      textElement.attr(\"transform\", \"translate(\".concat(-bbox.width / 2, \", 0)\"));\n    }\n    return shapeSvg2;\n  }\n  if (!config.htmlLabels) {\n    PADDING *= 1.25;\n    TEXT_PADDING *= 1.25;\n  }\n  let cssClasses = getNodeClasses(node);\n  if (!cssClasses) {\n    cssClasses = \"node default\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const nameBBox = await addText(shapeSvg, (_node$label = node.label) !== null && _node$label !== void 0 ? _node$label : \"\", config, 0, 0, [\"name\"], labelStyles);\n  nameBBox.height += TEXT_PADDING;\n  let yOffset = 0;\n  const yOffsets = [];\n  const rows = [];\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeysWidth = 0;\n  let maxCommentWidth = 0;\n  let keysPresent = true;\n  let commentPresent = true;\n  for (const attribute of entityNode.attributes) {\n    const typeBBox = await addText(shapeSvg, attribute.type, config, 0, yOffset, [\"attribute-type\"], labelStyles);\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width + PADDING);\n    const nameBBox2 = await addText(shapeSvg, attribute.name, config, 0, yOffset, [\"attribute-name\"], labelStyles);\n    maxNameWidth = Math.max(maxNameWidth, nameBBox2.width + PADDING);\n    const keysBBox = await addText(shapeSvg, attribute.keys.join(), config, 0, yOffset, [\"attribute-keys\"], labelStyles);\n    maxKeysWidth = Math.max(maxKeysWidth, keysBBox.width + PADDING);\n    const commentBBox = await addText(shapeSvg, attribute.comment, config, 0, yOffset, [\"attribute-comment\"], labelStyles);\n    maxCommentWidth = Math.max(maxCommentWidth, commentBBox.width + PADDING);\n    const rowHeight = Math.max(typeBBox.height, nameBBox2.height, keysBBox.height, commentBBox.height) + TEXT_PADDING;\n    rows.push({\n      yOffset,\n      rowHeight\n    });\n    yOffset += rowHeight;\n  }\n  let totalWidthSections = 4;\n  if (maxKeysWidth <= PADDING) {\n    keysPresent = false;\n    maxKeysWidth = 0;\n    totalWidthSections--;\n  }\n  if (maxCommentWidth <= PADDING) {\n    commentPresent = false;\n    maxCommentWidth = 0;\n    totalWidthSections--;\n  }\n  const shapeBBox = shapeSvg.node().getBBox();\n  if (nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth) > 0) {\n    const difference = nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth);\n    maxTypeWidth += difference / totalWidthSections;\n    maxNameWidth += difference / totalWidthSections;\n    if (maxKeysWidth > 0) {\n      maxKeysWidth += difference / totalWidthSections;\n    }\n    if (maxCommentWidth > 0) {\n      maxCommentWidth += difference / totalWidthSections;\n    }\n  }\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth;\n  const rc = rough55.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  let totalShapeBBoxHeight = 0;\n  if (rows.length > 0) {\n    totalShapeBBoxHeight = rows.reduce((sum, row) => {\n      var _row$rowHeight;\n      return sum + ((_row$rowHeight = row === null || row === void 0 ? void 0 : row.rowHeight) !== null && _row$rowHeight !== void 0 ? _row$rowHeight : 0);\n    }, 0);\n  }\n  const w = Math.max(shapeBBox.width + PADDING * 2, (node === null || node === void 0 ? void 0 : node.width) || 0, maxWidth);\n  const h = Math.max((totalShapeBBoxHeight !== null && totalShapeBBoxHeight !== void 0 ? totalShapeBBoxHeight : 0) + nameBBox.height, (node === null || node === void 0 ? void 0 : node.height) || 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  shapeSvg.selectAll(\"g:not(:first-child)\").each((_, i, nodes) => {\n    const text2 = select5(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n        if (text2.attr(\"class\").includes(\"attribute-name\")) {\n          translateX += maxTypeWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-keys\")) {\n          translateX += maxTypeWidth + maxNameWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-comment\")) {\n          translateX += maxTypeWidth + maxNameWidth + maxKeysWidth;\n        }\n      }\n    }\n    text2.attr(\"transform\", \"translate(\".concat(x + PADDING / 2 + translateX, \", \").concat(translateY + y + nameBBox.height + TEXT_PADDING / 2, \")\"));\n  });\n  shapeSvg.select(\".name\").attr(\"transform\", \"translate(\" + -nameBBox.width / 2 + \", \" + (y + TEXT_PADDING / 2) + \")\");\n  const roughRect = rc.rectangle(x, y, w, h, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\").attr(\"style\", cssStyles.join(\"\"));\n  const {\n    themeVariables\n  } = getConfig();\n  const {\n    rowEven,\n    rowOdd,\n    nodeBorder\n  } = themeVariables;\n  yOffsets.push(0);\n  for (const [i, row] of rows.entries()) {\n    const contentRowIndex = i + 1;\n    const isEven = contentRowIndex % 2 === 0 && row.yOffset !== 0;\n    const roughRect2 = rc.rectangle(x, nameBBox.height + y + (row === null || row === void 0 ? void 0 : row.yOffset), w, row === null || row === void 0 ? void 0 : row.rowHeight, _objectSpread(_objectSpread({}, options), {}, {\n      fill: isEven ? rowEven : rowOdd,\n      stroke: nodeBorder\n    }));\n    shapeSvg.insert(() => roughRect2, \"g.label\").attr(\"style\", cssStyles.join(\"\")).attr(\"class\", \"row-rect-\".concat(isEven ? \"even\" : \"odd\"));\n  }\n  let roughLine = rc.line(x, nameBBox.height + y, w + x, nameBBox.height + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  roughLine = rc.line(maxTypeWidth + x, nameBBox.height + y, maxTypeWidth + x, h + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  if (keysPresent) {\n    roughLine = rc.line(maxTypeWidth + maxNameWidth + x, nameBBox.height + y, maxTypeWidth + maxNameWidth + x, h + y, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  if (commentPresent) {\n    roughLine = rc.line(maxTypeWidth + maxNameWidth + maxKeysWidth + x, nameBBox.height + y, maxTypeWidth + maxNameWidth + maxKeysWidth + x, h + y, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  for (const yOffset2 of yOffsets) {\n    roughLine = rc.line(x, nameBBox.height + y + yOffset2, w + x, nameBBox.height + y + yOffset2, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  updateNodeBounds(node, rect2);\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    var _allStyle$filter;\n    const allStyle = nodeStyles.split(\";\");\n    const strokeStyles = allStyle === null || allStyle === void 0 || (_allStyle$filter = allStyle.filter(e => {\n      return e.includes(\"stroke\");\n    })) === null || _allStyle$filter === void 0 ? void 0 : _allStyle$filter.map(s => \"\".concat(s)).join(\"; \");\n    shapeSvg.selectAll(\"path\").attr(\"style\", strokeStyles !== null && strokeStyles !== void 0 ? strokeStyles : \"\");\n    shapeSvg.selectAll(\".row-rect-even path\").attr(\"style\", nodeStyles);\n  }\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(erBox, \"erBox\");\nasync function addText(shapeSvg, labelText, config) {\n  let translateX = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  let translateY = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  let classes = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n  let style = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : \"\";\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"label \".concat(classes.join(\" \"))).attr(\"transform\", \"translate(\".concat(translateX, \", \").concat(translateY, \")\")).attr(\"style\", style);\n  if (labelText !== parseGenericTypes(labelText)) {\n    labelText = parseGenericTypes(labelText);\n    labelText = labelText.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  }\n  const text2 = label.node().appendChild(await createText(label, labelText, {\n    width: calculateTextWidth(labelText, config) + 100,\n    style,\n    useHtmlLabels: config.htmlLabels\n  }, config));\n  if (labelText.includes(\"&lt;\") || labelText.includes(\"&gt;\")) {\n    let child = text2.children[0];\n    child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    while (child.childNodes[0]) {\n      child = child.childNodes[0];\n      child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    }\n  }\n  let bbox = text2.getBBox();\n  if (evaluate(config.htmlLabels)) {\n    const div = text2.children[0];\n    div.style.textAlign = \"start\";\n    const dv = select5(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  return bbox;\n}\n__name(addText, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nimport { select as select7 } from \"d3\";\nimport rough56 from \"roughjs\";\n\n// src/diagrams/class/shapeUtil.ts\nimport { select as select6 } from \"d3\";\nasync function textHelper(parent, node, config, useHtmlLabels) {\n  var _config$class$padding;\n  let GAP = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : (_config$class$padding = config.class.padding) !== null && _config$class$padding !== void 0 ? _config$class$padding : 12;\n  const TEXT_PADDING = !useHtmlLabels ? 3 : 0;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId || node.id);\n  let annotationGroup = null;\n  let labelGroup = null;\n  let membersGroup = null;\n  let methodsGroup = null;\n  let annotationGroupHeight = 0;\n  let labelGroupHeight = 0;\n  let membersGroupHeight = 0;\n  annotationGroup = shapeSvg.insert(\"g\").attr(\"class\", \"annotation-group text\");\n  if (node.annotations.length > 0) {\n    const annotation = node.annotations[0];\n    await addText2(annotationGroup, {\n      text: \"\\xAB\".concat(annotation, \"\\xBB\")\n    }, 0);\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroupHeight = annotationGroupBBox.height;\n  }\n  labelGroup = shapeSvg.insert(\"g\").attr(\"class\", \"label-group text\");\n  await addText2(labelGroup, node, 0, [\"font-weight: bolder\"]);\n  const labelGroupBBox = labelGroup.node().getBBox();\n  labelGroupHeight = labelGroupBBox.height;\n  membersGroup = shapeSvg.insert(\"g\").attr(\"class\", \"members-group text\");\n  let yOffset = 0;\n  for (const member of node.members) {\n    const height = await addText2(membersGroup, member, yOffset, [member.parseClassifier()]);\n    yOffset += height + TEXT_PADDING;\n  }\n  membersGroupHeight = membersGroup.node().getBBox().height;\n  if (membersGroupHeight <= 0) {\n    membersGroupHeight = GAP / 2;\n  }\n  methodsGroup = shapeSvg.insert(\"g\").attr(\"class\", \"methods-group text\");\n  let methodsYOffset = 0;\n  for (const method of node.methods) {\n    const height = await addText2(methodsGroup, method, methodsYOffset, [method.parseClassifier()]);\n    methodsYOffset += height + TEXT_PADDING;\n  }\n  let bbox = shapeSvg.node().getBBox();\n  if (annotationGroup !== null) {\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroup.attr(\"transform\", \"translate(\".concat(-annotationGroupBBox.width / 2, \")\"));\n  }\n  labelGroup.attr(\"transform\", \"translate(\".concat(-labelGroupBBox.width / 2, \", \").concat(annotationGroupHeight, \")\"));\n  bbox = shapeSvg.node().getBBox();\n  membersGroup.attr(\"transform\", \"translate(\".concat(0, \", \", annotationGroupHeight + labelGroupHeight + GAP * 2, \")\"));\n  bbox = shapeSvg.node().getBBox();\n  methodsGroup.attr(\"transform\", \"translate(\".concat(0, \", \", annotationGroupHeight + labelGroupHeight + (membersGroupHeight ? membersGroupHeight + GAP * 4 : GAP * 2), \")\"));\n  bbox = shapeSvg.node().getBBox();\n  return {\n    shapeSvg,\n    bbox\n  };\n}\n__name(textHelper, \"textHelper\");\nasync function addText2(parentGroup, node, yOffset) {\n  var _evaluate;\n  let styles = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", styles.join(\"; \"));\n  const config = getConfig();\n  let useHtmlLabels = \"useHtmlLabels\" in node ? node.useHtmlLabels : (_evaluate = evaluate(config.htmlLabels)) !== null && _evaluate !== void 0 ? _evaluate : true;\n  let textContent = \"\";\n  if (\"text\" in node) {\n    textContent = node.text;\n  } else {\n    textContent = node.label;\n  }\n  if (!useHtmlLabels && textContent.startsWith(\"\\\\\")) {\n    textContent = textContent.substring(1);\n  }\n  if (hasKatex(textContent)) {\n    useHtmlLabels = true;\n  }\n  const text2 = await createText(textEl, sanitizeText2(decodeEntities(textContent)), {\n    width: calculateTextWidth(textContent, config) + 50,\n    // Add room for error when splitting text into multiple lines\n    classes: \"markdown-node-label\",\n    useHtmlLabels\n  }, config);\n  let bbox;\n  let numberOfLines = 1;\n  if (!useHtmlLabels) {\n    if (styles.includes(\"font-weight: bolder\")) {\n      select6(text2).selectAll(\"tspan\").attr(\"font-weight\", \"\");\n    }\n    numberOfLines = text2.children.length;\n    const textChild = text2.children[0];\n    if (text2.textContent === \"\" || text2.textContent.includes(\"&gt\")) {\n      textChild.textContent = textContent[0] + textContent.substring(1).replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\").trim();\n      const preserveSpace = textContent[1] === \" \";\n      if (preserveSpace) {\n        textChild.textContent = textChild.textContent[0] + \" \" + textChild.textContent.substring(1);\n      }\n    }\n    if (textChild.textContent === \"undefined\") {\n      textChild.textContent = \"\";\n    }\n    bbox = text2.getBBox();\n  } else {\n    const div = text2.children[0];\n    const dv = select6(text2);\n    numberOfLines = div.innerHTML.split(\"<br>\").length;\n    if (div.innerHTML.includes(\"</math>\")) {\n      numberOfLines += div.innerHTML.split(\"<mrow>\").length - 1;\n    }\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = textContent.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all([...images].map(img => new Promise(res => {\n        function setupImage() {\n          img.style.display = \"flex\";\n          img.style.flexDirection = \"column\";\n          if (noImgText) {\n            var _config$fontSize$toSt, _config$fontSize;\n            const bodyFontSize = (_config$fontSize$toSt = (_config$fontSize = config.fontSize) === null || _config$fontSize === void 0 ? void 0 : _config$fontSize.toString()) !== null && _config$fontSize$toSt !== void 0 ? _config$fontSize$toSt : window.getComputedStyle(document.body).fontSize;\n            const enlargingFactor = 5;\n            const width = parseInt(bodyFontSize, 10) * enlargingFactor + \"px\";\n            img.style.minWidth = width;\n            img.style.maxWidth = width;\n          } else {\n            img.style.width = \"100%\";\n          }\n          res(img);\n        }\n        __name(setupImage, \"setupImage\");\n        setTimeout(() => {\n          if (img.complete) {\n            setupImage();\n          }\n        });\n        img.addEventListener(\"error\", setupImage);\n        img.addEventListener(\"load\", setupImage);\n      })));\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", \"translate(0,\" + (-bbox.height / (2 * numberOfLines) + yOffset) + \")\");\n  return bbox.height;\n}\n__name(addText2, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nasync function classBox(parent, node) {\n  var _config$class$padding2, _ref1, _node$useHtmlLabels, _classNode$annotation, _classNode$members, _classNode$methods, _classNode$styles, _config$class;\n  const config = getConfig2();\n  const PADDING = (_config$class$padding2 = config.class.padding) !== null && _config$class$padding2 !== void 0 ? _config$class$padding2 : 12;\n  const GAP = PADDING;\n  const useHtmlLabels = (_ref1 = (_node$useHtmlLabels = node.useHtmlLabels) !== null && _node$useHtmlLabels !== void 0 ? _node$useHtmlLabels : evaluate(config.htmlLabels)) !== null && _ref1 !== void 0 ? _ref1 : true;\n  const classNode = node;\n  classNode.annotations = (_classNode$annotation = classNode.annotations) !== null && _classNode$annotation !== void 0 ? _classNode$annotation : [];\n  classNode.members = (_classNode$members = classNode.members) !== null && _classNode$members !== void 0 ? _classNode$members : [];\n  classNode.methods = (_classNode$methods = classNode.methods) !== null && _classNode$methods !== void 0 ? _classNode$methods : [];\n  const {\n    shapeSvg,\n    bbox\n  } = await textHelper(parent, node, config, useHtmlLabels, GAP);\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.cssStyles = classNode.styles || \"\";\n  const styles = ((_classNode$styles = classNode.styles) === null || _classNode$styles === void 0 ? void 0 : _classNode$styles.join(\";\")) || nodeStyles || \"\";\n  if (!node.cssStyles) {\n    node.cssStyles = styles.replaceAll(\"!important\", \"\").split(\";\");\n  }\n  const renderExtraBox = classNode.members.length === 0 && classNode.methods.length === 0 && !((_config$class = config.class) !== null && _config$class !== void 0 && _config$class.hideEmptyMembersBox);\n  const rc = rough56.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = bbox.width;\n  let h = bbox.height;\n  if (classNode.members.length === 0 && classNode.methods.length === 0) {\n    h += GAP;\n  } else if (classNode.members.length > 0 && classNode.methods.length === 0) {\n    h += GAP * 2;\n  }\n  const x = -w / 2;\n  const y = -h / 2;\n  const roughRect = rc.rectangle(x - PADDING, y - PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0), w + 2 * PADDING, h + 2 * PADDING + (renderExtraBox ? PADDING * 2 : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING : 0), options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  const rectBBox = rect2.node().getBBox();\n  shapeSvg.selectAll(\".text\").each((_, i, nodes) => {\n    const text2 = select7(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    let newTranslateY = translateY + y + PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0);\n    if (!useHtmlLabels) {\n      newTranslateY -= 4;\n    }\n    let newTranslateX = x;\n    if (text2.attr(\"class\").includes(\"label-group\") || text2.attr(\"class\").includes(\"annotation-group\")) {\n      var _text2$node;\n      newTranslateX = -((_text2$node = text2.node()) === null || _text2$node === void 0 ? void 0 : _text2$node.getBBox().width) / 2 || 0;\n      shapeSvg.selectAll(\"text\").each(function (_2, i2, nodes2) {\n        if (window.getComputedStyle(nodes2[i2]).textAnchor === \"middle\") {\n          newTranslateX = 0;\n        }\n      });\n    }\n    text2.attr(\"transform\", \"translate(\".concat(newTranslateX, \", \").concat(newTranslateY, \")\"));\n  });\n  const annotationGroupHeight = shapeSvg.select(\".annotation-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const labelGroupHeight = shapeSvg.select(\".label-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const membersGroupHeight = shapeSvg.select(\".members-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  if (classNode.members.length > 0 || classNode.methods.length > 0 || renderExtraBox) {\n    const roughLine = rc.line(rectBBox.x, annotationGroupHeight + labelGroupHeight + y + PADDING, rectBBox.x + rectBBox.width, annotationGroupHeight + labelGroupHeight + y + PADDING, options);\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (renderExtraBox || classNode.members.length > 0 || classNode.methods.length > 0) {\n    const roughLine = rc.line(rectBBox.x, annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + GAP * 2 + PADDING, rectBBox.x + rectBBox.width, annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + PADDING + GAP * 2, options);\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (classNode.look !== \"handDrawn\") {\n    shapeSvg.selectAll(\"path\").attr(\"style\", styles);\n  }\n  rect2.select(\":nth-child(2)\").attr(\"style\", styles);\n  shapeSvg.selectAll(\".divider\").select(\"path\").attr(\"style\", styles);\n  if (node.labelStyle) {\n    shapeSvg.selectAll(\"span\").attr(\"style\", node.labelStyle);\n  } else {\n    shapeSvg.selectAll(\"span\").attr(\"style\", styles);\n  }\n  if (!useHtmlLabels) {\n    const colorRegex = RegExp(/color\\s*:\\s*([^;]*)/);\n    const match = colorRegex.exec(styles);\n    if (match) {\n      const colorStyle = match[0].replace(\"color\", \"fill\");\n      shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n    } else if (labelStyles) {\n      const match2 = colorRegex.exec(labelStyles);\n      if (match2) {\n        const colorStyle = match2[0].replace(\"color\", \"fill\");\n        shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n      }\n    }\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(classBox, \"classBox\");\n\n// src/rendering-util/rendering-elements/shapes/requirementBox.ts\nimport rough57 from \"roughjs\";\nimport { select as select8 } from \"d3\";\nasync function requirementBox(parent, node) {\n  var _node$domId6, _shapeSvg$node$getBBo, _shapeSvg$node, _shapeSvg$node$getBBo2, _shapeSvg$node2;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const requirementNode = node;\n  const elementNode = node;\n  const padding = 20;\n  const gap = 20;\n  const isRequirementNode = \"verifyMethod\" in node;\n  const classes = getNodeClasses(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", (_node$domId6 = node.domId) !== null && _node$domId6 !== void 0 ? _node$domId6 : node.id);\n  let typeHeight;\n  if (isRequirementNode) {\n    typeHeight = await addText3(shapeSvg, \"&lt;&lt;\".concat(requirementNode.type, \"&gt;&gt;\"), 0, node.labelStyle);\n  } else {\n    typeHeight = await addText3(shapeSvg, \"&lt;&lt;Element&gt;&gt;\", 0, node.labelStyle);\n  }\n  let accumulativeHeight = typeHeight;\n  const nameHeight = await addText3(shapeSvg, requirementNode.name, accumulativeHeight, node.labelStyle + \"; font-weight: bold;\");\n  accumulativeHeight += nameHeight + gap;\n  if (isRequirementNode) {\n    const idHeight = await addText3(shapeSvg, \"\".concat(requirementNode.requirementId ? \"ID: \".concat(requirementNode.requirementId) : \"\"), accumulativeHeight, node.labelStyle);\n    accumulativeHeight += idHeight;\n    const textHeight = await addText3(shapeSvg, \"\".concat(requirementNode.text ? \"Text: \".concat(requirementNode.text) : \"\"), accumulativeHeight, node.labelStyle);\n    accumulativeHeight += textHeight;\n    const riskHeight = await addText3(shapeSvg, \"\".concat(requirementNode.risk ? \"Risk: \".concat(requirementNode.risk) : \"\"), accumulativeHeight, node.labelStyle);\n    accumulativeHeight += riskHeight;\n    await addText3(shapeSvg, \"\".concat(requirementNode.verifyMethod ? \"Verification: \".concat(requirementNode.verifyMethod) : \"\"), accumulativeHeight, node.labelStyle);\n  } else {\n    const typeHeight2 = await addText3(shapeSvg, \"\".concat(elementNode.type ? \"Type: \".concat(elementNode.type) : \"\"), accumulativeHeight, node.labelStyle);\n    accumulativeHeight += typeHeight2;\n    await addText3(shapeSvg, \"\".concat(elementNode.docRef ? \"Doc Ref: \".concat(elementNode.docRef) : \"\"), accumulativeHeight, node.labelStyle);\n  }\n  const totalWidth = ((_shapeSvg$node$getBBo = (_shapeSvg$node = shapeSvg.node()) === null || _shapeSvg$node === void 0 ? void 0 : _shapeSvg$node.getBBox().width) !== null && _shapeSvg$node$getBBo !== void 0 ? _shapeSvg$node$getBBo : 200) + padding;\n  const totalHeight = ((_shapeSvg$node$getBBo2 = (_shapeSvg$node2 = shapeSvg.node()) === null || _shapeSvg$node2 === void 0 ? void 0 : _shapeSvg$node2.getBBox().height) !== null && _shapeSvg$node$getBBo2 !== void 0 ? _shapeSvg$node$getBBo2 : 200) + padding;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rc = rough57.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughRect = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n  shapeSvg.selectAll(\".label\").each((_, i, nodes) => {\n    const text2 = select8(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    const newTranslateY = translateY - totalHeight / 2;\n    let newTranslateX = x + padding / 2;\n    if (i === 0 || i === 1) {\n      newTranslateX = translateX;\n    }\n    text2.attr(\"transform\", \"translate(\".concat(newTranslateX, \", \").concat(newTranslateY + padding, \")\"));\n  });\n  if (accumulativeHeight > typeHeight + nameHeight + gap) {\n    const roughLine = rc.line(x, y + typeHeight + nameHeight + gap, x + totalWidth, y + typeHeight + nameHeight + gap, options);\n    const dividerLine = shapeSvg.insert(() => roughLine);\n    dividerLine.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(requirementBox, \"requirementBox\");\nasync function addText3(parentGroup, inputText, yOffset) {\n  var _config$htmlLabels;\n  let style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n  if (inputText === \"\") {\n    return 0;\n  }\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", style);\n  const config = getConfig2();\n  const useHtmlLabels = (_config$htmlLabels = config.htmlLabels) !== null && _config$htmlLabels !== void 0 ? _config$htmlLabels : true;\n  const text2 = await createText(textEl, sanitizeText2(decodeEntities(inputText)), {\n    width: calculateTextWidth(inputText, config) + 50,\n    // Add room for error when splitting text into multiple lines\n    classes: \"markdown-node-label\",\n    useHtmlLabels,\n    style\n  }, config);\n  let bbox;\n  if (!useHtmlLabels) {\n    const textChild = text2.children[0];\n    for (const child of textChild.children) {\n      child.textContent = child.textContent.replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\");\n      if (style) {\n        child.setAttribute(\"style\", style);\n      }\n    }\n    bbox = text2.getBBox();\n    bbox.height += 6;\n  } else {\n    const div = text2.children[0];\n    const dv = select8(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", \"translate(\".concat(-bbox.width / 2, \",\").concat(-bbox.height / 2 + yOffset, \")\"));\n  return bbox.height;\n}\n__name(addText3, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/kanbanItem.ts\nimport rough58 from \"roughjs\";\nvar colorFromPriority = /* @__PURE__ */__name(priority => {\n  switch (priority) {\n    case \"Very High\":\n      return \"red\";\n    case \"High\":\n      return \"orange\";\n    case \"Medium\":\n      return null;\n    // no stroke\n    case \"Low\":\n      return \"blue\";\n    case \"Very Low\":\n      return \"lightblue\";\n  }\n}, \"colorFromPriority\");\nasync function kanbanItem(parent, kanbanNode, _ref10) {\n  var _kanbanNode$width, _config$kanban;\n  let {\n    config\n  } = _ref10;\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(kanbanNode);\n  kanbanNode.labelStyle = labelStyles || \"\";\n  const labelPaddingX = 10;\n  const orgWidth = kanbanNode.width;\n  kanbanNode.width = ((_kanbanNode$width = kanbanNode.width) !== null && _kanbanNode$width !== void 0 ? _kanbanNode$width : 200) - 10;\n  const {\n    shapeSvg,\n    bbox,\n    label: labelElTitle\n  } = await labelHelper(parent, kanbanNode, getNodeClasses(kanbanNode));\n  const padding = kanbanNode.padding || 10;\n  let ticketUrl = \"\";\n  let link;\n  if (\"ticket\" in kanbanNode && kanbanNode.ticket && config !== null && config !== void 0 && (_config$kanban = config.kanban) !== null && _config$kanban !== void 0 && _config$kanban.ticketBaseUrl) {\n    var _config$kanban2;\n    ticketUrl = config === null || config === void 0 || (_config$kanban2 = config.kanban) === null || _config$kanban2 === void 0 ? void 0 : _config$kanban2.ticketBaseUrl.replace(\"#TICKET#\", kanbanNode.ticket);\n    link = shapeSvg.insert(\"svg:a\", \":first-child\").attr(\"class\", \"kanban-ticket-link\").attr(\"xlink:href\", ticketUrl).attr(\"target\", \"_blank\");\n  }\n  const options = {\n    useHtmlLabels: kanbanNode.useHtmlLabels,\n    labelStyle: kanbanNode.labelStyle || \"\",\n    width: kanbanNode.width,\n    img: kanbanNode.img,\n    padding: kanbanNode.padding || 8,\n    centerLabel: false\n  };\n  let labelEl, bbox2;\n  if (link) {\n    ({\n      label: labelEl,\n      bbox: bbox2\n    } = await insertLabel(link, \"ticket\" in kanbanNode && kanbanNode.ticket || \"\", options));\n  } else {\n    ({\n      label: labelEl,\n      bbox: bbox2\n    } = await insertLabel(shapeSvg, \"ticket\" in kanbanNode && kanbanNode.ticket || \"\", options));\n  }\n  const {\n    label: labelElAssigned,\n    bbox: bboxAssigned\n  } = await insertLabel(shapeSvg, \"assigned\" in kanbanNode && kanbanNode.assigned || \"\", options);\n  kanbanNode.width = orgWidth;\n  const labelPaddingY = 10;\n  const totalWidth = (kanbanNode === null || kanbanNode === void 0 ? void 0 : kanbanNode.width) || 0;\n  const heightAdj = Math.max(bbox2.height, bboxAssigned.height) / 2;\n  const totalHeight = Math.max(bbox.height + labelPaddingY * 2, (kanbanNode === null || kanbanNode === void 0 ? void 0 : kanbanNode.height) || 0) + heightAdj;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  labelElTitle.attr(\"transform\", \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj - bbox.height / 2) + \")\");\n  labelEl.attr(\"transform\", \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj + bbox.height / 2) + \")\");\n  labelElAssigned.attr(\"transform\", \"translate(\" + (padding + totalWidth / 2 - bboxAssigned.width - 2 * labelPaddingX) + \", \" + (-heightAdj + bbox.height / 2) + \")\");\n  let rect2;\n  const {\n    rx,\n    ry\n  } = kanbanNode;\n  const {\n    cssStyles\n  } = kanbanNode;\n  if (kanbanNode.look === \"handDrawn\") {\n    const rc = rough58.svg(shapeSvg);\n    const options2 = userNodeOverrides(kanbanNode, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", cssStyles ? cssStyles : null);\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container __APA__\").attr(\"style\", nodeStyles).attr(\"rx\", rx !== null && rx !== void 0 ? rx : 5).attr(\"ry\", ry !== null && ry !== void 0 ? ry : 5).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n    const priority = \"priority\" in kanbanNode && kanbanNode.priority;\n    if (priority) {\n      const line = shapeSvg.append(\"line\");\n      const lineX = x + 2;\n      const y1 = y + Math.floor((rx !== null && rx !== void 0 ? rx : 0) / 2);\n      const y2 = y + totalHeight - Math.floor((rx !== null && rx !== void 0 ? rx : 0) / 2);\n      line.attr(\"x1\", lineX).attr(\"y1\", y1).attr(\"x2\", lineX).attr(\"y2\", y2).attr(\"stroke-width\", \"4\").attr(\"stroke\", colorFromPriority(priority));\n    }\n  }\n  updateNodeBounds(kanbanNode, rect2);\n  kanbanNode.height = totalHeight;\n  kanbanNode.intersect = function (point) {\n    return intersect_default.rect(kanbanNode, point);\n  };\n  return shapeSvg;\n}\n__name(kanbanItem, \"kanbanItem\");\n\n// src/rendering-util/rendering-elements/shapes/bang.ts\nimport rough59 from \"roughjs\";\nasync function bang(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + 10 * halfPadding;\n  const h = bbox.height + 8 * halfPadding;\n  const r = 0.15 * w;\n  const {\n    cssStyles\n  } = node;\n  const minWidth = bbox.width + 20;\n  const minHeight = bbox.height + 20;\n  const effectiveWidth = Math.max(w, minWidth);\n  const effectiveHeight = Math.max(h, minHeight);\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2, \", \").concat(-bbox.height / 2, \")\"));\n  let bangElem;\n  const path = \"M0 0 \\n    a\".concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.25, \",\").concat(-1 * effectiveHeight * 0.1, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.25, \",\", 0, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.25, \",\", 0, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.25, \",\").concat(effectiveHeight * 0.1, \"\\n\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.15, \",\").concat(effectiveHeight * 0.33, \"\\n    a\").concat(r * 0.8, \",\").concat(r * 0.8, \" 1 0,0 0,\").concat(effectiveHeight * 0.34, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.15, \",\").concat(effectiveHeight * 0.33, \"\\n\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.25, \",\").concat(effectiveHeight * 0.15, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.25, \",0\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.25, \",0\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.25, \",\").concat(-1 * effectiveHeight * 0.15, \"\\n\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(-1 * effectiveWidth * 0.1, \",\").concat(-1 * effectiveHeight * 0.33, \"\\n    a\").concat(r * 0.8, \",\").concat(r * 0.8, \" 1 0,0 0,\").concat(-1 * effectiveHeight * 0.34, \"\\n    a\").concat(r, \",\").concat(r, \" 1 0,0 \").concat(effectiveWidth * 0.1, \",\").concat(-1 * effectiveHeight * 0.33, \"\\n  H0 V0 Z\");\n  if (node.look === \"handDrawn\") {\n    const rc = rough59.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(path, options);\n    bangElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    bangElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    bangElem = shapeSvg.insert(\"path\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"d\", path);\n  }\n  bangElem.attr(\"transform\", \"translate(\".concat(-effectiveWidth / 2, \", \").concat(-effectiveHeight / 2, \")\"));\n  updateNodeBounds(node, bangElem);\n  node.calcIntersect = function (bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function (point) {\n    log.info(\"Bang intersect\", node, point);\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(bang, \"bang\");\n\n// src/rendering-util/rendering-elements/shapes/cloud.ts\nimport rough60 from \"roughjs\";\nasync function cloud(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + 2 * halfPadding;\n  const h = bbox.height + 2 * halfPadding;\n  const r1 = 0.15 * w;\n  const r2 = 0.25 * w;\n  const r3 = 0.35 * w;\n  const r4 = 0.2 * w;\n  const {\n    cssStyles\n  } = node;\n  let cloudElem;\n  const path = \"M0 0 \\n    a\".concat(r1, \",\").concat(r1, \" 0 0,1 \").concat(w * 0.25, \",\").concat(-1 * w * 0.1, \"\\n    a\").concat(r3, \",\").concat(r3, \" 1 0,1 \").concat(w * 0.4, \",\").concat(-1 * w * 0.1, \"\\n    a\").concat(r2, \",\").concat(r2, \" 1 0,1 \").concat(w * 0.35, \",\").concat(w * 0.2, \"\\n\\n    a\").concat(r1, \",\").concat(r1, \" 1 0,1 \").concat(w * 0.15, \",\").concat(h * 0.35, \"\\n    a\").concat(r4, \",\").concat(r4, \" 1 0,1 \").concat(-1 * w * 0.15, \",\").concat(h * 0.65, \"\\n\\n    a\").concat(r2, \",\").concat(r1, \" 1 0,1 \").concat(-1 * w * 0.25, \",\").concat(w * 0.15, \"\\n    a\").concat(r3, \",\").concat(r3, \" 1 0,1 \").concat(-1 * w * 0.5, \",0\\n    a\").concat(r1, \",\").concat(r1, \" 1 0,1 \").concat(-1 * w * 0.25, \",\").concat(-1 * w * 0.15, \"\\n\\n    a\").concat(r1, \",\").concat(r1, \" 1 0,1 \").concat(-1 * w * 0.1, \",\").concat(-1 * h * 0.35, \"\\n    a\").concat(r4, \",\").concat(r4, \" 1 0,1 \").concat(w * 0.1, \",\").concat(-1 * h * 0.65, \"\\n  H0 V0 Z\");\n  if (node.look === \"handDrawn\") {\n    const rc = rough60.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(path, options);\n    cloudElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    cloudElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    cloudElem = shapeSvg.insert(\"path\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"d\", path);\n  }\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2, \", \").concat(-bbox.height / 2, \")\"));\n  cloudElem.attr(\"transform\", \"translate(\".concat(-w / 2, \", \").concat(-h / 2, \")\"));\n  updateNodeBounds(node, cloudElem);\n  node.calcIntersect = function (bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function (point) {\n    log.info(\"Cloud intersect\", node, point);\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(cloud, \"cloud\");\n\n// src/rendering-util/rendering-elements/shapes/defaultMindmapNode.ts\nasync function defaultMindmapNode(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + 8 * halfPadding;\n  const h = bbox.height + 2 * halfPadding;\n  const rd = 5;\n  const rectPath = \"\\n    M\".concat(-w / 2, \" \").concat(h / 2 - rd, \"\\n    v\").concat(-h + 2 * rd, \"\\n    q0,-\").concat(rd, \" \").concat(rd, \",-\").concat(rd, \"\\n    h\").concat(w - 2 * rd, \"\\n    q\").concat(rd, \",0 \").concat(rd, \",\").concat(rd, \"\\n    v\").concat(h - 2 * rd, \"\\n    q0,\").concat(rd, \" -\").concat(rd, \",\").concat(rd, \"\\n    h\").concat(-w + 2 * rd, \"\\n    q-\").concat(rd, \",0 -\").concat(rd, \",-\").concat(rd, \"\\n    Z\\n  \");\n  const bg = shapeSvg.append(\"path\").attr(\"id\", \"node-\" + node.id).attr(\"class\", \"node-bkg node-\" + node.type).attr(\"style\", nodeStyles).attr(\"d\", rectPath);\n  shapeSvg.append(\"line\").attr(\"class\", \"node-line-\").attr(\"x1\", -w / 2).attr(\"y1\", h / 2).attr(\"x2\", w / 2).attr(\"y2\", h / 2);\n  label.attr(\"transform\", \"translate(\".concat(-bbox.width / 2, \", \").concat(-bbox.height / 2, \")\"));\n  shapeSvg.append(() => label.node());\n  updateNodeBounds(node, bg);\n  node.calcIntersect = function (bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(defaultMindmapNode, \"defaultMindmapNode\");\n\n// src/rendering-util/rendering-elements/shapes/mindmapCircle.ts\nasync function mindmapCircle(parent, node) {\n  var _node$padding71;\n  const options = {\n    padding: (_node$padding71 = node.padding) !== null && _node$padding71 !== void 0 ? _node$padding71 : 0\n  };\n  return circle(parent, node, options);\n}\n__name(mindmapCircle, \"mindmapCircle\");\n\n// src/rendering-util/rendering-elements/shapes.ts\nvar shapesDefs = [{\n  semanticName: \"Process\",\n  name: \"Rectangle\",\n  shortName: \"rect\",\n  description: \"Standard process shape\",\n  aliases: [\"proc\", \"process\", \"rectangle\"],\n  internalAliases: [\"squareRect\"],\n  handler: squareRect2\n}, {\n  semanticName: \"Event\",\n  name: \"Rounded Rectangle\",\n  shortName: \"rounded\",\n  description: \"Represents an event\",\n  aliases: [\"event\"],\n  internalAliases: [\"roundedRect\"],\n  handler: roundedRect\n}, {\n  semanticName: \"Terminal Point\",\n  name: \"Stadium\",\n  shortName: \"stadium\",\n  description: \"Terminal point\",\n  aliases: [\"terminal\", \"pill\"],\n  handler: stadium\n}, {\n  semanticName: \"Subprocess\",\n  name: \"Framed Rectangle\",\n  shortName: \"fr-rect\",\n  description: \"Subprocess\",\n  aliases: [\"subprocess\", \"subproc\", \"framed-rectangle\", \"subroutine\"],\n  handler: subroutine\n}, {\n  semanticName: \"Database\",\n  name: \"Cylinder\",\n  shortName: \"cyl\",\n  description: \"Database storage\",\n  aliases: [\"db\", \"database\", \"cylinder\"],\n  handler: cylinder\n}, {\n  semanticName: \"Start\",\n  name: \"Circle\",\n  shortName: \"circle\",\n  description: \"Starting point\",\n  aliases: [\"circ\"],\n  handler: circle\n}, {\n  semanticName: \"Bang\",\n  name: \"Bang\",\n  shortName: \"bang\",\n  description: \"Bang\",\n  aliases: [\"bang\"],\n  handler: bang\n}, {\n  semanticName: \"Cloud\",\n  name: \"Cloud\",\n  shortName: \"cloud\",\n  description: \"cloud\",\n  aliases: [\"cloud\"],\n  handler: cloud\n}, {\n  semanticName: \"Decision\",\n  name: \"Diamond\",\n  shortName: \"diam\",\n  description: \"Decision-making step\",\n  aliases: [\"decision\", \"diamond\", \"question\"],\n  handler: question\n}, {\n  semanticName: \"Prepare Conditional\",\n  name: \"Hexagon\",\n  shortName: \"hex\",\n  description: \"Preparation or condition step\",\n  aliases: [\"hexagon\", \"prepare\"],\n  handler: hexagon\n}, {\n  semanticName: \"Data Input/Output\",\n  name: \"Lean Right\",\n  shortName: \"lean-r\",\n  description: \"Represents input or output\",\n  aliases: [\"lean-right\", \"in-out\"],\n  internalAliases: [\"lean_right\"],\n  handler: lean_right\n}, {\n  semanticName: \"Data Input/Output\",\n  name: \"Lean Left\",\n  shortName: \"lean-l\",\n  description: \"Represents output or input\",\n  aliases: [\"lean-left\", \"out-in\"],\n  internalAliases: [\"lean_left\"],\n  handler: lean_left\n}, {\n  semanticName: \"Priority Action\",\n  name: \"Trapezoid Base Bottom\",\n  shortName: \"trap-b\",\n  description: \"Priority action\",\n  aliases: [\"priority\", \"trapezoid-bottom\", \"trapezoid\"],\n  handler: trapezoid\n}, {\n  semanticName: \"Manual Operation\",\n  name: \"Trapezoid Base Top\",\n  shortName: \"trap-t\",\n  description: \"Represents a manual task\",\n  aliases: [\"manual\", \"trapezoid-top\", \"inv-trapezoid\"],\n  internalAliases: [\"inv_trapezoid\"],\n  handler: inv_trapezoid\n}, {\n  semanticName: \"Stop\",\n  name: \"Double Circle\",\n  shortName: \"dbl-circ\",\n  description: \"Represents a stop point\",\n  aliases: [\"double-circle\"],\n  internalAliases: [\"doublecircle\"],\n  handler: doublecircle\n}, {\n  semanticName: \"Text Block\",\n  name: \"Text Block\",\n  shortName: \"text\",\n  description: \"Text block\",\n  handler: text\n}, {\n  semanticName: \"Card\",\n  name: \"Notched Rectangle\",\n  shortName: \"notch-rect\",\n  description: \"Represents a card\",\n  aliases: [\"card\", \"notched-rectangle\"],\n  handler: card\n}, {\n  semanticName: \"Lined/Shaded Process\",\n  name: \"Lined Rectangle\",\n  shortName: \"lin-rect\",\n  description: \"Lined process shape\",\n  aliases: [\"lined-rectangle\", \"lined-process\", \"lin-proc\", \"shaded-process\"],\n  handler: shadedProcess\n}, {\n  semanticName: \"Start\",\n  name: \"Small Circle\",\n  shortName: \"sm-circ\",\n  description: \"Small starting point\",\n  aliases: [\"start\", \"small-circle\"],\n  internalAliases: [\"stateStart\"],\n  handler: stateStart\n}, {\n  semanticName: \"Stop\",\n  name: \"Framed Circle\",\n  shortName: \"fr-circ\",\n  description: \"Stop point\",\n  aliases: [\"stop\", \"framed-circle\"],\n  internalAliases: [\"stateEnd\"],\n  handler: stateEnd\n}, {\n  semanticName: \"Fork/Join\",\n  name: \"Filled Rectangle\",\n  shortName: \"fork\",\n  description: \"Fork or join in process flow\",\n  aliases: [\"join\"],\n  internalAliases: [\"forkJoin\"],\n  handler: forkJoin\n}, {\n  semanticName: \"Collate\",\n  name: \"Hourglass\",\n  shortName: \"hourglass\",\n  description: \"Represents a collate operation\",\n  aliases: [\"hourglass\", \"collate\"],\n  handler: hourglass\n}, {\n  semanticName: \"Comment\",\n  name: \"Curly Brace\",\n  shortName: \"brace\",\n  description: \"Adds a comment\",\n  aliases: [\"comment\", \"brace-l\"],\n  handler: curlyBraceLeft\n}, {\n  semanticName: \"Comment Right\",\n  name: \"Curly Brace\",\n  shortName: \"brace-r\",\n  description: \"Adds a comment\",\n  handler: curlyBraceRight\n}, {\n  semanticName: \"Comment with braces on both sides\",\n  name: \"Curly Braces\",\n  shortName: \"braces\",\n  description: \"Adds a comment\",\n  handler: curlyBraces\n}, {\n  semanticName: \"Com Link\",\n  name: \"Lightning Bolt\",\n  shortName: \"bolt\",\n  description: \"Communication link\",\n  aliases: [\"com-link\", \"lightning-bolt\"],\n  handler: lightningBolt\n}, {\n  semanticName: \"Document\",\n  name: \"Document\",\n  shortName: \"doc\",\n  description: \"Represents a document\",\n  aliases: [\"doc\", \"document\"],\n  handler: waveEdgedRectangle\n}, {\n  semanticName: \"Delay\",\n  name: \"Half-Rounded Rectangle\",\n  shortName: \"delay\",\n  description: \"Represents a delay\",\n  aliases: [\"half-rounded-rectangle\"],\n  handler: halfRoundedRectangle\n}, {\n  semanticName: \"Direct Access Storage\",\n  name: \"Horizontal Cylinder\",\n  shortName: \"h-cyl\",\n  description: \"Direct access storage\",\n  aliases: [\"das\", \"horizontal-cylinder\"],\n  handler: tiltedCylinder\n}, {\n  semanticName: \"Disk Storage\",\n  name: \"Lined Cylinder\",\n  shortName: \"lin-cyl\",\n  description: \"Disk storage\",\n  aliases: [\"disk\", \"lined-cylinder\"],\n  handler: linedCylinder\n}, {\n  semanticName: \"Display\",\n  name: \"Curved Trapezoid\",\n  shortName: \"curv-trap\",\n  description: \"Represents a display\",\n  aliases: [\"curved-trapezoid\", \"display\"],\n  handler: curvedTrapezoid\n}, {\n  semanticName: \"Divided Process\",\n  name: \"Divided Rectangle\",\n  shortName: \"div-rect\",\n  description: \"Divided process shape\",\n  aliases: [\"div-proc\", \"divided-rectangle\", \"divided-process\"],\n  handler: dividedRectangle\n}, {\n  semanticName: \"Extract\",\n  name: \"Triangle\",\n  shortName: \"tri\",\n  description: \"Extraction process\",\n  aliases: [\"extract\", \"triangle\"],\n  handler: triangle\n}, {\n  semanticName: \"Internal Storage\",\n  name: \"Window Pane\",\n  shortName: \"win-pane\",\n  description: \"Internal storage\",\n  aliases: [\"internal-storage\", \"window-pane\"],\n  handler: windowPane\n}, {\n  semanticName: \"Junction\",\n  name: \"Filled Circle\",\n  shortName: \"f-circ\",\n  description: \"Junction point\",\n  aliases: [\"junction\", \"filled-circle\"],\n  handler: filledCircle\n}, {\n  semanticName: \"Loop Limit\",\n  name: \"Trapezoidal Pentagon\",\n  shortName: \"notch-pent\",\n  description: \"Loop limit step\",\n  aliases: [\"loop-limit\", \"notched-pentagon\"],\n  handler: trapezoidalPentagon\n}, {\n  semanticName: \"Manual File\",\n  name: \"Flipped Triangle\",\n  shortName: \"flip-tri\",\n  description: \"Manual file operation\",\n  aliases: [\"manual-file\", \"flipped-triangle\"],\n  handler: flippedTriangle\n}, {\n  semanticName: \"Manual Input\",\n  name: \"Sloped Rectangle\",\n  shortName: \"sl-rect\",\n  description: \"Manual input step\",\n  aliases: [\"manual-input\", \"sloped-rectangle\"],\n  handler: slopedRect\n}, {\n  semanticName: \"Multi-Document\",\n  name: \"Stacked Document\",\n  shortName: \"docs\",\n  description: \"Multiple documents\",\n  aliases: [\"documents\", \"st-doc\", \"stacked-document\"],\n  handler: multiWaveEdgedRectangle\n}, {\n  semanticName: \"Multi-Process\",\n  name: \"Stacked Rectangle\",\n  shortName: \"st-rect\",\n  description: \"Multiple processes\",\n  aliases: [\"procs\", \"processes\", \"stacked-rectangle\"],\n  handler: multiRect\n}, {\n  semanticName: \"Stored Data\",\n  name: \"Bow Tie Rectangle\",\n  shortName: \"bow-rect\",\n  description: \"Stored data\",\n  aliases: [\"stored-data\", \"bow-tie-rectangle\"],\n  handler: bowTieRect\n}, {\n  semanticName: \"Summary\",\n  name: \"Crossed Circle\",\n  shortName: \"cross-circ\",\n  description: \"Summary\",\n  aliases: [\"summary\", \"crossed-circle\"],\n  handler: crossedCircle\n}, {\n  semanticName: \"Tagged Document\",\n  name: \"Tagged Document\",\n  shortName: \"tag-doc\",\n  description: \"Tagged document\",\n  aliases: [\"tag-doc\", \"tagged-document\"],\n  handler: taggedWaveEdgedRectangle\n}, {\n  semanticName: \"Tagged Process\",\n  name: \"Tagged Rectangle\",\n  shortName: \"tag-rect\",\n  description: \"Tagged process\",\n  aliases: [\"tagged-rectangle\", \"tag-proc\", \"tagged-process\"],\n  handler: taggedRect\n}, {\n  semanticName: \"Paper Tape\",\n  name: \"Flag\",\n  shortName: \"flag\",\n  description: \"Paper tape\",\n  aliases: [\"paper-tape\"],\n  handler: waveRectangle\n}, {\n  semanticName: \"Odd\",\n  name: \"Odd\",\n  shortName: \"odd\",\n  description: \"Odd shape\",\n  internalAliases: [\"rect_left_inv_arrow\"],\n  handler: rect_left_inv_arrow\n}, {\n  semanticName: \"Lined Document\",\n  name: \"Lined Document\",\n  shortName: \"lin-doc\",\n  description: \"Lined document\",\n  aliases: [\"lined-document\"],\n  handler: linedWaveEdgedRect\n}];\nvar generateShapeMap = /* @__PURE__ */__name(() => {\n  const undocumentedShapes = {\n    // States\n    state,\n    choice,\n    note,\n    // Rectangles\n    rectWithTitle,\n    labelRect,\n    // Icons\n    iconSquare,\n    iconCircle,\n    icon,\n    iconRounded,\n    imageSquare,\n    anchor,\n    // Kanban diagram\n    kanbanItem,\n    //Mindmap diagram\n    mindmapCircle,\n    defaultMindmapNode,\n    // class diagram\n    classBox,\n    // er diagram\n    erBox,\n    // Requirement diagram\n    requirementBox\n  };\n  const entries = [...Object.entries(undocumentedShapes), ...shapesDefs.flatMap(shape => {\n    const aliases = [shape.shortName, ...(\"aliases\" in shape ? shape.aliases : []), ...(\"internalAliases\" in shape ? shape.internalAliases : [])];\n    return aliases.map(alias => [alias, shape.handler]);\n  })];\n  return Object.fromEntries(entries);\n}, \"generateShapeMap\");\nvar shapes2 = generateShapeMap();\nfunction isValidShape(shape) {\n  return shape in shapes2;\n}\n__name(isValidShape, \"isValidShape\");\n\n// src/rendering-util/rendering-elements/nodes.ts\nvar nodeElems = /* @__PURE__ */new Map();\nasync function insertNode(elem, node, renderOptions) {\n  let newEl;\n  let el;\n  if (node.shape === \"rect\") {\n    if (node.rx && node.ry) {\n      node.shape = \"roundedRect\";\n    } else {\n      node.shape = \"squareRect\";\n    }\n  }\n  const shapeHandler = node.shape ? shapes2[node.shape] : void 0;\n  if (!shapeHandler) {\n    throw new Error(\"No such shape: \".concat(node.shape, \". Please check your syntax.\"));\n  }\n  if (node.link) {\n    let target;\n    if (renderOptions.config.securityLevel === \"sandbox\") {\n      target = \"_top\";\n    } else if (node.linkTarget) {\n      target = node.linkTarget || \"_blank\";\n    }\n    newEl = elem.insert(\"svg:a\").attr(\"xlink:href\", node.link).attr(\"target\", target !== null && target !== void 0 ? target : null);\n    el = await shapeHandler(newEl, node, renderOptions);\n  } else {\n    el = await shapeHandler(elem, node, renderOptions);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr(\"title\", node.tooltip);\n  }\n  nodeElems.set(node.id, newEl);\n  if (node.haveCallback) {\n    newEl.attr(\"class\", newEl.attr(\"class\") + \" clickable\");\n  }\n  return newEl;\n}\n__name(insertNode, \"insertNode\");\nvar setNodeElem = /* @__PURE__ */__name((elem, node) => {\n  nodeElems.set(node.id, elem);\n}, \"setNodeElem\");\nvar clear2 = /* @__PURE__ */__name(() => {\n  nodeElems.clear();\n}, \"clear\");\nvar positionNode = /* @__PURE__ */__name(node => {\n  const el = nodeElems.get(node.id);\n  log.trace(\"Transforming node\", node.diff, node, \"translate(\" + (node.x - node.width / 2 - 5) + \", \" + node.width / 2 + \")\");\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\"transform\", \"translate(\" + (node.x + diff - node.width / 2) + \", \" + (node.y - node.height / 2 - padding) + \")\");\n  } else {\n    el.attr(\"transform\", \"translate(\" + node.x + \", \" + node.y + \")\");\n  }\n  return diff;\n}, \"positionNode\");\nexport { labelHelper, updateNodeBounds, createLabel_default, isValidShape, insertCluster, clear, insertNode, setNodeElem, clear2, positionNode };","map":{"version":3,"names":["getSubGraphTitleMargins","compileStyles","solidStateFill","styles2String","userNodeOverrides","createText","getIconSVG","calculateTextWidth","decodeEntities","handleUndefinedAttr","parseFontSize","common_default","defaultConfig_default","evaluate","getConfig","getConfig2","hasKatex","parseGenericTypes","renderKatexSanitized","sanitizeText","sanitizeText2","__name","log","select","labelHelper","parent","node","_classes","_getConfig","_getConfig2$flowchart","_node$padding","cssClasses","useHtmlLabels","htmlLabels","shapeSvg","insert","attr","domId","id","labelEl","labelStyle","label","text2","width","flowchart","wrappingWidth","style","addSvgBackground","icon","img","bbox","getBBox","halfPadding","padding","div","children","dv","images","getElementsByTagName","noImgText","replace","trim","Promise","all","map","res","setupImage","display","flexDirection","bodyFontSize","fontSize","window","getComputedStyle","document","body","enlargingFactor","parsedBodyFontSize","minWidth","maxWidth","setTimeout","complete","addEventListener","getBoundingClientRect","height","centerLabel","insertLabel","options","_getConfig2","_getConfig3","_getConfig4","updateNodeBounds","element","getNodeClasses","extra","look","createPathFromPoints","points","pointStrings","p","i","concat","x","y","push","join","generateFullSineWavePoints","x1","y1","x2","y2","amplitude","numCycles","steps","deltaX","deltaY","cycleLength","frequency","Math","PI","midY","t","sin","generateCirclePoints","centerX","centerY","radius","numPoints","startAngle","endAngle","startAngleRad","endAngleRad","angleRange","angleStep","angle","cos","select3","rough","intersectRect","point","dx","dy","w","h","sx","sy","abs","intersect_rect_default","select2","applyStyle","dom","styleFn","addHtmlLabel","fo","createElementNS","append","config","lineBreakRegex","labelClass","isNode","labelSpan","html","createLabel","_vertexText","isTitle","vertexText","info","s","vertexNode","svgLabel","setAttribute","rows","split","Array","isArray","row","tspan","setAttributeNS","textContent","appendChild","createLabel_default","createRoundedRectPathD","totalWidth","totalHeight","rect","siteConfig","themeVariables","handDrawnSeed","clusterBkg","clusterBorder","labelStyles","nodeStyles","borderStyles","backgroundStyles","diff","trace","JSON","stringify","rect2","rc","svg","roughness","fill","stroke","fillWeight","seed","roughNode","path","debug","rx","ry","subGraphTitleTopMargin","span","rectBox","offsetX","offsetY","intersect","cluster","labelBBox","noteGroup","roundedWithTitle","altBackground","compositeBackground","compositeTitleBackground","nodeBorder","outerRectG","innerRect","innerHeight","innerY","isAlt","includes","roughOuterNode","fillStyle","rectangle","roughInnerNode","outerRectClass","kanbanSection","divider","strokeLineDash","squareRect","shapes","clusterElems","Map","insertCluster","elem","shape","set","clear","intersectNode","intersect_node_default","intersectEllipse","cx","cy","px","py","det","sqrt","intersect_ellipse_default","intersectCircle","intersect_circle_default","intersectLine","p1","p2","q1","q2","a1","b1","c1","r3","r4","epsilon","sameSign","a2","b2","c2","r1","r2","denom","offset","num","intersect_line_default","intersectPolygon","polyPoints","intersections","minX","Number","POSITIVE_INFINITY","minY","forEach","entry","min","left","top","length","sort","q","pdx","pdy","distp","qdx","qdy","distq","intersect_polygon_default","intersect_default","circle","ellipse","polygon","rough2","anchor","classes","cssStyles","circleElem","rough3","generateArcPoints","clockwise","midX","atan2","transformedX","transformedY","distance","Error","scaledCenterDistance","angle2","bowTieRect","bowTieRectPath","bowTieRectShapePath","bowTieRectShape","selectAll","pos","rough4","insertPolygonShape","d","card","right","bottom","pathData","rough5","choice","_node$domId","_node$width","max","choicePath","choiceShape","rough6","_options$padding","options2","calcIntersect","bounds","radius2","rough7","createLine","r","xAxis45","yAxis45","lineLength","pointQ1","pointQ2","pointQ3","pointQ4","crossedCircle","_node$domId2","_node$width2","circleNode","linePath","lineNode","crossedCircle2","rough8","generateCirclePoints2","arguments","undefined","curlyBraceLeft","_node$padding2","_node$padding3","_bbox$left","_node$padding4","_bbox$top","rectPoints","curlyBraceLeftPath","newCurlyBracePath","curlyBraceLeftNode","rectPath","rectShape","_objectSpread","curlyBraceLeftShape","rough9","generateCirclePoints3","curlyBraceRight","_node$padding5","_node$padding6","_node$padding7","_bbox$left2","_node$padding8","_bbox$top2","curlyBraceRightPath","curlyBraceRightNode","curlyBraceRightShape","rough10","generateCirclePoints4","curlyBraces","_node$padding9","_node$padding0","_node$padding1","_bbox$left3","_node$padding10","_bbox$top3","leftCurlyBracePoints","rightCurlyBracePoints","leftCurlyBracePath","newLeftCurlyBracePath","leftCurlyBraceNode","rightCurlyBracePath","newRightCurlyBracePath","rightCurlyBraceNode","curlyBracesShape","rough11","curvedTrapezoid","_node$padding11","_node$width3","_node$padding12","_node$height","minHeight","rw","tw","shapeNode","selectChildren","rough12","createCylinderPathD","createOuterCylinderPathD","createInnerCylinderPathD","cylinder","_node$width4","_node$height2","_bbox$left4","_node$padding13","_bbox$top4","cylinder2","outerPathData","innerPathData","outerNode","innerLine","_node$x","_node$width5","_node$width6","_node$y","_node$height3","_node$y2","rough13","dividedRectangle","_node$padding14","_bbox$left5","_node$padding15","_bbox$top5","rectOffset","pts","poly","rough14","doublecircle","gap","outerRadius","innerRadius","circleGroup","_circleGroup$node","_circleGroup$node2","outerOptions","strokeWidth","innerOptions","outerRoughNode","innerRoughNode","outerCircle","innerCircle","rough15","filledCircle","_ref","_node$domId3","filledCircle2","rough16","flippedTriangle","_node$padding16","_bbox$left6","_node$padding17","_bbox$top6","flippedTriangle2","rough17","forkJoin","_ref2","_node$domId4","_node$width7","_node$height4","_state2$padding","dir","state","state2","_node$width8","_node$height5","lineColor","rough18","halfRoundedRectangle","_node$padding18","_node$width9","_node$padding19","_node$height6","rough19","hexagon","_node$padding20","_node$padding21","halfWidth","m","halfHeight","fixedLength","deducedWidth","rough20","hourglass","_node$width0","_node$height7","rough21","_ref3","_node$assetHeight","_node$assetWidth","_bbox$left7","assetHeight","assetWidth","iconSize","defaultWidth","topLabel","stylesMap","labelPadding","iconNode","outerWidth","outerHeight","iconShape","outerShape","_stylesMap$get","iconElem","fallbackPrefix","iconBBox","iconWidth","iconHeight","iconX","iconY","get","_node$x2","_node$y3","_node$height8","nodeHeight","rough22","iconCircle","_ref4","_node$assetHeight2","_node$assetWidth2","_stylesMap$get2","_bbox$left8","mainBkg","diameter","SQRT2","rough23","iconRounded","_ref5","_node$assetHeight3","_node$assetWidth3","_bbox$left9","_stylesMap$get3","_node$x3","_node$y4","_node$height9","rough24","iconSquare","_ref6","_node$assetHeight4","_node$assetWidth4","_bbox$left0","_stylesMap$get4","_node$x4","_node$y5","_node$height0","rough25","imageSquare","_ref7","_node$img","_node$assetWidth5","_node$assetHeight5","_bbox$left1","Image","src","decode","imageNaturalWidth","naturalWidth","toString","imageNaturalHeight","naturalHeight","imageAspectRatio","imageRawWidth","imageWidth","constraint","imageHeight","imageNode","image","_node$x5","_node$y6","_node$height1","rough26","inv_trapezoid","_node$padding22","_node$width1","_node$padding23","_node$height10","rough27","drawRect","labelPaddingX","labelPaddingY","labelRect","_bbox$left10","_bbox$top7","rough28","lean_left","_node$padding24","_node$width10","_node$padding25","_node$height11","rough29","lean_right","_node$padding26","_node$width11","_node$padding27","_node$height12","rough30","lightningBolt","_node$domId5","_node$width12","_node$height13","lightningBolt2","rough31","createCylinderPathD2","outerOffset","createOuterCylinderPathD2","createInnerCylinderPathD2","linedCylinder","_node$padding28","_node$width13","_node$padding29","_node$height14","_bbox$left11","_bbox$top8","innerLineEl","_node$x6","_node$width14","_node$width15","_node$y7","_node$height15","_node$y8","rough32","linedWaveEdgedRect","_node$padding30","_node$width16","_node$padding31","_node$height16","_node$padding32","_bbox$left12","_node$padding33","_bbox$top9","waveAmplitude","finalH","waveEdgeRect","rough33","multiRect","_node$padding34","_node$width17","_node$padding35","_node$height17","_bbox$left13","_bbox$top0","outerPathPoints","innerPathPoints","outerPath","innerPath","innerNode","multiRect2","rough34","multiWaveEdgedRectangle","_node$padding36","_node$width18","_node$padding37","_node$height18","_bbox$left14","_bbox$top1","wavePoints","lastWavePoint","rough35","note","_ref8","_getConfig$flowchart","_node$padding38","_node$width19","_node$padding39","_node$height19","_bbox$left15","_bbox$top10","noteBkgColor","noteBorderColor","noteShapeNode","rough36","createDecisionBoxPathD","size","question","adjustment","s2","points2","rough37","rect_left_inv_arrow","_node$padding40","_node$width20","_node$padding41","_node$height20","_bbox$left16","_bbox$top11","notch","select4","rough38","rectWithTitle","_getConfig5","g","description","title","div2","dv2","textRows","titleBox","descr","roughLine","line","rough39","generateArcPoints2","roundedRect","_node$padding42","_node$padding43","taper","rough40","shadedProcess","_node$padding44","_node$padding45","_node$width21","_node$padding46","_node$height21","_node$padding47","_bbox$left17","_node$padding48","_bbox$top12","rough41","slopedRect","_node$padding49","_node$width22","_node$padding50","_node$height22","_node$padding51","_bbox$left18","_node$padding52","_bbox$top13","squareRect2","_node$labelPaddingX","rough42","stadium","rough43","stateEnd","_ref9","stateBorder","innerFill","circle2","rough44","stateStart","_ref0","rough45","subroutine","l1","l2","el","rough46","taggedRect","_node$padding53","_node$width23","_node$padding54","_node$height23","tagWidth","tagHeight","tagPoints","rectNode","tagPath","tagNode","taggedRect2","rough47","taggedWaveEdgedRectangle","_node$padding55","_node$width24","_node$padding56","_node$height24","_node$padding57","_bbox$left19","_node$padding58","_bbox$top14","waveEdgeRectPath","waveEdgeRectNode","taggedWaveEdgeRectPath","taggedWaveEdgeRectNode","text","rough48","createCylinderPathD3","createOuterCylinderPathD3","createInnerCylinderPathD3","tiltedCylinder","_bbox$left20","_bbox$top15","_node$y9","_node$height25","_node$height26","_node$x7","_node$width25","_node$x8","rough49","trapezoid","rough50","trapezoidalPentagon","_node$padding59","_node$width26","_node$padding60","_node$height27","rough51","triangle","_getConfig2$flowchart2","_node$padding61","_bbox$left21","_node$padding62","_bbox$top16","rough52","waveEdgedRectangle","_node$padding63","_node$width27","_node$padding64","_node$height28","_node$padding65","_bbox$left22","_node$padding66","_bbox$top17","widthDif","extraW","rough53","waveRectangle","_node$padding67","_node$width28","_node$padding68","_node$height29","baseWidth","baseHeight","aspectRatio","waveRectPath","waveRectNode","waveRect","rough54","windowPane","_node$padding69","_node$width29","_node$padding70","_node$height30","_bbox$left23","_bbox$top18","no","windowPane2","rough55","select5","erBox","_config$er$diagramPad","_config$er","_config$er$entityPadd","_config$er2","_node$label","entityNode","alias","themeVariables2","background","backgroundNode","PADDING","er","diagramPadding","TEXT_PADDING","entityPadding","attributes","minEntityWidth","shapeSvg2","_textElement$node","textElement","nameBBox","addText","yOffset","yOffsets","maxTypeWidth","maxNameWidth","maxKeysWidth","maxCommentWidth","keysPresent","commentPresent","attribute","typeBBox","type","nameBBox2","name","keysBBox","keys","commentBBox","comment","rowHeight","totalWidthSections","shapeBBox","difference","totalShapeBBoxHeight","reduce","sum","_row$rowHeight","each","_","nodes","transform","translateX","translateY","regex","RegExp","translate","exec","parseFloat","roughRect","rowEven","rowOdd","entries","contentRowIndex","isEven","roughRect2","yOffset2","_allStyle$filter","allStyle","strokeStyles","filter","e","labelText","replaceAll","child","childNodes","textAlign","select7","rough56","select6","textHelper","_config$class$padding","GAP","class","annotationGroup","labelGroup","membersGroup","methodsGroup","annotationGroupHeight","labelGroupHeight","membersGroupHeight","annotations","annotation","addText2","annotationGroupBBox","labelGroupBBox","member","members","parseClassifier","methodsYOffset","method","methods","parentGroup","_evaluate","styles","textEl","startsWith","substring","numberOfLines","textChild","preserveSpace","innerHTML","_config$fontSize$toSt","_config$fontSize","parseInt","classBox","_config$class$padding2","_ref1","_node$useHtmlLabels","_classNode$annotation","_classNode$members","_classNode$methods","_classNode$styles","_config$class","classNode","renderExtraBox","hideEmptyMembersBox","rectBBox","newTranslateY","newTranslateX","_text2$node","_2","i2","nodes2","textAnchor","colorRegex","match","colorStyle","match2","rough57","select8","requirementBox","_node$domId6","_shapeSvg$node$getBBo","_shapeSvg$node","_shapeSvg$node$getBBo2","_shapeSvg$node2","requirementNode","elementNode","isRequirementNode","typeHeight","addText3","accumulativeHeight","nameHeight","idHeight","requirementId","textHeight","riskHeight","risk","verifyMethod","typeHeight2","docRef","dividerLine","inputText","_config$htmlLabels","rough58","colorFromPriority","priority","kanbanItem","kanbanNode","_ref10","_kanbanNode$width","_config$kanban","orgWidth","labelElTitle","ticketUrl","link","ticket","kanban","ticketBaseUrl","_config$kanban2","bbox2","labelElAssigned","bboxAssigned","assigned","heightAdj","lineX","floor","rough59","bang","effectiveWidth","effectiveHeight","bangElem","rough60","cloud","cloudElem","defaultMindmapNode","rd","bg","mindmapCircle","_node$padding71","shapesDefs","semanticName","shortName","aliases","internalAliases","handler","generateShapeMap","undocumentedShapes","Object","flatMap","fromEntries","shapes2","isValidShape","nodeElems","insertNode","renderOptions","newEl","shapeHandler","target","securityLevel","linkTarget","tooltip","haveCallback","setNodeElem","clear2","positionNode","clusterNode"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/mermaid/dist/chunks/mermaid.core/chunk-JZLCHNYA.mjs"],"sourcesContent":["import {\n  getSubGraphTitleMargins\n} from \"./chunk-CVBHYZKI.mjs\";\nimport {\n  compileStyles,\n  solidStateFill,\n  styles2String,\n  userNodeOverrides\n} from \"./chunk-ATLVNIR6.mjs\";\nimport {\n  createText,\n  getIconSVG\n} from \"./chunk-JA3XYJ7Z.mjs\";\nimport {\n  calculateTextWidth,\n  decodeEntities,\n  handleUndefinedAttr,\n  parseFontSize\n} from \"./chunk-S3R3BYOJ.mjs\";\nimport {\n  common_default,\n  defaultConfig_default,\n  evaluate,\n  getConfig,\n  getConfig2,\n  hasKatex,\n  parseGenericTypes,\n  renderKatexSanitized,\n  sanitizeText,\n  sanitizeText2\n} from \"./chunk-ABZYJK2D.mjs\";\nimport {\n  __name,\n  log\n} from \"./chunk-AGHRB4JF.mjs\";\n\n// src/rendering-util/rendering-elements/shapes/util.ts\nimport { select } from \"d3\";\nvar labelHelper = /* @__PURE__ */ __name(async (parent, node, _classes) => {\n  let cssClasses;\n  const useHtmlLabels = node.useHtmlLabels || evaluate(getConfig2()?.htmlLabels);\n  if (!_classes) {\n    cssClasses = \"node default\";\n  } else {\n    cssClasses = _classes;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", handleUndefinedAttr(node.labelStyle));\n  let label;\n  if (node.label === void 0) {\n    label = \"\";\n  } else {\n    label = typeof node.label === \"string\" ? node.label : node.label[0];\n  }\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: node.width || getConfig2().flowchart?.wrappingWidth,\n    // @ts-expect-error -- This is currently not used. Should this be `classes` instead?\n    cssClasses: \"markdown-node-label\",\n    style: node.labelStyle,\n    addSvgBackground: !!node.icon || !!node.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = (node?.padding ?? 0) / 2;\n  if (useHtmlLabels) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = label.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all(\n        [...images].map(\n          (img) => new Promise((res) => {\n            function setupImage() {\n              img.style.display = \"flex\";\n              img.style.flexDirection = \"column\";\n              if (noImgText) {\n                const bodyFontSize = getConfig2().fontSize ? getConfig2().fontSize : window.getComputedStyle(document.body).fontSize;\n                const enlargingFactor = 5;\n                const [parsedBodyFontSize = defaultConfig_default.fontSize] = parseFontSize(bodyFontSize);\n                const width = parsedBodyFontSize * enlargingFactor + \"px\";\n                img.style.minWidth = width;\n                img.style.maxWidth = width;\n              } else {\n                img.style.width = \"100%\";\n              }\n              res(img);\n            }\n            __name(setupImage, \"setupImage\");\n            setTimeout(() => {\n              if (img.complete) {\n                setupImage();\n              }\n            });\n            img.addEventListener(\"error\", setupImage);\n            img.addEventListener(\"load\", setupImage);\n          })\n        )\n      );\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (node.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return { shapeSvg, bbox, halfPadding, label: labelEl };\n}, \"labelHelper\");\nvar insertLabel = /* @__PURE__ */ __name(async (parent, label, options) => {\n  const useHtmlLabels = options.useHtmlLabels || evaluate(getConfig2()?.flowchart?.htmlLabels);\n  const labelEl = parent.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", options.labelStyle || \"\");\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: options.width || getConfig2()?.flowchart?.wrappingWidth,\n    style: options.labelStyle,\n    addSvgBackground: !!options.icon || !!options.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = options.padding / 2;\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (options.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return { shapeSvg: parent, bbox, halfPadding, label: labelEl };\n}, \"insertLabel\");\nvar updateNodeBounds = /* @__PURE__ */ __name((node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n}, \"updateNodeBounds\");\nvar getNodeClasses = /* @__PURE__ */ __name((node, extra) => (node.look === \"handDrawn\" ? \"rough-node\" : \"node\") + \" \" + node.cssClasses + \" \" + (extra || \"\"), \"getNodeClasses\");\nfunction createPathFromPoints(points) {\n  const pointStrings = points.map((p, i) => `${i === 0 ? \"M\" : \"L\"}${p.x},${p.y}`);\n  pointStrings.push(\"Z\");\n  return pointStrings.join(\" \");\n}\n__name(createPathFromPoints, \"createPathFromPoints\");\nfunction generateFullSineWavePoints(x1, y1, x2, y2, amplitude, numCycles) {\n  const points = [];\n  const steps = 50;\n  const deltaX = x2 - x1;\n  const deltaY = y2 - y1;\n  const cycleLength = deltaX / numCycles;\n  const frequency = 2 * Math.PI / cycleLength;\n  const midY = y1 + deltaY / 2;\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    const x = x1 + t * deltaX;\n    const y = midY + amplitude * Math.sin(frequency * (x - x1));\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateFullSineWavePoints, \"generateFullSineWavePoints\");\nfunction generateCirclePoints(centerX, centerY, radius, numPoints, startAngle, endAngle) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints, \"generateCirclePoints\");\n\n// src/rendering-util/rendering-elements/clusters.js\nimport { select as select3 } from \"d3\";\nimport rough from \"roughjs\";\n\n// src/rendering-util/rendering-elements/intersect/intersect-rect.js\nvar intersectRect = /* @__PURE__ */ __name((node, point) => {\n  var x = node.x;\n  var y = node.y;\n  var dx = point.x - x;\n  var dy = point.y - y;\n  var w = node.width / 2;\n  var h = node.height / 2;\n  var sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = dy === 0 ? 0 : h * dx / dy;\n    sy = h;\n  } else {\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = dx === 0 ? 0 : w * dy / dx;\n  }\n  return { x: x + sx, y: y + sy };\n}, \"intersectRect\");\nvar intersect_rect_default = intersectRect;\n\n// src/rendering-util/rendering-elements/createLabel.js\nimport { select as select2 } from \"d3\";\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr(\"style\", styleFn);\n  }\n}\n__name(applyStyle, \"applyStyle\");\nasync function addHtmlLabel(node) {\n  const fo = select2(document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\"));\n  const div = fo.append(\"xhtml:div\");\n  const config = getConfig2();\n  let label = node.label;\n  if (node.label && hasKatex(node.label)) {\n    label = await renderKatexSanitized(node.label.replace(common_default.lineBreakRegex, \"\\n\"), config);\n  }\n  const labelClass = node.isNode ? \"nodeLabel\" : \"edgeLabel\";\n  const labelSpan = '<span class=\"' + labelClass + '\" ' + (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : \"\") + // codeql [js/html-constructed-from-input] : false positive\n  \">\" + label + \"</span>\";\n  div.html(sanitizeText(labelSpan, config));\n  applyStyle(div, node.labelStyle);\n  div.style(\"display\", \"inline-block\");\n  div.style(\"padding-right\", \"1px\");\n  div.style(\"white-space\", \"nowrap\");\n  div.attr(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  return fo.node();\n}\n__name(addHtmlLabel, \"addHtmlLabel\");\nvar createLabel = /* @__PURE__ */ __name(async (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || \"\";\n  if (typeof vertexText === \"object\") {\n    vertexText = vertexText[0];\n  }\n  if (evaluate(getConfig2().flowchart.htmlLabels)) {\n    vertexText = vertexText.replace(/\\\\n|\\n/g, \"<br />\");\n    log.info(\"vertexText\" + vertexText);\n    const node = {\n      isNode,\n      label: decodeEntities(vertexText).replace(\n        /fa[blrs]?:fa-[\\w-]+/g,\n        (s) => `<i class='${s.replace(\":\", \" \")}'></i>`\n      ),\n      labelStyle: style ? style.replace(\"fill:\", \"color:\") : style\n    };\n    let vertexNode = await addHtmlLabel(node);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    svgLabel.setAttribute(\"style\", style.replace(\"color:\", \"fill:\"));\n    let rows = [];\n    if (typeof vertexText === \"string\") {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n    for (const row of rows) {\n      const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n      tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n      tspan.setAttribute(\"dy\", \"1em\");\n      tspan.setAttribute(\"x\", \"0\");\n      if (isTitle) {\n        tspan.setAttribute(\"class\", \"title-row\");\n      } else {\n        tspan.setAttribute(\"class\", \"row\");\n      }\n      tspan.textContent = row.trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n}, \"createLabel\");\nvar createLabel_default = createLabel;\n\n// src/rendering-util/rendering-elements/shapes/roundedRectPath.ts\nvar createRoundedRectPathD = /* @__PURE__ */ __name((x, y, totalWidth, totalHeight, radius) => [\n  \"M\",\n  x + radius,\n  y,\n  // Move to the first point\n  \"H\",\n  x + totalWidth - radius,\n  // Draw horizontal line to the beginning of the right corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + totalWidth,\n  y + radius,\n  // Draw arc to the right top corner\n  \"V\",\n  y + totalHeight - radius,\n  // Draw vertical line down to the beginning of the right bottom corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + totalWidth - radius,\n  y + totalHeight,\n  // Draw arc to the right bottom corner\n  \"H\",\n  x + radius,\n  // Draw horizontal line to the beginning of the left bottom corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x,\n  y + totalHeight - radius,\n  // Draw arc to the left bottom corner\n  \"V\",\n  y + radius,\n  // Draw vertical line up to the beginning of the left top corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + radius,\n  y,\n  // Draw arc to the left top corner\n  \"Z\"\n  // Close the path\n].join(\" \"), \"createRoundedRectPathD\");\n\n// src/rendering-util/rendering-elements/clusters.js\nvar rect = /* @__PURE__ */ __name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { clusterBkg, clusterBorder } = themeVariables;\n  const { labelStyles, nodeStyles, borderStyles, backgroundStyles } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 3,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, 0), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\n    \"transform\",\n    // This puts the label on top of the box instead of inside it\n    `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n  );\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"rect\");\nvar noteGroup = /* @__PURE__ */ __name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"note-cluster\").attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding).attr(\"fill\", \"none\");\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: { width: 0, height: 0 } };\n}, \"noteGroup\");\nvar roundedWithTitle = /* @__PURE__ */ __name(async (parent, node) => {\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { altBackground, compositeBackground, compositeTitleBackground, nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  let innerRect = shapeSvg.append(\"rect\");\n  const text2 = label.node().appendChild(await createLabel_default(node.label, node.labelStyle, void 0, true));\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = (node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width) + padding;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height + padding;\n  const innerHeight = node.height + padding - bbox.height - 6;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  const innerY = node.y - node.height / 2 - halfPadding + bbox.height + 2;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const isAlt = node.cssClasses.includes(\"statediagram-cluster-alt\");\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = node.rx || node.ry ? rc.path(createRoundedRectPathD(x, y, width, height, 10), {\n      roughness: 0.7,\n      fill: compositeTitleBackground,\n      fillStyle: \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    }) : rc.rectangle(x, y, width, height, { seed: handDrawnSeed });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    const roughInnerNode = rc.rectangle(x, innerY, width, innerHeight, {\n      fill: isAlt ? altBackground : compositeBackground,\n      fillStyle: isAlt ? \"hachure\" : \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    innerRect = shapeSvg.insert(() => roughInnerNode);\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"outer\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n    innerRect.attr(\"class\", \"inner\").attr(\"x\", x).attr(\"y\", innerY).attr(\"width\", width).attr(\"height\", innerHeight);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${node.x - bbox.width / 2}, ${y + 1 - (evaluate(siteConfig.flowchart.htmlLabels) ? 0 : 3)})`\n  );\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.labelBBox = bbox;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"roundedWithTitle\");\nvar kanbanSection = /* @__PURE__ */ __name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { clusterBkg, clusterBorder } = themeVariables;\n  const { labelStyles, nodeStyles, borderStyles, backgroundStyles } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true,\n    width: node.width\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 4,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, node.rx), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\n    \"transform\",\n    // This puts the label on top of the box instead of inside it\n    `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n  );\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"kanbanSection\");\nvar divider = /* @__PURE__ */ __name((parent, node) => {\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const padding = 0 * node.padding;\n  const width = node.width + padding;\n  node.diff = -node.padding;\n  const height = node.height + padding;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = rc.rectangle(x, y, width, height, {\n      fill: \"lightgrey\",\n      roughness: 0.5,\n      strokeLineDash: [5],\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"divider\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n  }\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = 0;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: {} };\n}, \"divider\");\nvar squareRect = rect;\nvar shapes = {\n  rect,\n  squareRect,\n  roundedWithTitle,\n  noteGroup,\n  divider,\n  kanbanSection\n};\nvar clusterElems = /* @__PURE__ */ new Map();\nvar insertCluster = /* @__PURE__ */ __name(async (elem, node) => {\n  const shape = node.shape || \"rect\";\n  const cluster = await shapes[shape](elem, node);\n  clusterElems.set(node.id, cluster);\n  return cluster;\n}, \"insertCluster\");\nvar clear = /* @__PURE__ */ __name(() => {\n  clusterElems = /* @__PURE__ */ new Map();\n}, \"clear\");\n\n// src/rendering-util/rendering-elements/intersect/intersect-node.js\nfunction intersectNode(node, point) {\n  return node.intersect(point);\n}\n__name(intersectNode, \"intersectNode\");\nvar intersect_node_default = intersectNode;\n\n// src/rendering-util/rendering-elements/intersect/intersect-ellipse.js\nfunction intersectEllipse(node, rx, ry, point) {\n  var cx = node.x;\n  var cy = node.y;\n  var px = cx - point.x;\n  var py = cy - point.y;\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n  var dx = Math.abs(rx * ry * px / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs(rx * ry * py / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n  return { x: cx + dx, y: cy + dy };\n}\n__name(intersectEllipse, \"intersectEllipse\");\nvar intersect_ellipse_default = intersectEllipse;\n\n// src/rendering-util/rendering-elements/intersect/intersect-circle.js\nfunction intersectCircle(node, rx, point) {\n  return intersect_ellipse_default(node, rx, rx, point);\n}\n__name(intersectCircle, \"intersectCircle\");\nvar intersect_circle_default = intersectCircle;\n\n// src/rendering-util/rendering-elements/intersect/intersect-line.js\nfunction intersectLine(p1, p2, q1, q2) {\n  {\n    const a1 = p2.y - p1.y;\n    const b1 = p1.x - p2.x;\n    const c1 = p2.x * p1.y - p1.x * p2.y;\n    const r3 = a1 * q1.x + b1 * q1.y + c1;\n    const r4 = a1 * q2.x + b1 * q2.y + c1;\n    const epsilon = 1e-6;\n    if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n      return;\n    }\n    const a2 = q2.y - q1.y;\n    const b2 = q1.x - q2.x;\n    const c2 = q2.x * q1.y - q1.x * q2.y;\n    const r1 = a2 * p1.x + b2 * p1.y + c2;\n    const r2 = a2 * p2.x + b2 * p2.y + c2;\n    if (Math.abs(r1) < epsilon && Math.abs(r2) < epsilon && sameSign(r1, r2)) {\n      return;\n    }\n    const denom = a1 * b2 - a2 * b1;\n    if (denom === 0) {\n      return;\n    }\n    const offset = Math.abs(denom / 2);\n    let num = b1 * c2 - b2 * c1;\n    const x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n    num = a2 * c1 - a1 * c2;\n    const y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n    return { x, y };\n  }\n}\n__name(intersectLine, \"intersectLine\");\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n__name(sameSign, \"sameSign\");\nvar intersect_line_default = intersectLine;\n\n// src/rendering-util/rendering-elements/intersect/intersect-polygon.js\nfunction intersectPolygon(node, polyPoints, point) {\n  let x1 = node.x;\n  let y1 = node.y;\n  let intersections = [];\n  let minX = Number.POSITIVE_INFINITY;\n  let minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === \"function\") {\n    polyPoints.forEach(function(entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n  let left = x1 - node.width / 2 - minX;\n  let top = y1 - node.height / 2 - minY;\n  for (let i = 0; i < polyPoints.length; i++) {\n    let p1 = polyPoints[i];\n    let p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    let intersect = intersect_line_default(\n      node,\n      point,\n      { x: left + p1.x, y: top + p1.y },\n      { x: left + p2.x, y: top + p2.y }\n    );\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n  if (!intersections.length) {\n    return node;\n  }\n  if (intersections.length > 1) {\n    intersections.sort(function(p, q) {\n      let pdx = p.x - point.x;\n      let pdy = p.y - point.y;\n      let distp = Math.sqrt(pdx * pdx + pdy * pdy);\n      let qdx = q.x - point.x;\n      let qdy = q.y - point.y;\n      let distq = Math.sqrt(qdx * qdx + qdy * qdy);\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n__name(intersectPolygon, \"intersectPolygon\");\nvar intersect_polygon_default = intersectPolygon;\n\n// src/rendering-util/rendering-elements/intersect/index.js\nvar intersect_default = {\n  node: intersect_node_default,\n  circle: intersect_circle_default,\n  ellipse: intersect_ellipse_default,\n  polygon: intersect_polygon_default,\n  rect: intersect_rect_default\n};\n\n// src/rendering-util/rendering-elements/shapes/anchor.ts\nimport rough2 from \"roughjs\";\nfunction anchor(parent, node) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const classes = getNodeClasses(node);\n  let cssClasses = classes;\n  if (!classes) {\n    cssClasses = \"anchor\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const radius = 1;\n  const { cssStyles } = node;\n  const rc = rough2.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"black\", stroke: \"none\", fillStyle: \"solid\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const roughNode = rc.circle(0, 0, radius * 2, options);\n  const circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n  circleElem.attr(\"class\", \"anchor\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  updateNodeBounds(node, circleElem);\n  node.intersect = function(point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(anchor, \"anchor\");\n\n// src/rendering-util/rendering-elements/shapes/bowTieRect.ts\nimport rough3 from \"roughjs\";\nfunction generateArcPoints(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateArcPoints, \"generateArcPoints\");\nasync function bowTieRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding + 20;\n  const h = bbox.height + node.padding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const { cssStyles } = node;\n  const points = [\n    { x: w / 2, y: -h / 2 },\n    { x: -w / 2, y: -h / 2 },\n    ...generateArcPoints(-w / 2, -h / 2, -w / 2, h / 2, rx, ry, false),\n    { x: w / 2, y: h / 2 },\n    ...generateArcPoints(w / 2, h / 2, w / 2, -h / 2, rx, ry, true)\n  ];\n  const rc = rough3.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const bowTieRectPath = createPathFromPoints(points);\n  const bowTieRectShapePath = rc.path(bowTieRectPath, options);\n  const bowTieRectShape = shapeSvg.insert(() => bowTieRectShapePath, \":first-child\");\n  bowTieRectShape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  bowTieRectShape.attr(\"transform\", `translate(${rx / 2}, 0)`);\n  updateNodeBounds(node, bowTieRectShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(bowTieRect, \"bowTieRect\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nimport rough4 from \"roughjs\";\n\n// src/rendering-util/rendering-elements/shapes/insertPolygonShape.ts\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent.insert(\"polygon\", \":first-child\").attr(\n    \"points\",\n    points.map(function(d) {\n      return d.x + \",\" + d.y;\n    }).join(\" \")\n  ).attr(\"class\", \"label-container\").attr(\"transform\", \"translate(\" + -w / 2 + \",\" + h / 2 + \")\");\n}\n__name(insertPolygonShape, \"insertPolygonShape\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nasync function card(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const padding = 12;\n  const w = bbox.width + node.padding + padding;\n  const left = 0;\n  const right = w;\n  const top = -h;\n  const bottom = 0;\n  const points = [\n    { x: left + padding, y: top },\n    { x: right, y: top },\n    { x: right, y: bottom },\n    { x: left, y: bottom },\n    { x: left, y: top + padding },\n    { x: left + padding, y: top }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough4.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(card, \"card\");\n\n// src/rendering-util/rendering-elements/shapes/choice.ts\nimport rough5 from \"roughjs\";\nfunction choice(parent, node) {\n  const { nodeStyles } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  const s = Math.max(28, node.width ?? 0);\n  const points = [\n    { x: 0, y: s / 2 },\n    { x: s / 2, y: 0 },\n    { x: 0, y: -s / 2 },\n    { x: -s / 2, y: 0 }\n  ];\n  const rc = rough5.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const choicePath = createPathFromPoints(points);\n  const roughNode = rc.path(choicePath, options);\n  const choiceShape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = 28;\n  node.height = 28;\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(choice, \"choice\");\n\n// src/rendering-util/rendering-elements/shapes/circle.ts\nimport rough6 from \"roughjs\";\nasync function circle(parent, node, options) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding } = await labelHelper(parent, node, getNodeClasses(node));\n  const padding = options?.padding ?? halfPadding;\n  const radius = bbox.width / 2 + padding;\n  let circleElem;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough6.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rc.circle(0, 0, radius * 2, options2);\n    circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    circleElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    circleElem = shapeSvg.insert(\"circle\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"r\", radius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleElem);\n  node.calcIntersect = function(bounds, point) {\n    const radius2 = bounds.width / 2;\n    return intersect_default.circle(bounds, radius2, point);\n  };\n  node.intersect = function(point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(circle, \"circle\");\n\n// src/rendering-util/rendering-elements/shapes/crossedCircle.ts\nimport rough7 from \"roughjs\";\nfunction createLine(r) {\n  const xAxis45 = Math.cos(Math.PI / 4);\n  const yAxis45 = Math.sin(Math.PI / 4);\n  const lineLength = r * 2;\n  const pointQ1 = { x: lineLength / 2 * xAxis45, y: lineLength / 2 * yAxis45 };\n  const pointQ2 = { x: -(lineLength / 2) * xAxis45, y: lineLength / 2 * yAxis45 };\n  const pointQ3 = { x: -(lineLength / 2) * xAxis45, y: -(lineLength / 2) * yAxis45 };\n  const pointQ4 = { x: lineLength / 2 * xAxis45, y: -(lineLength / 2) * yAxis45 };\n  return `M ${pointQ2.x},${pointQ2.y} L ${pointQ4.x},${pointQ4.y}\n                   M ${pointQ1.x},${pointQ1.y} L ${pointQ3.x},${pointQ3.y}`;\n}\n__name(createLine, \"createLine\");\nfunction crossedCircle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = Math.max(30, node?.width ?? 0);\n  const { cssStyles } = node;\n  const rc = rough7.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const linePath = createLine(radius);\n  const lineNode = rc.path(linePath, options);\n  const crossedCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  crossedCircle2.insert(() => lineNode);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, crossedCircle2);\n  node.intersect = function(point) {\n    log.info(\"crossedCircle intersect\", node, { radius, point });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(crossedCircle, \"crossedCircle\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceLeft.ts\nimport rough8 from \"roughjs\";\nfunction generateCirclePoints2(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints2, \"generateCirclePoints\");\nasync function curlyBraceLeft(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const points = [\n    ...generateCirclePoints2(w / 2, -h / 2, radius, 30, -90, 0),\n    { x: -w / 2 - radius, y: radius },\n    ...generateCirclePoints2(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints2(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rectPoints = [\n    { x: w / 2, y: -h / 2 - radius },\n    { x: -w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints2(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: -w / 2 - radius, y: -radius },\n    ...generateCirclePoints2(w / 2 + w * 0.1, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints2(w / 2 + w * 0.1, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: h / 2 },\n    ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90),\n    { x: -w / 2, y: h / 2 + radius },\n    { x: w / 2, y: h / 2 + radius }\n  ];\n  const rc = rough8.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceLeftPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceLeftPath.replace(\"Z\", \"\");\n  const curlyBraceLeftNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBraceLeftShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceLeftShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceLeftShape.insert(() => curlyBraceLeftNode, \":first-child\");\n  curlyBraceLeftShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceLeftShape.attr(\"transform\", `translate(${radius}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + radius - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBraceLeftShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceLeft, \"curlyBraceLeft\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceRight.ts\nimport rough9 from \"roughjs\";\nfunction generateCirclePoints3(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateCirclePoints3, \"generateCirclePoints\");\nasync function curlyBraceRight(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const points = [\n    ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: w / 2 + radius, y: -radius },\n    ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: w / 2 + radius, y: h / 2 },\n    ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rectPoints = [\n    { x: -w / 2, y: -h / 2 - radius },\n    { x: w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: w / 2 + radius, y: -radius },\n    ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: w / 2 + radius, y: h / 2 },\n    ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90),\n    { x: w / 2, y: h / 2 + radius },\n    { x: -w / 2, y: h / 2 + radius }\n  ];\n  const rc = rough9.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceRightPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceRightPath.replace(\"Z\", \"\");\n  const curlyBraceRightNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBraceRightShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceRightShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceRightShape.insert(() => curlyBraceRightNode, \":first-child\");\n  curlyBraceRightShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceRightShape.attr(\"transform\", `translate(${-radius}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBraceRightShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceRight, \"curlyBraceRight\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraces.ts\nimport rough10 from \"roughjs\";\nfunction generateCirclePoints4(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints4, \"generateCirclePoints\");\nasync function curlyBraces(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const leftCurlyBracePoints = [\n    ...generateCirclePoints4(w / 2, -h / 2, radius, 30, -90, 0),\n    { x: -w / 2 - radius, y: radius },\n    ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rightCurlyBracePoints = [\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180),\n    { x: w / 2 - radius / 2, y: radius },\n    ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90),\n    ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0),\n    { x: w / 2 - radius / 2, y: -radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)\n  ];\n  const rectPoints = [\n    { x: w / 2, y: -h / 2 - radius },\n    { x: -w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints4(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: -w / 2 - radius, y: -radius },\n    ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: h / 2 },\n    ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90),\n    { x: -w / 2, y: h / 2 + radius },\n    { x: w / 2 - radius - radius / 2, y: h / 2 + radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180),\n    { x: w / 2 - radius / 2, y: radius },\n    ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90),\n    ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0),\n    { x: w / 2 - radius / 2, y: -radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)\n  ];\n  const rc = rough10.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const leftCurlyBracePath = createPathFromPoints(leftCurlyBracePoints);\n  const newLeftCurlyBracePath = leftCurlyBracePath.replace(\"Z\", \"\");\n  const leftCurlyBraceNode = rc.path(newLeftCurlyBracePath, options);\n  const rightCurlyBracePath = createPathFromPoints(rightCurlyBracePoints);\n  const newRightCurlyBracePath = rightCurlyBracePath.replace(\"Z\", \"\");\n  const rightCurlyBraceNode = rc.path(newRightCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBracesShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBracesShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBracesShape.insert(() => leftCurlyBraceNode, \":first-child\");\n  curlyBracesShape.insert(() => rightCurlyBraceNode, \":first-child\");\n  curlyBracesShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBracesShape.attr(\"transform\", `translate(${radius - radius / 4}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBracesShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraces, \"curlyBraces\");\n\n// src/rendering-util/rendering-elements/shapes/curvedTrapezoid.ts\nimport rough11 from \"roughjs\";\nasync function curvedTrapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 80, minHeight = 20;\n  const w = Math.max(minWidth, (bbox.width + (node.padding ?? 0) * 2) * 1.25, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const { cssStyles } = node;\n  const rc = rough11.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const totalWidth = w, totalHeight = h;\n  const rw = totalWidth - radius;\n  const tw = totalHeight / 4;\n  const points = [\n    { x: rw, y: 0 },\n    { x: tw, y: 0 },\n    { x: 0, y: totalHeight / 2 },\n    { x: tw, y: totalHeight },\n    { x: rw, y: totalHeight },\n    ...generateCirclePoints(-rw, -totalHeight / 2, radius, 50, 270, 90)\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curvedTrapezoid, \"curvedTrapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/cylinder.ts\nimport rough12 from \"roughjs\";\nvar createCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`\n  ].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y + ry}`,\n    `M${x + width},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function cylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + node.padding, node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + node.padding, node.height ?? 0);\n  let cylinder2;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough12.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD(0, ry, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, { fill: \"none\" }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + (node.padding ?? 0) / 1.5 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(cylinder, \"cylinder\");\n\n// src/rendering-util/rendering-elements/shapes/dividedRect.ts\nimport rough13 from \"roughjs\";\nasync function dividedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const rectOffset = h * 0.2;\n  const x = -w / 2;\n  const y = -h / 2 - rectOffset / 2;\n  const { cssStyles } = node;\n  const rc = rough13.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pts = [\n    { x, y: y + rectOffset },\n    { x: -x, y: y + rectOffset },\n    { x: -x, y: -y },\n    { x, y: -y },\n    { x, y },\n    { x: -x, y },\n    { x: -x, y: y + rectOffset }\n  ];\n  const poly = rc.polygon(\n    pts.map((p) => [p.x, p.y]),\n    options\n  );\n  const polygon = shapeSvg.insert(() => poly, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${x + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))}, ${y + rectOffset + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(dividedRectangle, \"dividedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/doubleCircle.ts\nimport rough14 from \"roughjs\";\nasync function doublecircle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding } = await labelHelper(parent, node, getNodeClasses(node));\n  const gap = 5;\n  const outerRadius = bbox.width / 2 + halfPadding + gap;\n  const innerRadius = bbox.width / 2 + halfPadding;\n  let circleGroup;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough14.svg(shapeSvg);\n    const outerOptions = userNodeOverrides(node, { roughness: 0.2, strokeWidth: 2.5 });\n    const innerOptions = userNodeOverrides(node, { roughness: 0.2, strokeWidth: 1.5 });\n    const outerRoughNode = rc.circle(0, 0, outerRadius * 2, outerOptions);\n    const innerRoughNode = rc.circle(0, 0, innerRadius * 2, innerOptions);\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    circleGroup.attr(\"class\", handleUndefinedAttr(node.cssClasses)).attr(\"style\", handleUndefinedAttr(cssStyles));\n    circleGroup.node()?.appendChild(outerRoughNode);\n    circleGroup.node()?.appendChild(innerRoughNode);\n  } else {\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    const outerCircle = circleGroup.insert(\"circle\", \":first-child\");\n    const innerCircle = circleGroup.insert(\"circle\");\n    circleGroup.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n    outerCircle.attr(\"class\", \"outer-circle\").attr(\"style\", nodeStyles).attr(\"r\", outerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n    innerCircle.attr(\"class\", \"inner-circle\").attr(\"style\", nodeStyles).attr(\"r\", innerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleGroup);\n  node.intersect = function(point) {\n    log.info(\"DoubleCircle intersect\", node, outerRadius, point);\n    return intersect_default.circle(node, outerRadius, point);\n  };\n  return shapeSvg;\n}\n__name(doublecircle, \"doublecircle\");\n\n// src/rendering-util/rendering-elements/shapes/filledCircle.ts\nimport rough15 from \"roughjs\";\nfunction filledCircle(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = 7;\n  const { cssStyles } = node;\n  const rc = rough15.svg(shapeSvg);\n  const { nodeBorder } = themeVariables;\n  const options = userNodeOverrides(node, { fillStyle: \"solid\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const filledCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  filledCircle2.selectAll(\"path\").attr(\"style\", `fill: ${nodeBorder} !important;`);\n  if (cssStyles && cssStyles.length > 0 && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, filledCircle2);\n  node.intersect = function(point) {\n    log.info(\"filledCircle intersect\", node, { radius, point });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(filledCircle, \"filledCircle\");\n\n// src/rendering-util/rendering-elements/shapes/flippedTriangle.ts\nimport rough16 from \"roughjs\";\nasync function flippedTriangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [\n    { x: 0, y: -h },\n    { x: tw, y: -h },\n    { x: tw / 2, y: 0 }\n  ];\n  const { cssStyles } = node;\n  const rc = rough16.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const flippedTriangle2 = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, flippedTriangle2);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-h / 2 + (node.padding ?? 0) / 2 + (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(flippedTriangle, \"flippedTriangle\");\n\n// src/rendering-util/rendering-elements/shapes/forkJoin.ts\nimport rough17 from \"roughjs\";\nfunction forkJoin(parent, node, { dir, config: { state: state2, themeVariables } }) {\n  const { nodeStyles } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  let width = Math.max(70, node?.width ?? 0);\n  let height = Math.max(10, node?.height ?? 0);\n  if (dir === \"LR\") {\n    width = Math.max(10, node?.width ?? 0);\n    height = Math.max(70, node?.height ?? 0);\n  }\n  const x = -1 * width / 2;\n  const y = -1 * height / 2;\n  const rc = rough17.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: themeVariables.lineColor,\n    fill: themeVariables.lineColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.rectangle(x, y, width, height, options);\n  const shape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, shape);\n  const padding = state2?.padding ?? 0;\n  if (node.width && node.height) {\n    node.width += padding / 2 || 0;\n    node.height += padding / 2 || 0;\n  }\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(forkJoin, \"forkJoin\");\n\n// src/rendering-util/rendering-elements/shapes/halfRoundedRectangle.ts\nimport rough18 from \"roughjs\";\nasync function halfRoundedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const minWidth = 80, minHeight = 50;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const { cssStyles } = node;\n  const rc = rough18.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2, y: -h / 2 },\n    { x: w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270),\n    { x: w / 2 - radius, y: h / 2 },\n    { x: -w / 2, y: h / 2 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    log.info(\"Pill intersect\", node, { radius, point });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(halfRoundedRectangle, \"halfRoundedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/hexagon.ts\nimport rough19 from \"roughjs\";\nasync function hexagon(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + (node.padding ?? 0);\n  const w = bbox.width + (node.padding ?? 0) * 2.5;\n  const { cssStyles } = node;\n  const rc = rough19.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  let halfWidth = w / 2;\n  const m = halfWidth / 6;\n  halfWidth = halfWidth + m;\n  const halfHeight = h / 2;\n  const fixedLength = halfHeight / 2;\n  const deducedWidth = halfWidth - fixedLength;\n  const points = [\n    { x: -deducedWidth, y: -halfHeight },\n    { x: 0, y: -halfHeight },\n    { x: deducedWidth, y: -halfHeight },\n    { x: halfWidth, y: 0 },\n    { x: deducedWidth, y: halfHeight },\n    { x: 0, y: halfHeight },\n    { x: -deducedWidth, y: halfHeight },\n    { x: -halfWidth, y: 0 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(hexagon, \"hexagon\");\n\n// src/rendering-util/rendering-elements/shapes/hourglass.ts\nimport rough20 from \"roughjs\";\nasync function hourglass(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const { shapeSvg } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(30, node?.width ?? 0);\n  const h = Math.max(30, node?.height ?? 0);\n  const { cssStyles } = node;\n  const rc = rough20.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: 0, y: h },\n    { x: w, y: h }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    log.info(\"Pill intersect\", node, { points });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(hourglass, \"hourglass\");\n\n// src/rendering-util/rendering-elements/shapes/icon.ts\nimport rough21 from \"roughjs\";\nasync function icon(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize;\n  const width = iconSize;\n  const { nodeBorder } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough21.svg(shapeSvg);\n  const options = userNodeOverrides(node, { stroke: \"none\", fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const iconNode = rc.rectangle(x, y, width, height, options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(icon, \"icon\");\n\n// src/rendering-util/rendering-elements/shapes/iconCircle.ts\nimport rough22 from \"roughjs\";\nasync function iconCircle(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"icon-shape default\");\n  const padding = 20;\n  const labelPadding = node.label ? 8 : 0;\n  const topLabel = node.pos === \"t\";\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const rc = rough22.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconElem = shapeSvg.append(\"g\");\n  if (node.icon) {\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n  }\n  const iconBBox = iconElem.node().getBBox();\n  const iconWidth = iconBBox.width;\n  const iconHeight = iconBBox.height;\n  const iconX = iconBBox.x;\n  const iconY = iconBBox.y;\n  const diameter = Math.max(iconWidth, iconHeight) * Math.SQRT2 + padding * 2;\n  const iconNode = rc.circle(0, 0, diameter, options);\n  const outerWidth = Math.max(diameter, bbox.width);\n  const outerHeight = diameter + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  iconElem.attr(\n    \"transform\",\n    `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n  );\n  iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconCircle, \"iconCircle\");\n\n// src/rendering-util/rendering-elements/shapes/iconRounded.ts\nimport rough23 from \"roughjs\";\nasync function iconRounded(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    \"icon-shape default\"\n  );\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough23.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 5), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\").attr(\"class\", \"icon-shape2\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconRounded, \"iconRounded\");\n\n// src/rendering-util/rendering-elements/shapes/iconSquare.ts\nimport rough24 from \"roughjs\";\nasync function iconSquare(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    \"icon-shape default\"\n  );\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough24.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 0.1), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconSquare, \"iconSquare\");\n\n// src/rendering-util/rendering-elements/shapes/imageSquare.ts\nimport rough25 from \"roughjs\";\nasync function imageSquare(parent, node, { config: { flowchart } }) {\n  const img = new Image();\n  img.src = node?.img ?? \"\";\n  await img.decode();\n  const imageNaturalWidth = Number(img.naturalWidth.toString().replace(\"px\", \"\"));\n  const imageNaturalHeight = Number(img.naturalHeight.toString().replace(\"px\", \"\"));\n  node.imageAspectRatio = imageNaturalWidth / imageNaturalHeight;\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.defaultWidth = flowchart?.wrappingWidth;\n  const imageRawWidth = Math.max(\n    node.label ? defaultWidth ?? 0 : 0,\n    node?.assetWidth ?? imageNaturalWidth\n  );\n  const imageWidth = node.constraint === \"on\" ? node?.assetHeight ? node.assetHeight * node.imageAspectRatio : imageRawWidth : imageRawWidth;\n  const imageHeight = node.constraint === \"on\" ? imageWidth / node.imageAspectRatio : node?.assetHeight ?? imageNaturalHeight;\n  node.width = Math.max(imageWidth, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"image-shape default\");\n  const topLabel = node.pos === \"t\";\n  const x = -imageWidth / 2;\n  const y = -imageHeight / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough25.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const imageNode = rc.rectangle(x, y, imageWidth, imageHeight, options);\n  const outerWidth = Math.max(imageWidth, bbox.width);\n  const outerHeight = imageHeight + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"none\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => imageNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.img) {\n    const image = shapeSvg.append(\"image\");\n    image.attr(\"href\", node.img);\n    image.attr(\"width\", imageWidth);\n    image.attr(\"height\", imageHeight);\n    image.attr(\"preserveAspectRatio\", \"none\");\n    image.attr(\n      \"transform\",\n      `translate(${-imageWidth / 2},${topLabel ? outerHeight / 2 - imageHeight : -outerHeight / 2})`\n    );\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -imageHeight / 2 - bbox.height / 2 - labelPadding / 2 : imageHeight / 2 - bbox.height / 2 + labelPadding / 2})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + imageWidth / 2, y: dy + nodeHeight / 2 },\n        { x: dx - imageWidth / 2, y: dy + nodeHeight / 2 },\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 + imageHeight }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(imageSquare, \"imageSquare\");\n\n// src/rendering-util/rendering-elements/shapes/invertedTrapezoid.ts\nimport rough26 from \"roughjs\";\nasync function inv_trapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w + 3 * h / 6, y: -h },\n    { x: -3 * h / 6, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough26.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(inv_trapezoid, \"inv_trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/drawRect.ts\nimport rough27 from \"roughjs\";\nasync function drawRect(parent, node, options) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + options.labelPaddingX * 2, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + options.labelPaddingY * 2, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  let rect2;\n  let { rx, ry } = node;\n  const { cssStyles } = node;\n  if (options?.rx && options.ry) {\n    rx = options.rx;\n    ry = options.ry;\n  }\n  if (node.look === \"handDrawn\") {\n    const rc = rough27.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", handleUndefinedAttr(rx)).attr(\"ry\", handleUndefinedAttr(ry)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  }\n  updateNodeBounds(node, rect2);\n  node.calcIntersect = function(bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(drawRect, \"drawRect\");\n\n// src/rendering-util/rendering-elements/shapes/labelRect.ts\nasync function labelRect(parent, node) {\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"label\");\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const totalWidth = 0.1;\n  const totalHeight = 0.1;\n  rect2.attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  shapeSvg.attr(\"class\", \"label edgeLabel\");\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(labelRect, \"labelRect\");\n\n// src/rendering-util/rendering-elements/shapes/leanLeft.ts\nimport rough28 from \"roughjs\";\nasync function lean_left(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + 3 * h / 6, y: 0 },\n    { x: w, y: -h },\n    { x: -(3 * h) / 6, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough28.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_left, \"lean_left\");\n\n// src/rendering-util/rendering-elements/shapes/leanRight.ts\nimport rough29 from \"roughjs\";\nasync function lean_right(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [\n    { x: -3 * h / 6, y: 0 },\n    { x: w, y: 0 },\n    { x: w + 3 * h / 6, y: -h },\n    { x: 0, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough29.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_right, \"lean_right\");\n\n// src/rendering-util/rendering-elements/shapes/lightningBolt.ts\nimport rough30 from \"roughjs\";\nfunction lightningBolt(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  const width = Math.max(35, node?.width ?? 0);\n  const height = Math.max(35, node?.height ?? 0);\n  const gap = 7;\n  const points = [\n    { x: width, y: 0 },\n    { x: 0, y: height + gap / 2 },\n    { x: width - 2 * gap, y: height + gap / 2 },\n    { x: 0, y: 2 * height },\n    { x: width, y: height - gap / 2 },\n    { x: 2 * gap, y: height - gap / 2 }\n  ];\n  const rc = rough30.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const linePath = createPathFromPoints(points);\n  const lineNode = rc.path(linePath, options);\n  const lightningBolt2 = shapeSvg.insert(() => lineNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  lightningBolt2.attr(\"transform\", `translate(-${width / 2},${-height})`);\n  updateNodeBounds(node, lightningBolt2);\n  node.intersect = function(point) {\n    log.info(\"lightningBolt intersect\", node, point);\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(lightningBolt, \"lightningBolt\");\n\n// src/rendering-util/rendering-elements/shapes/linedCylinder.ts\nimport rough31 from \"roughjs\";\nvar createCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\n    `M${x},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`,\n    `M${x},${y + ry + outerOffset}`,\n    `a${rx},${ry} 0,0,0 ${width},0`\n  ].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\n    `M${x},${y + ry}`,\n    `M${x + width},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`,\n    `M${x},${y + ry + outerOffset}`,\n    `a${rx},${ry} 0,0,0 ${width},0`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function linedCylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + (node.padding ?? 0), node.height ?? 0);\n  const outerOffset = h * 0.1;\n  let cylinder2;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough31.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    const innerPathData = createInnerCylinderPathD2(0, ry, w, h, rx, ry);\n    const options = userNodeOverrides(node, {});\n    const outerNode = rc.path(outerPathData, options);\n    const innerLine = rc.path(innerPathData, options);\n    const innerLineEl = shapeSvg.insert(() => innerLine, \":first-child\");\n    innerLineEl.attr(\"class\", \"line\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + ry - (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedCylinder, \"linedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/linedWaveEdgedRect.ts\nimport rough32 from \"roughjs\";\nasync function linedWaveEdgedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const rc = rough32.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - w / 2 * 0.1,\n      finalH / 2,\n      w / 2 + w / 2 * 0.1,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2, y: -finalH / 2 },\n    { x: -w / 2, y: finalH / 2 * 1.1 },\n    { x: -w / 2, y: -finalH / 2 }\n  ];\n  const poly = rc.polygon(\n    points.map((p) => [p.x, p.y]),\n    options\n  );\n  const waveEdgeRect = shapeSvg.insert(() => poly, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) + w / 2 * 0.1 / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedWaveEdgedRect, \"linedWaveEdgedRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiRect.ts\nimport rough33 from \"roughjs\";\nasync function multiRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough33.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y + rectOffset },\n    { x: x - rectOffset, y: y + h + rectOffset },\n    { x: x + w - rectOffset, y: y + h + rectOffset },\n    { x: x + w - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y + h - rectOffset },\n    { x: x + w + rectOffset, y: y + h - rectOffset },\n    { x: x + w + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y },\n    { x, y },\n    { x, y: y + rectOffset }\n  ];\n  const innerPathPoints = [\n    { x, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y },\n    { x, y }\n  ];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, { ...options, fill: \"none\" });\n  const multiRect2 = shapeSvg.insert(() => innerNode, \":first-child\");\n  multiRect2.insert(() => outerNode, \":first-child\");\n  multiRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, multiRect2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiRect, \"multiRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiWaveEdgedRectangle.ts\nimport rough34 from \"roughjs\";\nasync function multiWaveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const x = -w / 2;\n  const y = -finalH / 2;\n  const rectOffset = 5;\n  const { cssStyles } = node;\n  const wavePoints = generateFullSineWavePoints(\n    x - rectOffset,\n    y + finalH + rectOffset,\n    x + w - rectOffset,\n    y + finalH + rectOffset,\n    waveAmplitude,\n    0.8\n  );\n  const lastWavePoint = wavePoints?.[wavePoints.length - 1];\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y + rectOffset },\n    { x: x - rectOffset, y: y + finalH + rectOffset },\n    ...wavePoints,\n    { x: x + w - rectOffset, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - 2 * rectOffset },\n    { x: x + w + rectOffset, y: lastWavePoint.y - 2 * rectOffset },\n    { x: x + w + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y },\n    { x, y },\n    { x, y: y + rectOffset }\n  ];\n  const innerPathPoints = [\n    { x, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + rectOffset },\n    { x: x + w - rectOffset, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y },\n    { x, y }\n  ];\n  const rc = rough34.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, options);\n  const shape = shapeSvg.insert(() => outerNode, \":first-child\");\n  shape.insert(() => innerNode);\n  shape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  shape.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, shape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiWaveEdgedRectangle, \"multiWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/note.ts\nimport rough35 from \"roughjs\";\nasync function note(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const useHtmlLabels = node.useHtmlLabels || getConfig().flowchart?.htmlLabels !== false;\n  if (!useHtmlLabels) {\n    node.centerLabel = true;\n  }\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const totalHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const { cssStyles } = node;\n  const rc = rough35.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: themeVariables.noteBkgColor,\n    stroke: themeVariables.noteBorderColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const noteShapeNode = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => noteShapeNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(note, \"note\");\n\n// src/rendering-util/rendering-elements/shapes/question.ts\nimport rough36 from \"roughjs\";\nvar createDecisionBoxPathD = /* @__PURE__ */ __name((x, y, size) => {\n  return [\n    `M${x + size / 2},${y}`,\n    `L${x + size},${y - size / 2}`,\n    `L${x + size / 2},${y - size}`,\n    `L${x},${y - size / 2}`,\n    \"Z\"\n  ].join(\" \");\n}, \"createDecisionBoxPathD\");\nasync function question(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const adjustment = 0.5;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough36.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createDecisionBoxPathD(0, 0, s);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-s / 2 + adjustment}, ${s / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, s, s, points);\n    polygon.attr(\"transform\", `translate(${-s / 2 + adjustment}, ${s / 2})`);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.calcIntersect = function(bounds, point) {\n    const s2 = bounds.width;\n    const points2 = [\n      { x: s2 / 2, y: 0 },\n      { x: s2, y: -s2 / 2 },\n      { x: s2 / 2, y: -s2 },\n      { x: 0, y: -s2 / 2 }\n    ];\n    const res = intersect_default.polygon(bounds, points2, point);\n    return { x: res.x - 0.5, y: res.y - 0.5 };\n  };\n  node.intersect = function(point) {\n    return this.calcIntersect(node, point);\n  };\n  return shapeSvg;\n}\n__name(question, \"question\");\n\n// src/rendering-util/rendering-elements/shapes/rectLeftInvArrow.ts\nimport rough37 from \"roughjs\";\nasync function rect_left_inv_arrow(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const notch = y / 2;\n  const points = [\n    { x: x + notch, y },\n    { x, y: 0 },\n    { x: x + notch, y: -y },\n    { x: -x, y: -y },\n    { x: -x, y }\n  ];\n  const { cssStyles } = node;\n  const rc = rough37.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-notch / 2},0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-notch / 2 - bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(rect_left_inv_arrow, \"rect_left_inv_arrow\");\n\n// src/rendering-util/rendering-elements/shapes/rectWithTitle.ts\nimport { select as select4 } from \"d3\";\nimport rough38 from \"roughjs\";\nasync function rectWithTitle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  let classes;\n  if (!node.cssClasses) {\n    classes = \"node default\";\n  } else {\n    classes = \"node \" + node.cssClasses;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId || node.id);\n  const g = shapeSvg.insert(\"g\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", nodeStyles);\n  const description = node.description;\n  const title = node.label;\n  const text2 = label.node().appendChild(await createLabel_default(title, node.labelStyle, true, true));\n  let bbox = { width: 0, height: 0 };\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div2 = text2.children[0];\n    const dv2 = select4(text2);\n    bbox = div2.getBoundingClientRect();\n    dv2.attr(\"width\", bbox.width);\n    dv2.attr(\"height\", bbox.height);\n  }\n  log.info(\"Text 2\", description);\n  const textRows = description || [];\n  const titleBox = text2.getBBox();\n  const descr = label.node().appendChild(\n    await createLabel_default(\n      textRows.join ? textRows.join(\"<br/>\") : textRows,\n      node.labelStyle,\n      true,\n      true\n    )\n  );\n  const div = descr.children[0];\n  const dv = select4(descr);\n  bbox = div.getBoundingClientRect();\n  dv.attr(\"width\", bbox.width);\n  dv.attr(\"height\", bbox.height);\n  const halfPadding = (node.padding || 0) / 2;\n  select4(descr).attr(\n    \"transform\",\n    \"translate( \" + (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) + \", \" + (titleBox.height + halfPadding + 5) + \")\"\n  );\n  select4(text2).attr(\n    \"transform\",\n    \"translate( \" + (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) + \", 0)\"\n  );\n  bbox = label.node().getBBox();\n  label.attr(\n    \"transform\",\n    \"translate(\" + -bbox.width / 2 + \", \" + (-bbox.height / 2 - halfPadding + 3) + \")\"\n  );\n  const totalWidth = bbox.width + (node.padding || 0);\n  const totalHeight = bbox.height + (node.padding || 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  let rect2;\n  let innerLine;\n  if (node.look === \"handDrawn\") {\n    const rc = rough38.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(\n      createRoundedRectPathD(x, y, totalWidth, totalHeight, node.rx || 0),\n      options\n    );\n    const roughLine = rc.line(\n      -bbox.width / 2 - halfPadding,\n      -bbox.height / 2 - halfPadding + titleBox.height + halfPadding,\n      bbox.width / 2 + halfPadding,\n      -bbox.height / 2 - halfPadding + titleBox.height + halfPadding,\n      options\n    );\n    innerLine = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughLine;\n    }, \":first-child\");\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n  } else {\n    rect2 = g.insert(\"rect\", \":first-child\");\n    innerLine = g.insert(\"line\");\n    rect2.attr(\"class\", \"outer title-state\").attr(\"style\", nodeStyles).attr(\"x\", -bbox.width / 2 - halfPadding).attr(\"y\", -bbox.height / 2 - halfPadding).attr(\"width\", bbox.width + (node.padding || 0)).attr(\"height\", bbox.height + (node.padding || 0));\n    innerLine.attr(\"class\", \"divider\").attr(\"x1\", -bbox.width / 2 - halfPadding).attr(\"x2\", bbox.width / 2 + halfPadding).attr(\"y1\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding).attr(\"y2\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(rectWithTitle, \"rectWithTitle\");\n\n// src/rendering-util/rendering-elements/shapes/roundedRect.ts\nimport rough39 from \"roughjs\";\nfunction generateArcPoints2(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateArcPoints2, \"generateArcPoints\");\nasync function roundedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const labelPaddingX = node?.padding ?? 0;\n  const labelPaddingY = node?.padding ?? 0;\n  const w = (node?.width ? node?.width : bbox.width) + labelPaddingX * 2;\n  const h = (node?.height ? node?.height : bbox.height) + labelPaddingY * 2;\n  const radius = node.radius || 5;\n  const taper = node.taper || 5;\n  const { cssStyles } = node;\n  const rc = rough39.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.stroke) {\n    options.stroke = node.stroke;\n  }\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    // Top edge (left to right)\n    { x: -w / 2 + taper, y: -h / 2 },\n    // Top-left corner start (1)\n    { x: w / 2 - taper, y: -h / 2 },\n    // Top-right corner start (2)\n    ...generateArcPoints2(w / 2 - taper, -h / 2, w / 2, -h / 2 + taper, radius, radius, true),\n    // Top-left arc (2 to 3)\n    // Right edge (top to bottom)\n    { x: w / 2, y: -h / 2 + taper },\n    // Top-right taper point (3)\n    { x: w / 2, y: h / 2 - taper },\n    // Bottom-right taper point (4)\n    ...generateArcPoints2(w / 2, h / 2 - taper, w / 2 - taper, h / 2, radius, radius, true),\n    // Top-left arc (4 to 5)\n    // Bottom edge (right to left)\n    { x: w / 2 - taper, y: h / 2 },\n    // Bottom-right corner start (5)\n    { x: -w / 2 + taper, y: h / 2 },\n    // Bottom-left corner start (6)\n    ...generateArcPoints2(-w / 2 + taper, h / 2, -w / 2, h / 2 - taper, radius, radius, true),\n    // Top-left arc (4 to 5)\n    // Left edge (bottom to top)\n    { x: -w / 2, y: h / 2 - taper },\n    // Bottom-left taper point (7)\n    { x: -w / 2, y: -h / 2 + taper },\n    // Top-left taper point (8)\n    ...generateArcPoints2(-w / 2, -h / 2 + taper, -w / 2 + taper, -h / 2, radius, radius, true)\n    // Top-left arc (4 to 5)\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container outer-path\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(roundedRect, \"roundedRect\");\n\n// src/rendering-util/rendering-elements/shapes/shadedProcess.ts\nimport rough40 from \"roughjs\";\nasync function shadedProcess(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = node?.padding ?? 0;\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const { cssStyles } = node;\n  const rc = rough40.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x, y },\n    { x: x + w + 8, y },\n    { x: x + w + 8, y: y + h },\n    { x: x - 8, y: y + h },\n    { x: x - 8, y },\n    { x, y },\n    { x, y: y + h }\n  ];\n  const roughNode = rc.polygon(\n    points.map((p) => [p.x, p.y]),\n    options\n  );\n  const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + 4 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(shadedProcess, \"shadedProcess\");\n\n// src/rendering-util/rendering-elements/shapes/slopedRect.ts\nimport rough41 from \"roughjs\";\nasync function slopedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough41.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x, y },\n    { x, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y - h / 2 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(0, ${h / 4})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))}, ${-h / 4 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(slopedRect, \"slopedRect\");\n\n// src/rendering-util/rendering-elements/shapes/squareRect.ts\nasync function squareRect2(parent, node) {\n  const options = {\n    rx: 0,\n    ry: 0,\n    classes: \"\",\n    labelPaddingX: node.labelPaddingX ?? (node?.padding || 0) * 2,\n    labelPaddingY: (node?.padding || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(squareRect2, \"squareRect\");\n\n// src/rendering-util/rendering-elements/shapes/stadium.ts\nimport rough42 from \"roughjs\";\nasync function stadium(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n  const radius = h / 2;\n  const { cssStyles } = node;\n  const rc = rough42.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 + radius, y: -h / 2 },\n    { x: w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270),\n    { x: w / 2 - radius, y: h / 2 },\n    ...generateCirclePoints(w / 2 - radius, 0, radius, 50, 270, 450)\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container outer-path\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(stadium, \"stadium\");\n\n// src/rendering-util/rendering-elements/shapes/state.ts\nasync function state(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"flowchart-node\"\n  };\n  return drawRect(parent, node, options);\n}\n__name(state, \"state\");\n\n// src/rendering-util/rendering-elements/shapes/stateEnd.ts\nimport rough43 from \"roughjs\";\nfunction stateEnd(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { cssStyles } = node;\n  const { lineColor, stateBorder, nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  const rc = rough43.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.circle(0, 0, 14, {\n    ...options,\n    stroke: lineColor,\n    strokeWidth: 2\n  });\n  const innerFill = stateBorder ?? nodeBorder;\n  const roughInnerNode = rc.circle(0, 0, 5, {\n    ...options,\n    fill: innerFill,\n    stroke: innerFill,\n    strokeWidth: 2,\n    fillStyle: \"solid\"\n  });\n  const circle2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  circle2.insert(() => roughInnerNode);\n  if (cssStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function(point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateEnd, \"stateEnd\");\n\n// src/rendering-util/rendering-elements/shapes/stateStart.ts\nimport rough44 from \"roughjs\";\nfunction stateStart(parent, node, { config: { themeVariables } }) {\n  const { lineColor } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  let circle2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough44.svg(shapeSvg);\n    const roughNode = rc.circle(0, 0, 14, solidStateFill(lineColor));\n    circle2 = shapeSvg.insert(() => roughNode);\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  } else {\n    circle2 = shapeSvg.insert(\"circle\", \":first-child\");\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function(point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateStart, \"stateStart\");\n\n// src/rendering-util/rendering-elements/shapes/subroutine.ts\nimport rough45 from \"roughjs\";\nasync function subroutine(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = (node?.padding || 0) / 2;\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 }\n  ];\n  if (node.look === \"handDrawn\") {\n    const rc = rough45.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.rectangle(x - 8, y, w + 16, h, options);\n    const l1 = rc.line(x, y, x, y + h, options);\n    const l2 = rc.line(x + w, y, x + w, y + h, options);\n    shapeSvg.insert(() => l1, \":first-child\");\n    shapeSvg.insert(() => l2, \":first-child\");\n    const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    const { cssStyles } = node;\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n    updateNodeBounds(node, rect2);\n  } else {\n    const el = insertPolygonShape(shapeSvg, w, h, points);\n    if (nodeStyles) {\n      el.attr(\"style\", nodeStyles);\n    }\n    updateNodeBounds(node, el);\n  }\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(subroutine, \"subroutine\");\n\n// src/rendering-util/rendering-elements/shapes/taggedRect.ts\nimport rough46 from \"roughjs\";\nasync function taggedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const tagWidth = 0.2 * h;\n  const tagHeight = 0.2 * h;\n  const { cssStyles } = node;\n  const rc = rough46.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const rectPoints = [\n    { x: x - tagWidth / 2, y },\n    { x: x + w + tagWidth / 2, y },\n    { x: x + w + tagWidth / 2, y: y + h },\n    { x: x - tagWidth / 2, y: y + h }\n  ];\n  const tagPoints = [\n    { x: x + w - tagWidth / 2, y: y + h },\n    { x: x + w + tagWidth / 2, y: y + h },\n    { x: x + w + tagWidth / 2, y: y + h - tagHeight }\n  ];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectNode = rc.path(rectPath, options);\n  const tagPath = createPathFromPoints(tagPoints);\n  const tagNode = rc.path(tagPath, { ...options, fillStyle: \"solid\" });\n  const taggedRect2 = shapeSvg.insert(() => tagNode, \":first-child\");\n  taggedRect2.insert(() => rectNode, \":first-child\");\n  taggedRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, taggedRect2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedRect, \"taggedRect\");\n\n// src/rendering-util/rendering-elements/shapes/taggedWaveEdgedRectangle.ts\nimport rough47 from \"roughjs\";\nasync function taggedWaveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const tagWidth = 0.2 * w;\n  const tagHeight = 0.2 * h;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const rc = rough47.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - w / 2 * 0.1, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - w / 2 * 0.1,\n      finalH / 2,\n      w / 2 + w / 2 * 0.1,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 }\n  ];\n  const x = -w / 2 + w / 2 * 0.1;\n  const y = -finalH / 2 - tagHeight * 0.4;\n  const tagPoints = [\n    { x: x + w - tagWidth, y: (y + h) * 1.4 },\n    { x: x + w, y: y + h - tagHeight },\n    { x: x + w, y: (y + h) * 0.9 },\n    ...generateFullSineWavePoints(\n      x + w,\n      (y + h) * 1.3,\n      x + w - tagWidth,\n      (y + h) * 1.5,\n      -h * 0.03,\n      0.5\n    )\n  ];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const taggedWaveEdgeRectPath = createPathFromPoints(tagPoints);\n  const taggedWaveEdgeRectNode = rc.path(taggedWaveEdgeRectPath, {\n    ...options,\n    fillStyle: \"solid\"\n  });\n  const waveEdgeRect = shapeSvg.insert(() => taggedWaveEdgeRectNode, \":first-child\");\n  waveEdgeRect.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedWaveEdgedRectangle, \"taggedWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/text.ts\nasync function text(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + node.padding, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + node.padding, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  rect2.attr(\"class\", \"text\").attr(\"style\", nodeStyles).attr(\"rx\", 0).attr(\"ry\", 0).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(text, \"text\");\n\n// src/rendering-util/rendering-elements/shapes/tiltedCylinder.ts\nimport rough48 from \"roughjs\";\nvar createCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return `M${x},${y}\n    a${rx},${ry} 0,0,1 ${0},${-height}\n    l${width},${0}\n    a${rx},${ry} 0,0,1 ${0},${height}\n    M${width},${-height}\n    a${rx},${ry} 0,0,0 ${0},${height}\n    l${-width},${0}`;\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y}`,\n    `M${x + width},${y}`,\n    `a${rx},${ry} 0,0,0 ${0},${-height}`,\n    `l${-width},0`,\n    `a${rx},${ry} 0,0,0 ${0},${height}`,\n    `l${width},0`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x + width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 0,${height}`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function tiltedCylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label, halfPadding } = await labelHelper(\n    parent,\n    node,\n    getNodeClasses(node)\n  );\n  const labelPadding = node.look === \"neo\" ? halfPadding * 2 : halfPadding;\n  const h = bbox.height + labelPadding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const w = bbox.width + rx + labelPadding;\n  const { cssStyles } = node;\n  let cylinder2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough48.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD3(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD3(0, 0, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, { fill: \"none\" }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD3(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", cssStyles);\n    }\n    if (nodeStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", nodeStyles);\n    }\n  }\n  cylinder2.attr(\"label-offset-x\", rx);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${h / 2} )`);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rx - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, cylinder2);\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const y = pos.y - (node.y ?? 0);\n    if (ry != 0 && (Math.abs(y) < (node.height ?? 0) / 2 || Math.abs(y) == (node.height ?? 0) / 2 && Math.abs(pos.x - (node.x ?? 0)) > (node.width ?? 0) / 2 - rx)) {\n      let x = rx * rx * (1 - y * y / (ry * ry));\n      if (x != 0) {\n        x = Math.sqrt(Math.abs(x));\n      }\n      x = rx - x;\n      if (point.x - (node.x ?? 0) > 0) {\n        x = -x;\n      }\n      pos.x += x;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(tiltedCylinder, \"tiltedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoid.ts\nimport rough49 from \"roughjs\";\nasync function trapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: -3 * h / 6, y: 0 },\n    { x: w + 3 * h / 6, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough49.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(trapezoid, \"trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoidalPentagon.ts\nimport rough50 from \"roughjs\";\nasync function trapezoidalPentagon(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 60, minHeight = 20;\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const { cssStyles } = node;\n  const rc = rough50.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 * 0.8, y: -h / 2 },\n    { x: w / 2 * 0.8, y: -h / 2 },\n    { x: w / 2, y: -h / 2 * 0.6 },\n    { x: w / 2, y: h / 2 },\n    { x: -w / 2, y: h / 2 },\n    { x: -w / 2, y: -h / 2 * 0.6 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(trapezoidalPentagon, \"trapezoidalPentagon\");\n\n// src/rendering-util/rendering-elements/shapes/triangle.ts\nimport rough51 from \"roughjs\";\nasync function triangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const useHtmlLabels = evaluate(getConfig2().flowchart?.htmlLabels);\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: tw, y: 0 },\n    { x: tw / 2, y: -h }\n  ];\n  const { cssStyles } = node;\n  const rc = rough51.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${h / 2 - (bbox.height + (node.padding ?? 0) / (useHtmlLabels ? 2 : 1) - (bbox.y - (bbox.top ?? 0)))})`\n  );\n  node.intersect = function(point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(triangle, \"triangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveEdgedRectangle.ts\nimport rough52 from \"roughjs\";\nasync function waveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 8;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const minWidth = 70;\n  const widthDif = minWidth - w;\n  const extraW = widthDif > 0 ? widthDif / 2 : 0;\n  const rc = rough52.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - extraW, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - extraW,\n      finalH / 2,\n      w / 2 + extraW,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + extraW, y: -finalH / 2 },\n    { x: -w / 2 - extraW, y: -finalH / 2 }\n  ];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const waveEdgeRect = shapeSvg.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveEdgedRectangle, \"waveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveRectangle.ts\nimport rough53 from \"roughjs\";\nasync function waveRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 100;\n  const minHeight = 50;\n  const baseWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const baseHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const aspectRatio = baseWidth / baseHeight;\n  let w = baseWidth;\n  let h = baseHeight;\n  if (w > h * aspectRatio) {\n    h = w / aspectRatio;\n  } else {\n    w = h * aspectRatio;\n  }\n  w = Math.max(w, minWidth);\n  h = Math.max(h, minHeight);\n  const waveAmplitude = Math.min(h * 0.2, h / 4);\n  const finalH = h + waveAmplitude * 2;\n  const { cssStyles } = node;\n  const rc = rough53.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2, y: finalH / 2 },\n    ...generateFullSineWavePoints(-w / 2, finalH / 2, w / 2, finalH / 2, waveAmplitude, 1),\n    { x: w / 2, y: -finalH / 2 },\n    ...generateFullSineWavePoints(w / 2, -finalH / 2, -w / 2, -finalH / 2, waveAmplitude, -1)\n  ];\n  const waveRectPath = createPathFromPoints(points);\n  const waveRectNode = rc.path(waveRectPath, options);\n  const waveRect = shapeSvg.insert(() => waveRectNode, \":first-child\");\n  waveRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, waveRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveRectangle, \"waveRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/windowPane.ts\nimport rough54 from \"roughjs\";\nasync function windowPane(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough54.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y - rectOffset },\n    { x: x - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y - rectOffset }\n  ];\n  const path = `M${x - rectOffset},${y - rectOffset} L${x + w},${y - rectOffset} L${x + w},${y + h} L${x - rectOffset},${y + h} L${x - rectOffset},${y - rectOffset}\n                M${x - rectOffset},${y} L${x + w},${y}\n                M${x},${y - rectOffset} L${x},${y + h}`;\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const no = rc.path(path, options);\n  const windowPane2 = shapeSvg.insert(() => no, \":first-child\");\n  windowPane2.attr(\"transform\", `translate(${rectOffset / 2}, ${rectOffset / 2})`);\n  windowPane2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) + rectOffset / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, windowPane2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(windowPane, \"windowPane\");\n\n// src/rendering-util/rendering-elements/shapes/erBox.ts\nimport rough55 from \"roughjs\";\nimport { select as select5 } from \"d3\";\nasync function erBox(parent, node) {\n  const entityNode = node;\n  if (entityNode.alias) {\n    node.label = entityNode.alias;\n  }\n  if (node.look === \"handDrawn\") {\n    const { themeVariables: themeVariables2 } = getConfig();\n    const { background } = themeVariables2;\n    const backgroundNode = {\n      ...node,\n      id: node.id + \"-background\",\n      look: \"default\",\n      cssStyles: [\"stroke: none\", `fill: ${background}`]\n    };\n    await erBox(parent, backgroundNode);\n  }\n  const config = getConfig();\n  node.useHtmlLabels = config.htmlLabels;\n  let PADDING = config.er?.diagramPadding ?? 10;\n  let TEXT_PADDING = config.er?.entityPadding ?? 6;\n  const { cssStyles } = node;\n  const { labelStyles, nodeStyles } = styles2String(node);\n  if (entityNode.attributes.length === 0 && node.label) {\n    const options2 = {\n      rx: 0,\n      ry: 0,\n      labelPaddingX: PADDING,\n      labelPaddingY: PADDING * 1.5,\n      classes: \"\"\n    };\n    if (calculateTextWidth(node.label, config) + options2.labelPaddingX * 2 < config.er.minEntityWidth) {\n      node.width = config.er.minEntityWidth;\n    }\n    const shapeSvg2 = await drawRect(parent, node, options2);\n    if (!evaluate(config.htmlLabels)) {\n      const textElement = shapeSvg2.select(\"text\");\n      const bbox = textElement.node()?.getBBox();\n      textElement.attr(\"transform\", `translate(${-bbox.width / 2}, 0)`);\n    }\n    return shapeSvg2;\n  }\n  if (!config.htmlLabels) {\n    PADDING *= 1.25;\n    TEXT_PADDING *= 1.25;\n  }\n  let cssClasses = getNodeClasses(node);\n  if (!cssClasses) {\n    cssClasses = \"node default\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const nameBBox = await addText(shapeSvg, node.label ?? \"\", config, 0, 0, [\"name\"], labelStyles);\n  nameBBox.height += TEXT_PADDING;\n  let yOffset = 0;\n  const yOffsets = [];\n  const rows = [];\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeysWidth = 0;\n  let maxCommentWidth = 0;\n  let keysPresent = true;\n  let commentPresent = true;\n  for (const attribute of entityNode.attributes) {\n    const typeBBox = await addText(\n      shapeSvg,\n      attribute.type,\n      config,\n      0,\n      yOffset,\n      [\"attribute-type\"],\n      labelStyles\n    );\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width + PADDING);\n    const nameBBox2 = await addText(\n      shapeSvg,\n      attribute.name,\n      config,\n      0,\n      yOffset,\n      [\"attribute-name\"],\n      labelStyles\n    );\n    maxNameWidth = Math.max(maxNameWidth, nameBBox2.width + PADDING);\n    const keysBBox = await addText(\n      shapeSvg,\n      attribute.keys.join(),\n      config,\n      0,\n      yOffset,\n      [\"attribute-keys\"],\n      labelStyles\n    );\n    maxKeysWidth = Math.max(maxKeysWidth, keysBBox.width + PADDING);\n    const commentBBox = await addText(\n      shapeSvg,\n      attribute.comment,\n      config,\n      0,\n      yOffset,\n      [\"attribute-comment\"],\n      labelStyles\n    );\n    maxCommentWidth = Math.max(maxCommentWidth, commentBBox.width + PADDING);\n    const rowHeight = Math.max(typeBBox.height, nameBBox2.height, keysBBox.height, commentBBox.height) + TEXT_PADDING;\n    rows.push({ yOffset, rowHeight });\n    yOffset += rowHeight;\n  }\n  let totalWidthSections = 4;\n  if (maxKeysWidth <= PADDING) {\n    keysPresent = false;\n    maxKeysWidth = 0;\n    totalWidthSections--;\n  }\n  if (maxCommentWidth <= PADDING) {\n    commentPresent = false;\n    maxCommentWidth = 0;\n    totalWidthSections--;\n  }\n  const shapeBBox = shapeSvg.node().getBBox();\n  if (nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth) > 0) {\n    const difference = nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth);\n    maxTypeWidth += difference / totalWidthSections;\n    maxNameWidth += difference / totalWidthSections;\n    if (maxKeysWidth > 0) {\n      maxKeysWidth += difference / totalWidthSections;\n    }\n    if (maxCommentWidth > 0) {\n      maxCommentWidth += difference / totalWidthSections;\n    }\n  }\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth;\n  const rc = rough55.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  let totalShapeBBoxHeight = 0;\n  if (rows.length > 0) {\n    totalShapeBBoxHeight = rows.reduce((sum, row) => sum + (row?.rowHeight ?? 0), 0);\n  }\n  const w = Math.max(shapeBBox.width + PADDING * 2, node?.width || 0, maxWidth);\n  const h = Math.max((totalShapeBBoxHeight ?? 0) + nameBBox.height, node?.height || 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  shapeSvg.selectAll(\"g:not(:first-child)\").each((_, i, nodes) => {\n    const text2 = select5(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n        if (text2.attr(\"class\").includes(\"attribute-name\")) {\n          translateX += maxTypeWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-keys\")) {\n          translateX += maxTypeWidth + maxNameWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-comment\")) {\n          translateX += maxTypeWidth + maxNameWidth + maxKeysWidth;\n        }\n      }\n    }\n    text2.attr(\n      \"transform\",\n      `translate(${x + PADDING / 2 + translateX}, ${translateY + y + nameBBox.height + TEXT_PADDING / 2})`\n    );\n  });\n  shapeSvg.select(\".name\").attr(\"transform\", \"translate(\" + -nameBBox.width / 2 + \", \" + (y + TEXT_PADDING / 2) + \")\");\n  const roughRect = rc.rectangle(x, y, w, h, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\").attr(\"style\", cssStyles.join(\"\"));\n  const { themeVariables } = getConfig();\n  const { rowEven, rowOdd, nodeBorder } = themeVariables;\n  yOffsets.push(0);\n  for (const [i, row] of rows.entries()) {\n    const contentRowIndex = i + 1;\n    const isEven = contentRowIndex % 2 === 0 && row.yOffset !== 0;\n    const roughRect2 = rc.rectangle(x, nameBBox.height + y + row?.yOffset, w, row?.rowHeight, {\n      ...options,\n      fill: isEven ? rowEven : rowOdd,\n      stroke: nodeBorder\n    });\n    shapeSvg.insert(() => roughRect2, \"g.label\").attr(\"style\", cssStyles.join(\"\")).attr(\"class\", `row-rect-${isEven ? \"even\" : \"odd\"}`);\n  }\n  let roughLine = rc.line(x, nameBBox.height + y, w + x, nameBBox.height + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  roughLine = rc.line(maxTypeWidth + x, nameBBox.height + y, maxTypeWidth + x, h + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  if (keysPresent) {\n    roughLine = rc.line(\n      maxTypeWidth + maxNameWidth + x,\n      nameBBox.height + y,\n      maxTypeWidth + maxNameWidth + x,\n      h + y,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  if (commentPresent) {\n    roughLine = rc.line(\n      maxTypeWidth + maxNameWidth + maxKeysWidth + x,\n      nameBBox.height + y,\n      maxTypeWidth + maxNameWidth + maxKeysWidth + x,\n      h + y,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  for (const yOffset2 of yOffsets) {\n    roughLine = rc.line(\n      x,\n      nameBBox.height + y + yOffset2,\n      w + x,\n      nameBBox.height + y + yOffset2,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  updateNodeBounds(node, rect2);\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    const allStyle = nodeStyles.split(\";\");\n    const strokeStyles = allStyle?.filter((e) => {\n      return e.includes(\"stroke\");\n    })?.map((s) => `${s}`).join(\"; \");\n    shapeSvg.selectAll(\"path\").attr(\"style\", strokeStyles ?? \"\");\n    shapeSvg.selectAll(\".row-rect-even path\").attr(\"style\", nodeStyles);\n  }\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(erBox, \"erBox\");\nasync function addText(shapeSvg, labelText, config, translateX = 0, translateY = 0, classes = [], style = \"\") {\n  const label = shapeSvg.insert(\"g\").attr(\"class\", `label ${classes.join(\" \")}`).attr(\"transform\", `translate(${translateX}, ${translateY})`).attr(\"style\", style);\n  if (labelText !== parseGenericTypes(labelText)) {\n    labelText = parseGenericTypes(labelText);\n    labelText = labelText.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  }\n  const text2 = label.node().appendChild(\n    await createText(\n      label,\n      labelText,\n      {\n        width: calculateTextWidth(labelText, config) + 100,\n        style,\n        useHtmlLabels: config.htmlLabels\n      },\n      config\n    )\n  );\n  if (labelText.includes(\"&lt;\") || labelText.includes(\"&gt;\")) {\n    let child = text2.children[0];\n    child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    while (child.childNodes[0]) {\n      child = child.childNodes[0];\n      child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    }\n  }\n  let bbox = text2.getBBox();\n  if (evaluate(config.htmlLabels)) {\n    const div = text2.children[0];\n    div.style.textAlign = \"start\";\n    const dv = select5(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  return bbox;\n}\n__name(addText, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nimport { select as select7 } from \"d3\";\nimport rough56 from \"roughjs\";\n\n// src/diagrams/class/shapeUtil.ts\nimport { select as select6 } from \"d3\";\nasync function textHelper(parent, node, config, useHtmlLabels, GAP = config.class.padding ?? 12) {\n  const TEXT_PADDING = !useHtmlLabels ? 3 : 0;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId || node.id);\n  let annotationGroup = null;\n  let labelGroup = null;\n  let membersGroup = null;\n  let methodsGroup = null;\n  let annotationGroupHeight = 0;\n  let labelGroupHeight = 0;\n  let membersGroupHeight = 0;\n  annotationGroup = shapeSvg.insert(\"g\").attr(\"class\", \"annotation-group text\");\n  if (node.annotations.length > 0) {\n    const annotation = node.annotations[0];\n    await addText2(annotationGroup, { text: `\\xAB${annotation}\\xBB` }, 0);\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroupHeight = annotationGroupBBox.height;\n  }\n  labelGroup = shapeSvg.insert(\"g\").attr(\"class\", \"label-group text\");\n  await addText2(labelGroup, node, 0, [\"font-weight: bolder\"]);\n  const labelGroupBBox = labelGroup.node().getBBox();\n  labelGroupHeight = labelGroupBBox.height;\n  membersGroup = shapeSvg.insert(\"g\").attr(\"class\", \"members-group text\");\n  let yOffset = 0;\n  for (const member of node.members) {\n    const height = await addText2(membersGroup, member, yOffset, [member.parseClassifier()]);\n    yOffset += height + TEXT_PADDING;\n  }\n  membersGroupHeight = membersGroup.node().getBBox().height;\n  if (membersGroupHeight <= 0) {\n    membersGroupHeight = GAP / 2;\n  }\n  methodsGroup = shapeSvg.insert(\"g\").attr(\"class\", \"methods-group text\");\n  let methodsYOffset = 0;\n  for (const method of node.methods) {\n    const height = await addText2(methodsGroup, method, methodsYOffset, [method.parseClassifier()]);\n    methodsYOffset += height + TEXT_PADDING;\n  }\n  let bbox = shapeSvg.node().getBBox();\n  if (annotationGroup !== null) {\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroup.attr(\"transform\", `translate(${-annotationGroupBBox.width / 2})`);\n  }\n  labelGroup.attr(\"transform\", `translate(${-labelGroupBBox.width / 2}, ${annotationGroupHeight})`);\n  bbox = shapeSvg.node().getBBox();\n  membersGroup.attr(\n    \"transform\",\n    `translate(${0}, ${annotationGroupHeight + labelGroupHeight + GAP * 2})`\n  );\n  bbox = shapeSvg.node().getBBox();\n  methodsGroup.attr(\n    \"transform\",\n    `translate(${0}, ${annotationGroupHeight + labelGroupHeight + (membersGroupHeight ? membersGroupHeight + GAP * 4 : GAP * 2)})`\n  );\n  bbox = shapeSvg.node().getBBox();\n  return { shapeSvg, bbox };\n}\n__name(textHelper, \"textHelper\");\nasync function addText2(parentGroup, node, yOffset, styles = []) {\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", styles.join(\"; \"));\n  const config = getConfig();\n  let useHtmlLabels = \"useHtmlLabels\" in node ? node.useHtmlLabels : evaluate(config.htmlLabels) ?? true;\n  let textContent = \"\";\n  if (\"text\" in node) {\n    textContent = node.text;\n  } else {\n    textContent = node.label;\n  }\n  if (!useHtmlLabels && textContent.startsWith(\"\\\\\")) {\n    textContent = textContent.substring(1);\n  }\n  if (hasKatex(textContent)) {\n    useHtmlLabels = true;\n  }\n  const text2 = await createText(\n    textEl,\n    sanitizeText2(decodeEntities(textContent)),\n    {\n      width: calculateTextWidth(textContent, config) + 50,\n      // Add room for error when splitting text into multiple lines\n      classes: \"markdown-node-label\",\n      useHtmlLabels\n    },\n    config\n  );\n  let bbox;\n  let numberOfLines = 1;\n  if (!useHtmlLabels) {\n    if (styles.includes(\"font-weight: bolder\")) {\n      select6(text2).selectAll(\"tspan\").attr(\"font-weight\", \"\");\n    }\n    numberOfLines = text2.children.length;\n    const textChild = text2.children[0];\n    if (text2.textContent === \"\" || text2.textContent.includes(\"&gt\")) {\n      textChild.textContent = textContent[0] + textContent.substring(1).replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\").trim();\n      const preserveSpace = textContent[1] === \" \";\n      if (preserveSpace) {\n        textChild.textContent = textChild.textContent[0] + \" \" + textChild.textContent.substring(1);\n      }\n    }\n    if (textChild.textContent === \"undefined\") {\n      textChild.textContent = \"\";\n    }\n    bbox = text2.getBBox();\n  } else {\n    const div = text2.children[0];\n    const dv = select6(text2);\n    numberOfLines = div.innerHTML.split(\"<br>\").length;\n    if (div.innerHTML.includes(\"</math>\")) {\n      numberOfLines += div.innerHTML.split(\"<mrow>\").length - 1;\n    }\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = textContent.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all(\n        [...images].map(\n          (img) => new Promise((res) => {\n            function setupImage() {\n              img.style.display = \"flex\";\n              img.style.flexDirection = \"column\";\n              if (noImgText) {\n                const bodyFontSize = config.fontSize?.toString() ?? window.getComputedStyle(document.body).fontSize;\n                const enlargingFactor = 5;\n                const width = parseInt(bodyFontSize, 10) * enlargingFactor + \"px\";\n                img.style.minWidth = width;\n                img.style.maxWidth = width;\n              } else {\n                img.style.width = \"100%\";\n              }\n              res(img);\n            }\n            __name(setupImage, \"setupImage\");\n            setTimeout(() => {\n              if (img.complete) {\n                setupImage();\n              }\n            });\n            img.addEventListener(\"error\", setupImage);\n            img.addEventListener(\"load\", setupImage);\n          })\n        )\n      );\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", \"translate(0,\" + (-bbox.height / (2 * numberOfLines) + yOffset) + \")\");\n  return bbox.height;\n}\n__name(addText2, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nasync function classBox(parent, node) {\n  const config = getConfig2();\n  const PADDING = config.class.padding ?? 12;\n  const GAP = PADDING;\n  const useHtmlLabels = node.useHtmlLabels ?? evaluate(config.htmlLabels) ?? true;\n  const classNode = node;\n  classNode.annotations = classNode.annotations ?? [];\n  classNode.members = classNode.members ?? [];\n  classNode.methods = classNode.methods ?? [];\n  const { shapeSvg, bbox } = await textHelper(parent, node, config, useHtmlLabels, GAP);\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.cssStyles = classNode.styles || \"\";\n  const styles = classNode.styles?.join(\";\") || nodeStyles || \"\";\n  if (!node.cssStyles) {\n    node.cssStyles = styles.replaceAll(\"!important\", \"\").split(\";\");\n  }\n  const renderExtraBox = classNode.members.length === 0 && classNode.methods.length === 0 && !config.class?.hideEmptyMembersBox;\n  const rc = rough56.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = bbox.width;\n  let h = bbox.height;\n  if (classNode.members.length === 0 && classNode.methods.length === 0) {\n    h += GAP;\n  } else if (classNode.members.length > 0 && classNode.methods.length === 0) {\n    h += GAP * 2;\n  }\n  const x = -w / 2;\n  const y = -h / 2;\n  const roughRect = rc.rectangle(\n    x - PADDING,\n    y - PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0),\n    w + 2 * PADDING,\n    h + 2 * PADDING + (renderExtraBox ? PADDING * 2 : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING : 0),\n    options\n  );\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  const rectBBox = rect2.node().getBBox();\n  shapeSvg.selectAll(\".text\").each((_, i, nodes) => {\n    const text2 = select7(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    let newTranslateY = translateY + y + PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0);\n    if (!useHtmlLabels) {\n      newTranslateY -= 4;\n    }\n    let newTranslateX = x;\n    if (text2.attr(\"class\").includes(\"label-group\") || text2.attr(\"class\").includes(\"annotation-group\")) {\n      newTranslateX = -text2.node()?.getBBox().width / 2 || 0;\n      shapeSvg.selectAll(\"text\").each(function(_2, i2, nodes2) {\n        if (window.getComputedStyle(nodes2[i2]).textAnchor === \"middle\") {\n          newTranslateX = 0;\n        }\n      });\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY})`);\n  });\n  const annotationGroupHeight = shapeSvg.select(\".annotation-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const labelGroupHeight = shapeSvg.select(\".label-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const membersGroupHeight = shapeSvg.select(\".members-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  if (classNode.members.length > 0 || classNode.methods.length > 0 || renderExtraBox) {\n    const roughLine = rc.line(\n      rectBBox.x,\n      annotationGroupHeight + labelGroupHeight + y + PADDING,\n      rectBBox.x + rectBBox.width,\n      annotationGroupHeight + labelGroupHeight + y + PADDING,\n      options\n    );\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (renderExtraBox || classNode.members.length > 0 || classNode.methods.length > 0) {\n    const roughLine = rc.line(\n      rectBBox.x,\n      annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + GAP * 2 + PADDING,\n      rectBBox.x + rectBBox.width,\n      annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + PADDING + GAP * 2,\n      options\n    );\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (classNode.look !== \"handDrawn\") {\n    shapeSvg.selectAll(\"path\").attr(\"style\", styles);\n  }\n  rect2.select(\":nth-child(2)\").attr(\"style\", styles);\n  shapeSvg.selectAll(\".divider\").select(\"path\").attr(\"style\", styles);\n  if (node.labelStyle) {\n    shapeSvg.selectAll(\"span\").attr(\"style\", node.labelStyle);\n  } else {\n    shapeSvg.selectAll(\"span\").attr(\"style\", styles);\n  }\n  if (!useHtmlLabels) {\n    const colorRegex = RegExp(/color\\s*:\\s*([^;]*)/);\n    const match = colorRegex.exec(styles);\n    if (match) {\n      const colorStyle = match[0].replace(\"color\", \"fill\");\n      shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n    } else if (labelStyles) {\n      const match2 = colorRegex.exec(labelStyles);\n      if (match2) {\n        const colorStyle = match2[0].replace(\"color\", \"fill\");\n        shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n      }\n    }\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(classBox, \"classBox\");\n\n// src/rendering-util/rendering-elements/shapes/requirementBox.ts\nimport rough57 from \"roughjs\";\nimport { select as select8 } from \"d3\";\nasync function requirementBox(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const requirementNode = node;\n  const elementNode = node;\n  const padding = 20;\n  const gap = 20;\n  const isRequirementNode = \"verifyMethod\" in node;\n  const classes = getNodeClasses(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId ?? node.id);\n  let typeHeight;\n  if (isRequirementNode) {\n    typeHeight = await addText3(\n      shapeSvg,\n      `&lt;&lt;${requirementNode.type}&gt;&gt;`,\n      0,\n      node.labelStyle\n    );\n  } else {\n    typeHeight = await addText3(shapeSvg, \"&lt;&lt;Element&gt;&gt;\", 0, node.labelStyle);\n  }\n  let accumulativeHeight = typeHeight;\n  const nameHeight = await addText3(\n    shapeSvg,\n    requirementNode.name,\n    accumulativeHeight,\n    node.labelStyle + \"; font-weight: bold;\"\n  );\n  accumulativeHeight += nameHeight + gap;\n  if (isRequirementNode) {\n    const idHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.requirementId ? `ID: ${requirementNode.requirementId}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += idHeight;\n    const textHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.text ? `Text: ${requirementNode.text}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += textHeight;\n    const riskHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.risk ? `Risk: ${requirementNode.risk}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += riskHeight;\n    await addText3(\n      shapeSvg,\n      `${requirementNode.verifyMethod ? `Verification: ${requirementNode.verifyMethod}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n  } else {\n    const typeHeight2 = await addText3(\n      shapeSvg,\n      `${elementNode.type ? `Type: ${elementNode.type}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += typeHeight2;\n    await addText3(\n      shapeSvg,\n      `${elementNode.docRef ? `Doc Ref: ${elementNode.docRef}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n  }\n  const totalWidth = (shapeSvg.node()?.getBBox().width ?? 200) + padding;\n  const totalHeight = (shapeSvg.node()?.getBBox().height ?? 200) + padding;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rc = rough57.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughRect = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n  shapeSvg.selectAll(\".label\").each((_, i, nodes) => {\n    const text2 = select8(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    const newTranslateY = translateY - totalHeight / 2;\n    let newTranslateX = x + padding / 2;\n    if (i === 0 || i === 1) {\n      newTranslateX = translateX;\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY + padding})`);\n  });\n  if (accumulativeHeight > typeHeight + nameHeight + gap) {\n    const roughLine = rc.line(\n      x,\n      y + typeHeight + nameHeight + gap,\n      x + totalWidth,\n      y + typeHeight + nameHeight + gap,\n      options\n    );\n    const dividerLine = shapeSvg.insert(() => roughLine);\n    dividerLine.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(requirementBox, \"requirementBox\");\nasync function addText3(parentGroup, inputText, yOffset, style = \"\") {\n  if (inputText === \"\") {\n    return 0;\n  }\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", style);\n  const config = getConfig2();\n  const useHtmlLabels = config.htmlLabels ?? true;\n  const text2 = await createText(\n    textEl,\n    sanitizeText2(decodeEntities(inputText)),\n    {\n      width: calculateTextWidth(inputText, config) + 50,\n      // Add room for error when splitting text into multiple lines\n      classes: \"markdown-node-label\",\n      useHtmlLabels,\n      style\n    },\n    config\n  );\n  let bbox;\n  if (!useHtmlLabels) {\n    const textChild = text2.children[0];\n    for (const child of textChild.children) {\n      child.textContent = child.textContent.replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\");\n      if (style) {\n        child.setAttribute(\"style\", style);\n      }\n    }\n    bbox = text2.getBBox();\n    bbox.height += 6;\n  } else {\n    const div = text2.children[0];\n    const dv = select8(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", `translate(${-bbox.width / 2},${-bbox.height / 2 + yOffset})`);\n  return bbox.height;\n}\n__name(addText3, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/kanbanItem.ts\nimport rough58 from \"roughjs\";\nvar colorFromPriority = /* @__PURE__ */ __name((priority) => {\n  switch (priority) {\n    case \"Very High\":\n      return \"red\";\n    case \"High\":\n      return \"orange\";\n    case \"Medium\":\n      return null;\n    // no stroke\n    case \"Low\":\n      return \"blue\";\n    case \"Very Low\":\n      return \"lightblue\";\n  }\n}, \"colorFromPriority\");\nasync function kanbanItem(parent, kanbanNode, { config }) {\n  const { labelStyles, nodeStyles } = styles2String(kanbanNode);\n  kanbanNode.labelStyle = labelStyles || \"\";\n  const labelPaddingX = 10;\n  const orgWidth = kanbanNode.width;\n  kanbanNode.width = (kanbanNode.width ?? 200) - 10;\n  const {\n    shapeSvg,\n    bbox,\n    label: labelElTitle\n  } = await labelHelper(parent, kanbanNode, getNodeClasses(kanbanNode));\n  const padding = kanbanNode.padding || 10;\n  let ticketUrl = \"\";\n  let link;\n  if (\"ticket\" in kanbanNode && kanbanNode.ticket && config?.kanban?.ticketBaseUrl) {\n    ticketUrl = config?.kanban?.ticketBaseUrl.replace(\"#TICKET#\", kanbanNode.ticket);\n    link = shapeSvg.insert(\"svg:a\", \":first-child\").attr(\"class\", \"kanban-ticket-link\").attr(\"xlink:href\", ticketUrl).attr(\"target\", \"_blank\");\n  }\n  const options = {\n    useHtmlLabels: kanbanNode.useHtmlLabels,\n    labelStyle: kanbanNode.labelStyle || \"\",\n    width: kanbanNode.width,\n    img: kanbanNode.img,\n    padding: kanbanNode.padding || 8,\n    centerLabel: false\n  };\n  let labelEl, bbox2;\n  if (link) {\n    ({ label: labelEl, bbox: bbox2 } = await insertLabel(\n      link,\n      \"ticket\" in kanbanNode && kanbanNode.ticket || \"\",\n      options\n    ));\n  } else {\n    ({ label: labelEl, bbox: bbox2 } = await insertLabel(\n      shapeSvg,\n      \"ticket\" in kanbanNode && kanbanNode.ticket || \"\",\n      options\n    ));\n  }\n  const { label: labelElAssigned, bbox: bboxAssigned } = await insertLabel(\n    shapeSvg,\n    \"assigned\" in kanbanNode && kanbanNode.assigned || \"\",\n    options\n  );\n  kanbanNode.width = orgWidth;\n  const labelPaddingY = 10;\n  const totalWidth = kanbanNode?.width || 0;\n  const heightAdj = Math.max(bbox2.height, bboxAssigned.height) / 2;\n  const totalHeight = Math.max(bbox.height + labelPaddingY * 2, kanbanNode?.height || 0) + heightAdj;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  labelElTitle.attr(\n    \"transform\",\n    \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj - bbox.height / 2) + \")\"\n  );\n  labelEl.attr(\n    \"transform\",\n    \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj + bbox.height / 2) + \")\"\n  );\n  labelElAssigned.attr(\n    \"transform\",\n    \"translate(\" + (padding + totalWidth / 2 - bboxAssigned.width - 2 * labelPaddingX) + \", \" + (-heightAdj + bbox.height / 2) + \")\"\n  );\n  let rect2;\n  const { rx, ry } = kanbanNode;\n  const { cssStyles } = kanbanNode;\n  if (kanbanNode.look === \"handDrawn\") {\n    const rc = rough58.svg(shapeSvg);\n    const options2 = userNodeOverrides(kanbanNode, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", cssStyles ? cssStyles : null);\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container __APA__\").attr(\"style\", nodeStyles).attr(\"rx\", rx ?? 5).attr(\"ry\", ry ?? 5).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n    const priority = \"priority\" in kanbanNode && kanbanNode.priority;\n    if (priority) {\n      const line = shapeSvg.append(\"line\");\n      const lineX = x + 2;\n      const y1 = y + Math.floor((rx ?? 0) / 2);\n      const y2 = y + totalHeight - Math.floor((rx ?? 0) / 2);\n      line.attr(\"x1\", lineX).attr(\"y1\", y1).attr(\"x2\", lineX).attr(\"y2\", y2).attr(\"stroke-width\", \"4\").attr(\"stroke\", colorFromPriority(priority));\n    }\n  }\n  updateNodeBounds(kanbanNode, rect2);\n  kanbanNode.height = totalHeight;\n  kanbanNode.intersect = function(point) {\n    return intersect_default.rect(kanbanNode, point);\n  };\n  return shapeSvg;\n}\n__name(kanbanItem, \"kanbanItem\");\n\n// src/rendering-util/rendering-elements/shapes/bang.ts\nimport rough59 from \"roughjs\";\nasync function bang(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    getNodeClasses(node)\n  );\n  const w = bbox.width + 10 * halfPadding;\n  const h = bbox.height + 8 * halfPadding;\n  const r = 0.15 * w;\n  const { cssStyles } = node;\n  const minWidth = bbox.width + 20;\n  const minHeight = bbox.height + 20;\n  const effectiveWidth = Math.max(w, minWidth);\n  const effectiveHeight = Math.max(h, minHeight);\n  label.attr(\"transform\", `translate(${-bbox.width / 2}, ${-bbox.height / 2})`);\n  let bangElem;\n  const path = `M0 0 \n    a${r},${r} 1 0,0 ${effectiveWidth * 0.25},${-1 * effectiveHeight * 0.1}\n    a${r},${r} 1 0,0 ${effectiveWidth * 0.25},${0}\n    a${r},${r} 1 0,0 ${effectiveWidth * 0.25},${0}\n    a${r},${r} 1 0,0 ${effectiveWidth * 0.25},${effectiveHeight * 0.1}\n\n    a${r},${r} 1 0,0 ${effectiveWidth * 0.15},${effectiveHeight * 0.33}\n    a${r * 0.8},${r * 0.8} 1 0,0 0,${effectiveHeight * 0.34}\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.15},${effectiveHeight * 0.33}\n\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.25},${effectiveHeight * 0.15}\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.25},0\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.25},0\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.25},${-1 * effectiveHeight * 0.15}\n\n    a${r},${r} 1 0,0 ${-1 * effectiveWidth * 0.1},${-1 * effectiveHeight * 0.33}\n    a${r * 0.8},${r * 0.8} 1 0,0 0,${-1 * effectiveHeight * 0.34}\n    a${r},${r} 1 0,0 ${effectiveWidth * 0.1},${-1 * effectiveHeight * 0.33}\n  H0 V0 Z`;\n  if (node.look === \"handDrawn\") {\n    const rc = rough59.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(path, options);\n    bangElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    bangElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    bangElem = shapeSvg.insert(\"path\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"d\", path);\n  }\n  bangElem.attr(\"transform\", `translate(${-effectiveWidth / 2}, ${-effectiveHeight / 2})`);\n  updateNodeBounds(node, bangElem);\n  node.calcIntersect = function(bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function(point) {\n    log.info(\"Bang intersect\", node, point);\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(bang, \"bang\");\n\n// src/rendering-util/rendering-elements/shapes/cloud.ts\nimport rough60 from \"roughjs\";\nasync function cloud(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    getNodeClasses(node)\n  );\n  const w = bbox.width + 2 * halfPadding;\n  const h = bbox.height + 2 * halfPadding;\n  const r1 = 0.15 * w;\n  const r2 = 0.25 * w;\n  const r3 = 0.35 * w;\n  const r4 = 0.2 * w;\n  const { cssStyles } = node;\n  let cloudElem;\n  const path = `M0 0 \n    a${r1},${r1} 0 0,1 ${w * 0.25},${-1 * w * 0.1}\n    a${r3},${r3} 1 0,1 ${w * 0.4},${-1 * w * 0.1}\n    a${r2},${r2} 1 0,1 ${w * 0.35},${w * 0.2}\n\n    a${r1},${r1} 1 0,1 ${w * 0.15},${h * 0.35}\n    a${r4},${r4} 1 0,1 ${-1 * w * 0.15},${h * 0.65}\n\n    a${r2},${r1} 1 0,1 ${-1 * w * 0.25},${w * 0.15}\n    a${r3},${r3} 1 0,1 ${-1 * w * 0.5},0\n    a${r1},${r1} 1 0,1 ${-1 * w * 0.25},${-1 * w * 0.15}\n\n    a${r1},${r1} 1 0,1 ${-1 * w * 0.1},${-1 * h * 0.35}\n    a${r4},${r4} 1 0,1 ${w * 0.1},${-1 * h * 0.65}\n  H0 V0 Z`;\n  if (node.look === \"handDrawn\") {\n    const rc = rough60.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(path, options);\n    cloudElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    cloudElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    cloudElem = shapeSvg.insert(\"path\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"d\", path);\n  }\n  label.attr(\"transform\", `translate(${-bbox.width / 2}, ${-bbox.height / 2})`);\n  cloudElem.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, cloudElem);\n  node.calcIntersect = function(bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function(point) {\n    log.info(\"Cloud intersect\", node, point);\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(cloud, \"cloud\");\n\n// src/rendering-util/rendering-elements/shapes/defaultMindmapNode.ts\nasync function defaultMindmapNode(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    getNodeClasses(node)\n  );\n  const w = bbox.width + 8 * halfPadding;\n  const h = bbox.height + 2 * halfPadding;\n  const rd = 5;\n  const rectPath = `\n    M${-w / 2} ${h / 2 - rd}\n    v${-h + 2 * rd}\n    q0,-${rd} ${rd},-${rd}\n    h${w - 2 * rd}\n    q${rd},0 ${rd},${rd}\n    v${h - 2 * rd}\n    q0,${rd} -${rd},${rd}\n    h${-w + 2 * rd}\n    q-${rd},0 -${rd},-${rd}\n    Z\n  `;\n  const bg = shapeSvg.append(\"path\").attr(\"id\", \"node-\" + node.id).attr(\"class\", \"node-bkg node-\" + node.type).attr(\"style\", nodeStyles).attr(\"d\", rectPath);\n  shapeSvg.append(\"line\").attr(\"class\", \"node-line-\").attr(\"x1\", -w / 2).attr(\"y1\", h / 2).attr(\"x2\", w / 2).attr(\"y2\", h / 2);\n  label.attr(\"transform\", `translate(${-bbox.width / 2}, ${-bbox.height / 2})`);\n  shapeSvg.append(() => label.node());\n  updateNodeBounds(node, bg);\n  node.calcIntersect = function(bounds, point) {\n    return intersect_default.rect(bounds, point);\n  };\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(defaultMindmapNode, \"defaultMindmapNode\");\n\n// src/rendering-util/rendering-elements/shapes/mindmapCircle.ts\nasync function mindmapCircle(parent, node) {\n  const options = {\n    padding: node.padding ?? 0\n  };\n  return circle(parent, node, options);\n}\n__name(mindmapCircle, \"mindmapCircle\");\n\n// src/rendering-util/rendering-elements/shapes.ts\nvar shapesDefs = [\n  {\n    semanticName: \"Process\",\n    name: \"Rectangle\",\n    shortName: \"rect\",\n    description: \"Standard process shape\",\n    aliases: [\"proc\", \"process\", \"rectangle\"],\n    internalAliases: [\"squareRect\"],\n    handler: squareRect2\n  },\n  {\n    semanticName: \"Event\",\n    name: \"Rounded Rectangle\",\n    shortName: \"rounded\",\n    description: \"Represents an event\",\n    aliases: [\"event\"],\n    internalAliases: [\"roundedRect\"],\n    handler: roundedRect\n  },\n  {\n    semanticName: \"Terminal Point\",\n    name: \"Stadium\",\n    shortName: \"stadium\",\n    description: \"Terminal point\",\n    aliases: [\"terminal\", \"pill\"],\n    handler: stadium\n  },\n  {\n    semanticName: \"Subprocess\",\n    name: \"Framed Rectangle\",\n    shortName: \"fr-rect\",\n    description: \"Subprocess\",\n    aliases: [\"subprocess\", \"subproc\", \"framed-rectangle\", \"subroutine\"],\n    handler: subroutine\n  },\n  {\n    semanticName: \"Database\",\n    name: \"Cylinder\",\n    shortName: \"cyl\",\n    description: \"Database storage\",\n    aliases: [\"db\", \"database\", \"cylinder\"],\n    handler: cylinder\n  },\n  {\n    semanticName: \"Start\",\n    name: \"Circle\",\n    shortName: \"circle\",\n    description: \"Starting point\",\n    aliases: [\"circ\"],\n    handler: circle\n  },\n  {\n    semanticName: \"Bang\",\n    name: \"Bang\",\n    shortName: \"bang\",\n    description: \"Bang\",\n    aliases: [\"bang\"],\n    handler: bang\n  },\n  {\n    semanticName: \"Cloud\",\n    name: \"Cloud\",\n    shortName: \"cloud\",\n    description: \"cloud\",\n    aliases: [\"cloud\"],\n    handler: cloud\n  },\n  {\n    semanticName: \"Decision\",\n    name: \"Diamond\",\n    shortName: \"diam\",\n    description: \"Decision-making step\",\n    aliases: [\"decision\", \"diamond\", \"question\"],\n    handler: question\n  },\n  {\n    semanticName: \"Prepare Conditional\",\n    name: \"Hexagon\",\n    shortName: \"hex\",\n    description: \"Preparation or condition step\",\n    aliases: [\"hexagon\", \"prepare\"],\n    handler: hexagon\n  },\n  {\n    semanticName: \"Data Input/Output\",\n    name: \"Lean Right\",\n    shortName: \"lean-r\",\n    description: \"Represents input or output\",\n    aliases: [\"lean-right\", \"in-out\"],\n    internalAliases: [\"lean_right\"],\n    handler: lean_right\n  },\n  {\n    semanticName: \"Data Input/Output\",\n    name: \"Lean Left\",\n    shortName: \"lean-l\",\n    description: \"Represents output or input\",\n    aliases: [\"lean-left\", \"out-in\"],\n    internalAliases: [\"lean_left\"],\n    handler: lean_left\n  },\n  {\n    semanticName: \"Priority Action\",\n    name: \"Trapezoid Base Bottom\",\n    shortName: \"trap-b\",\n    description: \"Priority action\",\n    aliases: [\"priority\", \"trapezoid-bottom\", \"trapezoid\"],\n    handler: trapezoid\n  },\n  {\n    semanticName: \"Manual Operation\",\n    name: \"Trapezoid Base Top\",\n    shortName: \"trap-t\",\n    description: \"Represents a manual task\",\n    aliases: [\"manual\", \"trapezoid-top\", \"inv-trapezoid\"],\n    internalAliases: [\"inv_trapezoid\"],\n    handler: inv_trapezoid\n  },\n  {\n    semanticName: \"Stop\",\n    name: \"Double Circle\",\n    shortName: \"dbl-circ\",\n    description: \"Represents a stop point\",\n    aliases: [\"double-circle\"],\n    internalAliases: [\"doublecircle\"],\n    handler: doublecircle\n  },\n  {\n    semanticName: \"Text Block\",\n    name: \"Text Block\",\n    shortName: \"text\",\n    description: \"Text block\",\n    handler: text\n  },\n  {\n    semanticName: \"Card\",\n    name: \"Notched Rectangle\",\n    shortName: \"notch-rect\",\n    description: \"Represents a card\",\n    aliases: [\"card\", \"notched-rectangle\"],\n    handler: card\n  },\n  {\n    semanticName: \"Lined/Shaded Process\",\n    name: \"Lined Rectangle\",\n    shortName: \"lin-rect\",\n    description: \"Lined process shape\",\n    aliases: [\"lined-rectangle\", \"lined-process\", \"lin-proc\", \"shaded-process\"],\n    handler: shadedProcess\n  },\n  {\n    semanticName: \"Start\",\n    name: \"Small Circle\",\n    shortName: \"sm-circ\",\n    description: \"Small starting point\",\n    aliases: [\"start\", \"small-circle\"],\n    internalAliases: [\"stateStart\"],\n    handler: stateStart\n  },\n  {\n    semanticName: \"Stop\",\n    name: \"Framed Circle\",\n    shortName: \"fr-circ\",\n    description: \"Stop point\",\n    aliases: [\"stop\", \"framed-circle\"],\n    internalAliases: [\"stateEnd\"],\n    handler: stateEnd\n  },\n  {\n    semanticName: \"Fork/Join\",\n    name: \"Filled Rectangle\",\n    shortName: \"fork\",\n    description: \"Fork or join in process flow\",\n    aliases: [\"join\"],\n    internalAliases: [\"forkJoin\"],\n    handler: forkJoin\n  },\n  {\n    semanticName: \"Collate\",\n    name: \"Hourglass\",\n    shortName: \"hourglass\",\n    description: \"Represents a collate operation\",\n    aliases: [\"hourglass\", \"collate\"],\n    handler: hourglass\n  },\n  {\n    semanticName: \"Comment\",\n    name: \"Curly Brace\",\n    shortName: \"brace\",\n    description: \"Adds a comment\",\n    aliases: [\"comment\", \"brace-l\"],\n    handler: curlyBraceLeft\n  },\n  {\n    semanticName: \"Comment Right\",\n    name: \"Curly Brace\",\n    shortName: \"brace-r\",\n    description: \"Adds a comment\",\n    handler: curlyBraceRight\n  },\n  {\n    semanticName: \"Comment with braces on both sides\",\n    name: \"Curly Braces\",\n    shortName: \"braces\",\n    description: \"Adds a comment\",\n    handler: curlyBraces\n  },\n  {\n    semanticName: \"Com Link\",\n    name: \"Lightning Bolt\",\n    shortName: \"bolt\",\n    description: \"Communication link\",\n    aliases: [\"com-link\", \"lightning-bolt\"],\n    handler: lightningBolt\n  },\n  {\n    semanticName: \"Document\",\n    name: \"Document\",\n    shortName: \"doc\",\n    description: \"Represents a document\",\n    aliases: [\"doc\", \"document\"],\n    handler: waveEdgedRectangle\n  },\n  {\n    semanticName: \"Delay\",\n    name: \"Half-Rounded Rectangle\",\n    shortName: \"delay\",\n    description: \"Represents a delay\",\n    aliases: [\"half-rounded-rectangle\"],\n    handler: halfRoundedRectangle\n  },\n  {\n    semanticName: \"Direct Access Storage\",\n    name: \"Horizontal Cylinder\",\n    shortName: \"h-cyl\",\n    description: \"Direct access storage\",\n    aliases: [\"das\", \"horizontal-cylinder\"],\n    handler: tiltedCylinder\n  },\n  {\n    semanticName: \"Disk Storage\",\n    name: \"Lined Cylinder\",\n    shortName: \"lin-cyl\",\n    description: \"Disk storage\",\n    aliases: [\"disk\", \"lined-cylinder\"],\n    handler: linedCylinder\n  },\n  {\n    semanticName: \"Display\",\n    name: \"Curved Trapezoid\",\n    shortName: \"curv-trap\",\n    description: \"Represents a display\",\n    aliases: [\"curved-trapezoid\", \"display\"],\n    handler: curvedTrapezoid\n  },\n  {\n    semanticName: \"Divided Process\",\n    name: \"Divided Rectangle\",\n    shortName: \"div-rect\",\n    description: \"Divided process shape\",\n    aliases: [\"div-proc\", \"divided-rectangle\", \"divided-process\"],\n    handler: dividedRectangle\n  },\n  {\n    semanticName: \"Extract\",\n    name: \"Triangle\",\n    shortName: \"tri\",\n    description: \"Extraction process\",\n    aliases: [\"extract\", \"triangle\"],\n    handler: triangle\n  },\n  {\n    semanticName: \"Internal Storage\",\n    name: \"Window Pane\",\n    shortName: \"win-pane\",\n    description: \"Internal storage\",\n    aliases: [\"internal-storage\", \"window-pane\"],\n    handler: windowPane\n  },\n  {\n    semanticName: \"Junction\",\n    name: \"Filled Circle\",\n    shortName: \"f-circ\",\n    description: \"Junction point\",\n    aliases: [\"junction\", \"filled-circle\"],\n    handler: filledCircle\n  },\n  {\n    semanticName: \"Loop Limit\",\n    name: \"Trapezoidal Pentagon\",\n    shortName: \"notch-pent\",\n    description: \"Loop limit step\",\n    aliases: [\"loop-limit\", \"notched-pentagon\"],\n    handler: trapezoidalPentagon\n  },\n  {\n    semanticName: \"Manual File\",\n    name: \"Flipped Triangle\",\n    shortName: \"flip-tri\",\n    description: \"Manual file operation\",\n    aliases: [\"manual-file\", \"flipped-triangle\"],\n    handler: flippedTriangle\n  },\n  {\n    semanticName: \"Manual Input\",\n    name: \"Sloped Rectangle\",\n    shortName: \"sl-rect\",\n    description: \"Manual input step\",\n    aliases: [\"manual-input\", \"sloped-rectangle\"],\n    handler: slopedRect\n  },\n  {\n    semanticName: \"Multi-Document\",\n    name: \"Stacked Document\",\n    shortName: \"docs\",\n    description: \"Multiple documents\",\n    aliases: [\"documents\", \"st-doc\", \"stacked-document\"],\n    handler: multiWaveEdgedRectangle\n  },\n  {\n    semanticName: \"Multi-Process\",\n    name: \"Stacked Rectangle\",\n    shortName: \"st-rect\",\n    description: \"Multiple processes\",\n    aliases: [\"procs\", \"processes\", \"stacked-rectangle\"],\n    handler: multiRect\n  },\n  {\n    semanticName: \"Stored Data\",\n    name: \"Bow Tie Rectangle\",\n    shortName: \"bow-rect\",\n    description: \"Stored data\",\n    aliases: [\"stored-data\", \"bow-tie-rectangle\"],\n    handler: bowTieRect\n  },\n  {\n    semanticName: \"Summary\",\n    name: \"Crossed Circle\",\n    shortName: \"cross-circ\",\n    description: \"Summary\",\n    aliases: [\"summary\", \"crossed-circle\"],\n    handler: crossedCircle\n  },\n  {\n    semanticName: \"Tagged Document\",\n    name: \"Tagged Document\",\n    shortName: \"tag-doc\",\n    description: \"Tagged document\",\n    aliases: [\"tag-doc\", \"tagged-document\"],\n    handler: taggedWaveEdgedRectangle\n  },\n  {\n    semanticName: \"Tagged Process\",\n    name: \"Tagged Rectangle\",\n    shortName: \"tag-rect\",\n    description: \"Tagged process\",\n    aliases: [\"tagged-rectangle\", \"tag-proc\", \"tagged-process\"],\n    handler: taggedRect\n  },\n  {\n    semanticName: \"Paper Tape\",\n    name: \"Flag\",\n    shortName: \"flag\",\n    description: \"Paper tape\",\n    aliases: [\"paper-tape\"],\n    handler: waveRectangle\n  },\n  {\n    semanticName: \"Odd\",\n    name: \"Odd\",\n    shortName: \"odd\",\n    description: \"Odd shape\",\n    internalAliases: [\"rect_left_inv_arrow\"],\n    handler: rect_left_inv_arrow\n  },\n  {\n    semanticName: \"Lined Document\",\n    name: \"Lined Document\",\n    shortName: \"lin-doc\",\n    description: \"Lined document\",\n    aliases: [\"lined-document\"],\n    handler: linedWaveEdgedRect\n  }\n];\nvar generateShapeMap = /* @__PURE__ */ __name(() => {\n  const undocumentedShapes = {\n    // States\n    state,\n    choice,\n    note,\n    // Rectangles\n    rectWithTitle,\n    labelRect,\n    // Icons\n    iconSquare,\n    iconCircle,\n    icon,\n    iconRounded,\n    imageSquare,\n    anchor,\n    // Kanban diagram\n    kanbanItem,\n    //Mindmap diagram\n    mindmapCircle,\n    defaultMindmapNode,\n    // class diagram\n    classBox,\n    // er diagram\n    erBox,\n    // Requirement diagram\n    requirementBox\n  };\n  const entries = [\n    ...Object.entries(undocumentedShapes),\n    ...shapesDefs.flatMap((shape) => {\n      const aliases = [\n        shape.shortName,\n        ...\"aliases\" in shape ? shape.aliases : [],\n        ...\"internalAliases\" in shape ? shape.internalAliases : []\n      ];\n      return aliases.map((alias) => [alias, shape.handler]);\n    })\n  ];\n  return Object.fromEntries(entries);\n}, \"generateShapeMap\");\nvar shapes2 = generateShapeMap();\nfunction isValidShape(shape) {\n  return shape in shapes2;\n}\n__name(isValidShape, \"isValidShape\");\n\n// src/rendering-util/rendering-elements/nodes.ts\nvar nodeElems = /* @__PURE__ */ new Map();\nasync function insertNode(elem, node, renderOptions) {\n  let newEl;\n  let el;\n  if (node.shape === \"rect\") {\n    if (node.rx && node.ry) {\n      node.shape = \"roundedRect\";\n    } else {\n      node.shape = \"squareRect\";\n    }\n  }\n  const shapeHandler = node.shape ? shapes2[node.shape] : void 0;\n  if (!shapeHandler) {\n    throw new Error(`No such shape: ${node.shape}. Please check your syntax.`);\n  }\n  if (node.link) {\n    let target;\n    if (renderOptions.config.securityLevel === \"sandbox\") {\n      target = \"_top\";\n    } else if (node.linkTarget) {\n      target = node.linkTarget || \"_blank\";\n    }\n    newEl = elem.insert(\"svg:a\").attr(\"xlink:href\", node.link).attr(\"target\", target ?? null);\n    el = await shapeHandler(newEl, node, renderOptions);\n  } else {\n    el = await shapeHandler(elem, node, renderOptions);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr(\"title\", node.tooltip);\n  }\n  nodeElems.set(node.id, newEl);\n  if (node.haveCallback) {\n    newEl.attr(\"class\", newEl.attr(\"class\") + \" clickable\");\n  }\n  return newEl;\n}\n__name(insertNode, \"insertNode\");\nvar setNodeElem = /* @__PURE__ */ __name((elem, node) => {\n  nodeElems.set(node.id, elem);\n}, \"setNodeElem\");\nvar clear2 = /* @__PURE__ */ __name(() => {\n  nodeElems.clear();\n}, \"clear\");\nvar positionNode = /* @__PURE__ */ __name((node) => {\n  const el = nodeElems.get(node.id);\n  log.trace(\n    \"Transforming node\",\n    node.diff,\n    node,\n    \"translate(\" + (node.x - node.width / 2 - 5) + \", \" + node.width / 2 + \")\"\n  );\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\n      \"transform\",\n      \"translate(\" + (node.x + diff - node.width / 2) + \", \" + (node.y - node.height / 2 - padding) + \")\"\n    );\n  } else {\n    el.attr(\"transform\", \"translate(\" + node.x + \", \" + node.y + \")\");\n  }\n  return diff;\n}, \"positionNode\");\n\nexport {\n  labelHelper,\n  updateNodeBounds,\n  createLabel_default,\n  isValidShape,\n  insertCluster,\n  clear,\n  insertNode,\n  setNodeElem,\n  clear2,\n  positionNode\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}