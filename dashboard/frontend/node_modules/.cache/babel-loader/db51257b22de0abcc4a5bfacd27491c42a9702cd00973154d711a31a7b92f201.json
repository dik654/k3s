{"ast":null,"code":"import _objectSpread from \"/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _Class;\nimport { selectSvgElement } from \"./chunk-EXTU4WIE.mjs\";\nimport { setupViewPortForSVG } from \"./chunk-QN33PNHL.mjs\";\nimport { isLabelStyle, styles2String } from \"./chunk-ATLVNIR6.mjs\";\nimport { populateCommonDb } from \"./chunk-4BX2VUAB.mjs\";\nimport { cleanAndMerge } from \"./chunk-S3R3BYOJ.mjs\";\nimport { clear, configureSvgSize, defaultConfig_default, getAccDescription, getAccTitle, getConfig, getDiagramTitle, setAccDescription, setAccTitle, setDiagramTitle } from \"./chunk-ABZYJK2D.mjs\";\nimport { __name, log } from \"./chunk-AGHRB4JF.mjs\";\n\n// src/diagrams/treemap/db.ts\nvar TreeMapDB = (_Class = class TreeMapDB {\n  constructor() {\n    this.nodes = [];\n    this.levels = /* @__PURE__ */new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */new Map();\n    this.setAccTitle = setAccTitle;\n    this.getAccTitle = getAccTitle;\n    this.setDiagramTitle = setDiagramTitle;\n    this.getDiagramTitle = getDiagramTitle;\n    this.getAccDescription = getAccDescription;\n    this.setAccDescription = setAccDescription;\n  }\n  getNodes() {\n    return this.nodes;\n  }\n  getConfig() {\n    var _userConfig$treemap;\n    const defaultConfig = defaultConfig_default;\n    const userConfig = getConfig();\n    return cleanAndMerge(_objectSpread(_objectSpread({}, defaultConfig.treemap), (_userConfig$treemap = userConfig.treemap) !== null && _userConfig$treemap !== void 0 ? _userConfig$treemap : {}));\n  }\n  addNode(node, level) {\n    this.nodes.push(node);\n    this.levels.set(node, level);\n    if (level === 0) {\n      var _this$root;\n      this.outerNodes.push(node);\n      (_this$root = this.root) !== null && _this$root !== void 0 ? _this$root : this.root = node;\n    }\n  }\n  getRoot() {\n    return {\n      name: \"\",\n      children: this.outerNodes\n    };\n  }\n  addClass(id, _style) {\n    var _this$classes$get;\n    const styleClass = (_this$classes$get = this.classes.get(id)) !== null && _this$classes$get !== void 0 ? _this$classes$get : {\n      id,\n      styles: [],\n      textStyles: []\n    };\n    const styles = _style.replace(/\\\\,/g, \"\\xA7\\xA7\\xA7\").replace(/,/g, \";\").replace(/§§§/g, \",\").split(\";\");\n    if (styles) {\n      styles.forEach(s => {\n        if (isLabelStyle(s)) {\n          if (styleClass !== null && styleClass !== void 0 && styleClass.textStyles) {\n            styleClass.textStyles.push(s);\n          } else {\n            styleClass.textStyles = [s];\n          }\n        }\n        if (styleClass !== null && styleClass !== void 0 && styleClass.styles) {\n          styleClass.styles.push(s);\n        } else {\n          styleClass.styles = [s];\n        }\n      });\n    }\n    this.classes.set(id, styleClass);\n  }\n  getClasses() {\n    return this.classes;\n  }\n  getStylesForClass(classSelector) {\n    var _this$classes$get$sty, _this$classes$get2;\n    return (_this$classes$get$sty = (_this$classes$get2 = this.classes.get(classSelector)) === null || _this$classes$get2 === void 0 ? void 0 : _this$classes$get2.styles) !== null && _this$classes$get$sty !== void 0 ? _this$classes$get$sty : [];\n  }\n  clear() {\n    clear();\n    this.nodes = [];\n    this.levels = /* @__PURE__ */new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */new Map();\n    this.root = void 0;\n  }\n}, __name(_Class, \"TreeMapDB\"), _Class);\n\n// src/diagrams/treemap/parser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/treemap/utils.ts\nfunction buildHierarchy(items) {\n  if (!items.length) {\n    return [];\n  }\n  const root = [];\n  const stack = [];\n  items.forEach(item => {\n    const node = {\n      name: item.name,\n      children: item.type === \"Leaf\" ? void 0 : []\n    };\n    node.classSelector = item === null || item === void 0 ? void 0 : item.classSelector;\n    if (item !== null && item !== void 0 && item.cssCompiledStyles) {\n      node.cssCompiledStyles = [item.cssCompiledStyles];\n    }\n    if (item.type === \"Leaf\" && item.value !== void 0) {\n      node.value = item.value;\n    }\n    while (stack.length > 0 && stack[stack.length - 1].level >= item.level) {\n      stack.pop();\n    }\n    if (stack.length === 0) {\n      root.push(node);\n    } else {\n      const parent = stack[stack.length - 1].node;\n      if (parent.children) {\n        parent.children.push(node);\n      } else {\n        parent.children = [node];\n      }\n    }\n    if (item.type !== \"Leaf\") {\n      stack.push({\n        node,\n        level: item.level\n      });\n    }\n  });\n  return root;\n}\n__name(buildHierarchy, \"buildHierarchy\");\n\n// src/diagrams/treemap/parser.ts\nvar populate = /* @__PURE__ */__name((ast, db) => {\n  populateCommonDb(ast, db);\n  const items = [];\n  for (const row of (_ast$TreemapRows = ast.TreemapRows) !== null && _ast$TreemapRows !== void 0 ? _ast$TreemapRows : []) {\n    var _ast$TreemapRows;\n    if (row.$type === \"ClassDefStatement\") {\n      var _row$className, _row$styleText;\n      db.addClass((_row$className = row.className) !== null && _row$className !== void 0 ? _row$className : \"\", (_row$styleText = row.styleText) !== null && _row$styleText !== void 0 ? _row$styleText : \"\");\n    }\n  }\n  for (const row of (_ast$TreemapRows2 = ast.TreemapRows) !== null && _ast$TreemapRows2 !== void 0 ? _ast$TreemapRows2 : []) {\n    var _ast$TreemapRows2;\n    const item = row.item;\n    if (!item) {\n      continue;\n    }\n    const level = row.indent ? parseInt(row.indent) : 0;\n    const name = getItemName(item);\n    const styles = item.classSelector ? db.getStylesForClass(item.classSelector) : [];\n    const cssCompiledStyles = styles.length > 0 ? styles.join(\";\") : void 0;\n    const itemData = {\n      level,\n      name,\n      type: item.$type,\n      value: item.value,\n      classSelector: item.classSelector,\n      cssCompiledStyles\n    };\n    items.push(itemData);\n  }\n  const hierarchyNodes = buildHierarchy(items);\n  const addNodesRecursively = /* @__PURE__ */__name((nodes, level) => {\n    for (const node of nodes) {\n      db.addNode(node, level);\n      if (node.children && node.children.length > 0) {\n        addNodesRecursively(node.children, level + 1);\n      }\n    }\n  }, \"addNodesRecursively\");\n  addNodesRecursively(hierarchyNodes, 0);\n}, \"populate\");\nvar getItemName = /* @__PURE__ */__name(item => {\n  return item.name ? String(item.name) : \"\";\n}, \"getItemName\");\nvar parser = {\n  // @ts-expect-error - TreeMapDB is not assignable to DiagramDB\n  parser: {\n    yy: void 0\n  },\n  parse: /* @__PURE__ */__name(async text => {\n    try {\n      var _parser$parser;\n      const parseFunc = parse;\n      const ast = await parseFunc(\"treemap\", text);\n      log.debug(\"Treemap AST:\", ast);\n      const db = (_parser$parser = parser.parser) === null || _parser$parser === void 0 ? void 0 : _parser$parser.yy;\n      if (!(db instanceof TreeMapDB)) {\n        throw new Error(\"parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.\");\n      }\n      populate(ast, db);\n    } catch (error) {\n      log.error(\"Error parsing treemap:\", error);\n      throw error;\n    }\n  }, \"parse\")\n};\n\n// src/diagrams/treemap/renderer.ts\nimport { scaleOrdinal, treemap, hierarchy, format, select } from \"d3\";\nvar DEFAULT_INNER_PADDING = 10;\nvar SECTION_INNER_PADDING = 10;\nvar SECTION_HEADER_HEIGHT = 25;\nvar draw = /* @__PURE__ */__name((_text, id, _version, diagram2) => {\n  var _config$padding, _config$diagramPaddin;\n  const treemapDb = diagram2.db;\n  const config = treemapDb.getConfig();\n  const treemapInnerPadding = (_config$padding = config.padding) !== null && _config$padding !== void 0 ? _config$padding : DEFAULT_INNER_PADDING;\n  const title = treemapDb.getDiagramTitle();\n  const root = treemapDb.getRoot();\n  const {\n    themeVariables\n  } = getConfig();\n  if (!root) {\n    return;\n  }\n  const titleHeight = title ? 30 : 0;\n  const svg = selectSvgElement(id);\n  const width = config.nodeWidth ? config.nodeWidth * SECTION_INNER_PADDING : 960;\n  const height = config.nodeHeight ? config.nodeHeight * SECTION_INNER_PADDING : 500;\n  const svgWidth = width;\n  const svgHeight = height + titleHeight;\n  svg.attr(\"viewBox\", \"0 0 \".concat(svgWidth, \" \").concat(svgHeight));\n  configureSvgSize(svg, svgHeight, svgWidth, config.useMaxWidth);\n  let valueFormat;\n  try {\n    const formatStr = config.valueFormat || \",\";\n    if (formatStr === \"$0,0\") {\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(\",\")(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\") && formatStr.includes(\",\")) {\n      const precision = /\\.\\d+/.exec(formatStr);\n      const precisionStr = precision ? precision[0] : \"\";\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(\",\" + precisionStr)(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\")) {\n      const restOfFormat = formatStr.substring(1);\n      valueFormat = /* @__PURE__ */__name(value => \"$\" + format(restOfFormat || \"\")(value), \"valueFormat\");\n    } else {\n      valueFormat = format(formatStr);\n    }\n  } catch (error) {\n    log.error(\"Error creating format function:\", error);\n    valueFormat = format(\",\");\n  }\n  const colorScale = scaleOrdinal().range([\"transparent\", themeVariables.cScale0, themeVariables.cScale1, themeVariables.cScale2, themeVariables.cScale3, themeVariables.cScale4, themeVariables.cScale5, themeVariables.cScale6, themeVariables.cScale7, themeVariables.cScale8, themeVariables.cScale9, themeVariables.cScale10, themeVariables.cScale11]);\n  const colorScalePeer = scaleOrdinal().range([\"transparent\", themeVariables.cScalePeer0, themeVariables.cScalePeer1, themeVariables.cScalePeer2, themeVariables.cScalePeer3, themeVariables.cScalePeer4, themeVariables.cScalePeer5, themeVariables.cScalePeer6, themeVariables.cScalePeer7, themeVariables.cScalePeer8, themeVariables.cScalePeer9, themeVariables.cScalePeer10, themeVariables.cScalePeer11]);\n  const colorScaleLabel = scaleOrdinal().range([themeVariables.cScaleLabel0, themeVariables.cScaleLabel1, themeVariables.cScaleLabel2, themeVariables.cScaleLabel3, themeVariables.cScaleLabel4, themeVariables.cScaleLabel5, themeVariables.cScaleLabel6, themeVariables.cScaleLabel7, themeVariables.cScaleLabel8, themeVariables.cScaleLabel9, themeVariables.cScaleLabel10, themeVariables.cScaleLabel11]);\n  if (title) {\n    svg.append(\"text\").attr(\"x\", svgWidth / 2).attr(\"y\", titleHeight / 2).attr(\"class\", \"treemapTitle\").attr(\"text-anchor\", \"middle\").attr(\"dominant-baseline\", \"middle\").text(title);\n  }\n  const g = svg.append(\"g\").attr(\"transform\", \"translate(0, \".concat(titleHeight, \")\")).attr(\"class\", \"treemapContainer\");\n  const hierarchyRoot = hierarchy(root).sum(d => {\n    var _d$value;\n    return (_d$value = d.value) !== null && _d$value !== void 0 ? _d$value : 0;\n  }).sort((a, b) => {\n    var _b$value, _a$value;\n    return ((_b$value = b.value) !== null && _b$value !== void 0 ? _b$value : 0) - ((_a$value = a.value) !== null && _a$value !== void 0 ? _a$value : 0);\n  });\n  const treemapLayout = treemap().size([width, height]).paddingTop(d => d.children && d.children.length > 0 ? SECTION_HEADER_HEIGHT + SECTION_INNER_PADDING : 0).paddingInner(treemapInnerPadding).paddingLeft(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingRight(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingBottom(d => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).round(true);\n  const treemapData = treemapLayout(hierarchyRoot);\n  const branchNodes = treemapData.descendants().filter(d => d.children && d.children.length > 0);\n  const sections = g.selectAll(\".treemapSection\").data(branchNodes).enter().append(\"g\").attr(\"class\", \"treemapSection\").attr(\"transform\", d => \"translate(\".concat(d.x0, \",\").concat(d.y0, \")\"));\n  sections.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", SECTION_HEADER_HEIGHT).attr(\"class\", \"treemapSectionHeader\").attr(\"fill\", \"none\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 0.6).attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    return \"\";\n  });\n  sections.append(\"clipPath\").attr(\"id\", (_d, i) => \"clip-section-\".concat(id, \"-\").concat(i)).append(\"rect\").attr(\"width\", d => Math.max(0, d.x1 - d.x0 - 12)).attr(\"height\", SECTION_HEADER_HEIGHT);\n  sections.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", d => d.y1 - d.y0).attr(\"class\", (_d, i) => {\n    return \"treemapSection section\".concat(i);\n  }).attr(\"fill\", d => colorScale(d.data.name)).attr(\"fill-opacity\", 0.6).attr(\"stroke\", d => colorScalePeer(d.data.name)).attr(\"stroke-width\", 2).attr(\"stroke-opacity\", 0.4).attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return styles.nodeStyles + \";\" + styles.borderStyles.join(\";\");\n  });\n  sections.append(\"text\").attr(\"class\", \"treemapSectionLabel\").attr(\"x\", 6).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"dominant-baseline\", \"middle\").text(d => d.depth === 0 ? \"\" : d.data.name).attr(\"font-weight\", \"bold\").attr(\"style\", d => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const labelStyles = \"dominant-baseline: middle; font-size: 12px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).each(function (d) {\n    if (d.depth === 0) {\n      return;\n    }\n    const self = select(this);\n    const originalText = d.data.name;\n    self.text(originalText);\n    const totalHeaderWidth = d.x1 - d.x0;\n    const labelXPosition = 6;\n    let spaceForTextContent;\n    if (config.showValues !== false && d.value) {\n      const valueEndsAtXRelative = totalHeaderWidth - 10;\n      const estimatedValueTextActualWidth = 30;\n      const gapBetweenLabelAndValue = 10;\n      const labelMustEndBeforeX = valueEndsAtXRelative - estimatedValueTextActualWidth - gapBetweenLabelAndValue;\n      spaceForTextContent = labelMustEndBeforeX - labelXPosition;\n    } else {\n      const labelOwnRightPadding = 6;\n      spaceForTextContent = totalHeaderWidth - labelXPosition - labelOwnRightPadding;\n    }\n    const minimumWidthToDisplay = 15;\n    const actualAvailableWidth = Math.max(minimumWidthToDisplay, spaceForTextContent);\n    const textNode = self.node();\n    const currentTextContentLength = textNode.getComputedTextLength();\n    if (currentTextContentLength > actualAvailableWidth) {\n      const ellipsis = \"...\";\n      let currentTruncatedText = originalText;\n      while (currentTruncatedText.length > 0) {\n        currentTruncatedText = originalText.substring(0, currentTruncatedText.length - 1);\n        if (currentTruncatedText.length === 0) {\n          self.text(ellipsis);\n          if (textNode.getComputedTextLength() > actualAvailableWidth) {\n            self.text(\"\");\n          }\n          break;\n        }\n        self.text(currentTruncatedText + ellipsis);\n        if (textNode.getComputedTextLength() <= actualAvailableWidth) {\n          break;\n        }\n      }\n    }\n  });\n  if (config.showValues !== false) {\n    sections.append(\"text\").attr(\"class\", \"treemapSectionValue\").attr(\"x\", d => d.x1 - d.x0 - 10).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"text-anchor\", \"end\").attr(\"dominant-baseline\", \"middle\").text(d => d.value ? valueFormat(d.value) : \"\").attr(\"font-style\", \"italic\").attr(\"style\", d => {\n      if (d.depth === 0) {\n        return \"display: none;\";\n      }\n      const labelStyles = \"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n      const styles = styles2String({\n        cssCompiledStyles: d.data.cssCompiledStyles\n      });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    });\n  }\n  const leafNodes = treemapData.leaves();\n  const cell = g.selectAll(\".treemapLeafGroup\").data(leafNodes).enter().append(\"g\").attr(\"class\", (d, i) => {\n    return \"treemapNode treemapLeafGroup leaf\".concat(i).concat(d.data.classSelector ? \" \".concat(d.data.classSelector) : \"\", \"x\");\n  }).attr(\"transform\", d => \"translate(\".concat(d.x0, \",\").concat(d.y0, \")\"));\n  cell.append(\"rect\").attr(\"width\", d => d.x1 - d.x0).attr(\"height\", d => d.y1 - d.y0).attr(\"class\", \"treemapLeaf\").attr(\"fill\", d => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"style\", d => {\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return styles.nodeStyles;\n  }).attr(\"fill-opacity\", 0.3).attr(\"stroke\", d => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"stroke-width\", 3);\n  cell.append(\"clipPath\").attr(\"id\", (_d, i) => \"clip-\".concat(id, \"-\").concat(i)).append(\"rect\").attr(\"width\", d => Math.max(0, d.x1 - d.x0 - 4)).attr(\"height\", d => Math.max(0, d.y1 - d.y0 - 4));\n  const leafLabels = cell.append(\"text\").attr(\"class\", \"treemapLabel\").attr(\"x\", d => (d.x1 - d.x0) / 2).attr(\"y\", d => (d.y1 - d.y0) / 2).attr(\"style\", d => {\n    const labelStyles = \"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n    const styles = styles2String({\n      cssCompiledStyles: d.data.cssCompiledStyles\n    });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).attr(\"clip-path\", (_d, i) => \"url(#clip-\".concat(id, \"-\").concat(i, \")\")).text(d => d.data.name);\n  leafLabels.each(function (d) {\n    const self = select(this);\n    const nodeWidth = d.x1 - d.x0;\n    const nodeHeight = d.y1 - d.y0;\n    const textNode = self.node();\n    const padding = 4;\n    const availableWidth = nodeWidth - 2 * padding;\n    const availableHeight = nodeHeight - 2 * padding;\n    if (availableWidth < 10 || availableHeight < 10) {\n      self.style(\"display\", \"none\");\n      return;\n    }\n    let currentLabelFontSize = parseInt(self.style(\"font-size\"), 10);\n    const minLabelFontSize = 8;\n    const originalValueRelFontSize = 28;\n    const valueScaleFactor = 0.6;\n    const minValueFontSize = 6;\n    const spacingBetweenLabelAndValue = 2;\n    while (textNode.getComputedTextLength() > availableWidth && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      self.style(\"font-size\", \"\".concat(currentLabelFontSize, \"px\"));\n    }\n    let prospectiveValueFontSize = Math.max(minValueFontSize, Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor)));\n    let combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n    while (combinedHeight > availableHeight && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      prospectiveValueFontSize = Math.max(minValueFontSize, Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor)));\n      if (prospectiveValueFontSize < minValueFontSize && currentLabelFontSize === minLabelFontSize) {\n        break;\n      }\n      self.style(\"font-size\", \"\".concat(currentLabelFontSize, \"px\"));\n      combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n      if (prospectiveValueFontSize <= minValueFontSize && combinedHeight > availableHeight) {}\n    }\n    self.style(\"font-size\", \"\".concat(currentLabelFontSize, \"px\"));\n    if (textNode.getComputedTextLength() > availableWidth || currentLabelFontSize < minLabelFontSize || availableHeight < currentLabelFontSize) {\n      self.style(\"display\", \"none\");\n    }\n  });\n  if (config.showValues !== false) {\n    const leafValues = cell.append(\"text\").attr(\"class\", \"treemapValue\").attr(\"x\", d => (d.x1 - d.x0) / 2).attr(\"y\", function (d) {\n      return (d.y1 - d.y0) / 2;\n    }).attr(\"style\", d => {\n      const labelStyles = \"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n      const styles = styles2String({\n        cssCompiledStyles: d.data.cssCompiledStyles\n      });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    }).attr(\"clip-path\", (_d, i) => \"url(#clip-\".concat(id, \"-\").concat(i, \")\")).text(d => d.value ? valueFormat(d.value) : \"\");\n    leafValues.each(function (d) {\n      const valueTextElement = select(this);\n      const parentCellNode = this.parentNode;\n      if (!parentCellNode) {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const labelElement = select(parentCellNode).select(\".treemapLabel\");\n      if (labelElement.empty() || labelElement.style(\"display\") === \"none\") {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const finalLabelFontSize = parseFloat(labelElement.style(\"font-size\"));\n      const originalValueFontSize = 28;\n      const valueScaleFactor = 0.6;\n      const minValueFontSize = 6;\n      const spacingBetweenLabelAndValue = 2;\n      const actualValueFontSize = Math.max(minValueFontSize, Math.min(originalValueFontSize, Math.round(finalLabelFontSize * valueScaleFactor)));\n      valueTextElement.style(\"font-size\", \"\".concat(actualValueFontSize, \"px\"));\n      const labelCenterY = (d.y1 - d.y0) / 2;\n      const valueTopActualY = labelCenterY + finalLabelFontSize / 2 + spacingBetweenLabelAndValue;\n      valueTextElement.attr(\"y\", valueTopActualY);\n      const nodeWidth = d.x1 - d.x0;\n      const nodeTotalHeight = d.y1 - d.y0;\n      const cellBottomPadding = 4;\n      const maxValueBottomY = nodeTotalHeight - cellBottomPadding;\n      const availableWidthForValue = nodeWidth - 2 * 4;\n      if (valueTextElement.node().getComputedTextLength() > availableWidthForValue || valueTopActualY + actualValueFontSize > maxValueBottomY || actualValueFontSize < minValueFontSize) {\n        valueTextElement.style(\"display\", \"none\");\n      } else {\n        valueTextElement.style(\"display\", null);\n      }\n    });\n  }\n  const diagramPadding = (_config$diagramPaddin = config.diagramPadding) !== null && _config$diagramPaddin !== void 0 ? _config$diagramPaddin : 8;\n  setupViewPortForSVG(svg, diagramPadding, \"flowchart\", (config === null || config === void 0 ? void 0 : config.useMaxWidth) || false);\n}, \"draw\");\nvar getClasses = /* @__PURE__ */__name(function (_text, diagramObj) {\n  return diagramObj.db.getClasses();\n}, \"getClasses\");\nvar renderer = {\n  draw,\n  getClasses\n};\n\n// src/diagrams/treemap/styles.ts\nvar defaultTreemapStyleOptions = {\n  sectionStrokeColor: \"black\",\n  sectionStrokeWidth: \"1\",\n  sectionFillColor: \"#efefef\",\n  leafStrokeColor: \"black\",\n  leafStrokeWidth: \"1\",\n  leafFillColor: \"#efefef\",\n  labelColor: \"black\",\n  labelFontSize: \"12px\",\n  valueFontSize: \"10px\",\n  valueColor: \"black\",\n  titleColor: \"black\",\n  titleFontSize: \"14px\"\n};\nvar getStyles = /* @__PURE__ */__name(function () {\n  let {\n    treemap: treemap2\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const options = cleanAndMerge(defaultTreemapStyleOptions, treemap2);\n  return \"\\n  .treemapNode.section {\\n    stroke: \".concat(options.sectionStrokeColor, \";\\n    stroke-width: \").concat(options.sectionStrokeWidth, \";\\n    fill: \").concat(options.sectionFillColor, \";\\n  }\\n  .treemapNode.leaf {\\n    stroke: \").concat(options.leafStrokeColor, \";\\n    stroke-width: \").concat(options.leafStrokeWidth, \";\\n    fill: \").concat(options.leafFillColor, \";\\n  }\\n  .treemapLabel {\\n    fill: \").concat(options.labelColor, \";\\n    font-size: \").concat(options.labelFontSize, \";\\n  }\\n  .treemapValue {\\n    fill: \").concat(options.valueColor, \";\\n    font-size: \").concat(options.valueFontSize, \";\\n  }\\n  .treemapTitle {\\n    fill: \").concat(options.titleColor, \";\\n    font-size: \").concat(options.titleFontSize, \";\\n  }\\n  \");\n}, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/treemap/diagram.ts\nvar diagram = {\n  parser,\n  get db() {\n    return new TreeMapDB();\n  },\n  renderer,\n  styles: styles_default\n};\nexport { diagram };","map":{"version":3,"names":["selectSvgElement","setupViewPortForSVG","isLabelStyle","styles2String","populateCommonDb","cleanAndMerge","clear","configureSvgSize","defaultConfig_default","getAccDescription","getAccTitle","getConfig","getDiagramTitle","setAccDescription","setAccTitle","setDiagramTitle","__name","log","TreeMapDB","_Class","constructor","nodes","levels","Map","outerNodes","classes","getNodes","_userConfig$treemap","defaultConfig","userConfig","_objectSpread","treemap","addNode","node","level","push","set","_this$root","root","getRoot","name","children","addClass","id","_style","_this$classes$get","styleClass","get","styles","textStyles","replace","split","forEach","s","getClasses","getStylesForClass","classSelector","_this$classes$get$sty","_this$classes$get2","parse","buildHierarchy","items","length","stack","item","type","cssCompiledStyles","value","pop","parent","populate","ast","db","row","_ast$TreemapRows","TreemapRows","$type","_row$className","_row$styleText","className","styleText","_ast$TreemapRows2","indent","parseInt","getItemName","join","itemData","hierarchyNodes","addNodesRecursively","String","parser","yy","text","_parser$parser","parseFunc","debug","Error","error","scaleOrdinal","hierarchy","format","select","DEFAULT_INNER_PADDING","SECTION_INNER_PADDING","SECTION_HEADER_HEIGHT","draw","_text","_version","diagram2","_config$padding","_config$diagramPaddin","treemapDb","config","treemapInnerPadding","padding","title","themeVariables","titleHeight","svg","width","nodeWidth","height","nodeHeight","svgWidth","svgHeight","attr","concat","useMaxWidth","valueFormat","formatStr","startsWith","includes","precision","exec","precisionStr","restOfFormat","substring","colorScale","range","cScale0","cScale1","cScale2","cScale3","cScale4","cScale5","cScale6","cScale7","cScale8","cScale9","cScale10","cScale11","colorScalePeer","cScalePeer0","cScalePeer1","cScalePeer2","cScalePeer3","cScalePeer4","cScalePeer5","cScalePeer6","cScalePeer7","cScalePeer8","cScalePeer9","cScalePeer10","cScalePeer11","colorScaleLabel","cScaleLabel0","cScaleLabel1","cScaleLabel2","cScaleLabel3","cScaleLabel4","cScaleLabel5","cScaleLabel6","cScaleLabel7","cScaleLabel8","cScaleLabel9","cScaleLabel10","cScaleLabel11","append","g","hierarchyRoot","sum","d","_d$value","sort","a","b","_b$value","_a$value","treemapLayout","size","paddingTop","paddingInner","paddingLeft","paddingRight","paddingBottom","round","treemapData","branchNodes","descendants","filter","sections","selectAll","data","enter","x0","y0","x1","depth","_d","i","Math","max","y1","nodeStyles","borderStyles","labelStyles","each","self","originalText","totalHeaderWidth","labelXPosition","spaceForTextContent","showValues","valueEndsAtXRelative","estimatedValueTextActualWidth","gapBetweenLabelAndValue","labelMustEndBeforeX","labelOwnRightPadding","minimumWidthToDisplay","actualAvailableWidth","textNode","currentTextContentLength","getComputedTextLength","ellipsis","currentTruncatedText","leafNodes","leaves","cell","leafLabels","availableWidth","availableHeight","style","currentLabelFontSize","minLabelFontSize","originalValueRelFontSize","valueScaleFactor","minValueFontSize","spacingBetweenLabelAndValue","prospectiveValueFontSize","min","combinedHeight","leafValues","valueTextElement","parentCellNode","parentNode","labelElement","empty","finalLabelFontSize","parseFloat","originalValueFontSize","actualValueFontSize","labelCenterY","valueTopActualY","nodeTotalHeight","cellBottomPadding","maxValueBottomY","availableWidthForValue","diagramPadding","diagramObj","renderer","defaultTreemapStyleOptions","sectionStrokeColor","sectionStrokeWidth","sectionFillColor","leafStrokeColor","leafStrokeWidth","leafFillColor","labelColor","labelFontSize","valueFontSize","valueColor","titleColor","titleFontSize","getStyles","treemap2","arguments","undefined","options","styles_default","diagram"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/mermaid/dist/chunks/mermaid.core/diagram-PSM6KHXK.mjs"],"sourcesContent":["import {\n  selectSvgElement\n} from \"./chunk-EXTU4WIE.mjs\";\nimport {\n  setupViewPortForSVG\n} from \"./chunk-QN33PNHL.mjs\";\nimport {\n  isLabelStyle,\n  styles2String\n} from \"./chunk-ATLVNIR6.mjs\";\nimport {\n  populateCommonDb\n} from \"./chunk-4BX2VUAB.mjs\";\nimport {\n  cleanAndMerge\n} from \"./chunk-S3R3BYOJ.mjs\";\nimport {\n  clear,\n  configureSvgSize,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig,\n  getDiagramTitle,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle\n} from \"./chunk-ABZYJK2D.mjs\";\nimport {\n  __name,\n  log\n} from \"./chunk-AGHRB4JF.mjs\";\n\n// src/diagrams/treemap/db.ts\nvar TreeMapDB = class {\n  constructor() {\n    this.nodes = [];\n    this.levels = /* @__PURE__ */ new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */ new Map();\n    this.setAccTitle = setAccTitle;\n    this.getAccTitle = getAccTitle;\n    this.setDiagramTitle = setDiagramTitle;\n    this.getDiagramTitle = getDiagramTitle;\n    this.getAccDescription = getAccDescription;\n    this.setAccDescription = setAccDescription;\n  }\n  static {\n    __name(this, \"TreeMapDB\");\n  }\n  getNodes() {\n    return this.nodes;\n  }\n  getConfig() {\n    const defaultConfig = defaultConfig_default;\n    const userConfig = getConfig();\n    return cleanAndMerge({\n      ...defaultConfig.treemap,\n      ...userConfig.treemap ?? {}\n    });\n  }\n  addNode(node, level) {\n    this.nodes.push(node);\n    this.levels.set(node, level);\n    if (level === 0) {\n      this.outerNodes.push(node);\n      this.root ??= node;\n    }\n  }\n  getRoot() {\n    return { name: \"\", children: this.outerNodes };\n  }\n  addClass(id, _style) {\n    const styleClass = this.classes.get(id) ?? { id, styles: [], textStyles: [] };\n    const styles = _style.replace(/\\\\,/g, \"\\xA7\\xA7\\xA7\").replace(/,/g, \";\").replace(/§§§/g, \",\").split(\";\");\n    if (styles) {\n      styles.forEach((s) => {\n        if (isLabelStyle(s)) {\n          if (styleClass?.textStyles) {\n            styleClass.textStyles.push(s);\n          } else {\n            styleClass.textStyles = [s];\n          }\n        }\n        if (styleClass?.styles) {\n          styleClass.styles.push(s);\n        } else {\n          styleClass.styles = [s];\n        }\n      });\n    }\n    this.classes.set(id, styleClass);\n  }\n  getClasses() {\n    return this.classes;\n  }\n  getStylesForClass(classSelector) {\n    return this.classes.get(classSelector)?.styles ?? [];\n  }\n  clear() {\n    clear();\n    this.nodes = [];\n    this.levels = /* @__PURE__ */ new Map();\n    this.outerNodes = [];\n    this.classes = /* @__PURE__ */ new Map();\n    this.root = void 0;\n  }\n};\n\n// src/diagrams/treemap/parser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/treemap/utils.ts\nfunction buildHierarchy(items) {\n  if (!items.length) {\n    return [];\n  }\n  const root = [];\n  const stack = [];\n  items.forEach((item) => {\n    const node = {\n      name: item.name,\n      children: item.type === \"Leaf\" ? void 0 : []\n    };\n    node.classSelector = item?.classSelector;\n    if (item?.cssCompiledStyles) {\n      node.cssCompiledStyles = [item.cssCompiledStyles];\n    }\n    if (item.type === \"Leaf\" && item.value !== void 0) {\n      node.value = item.value;\n    }\n    while (stack.length > 0 && stack[stack.length - 1].level >= item.level) {\n      stack.pop();\n    }\n    if (stack.length === 0) {\n      root.push(node);\n    } else {\n      const parent = stack[stack.length - 1].node;\n      if (parent.children) {\n        parent.children.push(node);\n      } else {\n        parent.children = [node];\n      }\n    }\n    if (item.type !== \"Leaf\") {\n      stack.push({ node, level: item.level });\n    }\n  });\n  return root;\n}\n__name(buildHierarchy, \"buildHierarchy\");\n\n// src/diagrams/treemap/parser.ts\nvar populate = /* @__PURE__ */ __name((ast, db) => {\n  populateCommonDb(ast, db);\n  const items = [];\n  for (const row of ast.TreemapRows ?? []) {\n    if (row.$type === \"ClassDefStatement\") {\n      db.addClass(row.className ?? \"\", row.styleText ?? \"\");\n    }\n  }\n  for (const row of ast.TreemapRows ?? []) {\n    const item = row.item;\n    if (!item) {\n      continue;\n    }\n    const level = row.indent ? parseInt(row.indent) : 0;\n    const name = getItemName(item);\n    const styles = item.classSelector ? db.getStylesForClass(item.classSelector) : [];\n    const cssCompiledStyles = styles.length > 0 ? styles.join(\";\") : void 0;\n    const itemData = {\n      level,\n      name,\n      type: item.$type,\n      value: item.value,\n      classSelector: item.classSelector,\n      cssCompiledStyles\n    };\n    items.push(itemData);\n  }\n  const hierarchyNodes = buildHierarchy(items);\n  const addNodesRecursively = /* @__PURE__ */ __name((nodes, level) => {\n    for (const node of nodes) {\n      db.addNode(node, level);\n      if (node.children && node.children.length > 0) {\n        addNodesRecursively(node.children, level + 1);\n      }\n    }\n  }, \"addNodesRecursively\");\n  addNodesRecursively(hierarchyNodes, 0);\n}, \"populate\");\nvar getItemName = /* @__PURE__ */ __name((item) => {\n  return item.name ? String(item.name) : \"\";\n}, \"getItemName\");\nvar parser = {\n  // @ts-expect-error - TreeMapDB is not assignable to DiagramDB\n  parser: { yy: void 0 },\n  parse: /* @__PURE__ */ __name(async (text) => {\n    try {\n      const parseFunc = parse;\n      const ast = await parseFunc(\"treemap\", text);\n      log.debug(\"Treemap AST:\", ast);\n      const db = parser.parser?.yy;\n      if (!(db instanceof TreeMapDB)) {\n        throw new Error(\n          \"parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.\"\n        );\n      }\n      populate(ast, db);\n    } catch (error) {\n      log.error(\"Error parsing treemap:\", error);\n      throw error;\n    }\n  }, \"parse\")\n};\n\n// src/diagrams/treemap/renderer.ts\nimport { scaleOrdinal, treemap, hierarchy, format, select } from \"d3\";\nvar DEFAULT_INNER_PADDING = 10;\nvar SECTION_INNER_PADDING = 10;\nvar SECTION_HEADER_HEIGHT = 25;\nvar draw = /* @__PURE__ */ __name((_text, id, _version, diagram2) => {\n  const treemapDb = diagram2.db;\n  const config = treemapDb.getConfig();\n  const treemapInnerPadding = config.padding ?? DEFAULT_INNER_PADDING;\n  const title = treemapDb.getDiagramTitle();\n  const root = treemapDb.getRoot();\n  const { themeVariables } = getConfig();\n  if (!root) {\n    return;\n  }\n  const titleHeight = title ? 30 : 0;\n  const svg = selectSvgElement(id);\n  const width = config.nodeWidth ? config.nodeWidth * SECTION_INNER_PADDING : 960;\n  const height = config.nodeHeight ? config.nodeHeight * SECTION_INNER_PADDING : 500;\n  const svgWidth = width;\n  const svgHeight = height + titleHeight;\n  svg.attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\n  configureSvgSize(svg, svgHeight, svgWidth, config.useMaxWidth);\n  let valueFormat;\n  try {\n    const formatStr = config.valueFormat || \",\";\n    if (formatStr === \"$0,0\") {\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\")(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\") && formatStr.includes(\",\")) {\n      const precision = /\\.\\d+/.exec(formatStr);\n      const precisionStr = precision ? precision[0] : \"\";\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(\",\" + precisionStr)(value), \"valueFormat\");\n    } else if (formatStr.startsWith(\"$\")) {\n      const restOfFormat = formatStr.substring(1);\n      valueFormat = /* @__PURE__ */ __name((value) => \"$\" + format(restOfFormat || \"\")(value), \"valueFormat\");\n    } else {\n      valueFormat = format(formatStr);\n    }\n  } catch (error) {\n    log.error(\"Error creating format function:\", error);\n    valueFormat = format(\",\");\n  }\n  const colorScale = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScale0,\n    themeVariables.cScale1,\n    themeVariables.cScale2,\n    themeVariables.cScale3,\n    themeVariables.cScale4,\n    themeVariables.cScale5,\n    themeVariables.cScale6,\n    themeVariables.cScale7,\n    themeVariables.cScale8,\n    themeVariables.cScale9,\n    themeVariables.cScale10,\n    themeVariables.cScale11\n  ]);\n  const colorScalePeer = scaleOrdinal().range([\n    \"transparent\",\n    themeVariables.cScalePeer0,\n    themeVariables.cScalePeer1,\n    themeVariables.cScalePeer2,\n    themeVariables.cScalePeer3,\n    themeVariables.cScalePeer4,\n    themeVariables.cScalePeer5,\n    themeVariables.cScalePeer6,\n    themeVariables.cScalePeer7,\n    themeVariables.cScalePeer8,\n    themeVariables.cScalePeer9,\n    themeVariables.cScalePeer10,\n    themeVariables.cScalePeer11\n  ]);\n  const colorScaleLabel = scaleOrdinal().range([\n    themeVariables.cScaleLabel0,\n    themeVariables.cScaleLabel1,\n    themeVariables.cScaleLabel2,\n    themeVariables.cScaleLabel3,\n    themeVariables.cScaleLabel4,\n    themeVariables.cScaleLabel5,\n    themeVariables.cScaleLabel6,\n    themeVariables.cScaleLabel7,\n    themeVariables.cScaleLabel8,\n    themeVariables.cScaleLabel9,\n    themeVariables.cScaleLabel10,\n    themeVariables.cScaleLabel11\n  ]);\n  if (title) {\n    svg.append(\"text\").attr(\"x\", svgWidth / 2).attr(\"y\", titleHeight / 2).attr(\"class\", \"treemapTitle\").attr(\"text-anchor\", \"middle\").attr(\"dominant-baseline\", \"middle\").text(title);\n  }\n  const g = svg.append(\"g\").attr(\"transform\", `translate(0, ${titleHeight})`).attr(\"class\", \"treemapContainer\");\n  const hierarchyRoot = hierarchy(root).sum((d) => d.value ?? 0).sort((a, b) => (b.value ?? 0) - (a.value ?? 0));\n  const treemapLayout = treemap().size([width, height]).paddingTop(\n    (d) => d.children && d.children.length > 0 ? SECTION_HEADER_HEIGHT + SECTION_INNER_PADDING : 0\n  ).paddingInner(treemapInnerPadding).paddingLeft((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingRight((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).paddingBottom((d) => d.children && d.children.length > 0 ? SECTION_INNER_PADDING : 0).round(true);\n  const treemapData = treemapLayout(hierarchyRoot);\n  const branchNodes = treemapData.descendants().filter((d) => d.children && d.children.length > 0);\n  const sections = g.selectAll(\".treemapSection\").data(branchNodes).enter().append(\"g\").attr(\"class\", \"treemapSection\").attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", SECTION_HEADER_HEIGHT).attr(\"class\", \"treemapSectionHeader\").attr(\"fill\", \"none\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 0.6).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    return \"\";\n  });\n  sections.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-section-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 12)).attr(\"height\", SECTION_HEADER_HEIGHT);\n  sections.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", (_d, i) => {\n    return `treemapSection section${i}`;\n  }).attr(\"fill\", (d) => colorScale(d.data.name)).attr(\"fill-opacity\", 0.6).attr(\"stroke\", (d) => colorScalePeer(d.data.name)).attr(\"stroke-width\", 2).attr(\"stroke-opacity\", 0.4).attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles + \";\" + styles.borderStyles.join(\";\");\n  });\n  sections.append(\"text\").attr(\"class\", \"treemapSectionLabel\").attr(\"x\", 6).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"dominant-baseline\", \"middle\").text((d) => d.depth === 0 ? \"\" : d.data.name).attr(\"font-weight\", \"bold\").attr(\"style\", (d) => {\n    if (d.depth === 0) {\n      return \"display: none;\";\n    }\n    const labelStyles = \"dominant-baseline: middle; font-size: 12px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).each(function(d) {\n    if (d.depth === 0) {\n      return;\n    }\n    const self = select(this);\n    const originalText = d.data.name;\n    self.text(originalText);\n    const totalHeaderWidth = d.x1 - d.x0;\n    const labelXPosition = 6;\n    let spaceForTextContent;\n    if (config.showValues !== false && d.value) {\n      const valueEndsAtXRelative = totalHeaderWidth - 10;\n      const estimatedValueTextActualWidth = 30;\n      const gapBetweenLabelAndValue = 10;\n      const labelMustEndBeforeX = valueEndsAtXRelative - estimatedValueTextActualWidth - gapBetweenLabelAndValue;\n      spaceForTextContent = labelMustEndBeforeX - labelXPosition;\n    } else {\n      const labelOwnRightPadding = 6;\n      spaceForTextContent = totalHeaderWidth - labelXPosition - labelOwnRightPadding;\n    }\n    const minimumWidthToDisplay = 15;\n    const actualAvailableWidth = Math.max(minimumWidthToDisplay, spaceForTextContent);\n    const textNode = self.node();\n    const currentTextContentLength = textNode.getComputedTextLength();\n    if (currentTextContentLength > actualAvailableWidth) {\n      const ellipsis = \"...\";\n      let currentTruncatedText = originalText;\n      while (currentTruncatedText.length > 0) {\n        currentTruncatedText = originalText.substring(0, currentTruncatedText.length - 1);\n        if (currentTruncatedText.length === 0) {\n          self.text(ellipsis);\n          if (textNode.getComputedTextLength() > actualAvailableWidth) {\n            self.text(\"\");\n          }\n          break;\n        }\n        self.text(currentTruncatedText + ellipsis);\n        if (textNode.getComputedTextLength() <= actualAvailableWidth) {\n          break;\n        }\n      }\n    }\n  });\n  if (config.showValues !== false) {\n    sections.append(\"text\").attr(\"class\", \"treemapSectionValue\").attr(\"x\", (d) => d.x1 - d.x0 - 10).attr(\"y\", SECTION_HEADER_HEIGHT / 2).attr(\"text-anchor\", \"end\").attr(\"dominant-baseline\", \"middle\").text((d) => d.value ? valueFormat(d.value) : \"\").attr(\"font-style\", \"italic\").attr(\"style\", (d) => {\n      if (d.depth === 0) {\n        return \"display: none;\";\n      }\n      const labelStyles = \"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:\" + colorScaleLabel(d.data.name) + \"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    });\n  }\n  const leafNodes = treemapData.leaves();\n  const cell = g.selectAll(\".treemapLeafGroup\").data(leafNodes).enter().append(\"g\").attr(\"class\", (d, i) => {\n    return `treemapNode treemapLeafGroup leaf${i}${d.data.classSelector ? ` ${d.data.classSelector}` : \"\"}x`;\n  }).attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n  cell.append(\"rect\").attr(\"width\", (d) => d.x1 - d.x0).attr(\"height\", (d) => d.y1 - d.y0).attr(\"class\", \"treemapLeaf\").attr(\"fill\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"style\", (d) => {\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return styles.nodeStyles;\n  }).attr(\"fill-opacity\", 0.3).attr(\"stroke\", (d) => {\n    return d.parent ? colorScale(d.parent.data.name) : colorScale(d.data.name);\n  }).attr(\"stroke-width\", 3);\n  cell.append(\"clipPath\").attr(\"id\", (_d, i) => `clip-${id}-${i}`).append(\"rect\").attr(\"width\", (d) => Math.max(0, d.x1 - d.x0 - 4)).attr(\"height\", (d) => Math.max(0, d.y1 - d.y0 - 4));\n  const leafLabels = cell.append(\"text\").attr(\"class\", \"treemapLabel\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", (d) => (d.y1 - d.y0) / 2).attr(\"style\", (d) => {\n    const labelStyles = \"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n    const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n    return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n  }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.data.name);\n  leafLabels.each(function(d) {\n    const self = select(this);\n    const nodeWidth = d.x1 - d.x0;\n    const nodeHeight = d.y1 - d.y0;\n    const textNode = self.node();\n    const padding = 4;\n    const availableWidth = nodeWidth - 2 * padding;\n    const availableHeight = nodeHeight - 2 * padding;\n    if (availableWidth < 10 || availableHeight < 10) {\n      self.style(\"display\", \"none\");\n      return;\n    }\n    let currentLabelFontSize = parseInt(self.style(\"font-size\"), 10);\n    const minLabelFontSize = 8;\n    const originalValueRelFontSize = 28;\n    const valueScaleFactor = 0.6;\n    const minValueFontSize = 6;\n    const spacingBetweenLabelAndValue = 2;\n    while (textNode.getComputedTextLength() > availableWidth && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n    }\n    let prospectiveValueFontSize = Math.max(\n      minValueFontSize,\n      Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n    );\n    let combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n    while (combinedHeight > availableHeight && currentLabelFontSize > minLabelFontSize) {\n      currentLabelFontSize--;\n      prospectiveValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueRelFontSize, Math.round(currentLabelFontSize * valueScaleFactor))\n      );\n      if (prospectiveValueFontSize < minValueFontSize && currentLabelFontSize === minLabelFontSize) {\n        break;\n      }\n      self.style(\"font-size\", `${currentLabelFontSize}px`);\n      combinedHeight = currentLabelFontSize + spacingBetweenLabelAndValue + prospectiveValueFontSize;\n      if (prospectiveValueFontSize <= minValueFontSize && combinedHeight > availableHeight) {\n      }\n    }\n    self.style(\"font-size\", `${currentLabelFontSize}px`);\n    if (textNode.getComputedTextLength() > availableWidth || currentLabelFontSize < minLabelFontSize || availableHeight < currentLabelFontSize) {\n      self.style(\"display\", \"none\");\n    }\n  });\n  if (config.showValues !== false) {\n    const leafValues = cell.append(\"text\").attr(\"class\", \"treemapValue\").attr(\"x\", (d) => (d.x1 - d.x0) / 2).attr(\"y\", function(d) {\n      return (d.y1 - d.y0) / 2;\n    }).attr(\"style\", (d) => {\n      const labelStyles = \"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:\" + colorScaleLabel(d.data.name) + \";\";\n      const styles = styles2String({ cssCompiledStyles: d.data.cssCompiledStyles });\n      return labelStyles + styles.labelStyles.replace(\"color:\", \"fill:\");\n    }).attr(\"clip-path\", (_d, i) => `url(#clip-${id}-${i})`).text((d) => d.value ? valueFormat(d.value) : \"\");\n    leafValues.each(function(d) {\n      const valueTextElement = select(this);\n      const parentCellNode = this.parentNode;\n      if (!parentCellNode) {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const labelElement = select(parentCellNode).select(\".treemapLabel\");\n      if (labelElement.empty() || labelElement.style(\"display\") === \"none\") {\n        valueTextElement.style(\"display\", \"none\");\n        return;\n      }\n      const finalLabelFontSize = parseFloat(labelElement.style(\"font-size\"));\n      const originalValueFontSize = 28;\n      const valueScaleFactor = 0.6;\n      const minValueFontSize = 6;\n      const spacingBetweenLabelAndValue = 2;\n      const actualValueFontSize = Math.max(\n        minValueFontSize,\n        Math.min(originalValueFontSize, Math.round(finalLabelFontSize * valueScaleFactor))\n      );\n      valueTextElement.style(\"font-size\", `${actualValueFontSize}px`);\n      const labelCenterY = (d.y1 - d.y0) / 2;\n      const valueTopActualY = labelCenterY + finalLabelFontSize / 2 + spacingBetweenLabelAndValue;\n      valueTextElement.attr(\"y\", valueTopActualY);\n      const nodeWidth = d.x1 - d.x0;\n      const nodeTotalHeight = d.y1 - d.y0;\n      const cellBottomPadding = 4;\n      const maxValueBottomY = nodeTotalHeight - cellBottomPadding;\n      const availableWidthForValue = nodeWidth - 2 * 4;\n      if (valueTextElement.node().getComputedTextLength() > availableWidthForValue || valueTopActualY + actualValueFontSize > maxValueBottomY || actualValueFontSize < minValueFontSize) {\n        valueTextElement.style(\"display\", \"none\");\n      } else {\n        valueTextElement.style(\"display\", null);\n      }\n    });\n  }\n  const diagramPadding = config.diagramPadding ?? 8;\n  setupViewPortForSVG(svg, diagramPadding, \"flowchart\", config?.useMaxWidth || false);\n}, \"draw\");\nvar getClasses = /* @__PURE__ */ __name(function(_text, diagramObj) {\n  return diagramObj.db.getClasses();\n}, \"getClasses\");\nvar renderer = { draw, getClasses };\n\n// src/diagrams/treemap/styles.ts\nvar defaultTreemapStyleOptions = {\n  sectionStrokeColor: \"black\",\n  sectionStrokeWidth: \"1\",\n  sectionFillColor: \"#efefef\",\n  leafStrokeColor: \"black\",\n  leafStrokeWidth: \"1\",\n  leafFillColor: \"#efefef\",\n  labelColor: \"black\",\n  labelFontSize: \"12px\",\n  valueFontSize: \"10px\",\n  valueColor: \"black\",\n  titleColor: \"black\",\n  titleFontSize: \"14px\"\n};\nvar getStyles = /* @__PURE__ */ __name(({\n  treemap: treemap2\n} = {}) => {\n  const options = cleanAndMerge(defaultTreemapStyleOptions, treemap2);\n  return `\n  .treemapNode.section {\n    stroke: ${options.sectionStrokeColor};\n    stroke-width: ${options.sectionStrokeWidth};\n    fill: ${options.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${options.leafStrokeColor};\n    stroke-width: ${options.leafStrokeWidth};\n    fill: ${options.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${options.labelColor};\n    font-size: ${options.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${options.valueColor};\n    font-size: ${options.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${options.titleColor};\n    font-size: ${options.titleFontSize};\n  }\n  `;\n}, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/treemap/diagram.ts\nvar diagram = {\n  parser,\n  get db() {\n    return new TreeMapDB();\n  },\n  renderer,\n  styles: styles_default\n};\nexport {\n  diagram\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}