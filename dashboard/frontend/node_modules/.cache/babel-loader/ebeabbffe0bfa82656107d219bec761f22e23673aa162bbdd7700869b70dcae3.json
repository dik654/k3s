{"ast":null,"code":"var _Class;\nimport { assignWithDepth_default, common_default, detectType, directiveRegex, sanitizeDirective } from \"./chunk-ABZYJK2D.mjs\";\nimport { __name, log } from \"./chunk-AGHRB4JF.mjs\";\n\n// src/utils.ts\nimport { sanitizeUrl } from \"@braintree/sanitize-url\";\nimport { curveBasis, curveBasisClosed, curveBasisOpen, curveBumpX, curveBumpY, curveBundle, curveCardinalClosed, curveCardinalOpen, curveCardinal, curveCatmullRomClosed, curveCatmullRomOpen, curveCatmullRom, curveLinear, curveLinearClosed, curveMonotoneX, curveMonotoneY, curveNatural, curveStep, curveStepAfter, curveStepBefore, select } from \"d3\";\nimport memoize from \"lodash-es/memoize.js\";\nimport merge from \"lodash-es/merge.js\";\nvar ZERO_WIDTH_SPACE = \"\\u200B\";\nvar d3CurveTypes = {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBumpX,\n  curveBumpY,\n  curveBundle,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCardinal,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveCatmullRom,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n};\nvar directiveWithoutOpen = /\\s*(?:(\\w+)(?=:):|(\\w+))\\s*(?:(\\w+)|((?:(?!}%{2}).|\\r?\\n)*))?\\s*(?:}%{2})?/gi;\nvar detectInit = /* @__PURE__ */__name(function (text, config) {\n  const inits = detectDirective(text, /(?:init\\b)|(?:initialize\\b)/);\n  let results = {};\n  if (Array.isArray(inits)) {\n    const args = inits.map(init => init.args);\n    sanitizeDirective(args);\n    results = assignWithDepth_default(results, [...args]);\n  } else {\n    results = inits.args;\n  }\n  if (!results) {\n    return;\n  }\n  let type = detectType(text, config);\n  const prop = \"config\";\n  if (results[prop] !== void 0) {\n    if (type === \"flowchart-v2\") {\n      type = \"flowchart\";\n    }\n    results[type] = results[prop];\n    delete results[prop];\n  }\n  return results;\n}, \"detectInit\");\nvar detectDirective = /* @__PURE__ */__name(function (text) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  try {\n    const commentWithoutDirectives = new RegExp(\"[%]{2}(?![{]\".concat(directiveWithoutOpen.source, \")(?=[}][%]{2}).*\\n\"), \"ig\");\n    text = text.trim().replace(commentWithoutDirectives, \"\").replace(/'/gm, '\"');\n    log.debug(\"Detecting diagram directive\".concat(type !== null ? \" type:\" + type : \"\", \" based on the text:\").concat(text));\n    let match;\n    const result = [];\n    while ((match = directiveRegex.exec(text)) !== null) {\n      var _match$, _match$2;\n      if (match.index === directiveRegex.lastIndex) {\n        directiveRegex.lastIndex++;\n      }\n      if (match && !type || type && (_match$ = match[1]) !== null && _match$ !== void 0 && _match$.match(type) || type && (_match$2 = match[2]) !== null && _match$2 !== void 0 && _match$2.match(type)) {\n        const type2 = match[1] ? match[1] : match[2];\n        const args = match[3] ? match[3].trim() : match[4] ? JSON.parse(match[4].trim()) : null;\n        result.push({\n          type: type2,\n          args\n        });\n      }\n    }\n    if (result.length === 0) {\n      return {\n        type: text,\n        args: null\n      };\n    }\n    return result.length === 1 ? result[0] : result;\n  } catch (error) {\n    log.error(\"ERROR: \".concat(error.message, \" - Unable to parse directive type: '\").concat(type, \"' based on the text: '\").concat(text, \"'\"));\n    return {\n      type: void 0,\n      args: null\n    };\n  }\n}, \"detectDirective\");\nvar removeDirectives = /* @__PURE__ */__name(function (text) {\n  return text.replace(directiveRegex, \"\");\n}, \"removeDirectives\");\nvar isSubstringInArray = /* @__PURE__ */__name(function (str, arr) {\n  for (const [i, element] of arr.entries()) {\n    if (element.match(str)) {\n      return i;\n    }\n  }\n  return -1;\n}, \"isSubstringInArray\");\nfunction interpolateToCurve(interpolate, defaultCurve) {\n  var _d3CurveTypes$curveNa;\n  if (!interpolate) {\n    return defaultCurve;\n  }\n  const curveName = \"curve\".concat(interpolate.charAt(0).toUpperCase() + interpolate.slice(1));\n  return (_d3CurveTypes$curveNa = d3CurveTypes[curveName]) !== null && _d3CurveTypes$curveNa !== void 0 ? _d3CurveTypes$curveNa : defaultCurve;\n}\n__name(interpolateToCurve, \"interpolateToCurve\");\nfunction formatUrl(linkStr, config) {\n  const url = linkStr.trim();\n  if (!url) {\n    return void 0;\n  }\n  if (config.securityLevel !== \"loose\") {\n    return sanitizeUrl(url);\n  }\n  return url;\n}\n__name(formatUrl, \"formatUrl\");\nvar runFunc = /* @__PURE__ */__name(function (functionName) {\n  const arrPaths = functionName.split(\".\");\n  const len = arrPaths.length - 1;\n  const fnName = arrPaths[len];\n  let obj = window;\n  for (let i = 0; i < len; i++) {\n    obj = obj[arrPaths[i]];\n    if (!obj) {\n      log.error(\"Function name: \".concat(functionName, \" not found in window\"));\n      return;\n    }\n  }\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n  obj[fnName](...params);\n}, \"runFunc\");\nfunction distance(p1, p2) {\n  if (!p1 || !p2) {\n    return 0;\n  }\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n__name(distance, \"distance\");\nfunction traverseEdge(points) {\n  let prevPoint;\n  let totalDistance = 0;\n  points.forEach(point => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n  const remainingDistance = totalDistance / 2;\n  return calculatePoint(points, remainingDistance);\n}\n__name(traverseEdge, \"traverseEdge\");\nfunction calcLabelPosition(points) {\n  if (points.length === 1) {\n    return points[0];\n  }\n  return traverseEdge(points);\n}\n__name(calcLabelPosition, \"calcLabelPosition\");\nvar roundNumber = /* @__PURE__ */__name(function (num) {\n  let precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  const factor = Math.pow(10, precision);\n  return Math.round(num * factor) / factor;\n}, \"roundNumber\");\nvar calculatePoint = /* @__PURE__ */__name((points, distanceToTraverse) => {\n  let prevPoint = void 0;\n  let remainingDistance = distanceToTraverse;\n  for (const point of points) {\n    if (prevPoint) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance === 0) {\n        return prevPoint;\n      }\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) {\n          return prevPoint;\n        }\n        if (distanceRatio >= 1) {\n          return {\n            x: point.x,\n            y: point.y\n          };\n        }\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          return {\n            x: roundNumber((1 - distanceRatio) * prevPoint.x + distanceRatio * point.x, 5),\n            y: roundNumber((1 - distanceRatio) * prevPoint.y + distanceRatio * point.y, 5)\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  }\n  throw new Error(\"Could not find a suitable point for the given distance\");\n}, \"calculatePoint\");\nvar calcCardinalityPosition = /* @__PURE__ */__name((isRelationTypePresent, points, initialPosition) => {\n  log.info(\"our points \".concat(JSON.stringify(points)));\n  if (points[0] !== initialPosition) {\n    points = points.reverse();\n  }\n  const distanceToCardinalityPoint = 25;\n  const center = calculatePoint(points, distanceToCardinalityPoint);\n  const d = isRelationTypePresent ? 10 : 5;\n  const angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  const cardinalityPosition = {\n    x: 0,\n    y: 0\n  };\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  return cardinalityPosition;\n}, \"calcCardinalityPosition\");\nfunction calcTerminalLabelPosition(terminalMarkerSize, position, _points) {\n  const points = structuredClone(_points);\n  log.info(\"our points\", points);\n  if (position !== \"start_left\" && position !== \"start_right\") {\n    points.reverse();\n  }\n  const distanceToCardinalityPoint = 25 + terminalMarkerSize;\n  const center = calculatePoint(points, distanceToCardinalityPoint);\n  const d = 10 + terminalMarkerSize * 0.5;\n  const angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  const cardinalityPosition = {\n    x: 0,\n    y: 0\n  };\n  if (position === \"start_left\") {\n    cardinalityPosition.x = Math.sin(angle + Math.PI) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle + Math.PI) * d + (points[0].y + center.y) / 2;\n  } else if (position === \"end_right\") {\n    cardinalityPosition.x = Math.sin(angle - Math.PI) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle - Math.PI) * d + (points[0].y + center.y) / 2 - 5;\n  } else if (position === \"end_left\") {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2 - 5;\n  } else {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  }\n  return cardinalityPosition;\n}\n__name(calcTerminalLabelPosition, \"calcTerminalLabelPosition\");\nfunction getStylesFromArray(arr) {\n  let style = \"\";\n  let labelStyle = \"\";\n  for (const element of arr) {\n    if (element !== void 0) {\n      if (element.startsWith(\"color:\") || element.startsWith(\"text-align:\")) {\n        labelStyle = labelStyle + element + \";\";\n      } else {\n        style = style + element + \";\";\n      }\n    }\n  }\n  return {\n    style,\n    labelStyle\n  };\n}\n__name(getStylesFromArray, \"getStylesFromArray\");\nvar cnt = 0;\nvar generateId = /* @__PURE__ */__name(() => {\n  cnt++;\n  return \"id-\" + Math.random().toString(36).substr(2, 12) + \"-\" + cnt;\n}, \"generateId\");\nfunction makeRandomHex(length) {\n  let result = \"\";\n  const characters = \"0123456789abcdef\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n__name(makeRandomHex, \"makeRandomHex\");\nvar random = /* @__PURE__ */__name(options => {\n  return makeRandomHex(options.length);\n}, \"random\");\nvar getTextObj = /* @__PURE__ */__name(function () {\n  return {\n    x: 0,\n    y: 0,\n    fill: void 0,\n    anchor: \"start\",\n    style: \"#666\",\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    valign: void 0,\n    text: \"\"\n  };\n}, \"getTextObj\");\nvar drawSimpleText = /* @__PURE__ */__name(function (elem, textData) {\n  const nText = textData.text.replace(common_default.lineBreakRegex, \" \");\n  const [, _fontSizePx] = parseFontSize(textData.fontSize);\n  const textElem = elem.append(\"text\");\n  textElem.attr(\"x\", textData.x);\n  textElem.attr(\"y\", textData.y);\n  textElem.style(\"text-anchor\", textData.anchor);\n  textElem.style(\"font-family\", textData.fontFamily);\n  textElem.style(\"font-size\", _fontSizePx);\n  textElem.style(\"font-weight\", textData.fontWeight);\n  textElem.attr(\"fill\", textData.fill);\n  if (textData.class !== void 0) {\n    textElem.attr(\"class\", textData.class);\n  }\n  const span = textElem.append(\"tspan\");\n  span.attr(\"x\", textData.x + textData.textMargin * 2);\n  span.attr(\"fill\", textData.fill);\n  span.text(nText);\n  return textElem;\n}, \"drawSimpleText\");\nvar wrapLabel = memoize((label, maxWidth, config) => {\n  if (!label) {\n    return label;\n  }\n  config = Object.assign({\n    fontSize: 12,\n    fontWeight: 400,\n    fontFamily: \"Arial\",\n    joinWith: \"<br/>\"\n  }, config);\n  if (common_default.lineBreakRegex.test(label)) {\n    return label;\n  }\n  const words = label.split(\" \").filter(Boolean);\n  const completedLines = [];\n  let nextLine = \"\";\n  words.forEach((word, index) => {\n    const wordLength = calculateTextWidth(\"\".concat(word, \" \"), config);\n    const nextLineLength = calculateTextWidth(nextLine, config);\n    if (wordLength > maxWidth) {\n      const {\n        hyphenatedStrings,\n        remainingWord\n      } = breakString(word, maxWidth, \"-\", config);\n      completedLines.push(nextLine, ...hyphenatedStrings);\n      nextLine = remainingWord;\n    } else if (nextLineLength + wordLength >= maxWidth) {\n      completedLines.push(nextLine);\n      nextLine = word;\n    } else {\n      nextLine = [nextLine, word].filter(Boolean).join(\" \");\n    }\n    const currentWord = index + 1;\n    const isLastWord = currentWord === words.length;\n    if (isLastWord) {\n      completedLines.push(nextLine);\n    }\n  });\n  return completedLines.filter(line => line !== \"\").join(config.joinWith);\n}, (label, maxWidth, config) => \"\".concat(label).concat(maxWidth).concat(config.fontSize).concat(config.fontWeight).concat(config.fontFamily).concat(config.joinWith));\nvar breakString = memoize(function (word, maxWidth) {\n  let hyphenCharacter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"-\";\n  let config = arguments.length > 3 ? arguments[3] : undefined;\n  config = Object.assign({\n    fontSize: 12,\n    fontWeight: 400,\n    fontFamily: \"Arial\",\n    margin: 0\n  }, config);\n  const characters = [...word];\n  const lines = [];\n  let currentLine = \"\";\n  characters.forEach((character, index) => {\n    const nextLine = \"\".concat(currentLine).concat(character);\n    const lineWidth = calculateTextWidth(nextLine, config);\n    if (lineWidth >= maxWidth) {\n      const currentCharacter = index + 1;\n      const isLastLine = characters.length === currentCharacter;\n      const hyphenatedNextLine = \"\".concat(nextLine).concat(hyphenCharacter);\n      lines.push(isLastLine ? nextLine : hyphenatedNextLine);\n      currentLine = \"\";\n    } else {\n      currentLine = nextLine;\n    }\n  });\n  return {\n    hyphenatedStrings: lines,\n    remainingWord: currentLine\n  };\n}, function (word, maxWidth) {\n  let hyphenCharacter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"-\";\n  let config = arguments.length > 3 ? arguments[3] : undefined;\n  return \"\".concat(word).concat(maxWidth).concat(hyphenCharacter).concat(config.fontSize).concat(config.fontWeight).concat(config.fontFamily);\n});\nfunction calculateTextHeight(text, config) {\n  return calculateTextDimensions(text, config).height;\n}\n__name(calculateTextHeight, \"calculateTextHeight\");\nfunction calculateTextWidth(text, config) {\n  return calculateTextDimensions(text, config).width;\n}\n__name(calculateTextWidth, \"calculateTextWidth\");\nvar calculateTextDimensions = memoize((text, config) => {\n  const {\n    fontSize = 12,\n    fontFamily = \"Arial\",\n    fontWeight = 400\n  } = config;\n  if (!text) {\n    return {\n      width: 0,\n      height: 0\n    };\n  }\n  const [, _fontSizePx] = parseFontSize(fontSize);\n  const fontFamilies = [\"sans-serif\", fontFamily];\n  const lines = text.split(common_default.lineBreakRegex);\n  const dims = [];\n  const body = select(\"body\");\n  if (!body.remove) {\n    return {\n      width: 0,\n      height: 0,\n      lineHeight: 0\n    };\n  }\n  const g = body.append(\"svg\");\n  for (const fontFamily2 of fontFamilies) {\n    let cHeight = 0;\n    const dim = {\n      width: 0,\n      height: 0,\n      lineHeight: 0\n    };\n    for (const line of lines) {\n      const textObj = getTextObj();\n      textObj.text = line || ZERO_WIDTH_SPACE;\n      const textElem = drawSimpleText(g, textObj).style(\"font-size\", _fontSizePx).style(\"font-weight\", fontWeight).style(\"font-family\", fontFamily2);\n      const bBox = (textElem._groups || textElem)[0][0].getBBox();\n      if (bBox.width === 0 && bBox.height === 0) {\n        throw new Error(\"svg element not in render tree\");\n      }\n      dim.width = Math.round(Math.max(dim.width, bBox.width));\n      cHeight = Math.round(bBox.height);\n      dim.height += cHeight;\n      dim.lineHeight = Math.round(Math.max(dim.lineHeight, cHeight));\n    }\n    dims.push(dim);\n  }\n  g.remove();\n  const index = isNaN(dims[1].height) || isNaN(dims[1].width) || isNaN(dims[1].lineHeight) || dims[0].height > dims[1].height && dims[0].width > dims[1].width && dims[0].lineHeight > dims[1].lineHeight ? 0 : 1;\n  return dims[index];\n}, (text, config) => \"\".concat(text).concat(config.fontSize).concat(config.fontWeight).concat(config.fontFamily));\nvar InitIDGenerator = (_Class = class InitIDGenerator {\n  constructor() {\n    let deterministic = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let seed = arguments.length > 1 ? arguments[1] : undefined;\n    this.count = 0;\n    this.count = seed ? seed.length : 0;\n    this.next = deterministic ? () => this.count++ : () => Date.now();\n  }\n}, __name(_Class, \"InitIDGenerator\"), _Class);\nvar decoder;\nvar entityDecode = /* @__PURE__ */__name(function (html) {\n  decoder = decoder || document.createElement(\"div\");\n  html = escape(html).replace(/%26/g, \"&\").replace(/%23/g, \"#\").replace(/%3B/g, \";\");\n  decoder.innerHTML = html;\n  return unescape(decoder.textContent);\n}, \"entityDecode\");\nfunction isDetailedError(error) {\n  return \"str\" in error;\n}\n__name(isDetailedError, \"isDetailedError\");\nvar insertTitle = /* @__PURE__ */__name((parent, cssClass, titleTopMargin, title) => {\n  var _parent$node;\n  if (!title) {\n    return;\n  }\n  const bounds = (_parent$node = parent.node()) === null || _parent$node === void 0 ? void 0 : _parent$node.getBBox();\n  if (!bounds) {\n    return;\n  }\n  parent.append(\"text\").text(title).attr(\"text-anchor\", \"middle\").attr(\"x\", bounds.x + bounds.width / 2).attr(\"y\", -titleTopMargin).attr(\"class\", cssClass);\n}, \"insertTitle\");\nvar parseFontSize = /* @__PURE__ */__name(fontSize => {\n  if (typeof fontSize === \"number\") {\n    return [fontSize, fontSize + \"px\"];\n  }\n  const fontSizeNumber = parseInt(fontSize !== null && fontSize !== void 0 ? fontSize : \"\", 10);\n  if (Number.isNaN(fontSizeNumber)) {\n    return [void 0, void 0];\n  } else if (fontSize === String(fontSizeNumber)) {\n    return [fontSizeNumber, fontSize + \"px\"];\n  } else {\n    return [fontSizeNumber, fontSize];\n  }\n}, \"parseFontSize\");\nfunction cleanAndMerge(defaultData, data) {\n  return merge({}, defaultData, data);\n}\n__name(cleanAndMerge, \"cleanAndMerge\");\nvar utils_default = {\n  assignWithDepth: assignWithDepth_default,\n  wrapLabel,\n  calculateTextHeight,\n  calculateTextWidth,\n  calculateTextDimensions,\n  cleanAndMerge,\n  detectInit,\n  detectDirective,\n  isSubstringInArray,\n  interpolateToCurve,\n  calcLabelPosition,\n  calcCardinalityPosition,\n  calcTerminalLabelPosition,\n  formatUrl,\n  getStylesFromArray,\n  generateId,\n  random,\n  runFunc,\n  entityDecode,\n  insertTitle,\n  isLabelCoordinateInPath,\n  parseFontSize,\n  InitIDGenerator\n};\nvar encodeEntities = /* @__PURE__ */__name(function (text) {\n  let txt = text;\n  txt = txt.replace(/style.*:\\S*#.*;/g, function (s) {\n    return s.substring(0, s.length - 1);\n  });\n  txt = txt.replace(/classDef.*:\\S*#.*;/g, function (s) {\n    return s.substring(0, s.length - 1);\n  });\n  txt = txt.replace(/#\\w+;/g, function (s) {\n    const innerTxt = s.substring(1, s.length - 1);\n    const isInt = /^\\+?\\d+$/.test(innerTxt);\n    if (isInt) {\n      return \"\\uFB02\\xB0\\xB0\" + innerTxt + \"\\xB6\\xDF\";\n    } else {\n      return \"\\uFB02\\xB0\" + innerTxt + \"\\xB6\\xDF\";\n    }\n  });\n  return txt;\n}, \"encodeEntities\");\nvar decodeEntities = /* @__PURE__ */__name(function (text) {\n  return text.replace(/ﬂ°°/g, \"&#\").replace(/ﬂ°/g, \"&\").replace(/¶ß/g, \";\");\n}, \"decodeEntities\");\nvar getEdgeId = /* @__PURE__ */__name((from, to, _ref, id) => {\n  let {\n    counter = 0,\n    prefix,\n    suffix\n  } = _ref;\n  if (id) {\n    return id;\n  }\n  return \"\".concat(prefix ? \"\".concat(prefix, \"_\") : \"\").concat(from, \"_\").concat(to, \"_\").concat(counter).concat(suffix ? \"_\".concat(suffix) : \"\");\n}, \"getEdgeId\");\nfunction handleUndefinedAttr(attrValue) {\n  return attrValue !== null && attrValue !== void 0 ? attrValue : null;\n}\n__name(handleUndefinedAttr, \"handleUndefinedAttr\");\nfunction isLabelCoordinateInPath(point, dAttr) {\n  const roundedX = Math.round(point.x);\n  const roundedY = Math.round(point.y);\n  const sanitizedD = dAttr.replace(/(\\d+\\.\\d+)/g, match => Math.round(parseFloat(match)).toString());\n  return sanitizedD.includes(roundedX.toString()) || sanitizedD.includes(roundedY.toString());\n}\n__name(isLabelCoordinateInPath, \"isLabelCoordinateInPath\");\nexport { ZERO_WIDTH_SPACE, removeDirectives, interpolateToCurve, getStylesFromArray, generateId, random, wrapLabel, calculateTextHeight, calculateTextWidth, isDetailedError, parseFontSize, cleanAndMerge, utils_default, encodeEntities, decodeEntities, getEdgeId, handleUndefinedAttr };","map":{"version":3,"names":["assignWithDepth_default","common_default","detectType","directiveRegex","sanitizeDirective","__name","log","sanitizeUrl","curveBasis","curveBasisClosed","curveBasisOpen","curveBumpX","curveBumpY","curveBundle","curveCardinalClosed","curveCardinalOpen","curveCardinal","curveCatmullRomClosed","curveCatmullRomOpen","curveCatmullRom","curveLinear","curveLinearClosed","curveMonotoneX","curveMonotoneY","curveNatural","curveStep","curveStepAfter","curveStepBefore","select","memoize","merge","ZERO_WIDTH_SPACE","d3CurveTypes","directiveWithoutOpen","detectInit","text","config","inits","detectDirective","results","Array","isArray","args","map","init","type","prop","arguments","length","undefined","commentWithoutDirectives","RegExp","concat","source","trim","replace","debug","match","result","exec","_match$","_match$2","index","lastIndex","type2","JSON","parse","push","error","message","removeDirectives","isSubstringInArray","str","arr","i","element","entries","interpolateToCurve","interpolate","defaultCurve","_d3CurveTypes$curveNa","curveName","charAt","toUpperCase","slice","formatUrl","linkStr","url","securityLevel","runFunc","functionName","arrPaths","split","len","fnName","obj","window","_len","params","_key","distance","p1","p2","Math","sqrt","pow","x","y","traverseEdge","points","prevPoint","totalDistance","forEach","point","remainingDistance","calculatePoint","calcLabelPosition","roundNumber","num","precision","factor","round","distanceToTraverse","vectorDistance","distanceRatio","Error","calcCardinalityPosition","isRelationTypePresent","initialPosition","info","stringify","reverse","distanceToCardinalityPoint","center","d","angle","atan2","cardinalityPosition","sin","cos","calcTerminalLabelPosition","terminalMarkerSize","position","_points","structuredClone","PI","getStylesFromArray","style","labelStyle","startsWith","cnt","generateId","random","toString","substr","makeRandomHex","characters","charactersLength","floor","options","getTextObj","fill","anchor","width","height","textMargin","rx","ry","valign","drawSimpleText","elem","textData","nText","lineBreakRegex","_fontSizePx","parseFontSize","fontSize","textElem","append","attr","fontFamily","fontWeight","class","span","wrapLabel","label","maxWidth","Object","assign","joinWith","test","words","filter","Boolean","completedLines","nextLine","word","wordLength","calculateTextWidth","nextLineLength","hyphenatedStrings","remainingWord","breakString","join","currentWord","isLastWord","line","hyphenCharacter","margin","lines","currentLine","character","lineWidth","currentCharacter","isLastLine","hyphenatedNextLine","calculateTextHeight","calculateTextDimensions","fontFamilies","dims","body","remove","lineHeight","g","fontFamily2","cHeight","dim","textObj","bBox","_groups","getBBox","max","isNaN","InitIDGenerator","_Class","constructor","deterministic","seed","count","next","Date","now","decoder","entityDecode","html","document","createElement","escape","innerHTML","unescape","textContent","isDetailedError","insertTitle","parent","cssClass","titleTopMargin","title","_parent$node","bounds","node","fontSizeNumber","parseInt","Number","String","cleanAndMerge","defaultData","data","utils_default","assignWithDepth","isLabelCoordinateInPath","encodeEntities","txt","s","substring","innerTxt","isInt","decodeEntities","getEdgeId","from","to","_ref","id","counter","prefix","suffix","handleUndefinedAttr","attrValue","dAttr","roundedX","roundedY","sanitizedD","parseFloat","includes"],"sources":["/home/saiadmin/k3s-cluster/dashboard/frontend/node_modules/mermaid/dist/chunks/mermaid.core/chunk-S3R3BYOJ.mjs"],"sourcesContent":["import {\n  assignWithDepth_default,\n  common_default,\n  detectType,\n  directiveRegex,\n  sanitizeDirective\n} from \"./chunk-ABZYJK2D.mjs\";\nimport {\n  __name,\n  log\n} from \"./chunk-AGHRB4JF.mjs\";\n\n// src/utils.ts\nimport { sanitizeUrl } from \"@braintree/sanitize-url\";\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBumpX,\n  curveBumpY,\n  curveBundle,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCardinal,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveCatmullRom,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  select\n} from \"d3\";\nimport memoize from \"lodash-es/memoize.js\";\nimport merge from \"lodash-es/merge.js\";\nvar ZERO_WIDTH_SPACE = \"\\u200B\";\nvar d3CurveTypes = {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBumpX,\n  curveBumpY,\n  curveBundle,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCardinal,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveCatmullRom,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n};\nvar directiveWithoutOpen = /\\s*(?:(\\w+)(?=:):|(\\w+))\\s*(?:(\\w+)|((?:(?!}%{2}).|\\r?\\n)*))?\\s*(?:}%{2})?/gi;\nvar detectInit = /* @__PURE__ */ __name(function(text, config) {\n  const inits = detectDirective(text, /(?:init\\b)|(?:initialize\\b)/);\n  let results = {};\n  if (Array.isArray(inits)) {\n    const args = inits.map((init) => init.args);\n    sanitizeDirective(args);\n    results = assignWithDepth_default(results, [...args]);\n  } else {\n    results = inits.args;\n  }\n  if (!results) {\n    return;\n  }\n  let type = detectType(text, config);\n  const prop = \"config\";\n  if (results[prop] !== void 0) {\n    if (type === \"flowchart-v2\") {\n      type = \"flowchart\";\n    }\n    results[type] = results[prop];\n    delete results[prop];\n  }\n  return results;\n}, \"detectInit\");\nvar detectDirective = /* @__PURE__ */ __name(function(text, type = null) {\n  try {\n    const commentWithoutDirectives = new RegExp(\n      `[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*\n`,\n      \"ig\"\n    );\n    text = text.trim().replace(commentWithoutDirectives, \"\").replace(/'/gm, '\"');\n    log.debug(\n      `Detecting diagram directive${type !== null ? \" type:\" + type : \"\"} based on the text:${text}`\n    );\n    let match;\n    const result = [];\n    while ((match = directiveRegex.exec(text)) !== null) {\n      if (match.index === directiveRegex.lastIndex) {\n        directiveRegex.lastIndex++;\n      }\n      if (match && !type || type && match[1]?.match(type) || type && match[2]?.match(type)) {\n        const type2 = match[1] ? match[1] : match[2];\n        const args = match[3] ? match[3].trim() : match[4] ? JSON.parse(match[4].trim()) : null;\n        result.push({ type: type2, args });\n      }\n    }\n    if (result.length === 0) {\n      return { type: text, args: null };\n    }\n    return result.length === 1 ? result[0] : result;\n  } catch (error) {\n    log.error(\n      `ERROR: ${error.message} - Unable to parse directive type: '${type}' based on the text: '${text}'`\n    );\n    return { type: void 0, args: null };\n  }\n}, \"detectDirective\");\nvar removeDirectives = /* @__PURE__ */ __name(function(text) {\n  return text.replace(directiveRegex, \"\");\n}, \"removeDirectives\");\nvar isSubstringInArray = /* @__PURE__ */ __name(function(str, arr) {\n  for (const [i, element] of arr.entries()) {\n    if (element.match(str)) {\n      return i;\n    }\n  }\n  return -1;\n}, \"isSubstringInArray\");\nfunction interpolateToCurve(interpolate, defaultCurve) {\n  if (!interpolate) {\n    return defaultCurve;\n  }\n  const curveName = `curve${interpolate.charAt(0).toUpperCase() + interpolate.slice(1)}`;\n  return d3CurveTypes[curveName] ?? defaultCurve;\n}\n__name(interpolateToCurve, \"interpolateToCurve\");\nfunction formatUrl(linkStr, config) {\n  const url = linkStr.trim();\n  if (!url) {\n    return void 0;\n  }\n  if (config.securityLevel !== \"loose\") {\n    return sanitizeUrl(url);\n  }\n  return url;\n}\n__name(formatUrl, \"formatUrl\");\nvar runFunc = /* @__PURE__ */ __name((functionName, ...params) => {\n  const arrPaths = functionName.split(\".\");\n  const len = arrPaths.length - 1;\n  const fnName = arrPaths[len];\n  let obj = window;\n  for (let i = 0; i < len; i++) {\n    obj = obj[arrPaths[i]];\n    if (!obj) {\n      log.error(`Function name: ${functionName} not found in window`);\n      return;\n    }\n  }\n  obj[fnName](...params);\n}, \"runFunc\");\nfunction distance(p1, p2) {\n  if (!p1 || !p2) {\n    return 0;\n  }\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n__name(distance, \"distance\");\nfunction traverseEdge(points) {\n  let prevPoint;\n  let totalDistance = 0;\n  points.forEach((point) => {\n    totalDistance += distance(point, prevPoint);\n    prevPoint = point;\n  });\n  const remainingDistance = totalDistance / 2;\n  return calculatePoint(points, remainingDistance);\n}\n__name(traverseEdge, \"traverseEdge\");\nfunction calcLabelPosition(points) {\n  if (points.length === 1) {\n    return points[0];\n  }\n  return traverseEdge(points);\n}\n__name(calcLabelPosition, \"calcLabelPosition\");\nvar roundNumber = /* @__PURE__ */ __name((num, precision = 2) => {\n  const factor = Math.pow(10, precision);\n  return Math.round(num * factor) / factor;\n}, \"roundNumber\");\nvar calculatePoint = /* @__PURE__ */ __name((points, distanceToTraverse) => {\n  let prevPoint = void 0;\n  let remainingDistance = distanceToTraverse;\n  for (const point of points) {\n    if (prevPoint) {\n      const vectorDistance = distance(point, prevPoint);\n      if (vectorDistance === 0) {\n        return prevPoint;\n      }\n      if (vectorDistance < remainingDistance) {\n        remainingDistance -= vectorDistance;\n      } else {\n        const distanceRatio = remainingDistance / vectorDistance;\n        if (distanceRatio <= 0) {\n          return prevPoint;\n        }\n        if (distanceRatio >= 1) {\n          return { x: point.x, y: point.y };\n        }\n        if (distanceRatio > 0 && distanceRatio < 1) {\n          return {\n            x: roundNumber((1 - distanceRatio) * prevPoint.x + distanceRatio * point.x, 5),\n            y: roundNumber((1 - distanceRatio) * prevPoint.y + distanceRatio * point.y, 5)\n          };\n        }\n      }\n    }\n    prevPoint = point;\n  }\n  throw new Error(\"Could not find a suitable point for the given distance\");\n}, \"calculatePoint\");\nvar calcCardinalityPosition = /* @__PURE__ */ __name((isRelationTypePresent, points, initialPosition) => {\n  log.info(`our points ${JSON.stringify(points)}`);\n  if (points[0] !== initialPosition) {\n    points = points.reverse();\n  }\n  const distanceToCardinalityPoint = 25;\n  const center = calculatePoint(points, distanceToCardinalityPoint);\n  const d = isRelationTypePresent ? 10 : 5;\n  const angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  const cardinalityPosition = { x: 0, y: 0 };\n  cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n  cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  return cardinalityPosition;\n}, \"calcCardinalityPosition\");\nfunction calcTerminalLabelPosition(terminalMarkerSize, position, _points) {\n  const points = structuredClone(_points);\n  log.info(\"our points\", points);\n  if (position !== \"start_left\" && position !== \"start_right\") {\n    points.reverse();\n  }\n  const distanceToCardinalityPoint = 25 + terminalMarkerSize;\n  const center = calculatePoint(points, distanceToCardinalityPoint);\n  const d = 10 + terminalMarkerSize * 0.5;\n  const angle = Math.atan2(points[0].y - center.y, points[0].x - center.x);\n  const cardinalityPosition = { x: 0, y: 0 };\n  if (position === \"start_left\") {\n    cardinalityPosition.x = Math.sin(angle + Math.PI) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle + Math.PI) * d + (points[0].y + center.y) / 2;\n  } else if (position === \"end_right\") {\n    cardinalityPosition.x = Math.sin(angle - Math.PI) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle - Math.PI) * d + (points[0].y + center.y) / 2 - 5;\n  } else if (position === \"end_left\") {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2 - 5;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2 - 5;\n  } else {\n    cardinalityPosition.x = Math.sin(angle) * d + (points[0].x + center.x) / 2;\n    cardinalityPosition.y = -Math.cos(angle) * d + (points[0].y + center.y) / 2;\n  }\n  return cardinalityPosition;\n}\n__name(calcTerminalLabelPosition, \"calcTerminalLabelPosition\");\nfunction getStylesFromArray(arr) {\n  let style = \"\";\n  let labelStyle = \"\";\n  for (const element of arr) {\n    if (element !== void 0) {\n      if (element.startsWith(\"color:\") || element.startsWith(\"text-align:\")) {\n        labelStyle = labelStyle + element + \";\";\n      } else {\n        style = style + element + \";\";\n      }\n    }\n  }\n  return { style, labelStyle };\n}\n__name(getStylesFromArray, \"getStylesFromArray\");\nvar cnt = 0;\nvar generateId = /* @__PURE__ */ __name(() => {\n  cnt++;\n  return \"id-\" + Math.random().toString(36).substr(2, 12) + \"-\" + cnt;\n}, \"generateId\");\nfunction makeRandomHex(length) {\n  let result = \"\";\n  const characters = \"0123456789abcdef\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n__name(makeRandomHex, \"makeRandomHex\");\nvar random = /* @__PURE__ */ __name((options) => {\n  return makeRandomHex(options.length);\n}, \"random\");\nvar getTextObj = /* @__PURE__ */ __name(function() {\n  return {\n    x: 0,\n    y: 0,\n    fill: void 0,\n    anchor: \"start\",\n    style: \"#666\",\n    width: 100,\n    height: 100,\n    textMargin: 0,\n    rx: 0,\n    ry: 0,\n    valign: void 0,\n    text: \"\"\n  };\n}, \"getTextObj\");\nvar drawSimpleText = /* @__PURE__ */ __name(function(elem, textData) {\n  const nText = textData.text.replace(common_default.lineBreakRegex, \" \");\n  const [, _fontSizePx] = parseFontSize(textData.fontSize);\n  const textElem = elem.append(\"text\");\n  textElem.attr(\"x\", textData.x);\n  textElem.attr(\"y\", textData.y);\n  textElem.style(\"text-anchor\", textData.anchor);\n  textElem.style(\"font-family\", textData.fontFamily);\n  textElem.style(\"font-size\", _fontSizePx);\n  textElem.style(\"font-weight\", textData.fontWeight);\n  textElem.attr(\"fill\", textData.fill);\n  if (textData.class !== void 0) {\n    textElem.attr(\"class\", textData.class);\n  }\n  const span = textElem.append(\"tspan\");\n  span.attr(\"x\", textData.x + textData.textMargin * 2);\n  span.attr(\"fill\", textData.fill);\n  span.text(nText);\n  return textElem;\n}, \"drawSimpleText\");\nvar wrapLabel = memoize(\n  (label, maxWidth, config) => {\n    if (!label) {\n      return label;\n    }\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: \"Arial\", joinWith: \"<br/>\" },\n      config\n    );\n    if (common_default.lineBreakRegex.test(label)) {\n      return label;\n    }\n    const words = label.split(\" \").filter(Boolean);\n    const completedLines = [];\n    let nextLine = \"\";\n    words.forEach((word, index) => {\n      const wordLength = calculateTextWidth(`${word} `, config);\n      const nextLineLength = calculateTextWidth(nextLine, config);\n      if (wordLength > maxWidth) {\n        const { hyphenatedStrings, remainingWord } = breakString(word, maxWidth, \"-\", config);\n        completedLines.push(nextLine, ...hyphenatedStrings);\n        nextLine = remainingWord;\n      } else if (nextLineLength + wordLength >= maxWidth) {\n        completedLines.push(nextLine);\n        nextLine = word;\n      } else {\n        nextLine = [nextLine, word].filter(Boolean).join(\" \");\n      }\n      const currentWord = index + 1;\n      const isLastWord = currentWord === words.length;\n      if (isLastWord) {\n        completedLines.push(nextLine);\n      }\n    });\n    return completedLines.filter((line) => line !== \"\").join(config.joinWith);\n  },\n  (label, maxWidth, config) => `${label}${maxWidth}${config.fontSize}${config.fontWeight}${config.fontFamily}${config.joinWith}`\n);\nvar breakString = memoize(\n  (word, maxWidth, hyphenCharacter = \"-\", config) => {\n    config = Object.assign(\n      { fontSize: 12, fontWeight: 400, fontFamily: \"Arial\", margin: 0 },\n      config\n    );\n    const characters = [...word];\n    const lines = [];\n    let currentLine = \"\";\n    characters.forEach((character, index) => {\n      const nextLine = `${currentLine}${character}`;\n      const lineWidth = calculateTextWidth(nextLine, config);\n      if (lineWidth >= maxWidth) {\n        const currentCharacter = index + 1;\n        const isLastLine = characters.length === currentCharacter;\n        const hyphenatedNextLine = `${nextLine}${hyphenCharacter}`;\n        lines.push(isLastLine ? nextLine : hyphenatedNextLine);\n        currentLine = \"\";\n      } else {\n        currentLine = nextLine;\n      }\n    });\n    return { hyphenatedStrings: lines, remainingWord: currentLine };\n  },\n  (word, maxWidth, hyphenCharacter = \"-\", config) => `${word}${maxWidth}${hyphenCharacter}${config.fontSize}${config.fontWeight}${config.fontFamily}`\n);\nfunction calculateTextHeight(text, config) {\n  return calculateTextDimensions(text, config).height;\n}\n__name(calculateTextHeight, \"calculateTextHeight\");\nfunction calculateTextWidth(text, config) {\n  return calculateTextDimensions(text, config).width;\n}\n__name(calculateTextWidth, \"calculateTextWidth\");\nvar calculateTextDimensions = memoize(\n  (text, config) => {\n    const { fontSize = 12, fontFamily = \"Arial\", fontWeight = 400 } = config;\n    if (!text) {\n      return { width: 0, height: 0 };\n    }\n    const [, _fontSizePx] = parseFontSize(fontSize);\n    const fontFamilies = [\"sans-serif\", fontFamily];\n    const lines = text.split(common_default.lineBreakRegex);\n    const dims = [];\n    const body = select(\"body\");\n    if (!body.remove) {\n      return { width: 0, height: 0, lineHeight: 0 };\n    }\n    const g = body.append(\"svg\");\n    for (const fontFamily2 of fontFamilies) {\n      let cHeight = 0;\n      const dim = { width: 0, height: 0, lineHeight: 0 };\n      for (const line of lines) {\n        const textObj = getTextObj();\n        textObj.text = line || ZERO_WIDTH_SPACE;\n        const textElem = drawSimpleText(g, textObj).style(\"font-size\", _fontSizePx).style(\"font-weight\", fontWeight).style(\"font-family\", fontFamily2);\n        const bBox = (textElem._groups || textElem)[0][0].getBBox();\n        if (bBox.width === 0 && bBox.height === 0) {\n          throw new Error(\"svg element not in render tree\");\n        }\n        dim.width = Math.round(Math.max(dim.width, bBox.width));\n        cHeight = Math.round(bBox.height);\n        dim.height += cHeight;\n        dim.lineHeight = Math.round(Math.max(dim.lineHeight, cHeight));\n      }\n      dims.push(dim);\n    }\n    g.remove();\n    const index = isNaN(dims[1].height) || isNaN(dims[1].width) || isNaN(dims[1].lineHeight) || dims[0].height > dims[1].height && dims[0].width > dims[1].width && dims[0].lineHeight > dims[1].lineHeight ? 0 : 1;\n    return dims[index];\n  },\n  (text, config) => `${text}${config.fontSize}${config.fontWeight}${config.fontFamily}`\n);\nvar InitIDGenerator = class {\n  constructor(deterministic = false, seed) {\n    this.count = 0;\n    this.count = seed ? seed.length : 0;\n    this.next = deterministic ? () => this.count++ : () => Date.now();\n  }\n  static {\n    __name(this, \"InitIDGenerator\");\n  }\n};\nvar decoder;\nvar entityDecode = /* @__PURE__ */ __name(function(html) {\n  decoder = decoder || document.createElement(\"div\");\n  html = escape(html).replace(/%26/g, \"&\").replace(/%23/g, \"#\").replace(/%3B/g, \";\");\n  decoder.innerHTML = html;\n  return unescape(decoder.textContent);\n}, \"entityDecode\");\nfunction isDetailedError(error) {\n  return \"str\" in error;\n}\n__name(isDetailedError, \"isDetailedError\");\nvar insertTitle = /* @__PURE__ */ __name((parent, cssClass, titleTopMargin, title) => {\n  if (!title) {\n    return;\n  }\n  const bounds = parent.node()?.getBBox();\n  if (!bounds) {\n    return;\n  }\n  parent.append(\"text\").text(title).attr(\"text-anchor\", \"middle\").attr(\"x\", bounds.x + bounds.width / 2).attr(\"y\", -titleTopMargin).attr(\"class\", cssClass);\n}, \"insertTitle\");\nvar parseFontSize = /* @__PURE__ */ __name((fontSize) => {\n  if (typeof fontSize === \"number\") {\n    return [fontSize, fontSize + \"px\"];\n  }\n  const fontSizeNumber = parseInt(fontSize ?? \"\", 10);\n  if (Number.isNaN(fontSizeNumber)) {\n    return [void 0, void 0];\n  } else if (fontSize === String(fontSizeNumber)) {\n    return [fontSizeNumber, fontSize + \"px\"];\n  } else {\n    return [fontSizeNumber, fontSize];\n  }\n}, \"parseFontSize\");\nfunction cleanAndMerge(defaultData, data) {\n  return merge({}, defaultData, data);\n}\n__name(cleanAndMerge, \"cleanAndMerge\");\nvar utils_default = {\n  assignWithDepth: assignWithDepth_default,\n  wrapLabel,\n  calculateTextHeight,\n  calculateTextWidth,\n  calculateTextDimensions,\n  cleanAndMerge,\n  detectInit,\n  detectDirective,\n  isSubstringInArray,\n  interpolateToCurve,\n  calcLabelPosition,\n  calcCardinalityPosition,\n  calcTerminalLabelPosition,\n  formatUrl,\n  getStylesFromArray,\n  generateId,\n  random,\n  runFunc,\n  entityDecode,\n  insertTitle,\n  isLabelCoordinateInPath,\n  parseFontSize,\n  InitIDGenerator\n};\nvar encodeEntities = /* @__PURE__ */ __name(function(text) {\n  let txt = text;\n  txt = txt.replace(/style.*:\\S*#.*;/g, function(s) {\n    return s.substring(0, s.length - 1);\n  });\n  txt = txt.replace(/classDef.*:\\S*#.*;/g, function(s) {\n    return s.substring(0, s.length - 1);\n  });\n  txt = txt.replace(/#\\w+;/g, function(s) {\n    const innerTxt = s.substring(1, s.length - 1);\n    const isInt = /^\\+?\\d+$/.test(innerTxt);\n    if (isInt) {\n      return \"\\uFB02\\xB0\\xB0\" + innerTxt + \"\\xB6\\xDF\";\n    } else {\n      return \"\\uFB02\\xB0\" + innerTxt + \"\\xB6\\xDF\";\n    }\n  });\n  return txt;\n}, \"encodeEntities\");\nvar decodeEntities = /* @__PURE__ */ __name(function(text) {\n  return text.replace(/ﬂ°°/g, \"&#\").replace(/ﬂ°/g, \"&\").replace(/¶ß/g, \";\");\n}, \"decodeEntities\");\nvar getEdgeId = /* @__PURE__ */ __name((from, to, {\n  counter = 0,\n  prefix,\n  suffix\n}, id) => {\n  if (id) {\n    return id;\n  }\n  return `${prefix ? `${prefix}_` : \"\"}${from}_${to}_${counter}${suffix ? `_${suffix}` : \"\"}`;\n}, \"getEdgeId\");\nfunction handleUndefinedAttr(attrValue) {\n  return attrValue ?? null;\n}\n__name(handleUndefinedAttr, \"handleUndefinedAttr\");\nfunction isLabelCoordinateInPath(point, dAttr) {\n  const roundedX = Math.round(point.x);\n  const roundedY = Math.round(point.y);\n  const sanitizedD = dAttr.replace(\n    /(\\d+\\.\\d+)/g,\n    (match) => Math.round(parseFloat(match)).toString()\n  );\n  return sanitizedD.includes(roundedX.toString()) || sanitizedD.includes(roundedY.toString());\n}\n__name(isLabelCoordinateInPath, \"isLabelCoordinateInPath\");\n\nexport {\n  ZERO_WIDTH_SPACE,\n  removeDirectives,\n  interpolateToCurve,\n  getStylesFromArray,\n  generateId,\n  random,\n  wrapLabel,\n  calculateTextHeight,\n  calculateTextWidth,\n  isDetailedError,\n  parseFontSize,\n  cleanAndMerge,\n  utils_default,\n  encodeEntities,\n  decodeEntities,\n  getEdgeId,\n  handleUndefinedAttr\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}